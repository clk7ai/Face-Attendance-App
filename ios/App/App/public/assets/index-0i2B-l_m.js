var Yj=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var xle=Yj((Gle,NL)=>{function Zj(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function Ya(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ny={exports:{}},Ec={};var ZC;function Qj(){if(ZC)return Ec;ZC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Ec.Fragment=t,Ec.jsx=n,Ec.jsxs=n,Ec}var QC;function Jj(){return QC||(QC=1,Ny.exports=Qj()),Ny.exports}var ie=Jj(),Iy={exports:{}},He={};var JC;function ez(){if(JC)return He;JC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),v=Symbol.iterator;function g(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function S(j,K,ce){this.props=j,this.context=K,this.refs=x,this.updater=ce||y}S.prototype.isReactComponent={},S.prototype.setState=function(j,K){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,K,"setState")},S.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function _(){}_.prototype=S.prototype;function C(j,K,ce){this.props=j,this.context=K,this.refs=x,this.updater=ce||y}var A=C.prototype=new _;A.constructor=C,b(A,S.prototype),A.isPureReactComponent=!0;var O=Array.isArray;function R(){}var M={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function I(j,K,ce){var ve=ce.ref;return{$$typeof:e,type:j,key:K,ref:ve!==void 0?ve:null,props:ce}}function P(j,K){return I(j.type,K,j.props)}function L(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function F(j){var K={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ce){return K[ce]})}var Y=/\/+/g;function Z(j,K){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):K.toString(36)}function J(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(R,R):(j.status="pending",j.then(function(K){j.status==="pending"&&(j.status="fulfilled",j.value=K)},function(K){j.status==="pending"&&(j.status="rejected",j.reason=K)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function U(j,K,ce,ve,ye){var be=typeof j;(be==="undefined"||be==="boolean")&&(j=null);var xe=!1;if(j===null)xe=!0;else switch(be){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(j.$$typeof){case e:case t:xe=!0;break;case d:return xe=j._init,U(xe(j._payload),K,ce,ve,ye)}}if(xe)return ye=ye(j),xe=ve===""?"."+Z(j,0):ve,O(ye)?(ce="",xe!=null&&(ce=xe.replace(Y,"$&/")+"/"),U(ye,K,ce,"",function(Ae){return Ae})):ye!=null&&(L(ye)&&(ye=P(ye,ce+(ye.key==null||j&&j.key===ye.key?"":(""+ye.key).replace(Y,"$&/")+"/")+xe)),K.push(ye)),1;xe=0;var Pe=ve===""?".":ve+":";if(O(j))for(var ne=0;ne<j.length;ne++)ve=j[ne],be=Pe+Z(ve,ne),xe+=U(ve,K,ce,be,ye);else if(ne=g(j),typeof ne=="function")for(j=ne.call(j),ne=0;!(ve=j.next()).done;)ve=ve.value,be=Pe+Z(ve,ne++),xe+=U(ve,K,ce,be,ye);else if(be==="object"){if(typeof j.then=="function")return U(J(j),K,ce,ve,ye);throw K=String(j),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return xe}function H(j,K,ce){if(j==null)return j;var ve=[],ye=0;return U(j,ve,"","",function(be){return K.call(ce,be,ye++)}),ve}function G(j){if(j._status===-1){var K=j._result;K=K(),K.then(function(ce){(j._status===0||j._status===-1)&&(j._status=1,j._result=ce)},function(ce){(j._status===0||j._status===-1)&&(j._status=2,j._result=ce)}),j._status===-1&&(j._status=0,j._result=K)}if(j._status===1)return j._result.default;throw j._result}var Q=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},oe={map:H,forEach:function(j,K,ce){H(j,function(){K.apply(this,arguments)},ce)},count:function(j){var K=0;return H(j,function(){K++}),K},toArray:function(j){return H(j,function(K){return K})||[]},only:function(j){if(!L(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return He.Activity=p,He.Children=oe,He.Component=S,He.Fragment=n,He.Profiler=a,He.PureComponent=C,He.StrictMode=r,He.Suspense=c,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,He.__COMPILER_RUNTIME={__proto__:null,c:function(j){return M.H.useMemoCache(j)}},He.cache=function(j){return function(){return j.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(j,K,ce){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ve=b({},j.props),ye=j.key;if(K!=null)for(be in K.key!==void 0&&(ye=""+K.key),K)!k.call(K,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&K.ref===void 0||(ve[be]=K[be]);var be=arguments.length-2;if(be===1)ve.children=ce;else if(1<be){for(var xe=Array(be),Pe=0;Pe<be;Pe++)xe[Pe]=arguments[Pe+2];ve.children=xe}return I(j.type,ye,ve)},He.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:i,_context:j},j},He.createElement=function(j,K,ce){var ve,ye={},be=null;if(K!=null)for(ve in K.key!==void 0&&(be=""+K.key),K)k.call(K,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(ye[ve]=K[ve]);var xe=arguments.length-2;if(xe===1)ye.children=ce;else if(1<xe){for(var Pe=Array(xe),ne=0;ne<xe;ne++)Pe[ne]=arguments[ne+2];ye.children=Pe}if(j&&j.defaultProps)for(ve in xe=j.defaultProps,xe)ye[ve]===void 0&&(ye[ve]=xe[ve]);return I(j,be,ye)},He.createRef=function(){return{current:null}},He.forwardRef=function(j){return{$$typeof:s,render:j}},He.isValidElement=L,He.lazy=function(j){return{$$typeof:d,_payload:{_status:-1,_result:j},_init:G}},He.memo=function(j,K){return{$$typeof:f,type:j,compare:K===void 0?null:K}},He.startTransition=function(j){var K=M.T,ce={};M.T=ce;try{var ve=j(),ye=M.S;ye!==null&&ye(ce,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(R,Q)}catch(be){Q(be)}finally{K!==null&&ce.types!==null&&(K.types=ce.types),M.T=K}},He.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},He.use=function(j){return M.H.use(j)},He.useActionState=function(j,K,ce){return M.H.useActionState(j,K,ce)},He.useCallback=function(j,K){return M.H.useCallback(j,K)},He.useContext=function(j){return M.H.useContext(j)},He.useDebugValue=function(){},He.useDeferredValue=function(j,K){return M.H.useDeferredValue(j,K)},He.useEffect=function(j,K){return M.H.useEffect(j,K)},He.useEffectEvent=function(j){return M.H.useEffectEvent(j)},He.useId=function(){return M.H.useId()},He.useImperativeHandle=function(j,K,ce){return M.H.useImperativeHandle(j,K,ce)},He.useInsertionEffect=function(j,K){return M.H.useInsertionEffect(j,K)},He.useLayoutEffect=function(j,K){return M.H.useLayoutEffect(j,K)},He.useMemo=function(j,K){return M.H.useMemo(j,K)},He.useOptimistic=function(j,K){return M.H.useOptimistic(j,K)},He.useReducer=function(j,K,ce){return M.H.useReducer(j,K,ce)},He.useRef=function(j){return M.H.useRef(j)},He.useState=function(j){return M.H.useState(j)},He.useSyncExternalStore=function(j,K,ce){return M.H.useSyncExternalStore(j,K,ce)},He.useTransition=function(){return M.H.useTransition()},He.version="19.2.3",He}var eA;function yl(){return eA||(eA=1,Iy.exports=ez()),Iy.exports}var T=yl();const Vc=Ya(T),tz=Zj({__proto__:null,default:Vc},[T]);var Py={exports:{}},_c={},By={exports:{}},Ly={};var tA;function nz(){return tA||(tA=1,(function(e){function t(U,H){var G=U.length;U.push(H);e:for(;0<G;){var Q=G-1>>>1,oe=U[Q];if(0<a(oe,H))U[Q]=H,U[G]=oe,G=Q;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],G=U.pop();if(G!==H){U[0]=G;e:for(var Q=0,oe=U.length,j=oe>>>1;Q<j;){var K=2*(Q+1)-1,ce=U[K],ve=K+1,ye=U[ve];if(0>a(ce,G))ve<oe&&0>a(ye,ce)?(U[Q]=ye,U[ve]=G,Q=ve):(U[Q]=ce,U[K]=G,Q=K);else if(ve<oe&&0>a(ye,G))U[Q]=ye,U[ve]=G,Q=ve;else break e}}return H}function a(U,H){var G=U.sortIndex-H.sortIndex;return G!==0?G:U.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],f=[],d=1,p=null,v=3,g=!1,y=!1,b=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(U){for(var H=n(f);H!==null;){if(H.callback===null)r(f);else if(H.startTime<=U)r(f),H.sortIndex=H.expirationTime,t(c,H);else break;H=n(f)}}function O(U){if(b=!1,A(U),!y)if(n(c)!==null)y=!0,R||(R=!0,F());else{var H=n(f);H!==null&&J(O,H.startTime-U)}}var R=!1,M=-1,k=5,I=-1;function P(){return x?!0:!(e.unstable_now()-I<k)}function L(){if(x=!1,R){var U=e.unstable_now();I=U;var H=!0;try{e:{y=!1,b&&(b=!1,_(M),M=-1),g=!0;var G=v;try{t:{for(A(U),p=n(c);p!==null&&!(p.expirationTime>U&&P());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,v=p.priorityLevel;var oe=Q(p.expirationTime<=U);if(U=e.unstable_now(),typeof oe=="function"){p.callback=oe,A(U),H=!0;break t}p===n(c)&&r(c),A(U)}else r(c);p=n(c)}if(p!==null)H=!0;else{var j=n(f);j!==null&&J(O,j.startTime-U),H=!1}}break e}finally{p=null,v=G,g=!1}H=void 0}}finally{H?F():R=!1}}}var F;if(typeof C=="function")F=function(){C(L)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Z=Y.port2;Y.port1.onmessage=L,F=function(){Z.postMessage(null)}}else F=function(){S(L,0)};function J(U,H){M=S(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(U){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var G=v;v=H;try{return U()}finally{v=G}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=v;v=U;try{return H()}finally{v=G}},e.unstable_scheduleCallback=function(U,H,G){var Q=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Q+G:Q):G=Q,U){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=G+oe,U={id:d++,callback:H,priorityLevel:U,startTime:G,expirationTime:oe,sortIndex:-1},G>Q?(U.sortIndex=G,t(f,U),n(c)===null&&U===n(f)&&(b?(_(M),M=-1):b=!0,J(O,G-Q))):(U.sortIndex=oe,t(c,U),y||g||(y=!0,R||(R=!0,F()))),U},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(U){var H=v;return function(){var G=v;v=H;try{return U.apply(this,arguments)}finally{v=G}}}})(Ly)),Ly}var nA;function rz(){return nA||(nA=1,By.exports=nz()),By.exports}var Fy={exports:{}},jn={};var rA;function az(){if(rA)return jn;rA=1;var e=yl();function t(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,jn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return i(c,f,null,d)},jn.flushSync=function(c){var f=o.T,d=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=f,r.p=d,r.d.f()}},jn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},jn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},jn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,g=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:g}):d==="script"&&r.d.X(c,{crossOrigin:p,integrity:v,fetchPriority:g,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=s(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},jn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin);r.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=s(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},jn.requestFormReset=function(c){r.d.r(c)},jn.unstable_batchedUpdates=function(c,f){return c(f)},jn.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},jn.useFormStatus=function(){return o.H.useHostTransitionStatus()},jn.version="19.2.3",jn}var aA;function $M(){if(aA)return Fy.exports;aA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Fy.exports=az(),Fy.exports}var iA;function iz(){if(iA)return _c;iA=1;var e=rz(),t=yl(),n=$M();function r(u){var l="https://react.dev/errors/"+u;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function i(u){var l=u,h=u;if(u.alternate)for(;l.return;)l=l.return;else{u=l;do l=u,(l.flags&4098)!==0&&(h=l.return),u=l.return;while(u)}return l.tag===3?h:null}function o(u){if(u.tag===13){var l=u.memoizedState;if(l===null&&(u=u.alternate,u!==null&&(l=u.memoizedState)),l!==null)return l.dehydrated}return null}function s(u){if(u.tag===31){var l=u.memoizedState;if(l===null&&(u=u.alternate,u!==null&&(l=u.memoizedState)),l!==null)return l.dehydrated}return null}function c(u){if(i(u)!==u)throw Error(r(188))}function f(u){var l=u.alternate;if(!l){if(l=i(u),l===null)throw Error(r(188));return l!==u?null:u}for(var h=u,m=l;;){var w=h.return;if(w===null)break;var E=w.alternate;if(E===null){if(m=w.return,m!==null){h=m;continue}break}if(w.child===E.child){for(E=w.child;E;){if(E===h)return c(w),u;if(E===m)return c(w),l;E=E.sibling}throw Error(r(188))}if(h.return!==m.return)h=w,m=E;else{for(var D=!1,N=w.child;N;){if(N===h){D=!0,h=w,m=E;break}if(N===m){D=!0,m=w,h=E;break}N=N.sibling}if(!D){for(N=E.child;N;){if(N===h){D=!0,h=E,m=w;break}if(N===m){D=!0,m=E,h=w;break}N=N.sibling}if(!D)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?u:l}function d(u){var l=u.tag;if(l===5||l===26||l===27||l===6)return u;for(u=u.child;u!==null;){if(l=d(u),l!==null)return l;u=u.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function F(u){return u===null||typeof u!="object"?null:(u=L&&u[L]||u["@@iterator"],typeof u=="function"?u:null)}var Y=Symbol.for("react.client.reference");function Z(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Y?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case O:return"Suspense";case R:return"SuspenseList";case I:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case y:return"Portal";case C:return u.displayName||"Context";case _:return(u._context.displayName||"Context")+".Consumer";case A:var l=u.render;return u=u.displayName,u||(u=l.displayName||l.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case M:return l=u.displayName||null,l!==null?l:Z(u.type)||"Memo";case k:l=u._payload,u=u._init;try{return Z(u(l))}catch{}}return null}var J=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},Q=[],oe=-1;function j(u){return{current:u}}function K(u){0>oe||(u.current=Q[oe],Q[oe]=null,oe--)}function ce(u,l){oe++,Q[oe]=u.current,u.current=l}var ve=j(null),ye=j(null),be=j(null),xe=j(null);function Pe(u,l){switch(ce(be,l),ce(ye,u),ce(ve,null),l.nodeType){case 9:case 11:u=(u=l.documentElement)&&(u=u.namespaceURI)?xC(u):0;break;default:if(u=l.tagName,l=l.namespaceURI)l=xC(l),u=wC(l,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}K(ve),ce(ve,u)}function ne(){K(ve),K(ye),K(be)}function Ae(u){u.memoizedState!==null&&ce(xe,u);var l=ve.current,h=wC(l,u.type);l!==h&&(ce(ye,u),ce(ve,h))}function Se(u){ye.current===u&&(K(ve),K(ye)),xe.current===u&&(K(xe),bc._currentValue=G)}var he,ze;function Ie(u){if(he===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);he=l&&l[1]||"",ze=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+u+ze}var Ge=!1;function $e(u,l){if(!u||Ge)return"";Ge=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ue){var re=ue}Reflect.construct(u,[],me)}else{try{me.call()}catch(ue){re=ue}u.call(me.prototype)}}else{try{throw Error()}catch(ue){re=ue}(me=u())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ue){if(ue&&re&&typeof ue.stack=="string")return[ue.stack,re.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),D=E[0],N=E[1];if(D&&N){var W=D.split(`
`),te=N.split(`
`);for(w=m=0;m<W.length&&!W[m].includes("DetermineComponentFrameRoot");)m++;for(;w<te.length&&!te[w].includes("DetermineComponentFrameRoot");)w++;if(m===W.length||w===te.length)for(m=W.length-1,w=te.length-1;1<=m&&0<=w&&W[m]!==te[w];)w--;for(;1<=m&&0<=w;m--,w--)if(W[m]!==te[w]){if(m!==1||w!==1)do if(m--,w--,0>w||W[m]!==te[w]){var fe=`
`+W[m].replace(" at new "," at ");return u.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",u.displayName)),fe}while(1<=m&&0<=w);break}}}finally{Ge=!1,Error.prepareStackTrace=h}return(h=u?u.displayName||u.name:"")?Ie(h):""}function qt(u,l){switch(u.tag){case 26:case 27:case 5:return Ie(u.type);case 16:return Ie("Lazy");case 13:return u.child!==l&&l!==null?Ie("Suspense Fallback"):Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 15:return $e(u.type,!1);case 11:return $e(u.type.render,!1);case 1:return $e(u.type,!0);case 31:return Ie("Activity");default:return""}}function Fn(u){try{var l="",h=null;do l+=qt(u,h),h=u,u=u.return;while(u);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var En=Object.prototype.hasOwnProperty,Ta=e.unstable_scheduleCallback,mr=e.unstable_cancelCallback,Ra=e.unstable_shouldYield,la=e.unstable_requestPaint,Vt=e.unstable_now,ca=e.unstable_getCurrentPriorityLevel,Yu=e.unstable_ImmediatePriority,ei=e.unstable_UserBlockingPriority,Kn=e.unstable_NormalPriority,Ml=e.unstable_LowPriority,Zf=e.unstable_IdlePriority,bm=e.log,xm=e.unstable_setDisableYieldValue,ti=null,_n=null;function Fr(u){if(typeof bm=="function"&&xm(u),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(ti,u)}catch{}}var gr=Math.clz32?Math.clz32:BL,IL=Math.log,PL=Math.LN2;function BL(u){return u>>>=0,u===0?32:31-(IL(u)/PL|0)|0}var Qf=256,Jf=262144,ed=4194304;function Yo(u){var l=u&42;if(l!==0)return l;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function td(u,l,h){var m=u.pendingLanes;if(m===0)return 0;var w=0,E=u.suspendedLanes,D=u.pingedLanes;u=u.warmLanes;var N=m&134217727;return N!==0?(m=N&~E,m!==0?w=Yo(m):(D&=N,D!==0?w=Yo(D):h||(h=N&~u,h!==0&&(w=Yo(h))))):(N=m&~E,N!==0?w=Yo(N):D!==0?w=Yo(D):h||(h=m&~u,h!==0&&(w=Yo(h)))),w===0?0:l!==0&&l!==w&&(l&E)===0&&(E=w&-w,h=l&-l,E>=h||E===32&&(h&4194048)!==0)?l:w}function kl(u,l){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&l)===0}function LL(u,l){switch(u){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tS(){var u=ed;return ed<<=1,(ed&62914560)===0&&(ed=4194304),u}function wm(u){for(var l=[],h=0;31>h;h++)l.push(u);return l}function Nl(u,l){u.pendingLanes|=l,l!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function FL(u,l,h,m,w,E){var D=u.pendingLanes;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=h,u.entangledLanes&=h,u.errorRecoveryDisabledLanes&=h,u.shellSuspendCounter=0;var N=u.entanglements,W=u.expirationTimes,te=u.hiddenUpdates;for(h=D&~h;0<h;){var fe=31-gr(h),me=1<<fe;N[fe]=0,W[fe]=-1;var re=te[fe];if(re!==null)for(te[fe]=null,fe=0;fe<re.length;fe++){var ue=re[fe];ue!==null&&(ue.lane&=-536870913)}h&=~me}m!==0&&nS(u,m,0),E!==0&&w===0&&u.tag!==0&&(u.suspendedLanes|=E&~(D&~l))}function nS(u,l,h){u.pendingLanes|=l,u.suspendedLanes&=~l;var m=31-gr(l);u.entangledLanes|=l,u.entanglements[m]=u.entanglements[m]|1073741824|h&261930}function rS(u,l){var h=u.entangledLanes|=l;for(u=u.entanglements;h;){var m=31-gr(h),w=1<<m;w&l|u[m]&l&&(u[m]|=l),h&=~w}}function aS(u,l){var h=l&-l;return h=(h&42)!==0?1:Sm(h),(h&(u.suspendedLanes|l))!==0?0:h}function Sm(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Em(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function iS(){var u=H.p;return u!==0?u:(u=window.event,u===void 0?32:qC(u.type))}function oS(u,l){var h=H.p;try{return H.p=u,l()}finally{H.p=h}}var to=Math.random().toString(36).slice(2),Cn="__reactFiber$"+to,tr="__reactProps$"+to,Zu="__reactContainer$"+to,_m="__reactEvents$"+to,jL="__reactListeners$"+to,zL="__reactHandles$"+to,uS="__reactResources$"+to,Il="__reactMarker$"+to;function Cm(u){delete u[Cn],delete u[tr],delete u[_m],delete u[jL],delete u[zL]}function Qu(u){var l=u[Cn];if(l)return l;for(var h=u.parentNode;h;){if(l=h[Zu]||h[Cn]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(u=TC(u);u!==null;){if(h=u[Cn])return h;u=TC(u)}return l}u=h,h=u.parentNode}return null}function Ju(u){if(u=u[Cn]||u[Zu]){var l=u.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return u}return null}function Pl(u){var l=u.tag;if(l===5||l===26||l===27||l===6)return u.stateNode;throw Error(r(33))}function es(u){var l=u[uS];return l||(l=u[uS]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function dn(u){u[Il]=!0}var sS=new Set,lS={};function Zo(u,l){ts(u,l),ts(u+"Capture",l)}function ts(u,l){for(lS[u]=l,u=0;u<l.length;u++)sS.add(l[u])}var UL=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cS={},fS={};function WL(u){return En.call(fS,u)?!0:En.call(cS,u)?!1:UL.test(u)?fS[u]=!0:(cS[u]=!0,!1)}function nd(u,l,h){if(WL(l))if(h===null)u.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":u.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){u.removeAttribute(l);return}}u.setAttribute(l,""+h)}}function rd(u,l,h){if(h===null)u.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(l);return}u.setAttribute(l,""+h)}}function ni(u,l,h,m){if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttributeNS(l,h,""+m)}}function jr(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function dS(u){var l=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function HL(u,l,h){var m=Object.getOwnPropertyDescriptor(u.constructor.prototype,l);if(!u.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var w=m.get,E=m.set;return Object.defineProperty(u,l,{configurable:!0,get:function(){return w.call(this)},set:function(D){h=""+D,E.call(this,D)}}),Object.defineProperty(u,l,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(D){h=""+D},stopTracking:function(){u._valueTracker=null,delete u[l]}}}}function Am(u){if(!u._valueTracker){var l=dS(u)?"checked":"value";u._valueTracker=HL(u,l,""+u[l])}}function hS(u){if(!u)return!1;var l=u._valueTracker;if(!l)return!0;var h=l.getValue(),m="";return u&&(m=dS(u)?u.checked?"true":"false":u.value),u=m,u!==h?(l.setValue(u),!0):!1}function ad(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var qL=/[\n"\\]/g;function zr(u){return u.replace(qL,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Om(u,l,h,m,w,E,D,N){u.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?u.type=D:u.removeAttribute("type"),l!=null?D==="number"?(l===0&&u.value===""||u.value!=l)&&(u.value=""+jr(l)):u.value!==""+jr(l)&&(u.value=""+jr(l)):D!=="submit"&&D!=="reset"||u.removeAttribute("value"),l!=null?Tm(u,D,jr(l)):h!=null?Tm(u,D,jr(h)):m!=null&&u.removeAttribute("value"),w==null&&E!=null&&(u.defaultChecked=!!E),w!=null&&(u.checked=w&&typeof w!="function"&&typeof w!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?u.name=""+jr(N):u.removeAttribute("name")}function pS(u,l,h,m,w,E,D,N){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(u.type=E),l!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||l!=null)){Am(u);return}h=h!=null?""+jr(h):"",l=l!=null?""+jr(l):h,N||l===u.value||(u.value=l),u.defaultValue=l}m=m??w,m=typeof m!="function"&&typeof m!="symbol"&&!!m,u.checked=N?u.checked:!!m,u.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(u.name=D),Am(u)}function Tm(u,l,h){l==="number"&&ad(u.ownerDocument)===u||u.defaultValue===""+h||(u.defaultValue=""+h)}function ns(u,l,h,m){if(u=u.options,l){l={};for(var w=0;w<h.length;w++)l["$"+h[w]]=!0;for(h=0;h<u.length;h++)w=l.hasOwnProperty("$"+u[h].value),u[h].selected!==w&&(u[h].selected=w),w&&m&&(u[h].defaultSelected=!0)}else{for(h=""+jr(h),l=null,w=0;w<u.length;w++){if(u[w].value===h){u[w].selected=!0,m&&(u[w].defaultSelected=!0);return}l!==null||u[w].disabled||(l=u[w])}l!==null&&(l.selected=!0)}}function vS(u,l,h){if(l!=null&&(l=""+jr(l),l!==u.value&&(u.value=l),h==null)){u.defaultValue!==l&&(u.defaultValue=l);return}u.defaultValue=h!=null?""+jr(h):""}function mS(u,l,h,m){if(l==null){if(m!=null){if(h!=null)throw Error(r(92));if(J(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),l=h}h=jr(l),u.defaultValue=h,m=u.textContent,m===h&&m!==""&&m!==null&&(u.value=m),Am(u)}function rs(u,l){if(l){var h=u.firstChild;if(h&&h===u.lastChild&&h.nodeType===3){h.nodeValue=l;return}}u.textContent=l}var VL=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gS(u,l,h){var m=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?u.setProperty(l,""):l==="float"?u.cssFloat="":u[l]="":m?u.setProperty(l,h):typeof h!="number"||h===0||VL.has(l)?l==="float"?u.cssFloat=h:u[l]=(""+h).trim():u[l]=h+"px"}function yS(u,l,h){if(l!=null&&typeof l!="object")throw Error(r(62));if(u=u.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="");for(var w in l)m=l[w],l.hasOwnProperty(w)&&h[w]!==m&&gS(u,w,m)}else for(var E in l)l.hasOwnProperty(E)&&gS(u,E,l[E])}function Rm(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GL=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$L=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function id(u){return $L.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function ri(){}var Dm=null;function Mm(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var as=null,is=null;function bS(u){var l=Ju(u);if(l&&(u=l.stateNode)){var h=u[tr]||null;e:switch(u=l.stateNode,l.type){case"input":if(Om(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=u;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+zr(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var m=h[l];if(m!==u&&m.form===u.form){var w=m[tr]||null;if(!w)throw Error(r(90));Om(m,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(l=0;l<h.length;l++)m=h[l],m.form===u.form&&hS(m)}break e;case"textarea":vS(u,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&ns(u,!!h.multiple,l,!1)}}}var km=!1;function xS(u,l,h){if(km)return u(l,h);km=!0;try{var m=u(l);return m}finally{if(km=!1,(as!==null||is!==null)&&(Gd(),as&&(l=as,u=is,is=as=null,bS(l),u)))for(l=0;l<u.length;l++)bS(u[l])}}function Bl(u,l){var h=u.stateNode;if(h===null)return null;var m=h[tr]||null;if(m===null)return null;h=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(u=u.type,m=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!m;break e;default:u=!1}if(u)return null;if(h&&typeof h!="function")throw Error(r(231,l,typeof h));return h}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nm=!1;if(ai)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){Nm=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{Nm=!1}var no=null,Im=null,od=null;function wS(){if(od)return od;var u,l=Im,h=l.length,m,w="value"in no?no.value:no.textContent,E=w.length;for(u=0;u<h&&l[u]===w[u];u++);var D=h-u;for(m=1;m<=D&&l[h-m]===w[E-m];m++);return od=w.slice(u,1<m?1-m:void 0)}function ud(u){var l=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&l===13&&(u=13)):u=l,u===10&&(u=13),32<=u||u===13?u:0}function sd(){return!0}function SS(){return!1}function nr(u){function l(h,m,w,E,D){this._reactName=h,this._targetInst=w,this.type=m,this.nativeEvent=E,this.target=D,this.currentTarget=null;for(var N in u)u.hasOwnProperty(N)&&(h=u[N],this[N]=h?h(E):E[N]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?sd:SS,this.isPropagationStopped=SS,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=sd)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=sd)},persist:function(){},isPersistent:sd}),l}var Qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ld=nr(Qo),Fl=p({},Qo,{view:0,detail:0}),KL=nr(Fl),Pm,Bm,jl,cd=p({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fm,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==jl&&(jl&&u.type==="mousemove"?(Pm=u.screenX-jl.screenX,Bm=u.screenY-jl.screenY):Bm=Pm=0,jl=u),Pm)},movementY:function(u){return"movementY"in u?u.movementY:Bm}}),ES=nr(cd),XL=p({},cd,{dataTransfer:0}),YL=nr(XL),ZL=p({},Fl,{relatedTarget:0}),Lm=nr(ZL),QL=p({},Qo,{animationName:0,elapsedTime:0,pseudoElement:0}),JL=nr(QL),eF=p({},Qo,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),tF=nr(eF),nF=p({},Qo,{data:0}),_S=nr(nF),rF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oF(u){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(u):(u=iF[u])?!!l[u]:!1}function Fm(){return oF}var uF=p({},Fl,{key:function(u){if(u.key){var l=rF[u.key]||u.key;if(l!=="Unidentified")return l}return u.type==="keypress"?(u=ud(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?aF[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fm,charCode:function(u){return u.type==="keypress"?ud(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?ud(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),sF=nr(uF),lF=p({},cd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CS=nr(lF),cF=p({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fm}),fF=nr(cF),dF=p({},Qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),hF=nr(dF),pF=p({},cd,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),vF=nr(pF),mF=p({},Qo,{newState:0,oldState:0}),gF=nr(mF),yF=[9,13,27,32],jm=ai&&"CompositionEvent"in window,zl=null;ai&&"documentMode"in document&&(zl=document.documentMode);var bF=ai&&"TextEvent"in window&&!zl,AS=ai&&(!jm||zl&&8<zl&&11>=zl),OS=" ",TS=!1;function RS(u,l){switch(u){case"keyup":return yF.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DS(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var os=!1;function xF(u,l){switch(u){case"compositionend":return DS(l);case"keypress":return l.which!==32?null:(TS=!0,OS);case"textInput":return u=l.data,u===OS&&TS?null:u;default:return null}}function wF(u,l){if(os)return u==="compositionend"||!jm&&RS(u,l)?(u=wS(),od=Im=no=null,os=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return AS&&l.locale!=="ko"?null:l.data;default:return null}}var SF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MS(u){var l=u&&u.nodeName&&u.nodeName.toLowerCase();return l==="input"?!!SF[u.type]:l==="textarea"}function kS(u,l,h,m){as?is?is.push(m):is=[m]:as=m,l=Jd(l,"onChange"),0<l.length&&(h=new ld("onChange","change",null,h,m),u.push({event:h,listeners:l}))}var Ul=null,Wl=null;function EF(u){pC(u,0)}function fd(u){var l=Pl(u);if(hS(l))return u}function NS(u,l){if(u==="change")return l}var IS=!1;if(ai){var zm;if(ai){var Um="oninput"in document;if(!Um){var PS=document.createElement("div");PS.setAttribute("oninput","return;"),Um=typeof PS.oninput=="function"}zm=Um}else zm=!1;IS=zm&&(!document.documentMode||9<document.documentMode)}function BS(){Ul&&(Ul.detachEvent("onpropertychange",LS),Wl=Ul=null)}function LS(u){if(u.propertyName==="value"&&fd(Wl)){var l=[];kS(l,Wl,u,Mm(u)),xS(EF,l)}}function _F(u,l,h){u==="focusin"?(BS(),Ul=l,Wl=h,Ul.attachEvent("onpropertychange",LS)):u==="focusout"&&BS()}function CF(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return fd(Wl)}function AF(u,l){if(u==="click")return fd(l)}function OF(u,l){if(u==="input"||u==="change")return fd(l)}function TF(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var yr=typeof Object.is=="function"?Object.is:TF;function Hl(u,l){if(yr(u,l))return!0;if(typeof u!="object"||u===null||typeof l!="object"||l===null)return!1;var h=Object.keys(u),m=Object.keys(l);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var w=h[m];if(!En.call(l,w)||!yr(u[w],l[w]))return!1}return!0}function FS(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function jS(u,l){var h=FS(u);u=0;for(var m;h;){if(h.nodeType===3){if(m=u+h.textContent.length,u<=l&&m>=l)return{node:h,offset:l-u};u=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=FS(h)}}function zS(u,l){return u&&l?u===l?!0:u&&u.nodeType===3?!1:l&&l.nodeType===3?zS(u,l.parentNode):"contains"in u?u.contains(l):u.compareDocumentPosition?!!(u.compareDocumentPosition(l)&16):!1:!1}function US(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var l=ad(u.document);l instanceof u.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)u=l.contentWindow;else break;l=ad(u.document)}return l}function Wm(u){var l=u&&u.nodeName&&u.nodeName.toLowerCase();return l&&(l==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||l==="textarea"||u.contentEditable==="true")}var RF=ai&&"documentMode"in document&&11>=document.documentMode,us=null,Hm=null,ql=null,qm=!1;function WS(u,l,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;qm||us==null||us!==ad(m)||(m=us,"selectionStart"in m&&Wm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ql&&Hl(ql,m)||(ql=m,m=Jd(Hm,"onSelect"),0<m.length&&(l=new ld("onSelect","select",null,l,h),u.push({event:l,listeners:m}),l.target=us)))}function Jo(u,l){var h={};return h[u.toLowerCase()]=l.toLowerCase(),h["Webkit"+u]="webkit"+l,h["Moz"+u]="moz"+l,h}var ss={animationend:Jo("Animation","AnimationEnd"),animationiteration:Jo("Animation","AnimationIteration"),animationstart:Jo("Animation","AnimationStart"),transitionrun:Jo("Transition","TransitionRun"),transitionstart:Jo("Transition","TransitionStart"),transitioncancel:Jo("Transition","TransitionCancel"),transitionend:Jo("Transition","TransitionEnd")},Vm={},HS={};ai&&(HS=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function eu(u){if(Vm[u])return Vm[u];if(!ss[u])return u;var l=ss[u],h;for(h in l)if(l.hasOwnProperty(h)&&h in HS)return Vm[u]=l[h];return u}var qS=eu("animationend"),VS=eu("animationiteration"),GS=eu("animationstart"),DF=eu("transitionrun"),MF=eu("transitionstart"),kF=eu("transitioncancel"),$S=eu("transitionend"),KS=new Map,Gm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gm.push("scrollEnd");function fa(u,l){KS.set(u,l),Zo(l,[u])}var dd=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Ur=[],ls=0,$m=0;function hd(){for(var u=ls,l=$m=ls=0;l<u;){var h=Ur[l];Ur[l++]=null;var m=Ur[l];Ur[l++]=null;var w=Ur[l];Ur[l++]=null;var E=Ur[l];if(Ur[l++]=null,m!==null&&w!==null){var D=m.pending;D===null?w.next=w:(w.next=D.next,D.next=w),m.pending=w}E!==0&&XS(h,w,E)}}function pd(u,l,h,m){Ur[ls++]=u,Ur[ls++]=l,Ur[ls++]=h,Ur[ls++]=m,$m|=m,u.lanes|=m,u=u.alternate,u!==null&&(u.lanes|=m)}function Km(u,l,h,m){return pd(u,l,h,m),vd(u)}function tu(u,l){return pd(u,null,null,l),vd(u)}function XS(u,l,h){u.lanes|=h;var m=u.alternate;m!==null&&(m.lanes|=h);for(var w=!1,E=u.return;E!==null;)E.childLanes|=h,m=E.alternate,m!==null&&(m.childLanes|=h),E.tag===22&&(u=E.stateNode,u===null||u._visibility&1||(w=!0)),u=E,E=E.return;return u.tag===3?(E=u.stateNode,w&&l!==null&&(w=31-gr(h),u=E.hiddenUpdates,m=u[w],m===null?u[w]=[l]:m.push(l),l.lane=h|536870912),E):null}function vd(u){if(50<dc)throw dc=0,ry=null,Error(r(185));for(var l=u.return;l!==null;)u=l,l=u.return;return u.tag===3?u.stateNode:null}var cs={};function NF(u,l,h,m){this.tag=u,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(u,l,h,m){return new NF(u,l,h,m)}function Xm(u){return u=u.prototype,!(!u||!u.isReactComponent)}function ii(u,l){var h=u.alternate;return h===null?(h=br(u.tag,l,u.key,u.mode),h.elementType=u.elementType,h.type=u.type,h.stateNode=u.stateNode,h.alternate=u,u.alternate=h):(h.pendingProps=l,h.type=u.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=u.flags&65011712,h.childLanes=u.childLanes,h.lanes=u.lanes,h.child=u.child,h.memoizedProps=u.memoizedProps,h.memoizedState=u.memoizedState,h.updateQueue=u.updateQueue,l=u.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=u.sibling,h.index=u.index,h.ref=u.ref,h.refCleanup=u.refCleanup,h}function YS(u,l){u.flags&=65011714;var h=u.alternate;return h===null?(u.childLanes=0,u.lanes=l,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,l=h.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),u}function md(u,l,h,m,w,E){var D=0;if(m=u,typeof u=="function")Xm(u)&&(D=1);else if(typeof u=="string")D=Fj(u,h,ve.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case I:return u=br(31,h,l,w),u.elementType=I,u.lanes=E,u;case b:return nu(h.children,w,E,l);case x:D=8,w|=24;break;case S:return u=br(12,h,l,w|2),u.elementType=S,u.lanes=E,u;case O:return u=br(13,h,l,w),u.elementType=O,u.lanes=E,u;case R:return u=br(19,h,l,w),u.elementType=R,u.lanes=E,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case C:D=10;break e;case _:D=9;break e;case A:D=11;break e;case M:D=14;break e;case k:D=16,m=null;break e}D=29,h=Error(r(130,u===null?"null":typeof u,"")),m=null}return l=br(D,h,l,w),l.elementType=u,l.type=m,l.lanes=E,l}function nu(u,l,h,m){return u=br(7,u,m,l),u.lanes=h,u}function Ym(u,l,h){return u=br(6,u,null,l),u.lanes=h,u}function ZS(u){var l=br(18,null,null,0);return l.stateNode=u,l}function Zm(u,l,h){return l=br(4,u.children!==null?u.children:[],u.key,l),l.lanes=h,l.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},l}var QS=new WeakMap;function Wr(u,l){if(typeof u=="object"&&u!==null){var h=QS.get(u);return h!==void 0?h:(l={value:u,source:l,stack:Fn(l)},QS.set(u,l),l)}return{value:u,source:l,stack:Fn(l)}}var fs=[],ds=0,gd=null,Vl=0,Hr=[],qr=0,ro=null,Da=1,Ma="";function oi(u,l){fs[ds++]=Vl,fs[ds++]=gd,gd=u,Vl=l}function JS(u,l,h){Hr[qr++]=Da,Hr[qr++]=Ma,Hr[qr++]=ro,ro=u;var m=Da;u=Ma;var w=32-gr(m)-1;m&=~(1<<w),h+=1;var E=32-gr(l)+w;if(30<E){var D=w-w%5;E=(m&(1<<D)-1).toString(32),m>>=D,w-=D,Da=1<<32-gr(l)+w|h<<w|m,Ma=E+u}else Da=1<<E|h<<w|m,Ma=u}function Qm(u){u.return!==null&&(oi(u,1),JS(u,1,0))}function Jm(u){for(;u===gd;)gd=fs[--ds],fs[ds]=null,Vl=fs[--ds],fs[ds]=null;for(;u===ro;)ro=Hr[--qr],Hr[qr]=null,Ma=Hr[--qr],Hr[qr]=null,Da=Hr[--qr],Hr[qr]=null}function eE(u,l){Hr[qr++]=Da,Hr[qr++]=Ma,Hr[qr++]=ro,Da=l.id,Ma=l.overflow,ro=u}var An=null,St=null,nt=!1,ao=null,Vr=!1,eg=Error(r(519));function io(u){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(Wr(l,u)),eg}function tE(u){var l=u.stateNode,h=u.type,m=u.memoizedProps;switch(l[Cn]=u,l[tr]=m,h){case"dialog":Qe("cancel",l),Qe("close",l);break;case"iframe":case"object":case"embed":Qe("load",l);break;case"video":case"audio":for(h=0;h<pc.length;h++)Qe(pc[h],l);break;case"source":Qe("error",l);break;case"img":case"image":case"link":Qe("error",l),Qe("load",l);break;case"details":Qe("toggle",l);break;case"input":Qe("invalid",l),pS(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Qe("invalid",l);break;case"textarea":Qe("invalid",l),mS(l,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||m.suppressHydrationWarning===!0||yC(l.textContent,h)?(m.popover!=null&&(Qe("beforetoggle",l),Qe("toggle",l)),m.onScroll!=null&&Qe("scroll",l),m.onScrollEnd!=null&&Qe("scrollend",l),m.onClick!=null&&(l.onclick=ri),l=!0):l=!1,l||io(u,!0)}function nE(u){for(An=u.return;An;)switch(An.tag){case 5:case 31:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:An=An.return}}function hs(u){if(u!==An)return!1;if(!nt)return nE(u),nt=!0,!1;var l=u.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=u.type,h=!(h!=="form"&&h!=="button")||yy(u.type,u.memoizedProps)),h=!h),h&&St&&io(u),nE(u),l===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));St=OC(u)}else if(l===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));St=OC(u)}else l===27?(l=St,xo(u.type)?(u=Ey,Ey=null,St=u):St=l):St=An?$r(u.stateNode.nextSibling):null;return!0}function ru(){St=An=null,nt=!1}function tg(){var u=ao;return u!==null&&(or===null?or=u:or.push.apply(or,u),ao=null),u}function Gl(u){ao===null?ao=[u]:ao.push(u)}var ng=j(null),au=null,ui=null;function oo(u,l,h){ce(ng,l._currentValue),l._currentValue=h}function si(u){u._currentValue=ng.current,K(ng)}function rg(u,l,h){for(;u!==null;){var m=u.alternate;if((u.childLanes&l)!==l?(u.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),u===h)break;u=u.return}}function ag(u,l,h,m){var w=u.child;for(w!==null&&(w.return=u);w!==null;){var E=w.dependencies;if(E!==null){var D=w.child;E=E.firstContext;e:for(;E!==null;){var N=E;E=w;for(var W=0;W<l.length;W++)if(N.context===l[W]){E.lanes|=h,N=E.alternate,N!==null&&(N.lanes|=h),rg(E.return,h,u),m||(D=null);break e}E=N.next}}else if(w.tag===18){if(D=w.return,D===null)throw Error(r(341));D.lanes|=h,E=D.alternate,E!==null&&(E.lanes|=h),rg(D,h,u),D=null}else D=w.child;if(D!==null)D.return=w;else for(D=w;D!==null;){if(D===u){D=null;break}if(w=D.sibling,w!==null){w.return=D.return,D=w;break}D=D.return}w=D}}function ps(u,l,h,m){u=null;for(var w=l,E=!1;w!==null;){if(!E){if((w.flags&524288)!==0)E=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var D=w.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var N=w.type;yr(w.pendingProps.value,D.value)||(u!==null?u.push(N):u=[N])}}else if(w===xe.current){if(D=w.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(u!==null?u.push(bc):u=[bc])}w=w.return}u!==null&&ag(l,u,h,m),l.flags|=262144}function yd(u){for(u=u.firstContext;u!==null;){if(!yr(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function iu(u){au=u,ui=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function On(u){return rE(au,u)}function bd(u,l){return au===null&&iu(u),rE(u,l)}function rE(u,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},ui===null){if(u===null)throw Error(r(308));ui=l,u.dependencies={lanes:0,firstContext:l},u.flags|=524288}else ui=ui.next=l;return h}var IF=typeof AbortController<"u"?AbortController:function(){var u=[],l=this.signal={aborted:!1,addEventListener:function(h,m){u.push(m)}};this.abort=function(){l.aborted=!0,u.forEach(function(h){return h()})}},PF=e.unstable_scheduleCallback,BF=e.unstable_NormalPriority,Gt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ig(){return{controller:new IF,data:new Map,refCount:0}}function $l(u){u.refCount--,u.refCount===0&&PF(BF,function(){u.controller.abort()})}var Kl=null,og=0,vs=0,ms=null;function LF(u,l){if(Kl===null){var h=Kl=[];og=0,vs=ly(),ms={status:"pending",value:void 0,then:function(m){h.push(m)}}}return og++,l.then(aE,aE),l}function aE(){if(--og===0&&Kl!==null){ms!==null&&(ms.status="fulfilled");var u=Kl;Kl=null,vs=0,ms=null;for(var l=0;l<u.length;l++)(0,u[l])()}}function FF(u,l){var h=[],m={status:"pending",value:null,reason:null,then:function(w){h.push(w)}};return u.then(function(){m.status="fulfilled",m.value=l;for(var w=0;w<h.length;w++)(0,h[w])(l)},function(w){for(m.status="rejected",m.reason=w,w=0;w<h.length;w++)(0,h[w])(void 0)}),m}var iE=U.S;U.S=function(u,l){W_=Vt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&LF(u,l),iE!==null&&iE(u,l)};var ou=j(null);function ug(){var u=ou.current;return u!==null?u:yt.pooledCache}function xd(u,l){l===null?ce(ou,ou.current):ce(ou,l.pool)}function oE(){var u=ug();return u===null?null:{parent:Gt._currentValue,pool:u}}var gs=Error(r(460)),sg=Error(r(474)),wd=Error(r(542)),Sd={then:function(){}};function uE(u){return u=u.status,u==="fulfilled"||u==="rejected"}function sE(u,l,h){switch(h=u[h],h===void 0?u.push(l):h!==l&&(l.then(ri,ri),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw u=l.reason,cE(u),u;default:if(typeof l.status=="string")l.then(ri,ri);else{if(u=yt,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=l,u.status="pending",u.then(function(m){if(l.status==="pending"){var w=l;w.status="fulfilled",w.value=m}},function(m){if(l.status==="pending"){var w=l;w.status="rejected",w.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw u=l.reason,cE(u),u}throw su=l,gs}}function uu(u){try{var l=u._init;return l(u._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(su=h,gs):h}}var su=null;function lE(){if(su===null)throw Error(r(459));var u=su;return su=null,u}function cE(u){if(u===gs||u===wd)throw Error(r(483))}var ys=null,Xl=0;function Ed(u){var l=Xl;return Xl+=1,ys===null&&(ys=[]),sE(ys,u,l)}function Yl(u,l){l=l.props.ref,u.ref=l!==void 0?l:null}function _d(u,l){throw l.$$typeof===v?Error(r(525)):(u=Object.prototype.toString.call(l),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":u)))}function fE(u){function l(X,V){if(u){var ee=X.deletions;ee===null?(X.deletions=[V],X.flags|=16):ee.push(V)}}function h(X,V){if(!u)return null;for(;V!==null;)l(X,V),V=V.sibling;return null}function m(X){for(var V=new Map;X!==null;)X.key!==null?V.set(X.key,X):V.set(X.index,X),X=X.sibling;return V}function w(X,V){return X=ii(X,V),X.index=0,X.sibling=null,X}function E(X,V,ee){return X.index=ee,u?(ee=X.alternate,ee!==null?(ee=ee.index,ee<V?(X.flags|=67108866,V):ee):(X.flags|=67108866,V)):(X.flags|=1048576,V)}function D(X){return u&&X.alternate===null&&(X.flags|=67108866),X}function N(X,V,ee,pe){return V===null||V.tag!==6?(V=Ym(ee,X.mode,pe),V.return=X,V):(V=w(V,ee),V.return=X,V)}function W(X,V,ee,pe){var Be=ee.type;return Be===b?fe(X,V,ee.props.children,pe,ee.key):V!==null&&(V.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===k&&uu(Be)===V.type)?(V=w(V,ee.props),Yl(V,ee),V.return=X,V):(V=md(ee.type,ee.key,ee.props,null,X.mode,pe),Yl(V,ee),V.return=X,V)}function te(X,V,ee,pe){return V===null||V.tag!==4||V.stateNode.containerInfo!==ee.containerInfo||V.stateNode.implementation!==ee.implementation?(V=Zm(ee,X.mode,pe),V.return=X,V):(V=w(V,ee.children||[]),V.return=X,V)}function fe(X,V,ee,pe,Be){return V===null||V.tag!==7?(V=nu(ee,X.mode,pe,Be),V.return=X,V):(V=w(V,ee),V.return=X,V)}function me(X,V,ee){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Ym(""+V,X.mode,ee),V.return=X,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case g:return ee=md(V.type,V.key,V.props,null,X.mode,ee),Yl(ee,V),ee.return=X,ee;case y:return V=Zm(V,X.mode,ee),V.return=X,V;case k:return V=uu(V),me(X,V,ee)}if(J(V)||F(V))return V=nu(V,X.mode,ee,null),V.return=X,V;if(typeof V.then=="function")return me(X,Ed(V),ee);if(V.$$typeof===C)return me(X,bd(X,V),ee);_d(X,V)}return null}function re(X,V,ee,pe){var Be=V!==null?V.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Be!==null?null:N(X,V,""+ee,pe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case g:return ee.key===Be?W(X,V,ee,pe):null;case y:return ee.key===Be?te(X,V,ee,pe):null;case k:return ee=uu(ee),re(X,V,ee,pe)}if(J(ee)||F(ee))return Be!==null?null:fe(X,V,ee,pe,null);if(typeof ee.then=="function")return re(X,V,Ed(ee),pe);if(ee.$$typeof===C)return re(X,V,bd(X,ee),pe);_d(X,ee)}return null}function ue(X,V,ee,pe,Be){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return X=X.get(ee)||null,N(V,X,""+pe,Be);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case g:return X=X.get(pe.key===null?ee:pe.key)||null,W(V,X,pe,Be);case y:return X=X.get(pe.key===null?ee:pe.key)||null,te(V,X,pe,Be);case k:return pe=uu(pe),ue(X,V,ee,pe,Be)}if(J(pe)||F(pe))return X=X.get(ee)||null,fe(V,X,pe,Be,null);if(typeof pe.then=="function")return ue(X,V,ee,Ed(pe),Be);if(pe.$$typeof===C)return ue(X,V,ee,bd(V,pe),Be);_d(V,pe)}return null}function Ce(X,V,ee,pe){for(var Be=null,at=null,Re=V,Ke=V=0,tt=null;Re!==null&&Ke<ee.length;Ke++){Re.index>Ke?(tt=Re,Re=null):tt=Re.sibling;var it=re(X,Re,ee[Ke],pe);if(it===null){Re===null&&(Re=tt);break}u&&Re&&it.alternate===null&&l(X,Re),V=E(it,V,Ke),at===null?Be=it:at.sibling=it,at=it,Re=tt}if(Ke===ee.length)return h(X,Re),nt&&oi(X,Ke),Be;if(Re===null){for(;Ke<ee.length;Ke++)Re=me(X,ee[Ke],pe),Re!==null&&(V=E(Re,V,Ke),at===null?Be=Re:at.sibling=Re,at=Re);return nt&&oi(X,Ke),Be}for(Re=m(Re);Ke<ee.length;Ke++)tt=ue(Re,X,Ke,ee[Ke],pe),tt!==null&&(u&&tt.alternate!==null&&Re.delete(tt.key===null?Ke:tt.key),V=E(tt,V,Ke),at===null?Be=tt:at.sibling=tt,at=tt);return u&&Re.forEach(function(Co){return l(X,Co)}),nt&&oi(X,Ke),Be}function Fe(X,V,ee,pe){if(ee==null)throw Error(r(151));for(var Be=null,at=null,Re=V,Ke=V=0,tt=null,it=ee.next();Re!==null&&!it.done;Ke++,it=ee.next()){Re.index>Ke?(tt=Re,Re=null):tt=Re.sibling;var Co=re(X,Re,it.value,pe);if(Co===null){Re===null&&(Re=tt);break}u&&Re&&Co.alternate===null&&l(X,Re),V=E(Co,V,Ke),at===null?Be=Co:at.sibling=Co,at=Co,Re=tt}if(it.done)return h(X,Re),nt&&oi(X,Ke),Be;if(Re===null){for(;!it.done;Ke++,it=ee.next())it=me(X,it.value,pe),it!==null&&(V=E(it,V,Ke),at===null?Be=it:at.sibling=it,at=it);return nt&&oi(X,Ke),Be}for(Re=m(Re);!it.done;Ke++,it=ee.next())it=ue(Re,X,Ke,it.value,pe),it!==null&&(u&&it.alternate!==null&&Re.delete(it.key===null?Ke:it.key),V=E(it,V,Ke),at===null?Be=it:at.sibling=it,at=it);return u&&Re.forEach(function(Xj){return l(X,Xj)}),nt&&oi(X,Ke),Be}function mt(X,V,ee,pe){if(typeof ee=="object"&&ee!==null&&ee.type===b&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case g:e:{for(var Be=ee.key;V!==null;){if(V.key===Be){if(Be=ee.type,Be===b){if(V.tag===7){h(X,V.sibling),pe=w(V,ee.props.children),pe.return=X,X=pe;break e}}else if(V.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===k&&uu(Be)===V.type){h(X,V.sibling),pe=w(V,ee.props),Yl(pe,ee),pe.return=X,X=pe;break e}h(X,V);break}else l(X,V);V=V.sibling}ee.type===b?(pe=nu(ee.props.children,X.mode,pe,ee.key),pe.return=X,X=pe):(pe=md(ee.type,ee.key,ee.props,null,X.mode,pe),Yl(pe,ee),pe.return=X,X=pe)}return D(X);case y:e:{for(Be=ee.key;V!==null;){if(V.key===Be)if(V.tag===4&&V.stateNode.containerInfo===ee.containerInfo&&V.stateNode.implementation===ee.implementation){h(X,V.sibling),pe=w(V,ee.children||[]),pe.return=X,X=pe;break e}else{h(X,V);break}else l(X,V);V=V.sibling}pe=Zm(ee,X.mode,pe),pe.return=X,X=pe}return D(X);case k:return ee=uu(ee),mt(X,V,ee,pe)}if(J(ee))return Ce(X,V,ee,pe);if(F(ee)){if(Be=F(ee),typeof Be!="function")throw Error(r(150));return ee=Be.call(ee),Fe(X,V,ee,pe)}if(typeof ee.then=="function")return mt(X,V,Ed(ee),pe);if(ee.$$typeof===C)return mt(X,V,bd(X,ee),pe);_d(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,V!==null&&V.tag===6?(h(X,V.sibling),pe=w(V,ee),pe.return=X,X=pe):(h(X,V),pe=Ym(ee,X.mode,pe),pe.return=X,X=pe),D(X)):h(X,V)}return function(X,V,ee,pe){try{Xl=0;var Be=mt(X,V,ee,pe);return ys=null,Be}catch(Re){if(Re===gs||Re===wd)throw Re;var at=br(29,Re,null,X.mode);return at.lanes=pe,at.return=X,at}}}var lu=fE(!0),dE=fE(!1),uo=!1;function lg(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cg(u,l){u=u.updateQueue,l.updateQueue===u&&(l.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function so(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function lo(u,l,h){var m=u.updateQueue;if(m===null)return null;if(m=m.shared,(ut&2)!==0){var w=m.pending;return w===null?l.next=l:(l.next=w.next,w.next=l),m.pending=l,l=vd(u),XS(u,null,h),l}return pd(u,m,l,h),vd(u)}function Zl(u,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var m=l.lanes;m&=u.pendingLanes,h|=m,l.lanes=h,rS(u,h)}}function fg(u,l){var h=u.updateQueue,m=u.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var w=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var D={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?w=E=D:E=E.next=D,h=h.next}while(h!==null);E===null?w=E=l:E=E.next=l}else w=E=l;h={baseState:m.baseState,firstBaseUpdate:w,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},u.updateQueue=h;return}u=h.lastBaseUpdate,u===null?h.firstBaseUpdate=l:u.next=l,h.lastBaseUpdate=l}var dg=!1;function Ql(){if(dg){var u=ms;if(u!==null)throw u}}function Jl(u,l,h,m){dg=!1;var w=u.updateQueue;uo=!1;var E=w.firstBaseUpdate,D=w.lastBaseUpdate,N=w.shared.pending;if(N!==null){w.shared.pending=null;var W=N,te=W.next;W.next=null,D===null?E=te:D.next=te,D=W;var fe=u.alternate;fe!==null&&(fe=fe.updateQueue,N=fe.lastBaseUpdate,N!==D&&(N===null?fe.firstBaseUpdate=te:N.next=te,fe.lastBaseUpdate=W))}if(E!==null){var me=w.baseState;D=0,fe=te=W=null,N=E;do{var re=N.lane&-536870913,ue=re!==N.lane;if(ue?(et&re)===re:(m&re)===re){re!==0&&re===vs&&(dg=!0),fe!==null&&(fe=fe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ce=u,Fe=N;re=l;var mt=h;switch(Fe.tag){case 1:if(Ce=Fe.payload,typeof Ce=="function"){me=Ce.call(mt,me,re);break e}me=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Fe.payload,re=typeof Ce=="function"?Ce.call(mt,me,re):Ce,re==null)break e;me=p({},me,re);break e;case 2:uo=!0}}re=N.callback,re!==null&&(u.flags|=64,ue&&(u.flags|=8192),ue=w.callbacks,ue===null?w.callbacks=[re]:ue.push(re))}else ue={lane:re,tag:N.tag,payload:N.payload,callback:N.callback,next:null},fe===null?(te=fe=ue,W=me):fe=fe.next=ue,D|=re;if(N=N.next,N===null){if(N=w.shared.pending,N===null)break;ue=N,N=ue.next,ue.next=null,w.lastBaseUpdate=ue,w.shared.pending=null}}while(!0);fe===null&&(W=me),w.baseState=W,w.firstBaseUpdate=te,w.lastBaseUpdate=fe,E===null&&(w.shared.lanes=0),vo|=D,u.lanes=D,u.memoizedState=me}}function hE(u,l){if(typeof u!="function")throw Error(r(191,u));u.call(l)}function pE(u,l){var h=u.callbacks;if(h!==null)for(u.callbacks=null,u=0;u<h.length;u++)hE(h[u],l)}var bs=j(null),Cd=j(0);function vE(u,l){u=gi,ce(Cd,u),ce(bs,l),gi=u|l.baseLanes}function hg(){ce(Cd,gi),ce(bs,bs.current)}function pg(){gi=Cd.current,K(bs),K(Cd)}var xr=j(null),Gr=null;function co(u){var l=u.alternate;ce(jt,jt.current&1),ce(xr,u),Gr===null&&(l===null||bs.current!==null||l.memoizedState!==null)&&(Gr=u)}function vg(u){ce(jt,jt.current),ce(xr,u),Gr===null&&(Gr=u)}function mE(u){u.tag===22?(ce(jt,jt.current),ce(xr,u),Gr===null&&(Gr=u)):fo()}function fo(){ce(jt,jt.current),ce(xr,xr.current)}function wr(u){K(xr),Gr===u&&(Gr=null),K(jt)}var jt=j(0);function Ad(u){for(var l=u;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||wy(h)||Sy(h)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break;for(;l.sibling===null;){if(l.return===null||l.return===u)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var li=0,Ve=null,pt=null,$t=null,Od=!1,xs=!1,cu=!1,Td=0,ec=0,ws=null,jF=0;function Pt(){throw Error(r(321))}function mg(u,l){if(l===null)return!1;for(var h=0;h<l.length&&h<u.length;h++)if(!yr(u[h],l[h]))return!1;return!0}function gg(u,l,h,m,w,E){return li=E,Ve=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,U.H=u===null||u.memoizedState===null?JE:kg,cu=!1,E=h(m,w),cu=!1,xs&&(E=yE(l,h,m,w)),gE(u),E}function gE(u){U.H=rc;var l=pt!==null&&pt.next!==null;if(li=0,$t=pt=Ve=null,Od=!1,ec=0,ws=null,l)throw Error(r(300));u===null||Kt||(u=u.dependencies,u!==null&&yd(u)&&(Kt=!0))}function yE(u,l,h,m){Ve=u;var w=0;do{if(xs&&(ws=null),ec=0,xs=!1,25<=w)throw Error(r(301));if(w+=1,$t=pt=null,u.updateQueue!=null){var E=u.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}U.H=e_,E=l(h,m)}while(xs);return E}function zF(){var u=U.H,l=u.useState()[0];return l=typeof l.then=="function"?tc(l):l,u=u.useState()[0],(pt!==null?pt.memoizedState:null)!==u&&(Ve.flags|=1024),l}function yg(){var u=Td!==0;return Td=0,u}function bg(u,l,h){l.updateQueue=u.updateQueue,l.flags&=-2053,u.lanes&=~h}function xg(u){if(Od){for(u=u.memoizedState;u!==null;){var l=u.queue;l!==null&&(l.pending=null),u=u.next}Od=!1}li=0,$t=pt=Ve=null,xs=!1,ec=Td=0,ws=null}function Xn(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Ve.memoizedState=$t=u:$t=$t.next=u,$t}function zt(){if(pt===null){var u=Ve.alternate;u=u!==null?u.memoizedState:null}else u=pt.next;var l=$t===null?Ve.memoizedState:$t.next;if(l!==null)$t=l,pt=u;else{if(u===null)throw Ve.alternate===null?Error(r(467)):Error(r(310));pt=u,u={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},$t===null?Ve.memoizedState=$t=u:$t=$t.next=u}return $t}function Rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tc(u){var l=ec;return ec+=1,ws===null&&(ws=[]),u=sE(ws,u,l),l=Ve,($t===null?l.memoizedState:$t.next)===null&&(l=l.alternate,U.H=l===null||l.memoizedState===null?JE:kg),u}function Dd(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return tc(u);if(u.$$typeof===C)return On(u)}throw Error(r(438,String(u)))}function wg(u){var l=null,h=Ve.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var m=Ve.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(w){return w.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=Rd(),Ve.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(u),m=0;m<u;m++)h[m]=P;return l.index++,h}function ci(u,l){return typeof l=="function"?l(u):l}function Md(u){var l=zt();return Sg(l,pt,u)}function Sg(u,l,h){var m=u.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var w=u.baseQueue,E=m.pending;if(E!==null){if(w!==null){var D=w.next;w.next=E.next,E.next=D}l.baseQueue=w=E,m.pending=null}if(E=u.baseState,w===null)u.memoizedState=E;else{l=w.next;var N=D=null,W=null,te=l,fe=!1;do{var me=te.lane&-536870913;if(me!==te.lane?(et&me)===me:(li&me)===me){var re=te.revertLane;if(re===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),me===vs&&(fe=!0);else if((li&re)===re){te=te.next,re===vs&&(fe=!0);continue}else me={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},W===null?(N=W=me,D=E):W=W.next=me,Ve.lanes|=re,vo|=re;me=te.action,cu&&h(E,me),E=te.hasEagerState?te.eagerState:h(E,me)}else re={lane:me,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},W===null?(N=W=re,D=E):W=W.next=re,Ve.lanes|=me,vo|=me;te=te.next}while(te!==null&&te!==l);if(W===null?D=E:W.next=N,!yr(E,u.memoizedState)&&(Kt=!0,fe&&(h=ms,h!==null)))throw h;u.memoizedState=E,u.baseState=D,u.baseQueue=W,m.lastRenderedState=E}return w===null&&(m.lanes=0),[u.memoizedState,m.dispatch]}function Eg(u){var l=zt(),h=l.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var m=h.dispatch,w=h.pending,E=l.memoizedState;if(w!==null){h.pending=null;var D=w=w.next;do E=u(E,D.action),D=D.next;while(D!==w);yr(E,l.memoizedState)||(Kt=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),h.lastRenderedState=E}return[E,m]}function bE(u,l,h){var m=Ve,w=zt(),E=nt;if(E){if(h===void 0)throw Error(r(407));h=h()}else h=l();var D=!yr((pt||w).memoizedState,h);if(D&&(w.memoizedState=h,Kt=!0),w=w.queue,Ag(SE.bind(null,m,w,u),[u]),w.getSnapshot!==l||D||$t!==null&&$t.memoizedState.tag&1){if(m.flags|=2048,Ss(9,{destroy:void 0},wE.bind(null,m,w,h,l),null),yt===null)throw Error(r(349));E||(li&127)!==0||xE(m,l,h)}return h}function xE(u,l,h){u.flags|=16384,u={getSnapshot:l,value:h},l=Ve.updateQueue,l===null?(l=Rd(),Ve.updateQueue=l,l.stores=[u]):(h=l.stores,h===null?l.stores=[u]:h.push(u))}function wE(u,l,h,m){l.value=h,l.getSnapshot=m,EE(l)&&_E(u)}function SE(u,l,h){return h(function(){EE(l)&&_E(u)})}function EE(u){var l=u.getSnapshot;u=u.value;try{var h=l();return!yr(u,h)}catch{return!0}}function _E(u){var l=tu(u,2);l!==null&&ur(l,u,2)}function _g(u){var l=Xn();if(typeof u=="function"){var h=u;if(u=h(),cu){Fr(!0);try{h()}finally{Fr(!1)}}}return l.memoizedState=l.baseState=u,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:u},l}function CE(u,l,h,m){return u.baseState=h,Sg(u,pt,typeof m=="function"?m:ci)}function UF(u,l,h,m,w){if(Id(u))throw Error(r(485));if(u=l.action,u!==null){var E={payload:w,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){E.listeners.push(D)}};U.T!==null?h(!0):E.isTransition=!1,m(E),h=l.pending,h===null?(E.next=l.pending=E,AE(l,E)):(E.next=h.next,l.pending=h.next=E)}}function AE(u,l){var h=l.action,m=l.payload,w=u.state;if(l.isTransition){var E=U.T,D={};U.T=D;try{var N=h(w,m),W=U.S;W!==null&&W(D,N),OE(u,l,N)}catch(te){Cg(u,l,te)}finally{E!==null&&D.types!==null&&(E.types=D.types),U.T=E}}else try{E=h(w,m),OE(u,l,E)}catch(te){Cg(u,l,te)}}function OE(u,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){TE(u,l,m)},function(m){return Cg(u,l,m)}):TE(u,l,h)}function TE(u,l,h){l.status="fulfilled",l.value=h,RE(l),u.state=h,l=u.pending,l!==null&&(h=l.next,h===l?u.pending=null:(h=h.next,l.next=h,AE(u,h)))}function Cg(u,l,h){var m=u.pending;if(u.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=h,RE(l),l=l.next;while(l!==m)}u.action=null}function RE(u){u=u.listeners;for(var l=0;l<u.length;l++)(0,u[l])()}function DE(u,l){return l}function ME(u,l){if(nt){var h=yt.formState;if(h!==null){e:{var m=Ve;if(nt){if(St){t:{for(var w=St,E=Vr;w.nodeType!==8;){if(!E){w=null;break t}if(w=$r(w.nextSibling),w===null){w=null;break t}}E=w.data,w=E==="F!"||E==="F"?w:null}if(w){St=$r(w.nextSibling),m=w.data==="F!";break e}}io(m)}m=!1}m&&(l=h[0])}}return h=Xn(),h.memoizedState=h.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:DE,lastRenderedState:l},h.queue=m,h=YE.bind(null,Ve,m),m.dispatch=h,m=_g(!1),E=Mg.bind(null,Ve,!1,m.queue),m=Xn(),w={state:l,dispatch:null,action:u,pending:null},m.queue=w,h=UF.bind(null,Ve,w,E,h),w.dispatch=h,m.memoizedState=u,[l,h,!1]}function kE(u){var l=zt();return NE(l,pt,u)}function NE(u,l,h){if(l=Sg(u,l,DE)[0],u=Md(ci)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=tc(l)}catch(D){throw D===gs?wd:D}else m=l;l=zt();var w=l.queue,E=w.dispatch;return h!==l.memoizedState&&(Ve.flags|=2048,Ss(9,{destroy:void 0},WF.bind(null,w,h),null)),[m,E,u]}function WF(u,l){u.action=l}function IE(u){var l=zt(),h=pt;if(h!==null)return NE(l,h,u);zt(),l=l.memoizedState,h=zt();var m=h.queue.dispatch;return h.memoizedState=u,[l,m,!1]}function Ss(u,l,h,m){return u={tag:u,create:h,deps:m,inst:l,next:null},l=Ve.updateQueue,l===null&&(l=Rd(),Ve.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=u.next=u:(m=h.next,h.next=u,u.next=m,l.lastEffect=u),u}function PE(){return zt().memoizedState}function kd(u,l,h,m){var w=Xn();Ve.flags|=u,w.memoizedState=Ss(1|l,{destroy:void 0},h,m===void 0?null:m)}function Nd(u,l,h,m){var w=zt();m=m===void 0?null:m;var E=w.memoizedState.inst;pt!==null&&m!==null&&mg(m,pt.memoizedState.deps)?w.memoizedState=Ss(l,E,h,m):(Ve.flags|=u,w.memoizedState=Ss(1|l,E,h,m))}function BE(u,l){kd(8390656,8,u,l)}function Ag(u,l){Nd(2048,8,u,l)}function HF(u){Ve.flags|=4;var l=Ve.updateQueue;if(l===null)l=Rd(),Ve.updateQueue=l,l.events=[u];else{var h=l.events;h===null?l.events=[u]:h.push(u)}}function LE(u){var l=zt().memoizedState;return HF({ref:l,nextImpl:u}),function(){if((ut&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function FE(u,l){return Nd(4,2,u,l)}function jE(u,l){return Nd(4,4,u,l)}function zE(u,l){if(typeof l=="function"){u=u();var h=l(u);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return u=u(),l.current=u,function(){l.current=null}}function UE(u,l,h){h=h!=null?h.concat([u]):null,Nd(4,4,zE.bind(null,l,u),h)}function Og(){}function WE(u,l){var h=zt();l=l===void 0?null:l;var m=h.memoizedState;return l!==null&&mg(l,m[1])?m[0]:(h.memoizedState=[u,l],u)}function HE(u,l){var h=zt();l=l===void 0?null:l;var m=h.memoizedState;if(l!==null&&mg(l,m[1]))return m[0];if(m=u(),cu){Fr(!0);try{u()}finally{Fr(!1)}}return h.memoizedState=[m,l],m}function Tg(u,l,h){return h===void 0||(li&1073741824)!==0&&(et&261930)===0?u.memoizedState=l:(u.memoizedState=h,u=q_(),Ve.lanes|=u,vo|=u,h)}function qE(u,l,h,m){return yr(h,l)?h:bs.current!==null?(u=Tg(u,h,m),yr(u,l)||(Kt=!0),u):(li&42)===0||(li&1073741824)!==0&&(et&261930)===0?(Kt=!0,u.memoizedState=h):(u=q_(),Ve.lanes|=u,vo|=u,l)}function VE(u,l,h,m,w){var E=H.p;H.p=E!==0&&8>E?E:8;var D=U.T,N={};U.T=N,Mg(u,!1,l,h);try{var W=w(),te=U.S;if(te!==null&&te(N,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var fe=FF(W,m);nc(u,l,fe,_r(u))}else nc(u,l,m,_r(u))}catch(me){nc(u,l,{then:function(){},status:"rejected",reason:me},_r())}finally{H.p=E,D!==null&&N.types!==null&&(D.types=N.types),U.T=D}}function qF(){}function Rg(u,l,h,m){if(u.tag!==5)throw Error(r(476));var w=GE(u).queue;VE(u,w,l,G,h===null?qF:function(){return $E(u),h(m)})}function GE(u){var l=u.memoizedState;if(l!==null)return l;l={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:G},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:h},next:null},u.memoizedState=l,u=u.alternate,u!==null&&(u.memoizedState=l),l}function $E(u){var l=GE(u);l.next===null&&(l=u.alternate.memoizedState),nc(u,l.next.queue,{},_r())}function Dg(){return On(bc)}function KE(){return zt().memoizedState}function XE(){return zt().memoizedState}function VF(u){for(var l=u.return;l!==null;){switch(l.tag){case 24:case 3:var h=_r();u=so(h);var m=lo(l,u,h);m!==null&&(ur(m,l,h),Zl(m,l,h)),l={cache:ig()},u.payload=l;return}l=l.return}}function GF(u,l,h){var m=_r();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Id(u)?ZE(l,h):(h=Km(u,l,h,m),h!==null&&(ur(h,u,m),QE(h,l,m)))}function YE(u,l,h){var m=_r();nc(u,l,h,m)}function nc(u,l,h,m){var w={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Id(u))ZE(l,w);else{var E=u.alternate;if(u.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var D=l.lastRenderedState,N=E(D,h);if(w.hasEagerState=!0,w.eagerState=N,yr(N,D))return pd(u,l,w,0),yt===null&&hd(),!1}catch{}if(h=Km(u,l,w,m),h!==null)return ur(h,u,m),QE(h,l,m),!0}return!1}function Mg(u,l,h,m){if(m={lane:2,revertLane:ly(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Id(u)){if(l)throw Error(r(479))}else l=Km(u,h,m,2),l!==null&&ur(l,u,2)}function Id(u){var l=u.alternate;return u===Ve||l!==null&&l===Ve}function ZE(u,l){xs=Od=!0;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}function QE(u,l,h){if((h&4194048)!==0){var m=l.lanes;m&=u.pendingLanes,h|=m,l.lanes=h,rS(u,h)}}var rc={readContext:On,use:Dd,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};rc.useEffectEvent=Pt;var JE={readContext:On,use:Dd,useCallback:function(u,l){return Xn().memoizedState=[u,l===void 0?null:l],u},useContext:On,useEffect:BE,useImperativeHandle:function(u,l,h){h=h!=null?h.concat([u]):null,kd(4194308,4,zE.bind(null,l,u),h)},useLayoutEffect:function(u,l){return kd(4194308,4,u,l)},useInsertionEffect:function(u,l){kd(4,2,u,l)},useMemo:function(u,l){var h=Xn();l=l===void 0?null:l;var m=u();if(cu){Fr(!0);try{u()}finally{Fr(!1)}}return h.memoizedState=[m,l],m},useReducer:function(u,l,h){var m=Xn();if(h!==void 0){var w=h(l);if(cu){Fr(!0);try{h(l)}finally{Fr(!1)}}}else w=l;return m.memoizedState=m.baseState=w,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:w},m.queue=u,u=u.dispatch=GF.bind(null,Ve,u),[m.memoizedState,u]},useRef:function(u){var l=Xn();return u={current:u},l.memoizedState=u},useState:function(u){u=_g(u);var l=u.queue,h=YE.bind(null,Ve,l);return l.dispatch=h,[u.memoizedState,h]},useDebugValue:Og,useDeferredValue:function(u,l){var h=Xn();return Tg(h,u,l)},useTransition:function(){var u=_g(!1);return u=VE.bind(null,Ve,u.queue,!0,!1),Xn().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,l,h){var m=Ve,w=Xn();if(nt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=l(),yt===null)throw Error(r(349));(et&127)!==0||xE(m,l,h)}w.memoizedState=h;var E={value:h,getSnapshot:l};return w.queue=E,BE(SE.bind(null,m,E,u),[u]),m.flags|=2048,Ss(9,{destroy:void 0},wE.bind(null,m,E,h,l),null),h},useId:function(){var u=Xn(),l=yt.identifierPrefix;if(nt){var h=Ma,m=Da;h=(m&~(1<<32-gr(m)-1)).toString(32)+h,l="_"+l+"R_"+h,h=Td++,0<h&&(l+="H"+h.toString(32)),l+="_"}else h=jF++,l="_"+l+"r_"+h.toString(32)+"_";return u.memoizedState=l},useHostTransitionStatus:Dg,useFormState:ME,useActionState:ME,useOptimistic:function(u){var l=Xn();l.memoizedState=l.baseState=u;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=Mg.bind(null,Ve,!0,h),h.dispatch=l,[u,l]},useMemoCache:wg,useCacheRefresh:function(){return Xn().memoizedState=VF.bind(null,Ve)},useEffectEvent:function(u){var l=Xn(),h={impl:u};return l.memoizedState=h,function(){if((ut&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}},kg={readContext:On,use:Dd,useCallback:WE,useContext:On,useEffect:Ag,useImperativeHandle:UE,useInsertionEffect:FE,useLayoutEffect:jE,useMemo:HE,useReducer:Md,useRef:PE,useState:function(){return Md(ci)},useDebugValue:Og,useDeferredValue:function(u,l){var h=zt();return qE(h,pt.memoizedState,u,l)},useTransition:function(){var u=Md(ci)[0],l=zt().memoizedState;return[typeof u=="boolean"?u:tc(u),l]},useSyncExternalStore:bE,useId:KE,useHostTransitionStatus:Dg,useFormState:kE,useActionState:kE,useOptimistic:function(u,l){var h=zt();return CE(h,pt,u,l)},useMemoCache:wg,useCacheRefresh:XE};kg.useEffectEvent=LE;var e_={readContext:On,use:Dd,useCallback:WE,useContext:On,useEffect:Ag,useImperativeHandle:UE,useInsertionEffect:FE,useLayoutEffect:jE,useMemo:HE,useReducer:Eg,useRef:PE,useState:function(){return Eg(ci)},useDebugValue:Og,useDeferredValue:function(u,l){var h=zt();return pt===null?Tg(h,u,l):qE(h,pt.memoizedState,u,l)},useTransition:function(){var u=Eg(ci)[0],l=zt().memoizedState;return[typeof u=="boolean"?u:tc(u),l]},useSyncExternalStore:bE,useId:KE,useHostTransitionStatus:Dg,useFormState:IE,useActionState:IE,useOptimistic:function(u,l){var h=zt();return pt!==null?CE(h,pt,u,l):(h.baseState=u,[u,h.queue.dispatch])},useMemoCache:wg,useCacheRefresh:XE};e_.useEffectEvent=LE;function Ng(u,l,h,m){l=u.memoizedState,h=h(m,l),h=h==null?l:p({},l,h),u.memoizedState=h,u.lanes===0&&(u.updateQueue.baseState=h)}var Ig={enqueueSetState:function(u,l,h){u=u._reactInternals;var m=_r(),w=so(m);w.payload=l,h!=null&&(w.callback=h),l=lo(u,w,m),l!==null&&(ur(l,u,m),Zl(l,u,m))},enqueueReplaceState:function(u,l,h){u=u._reactInternals;var m=_r(),w=so(m);w.tag=1,w.payload=l,h!=null&&(w.callback=h),l=lo(u,w,m),l!==null&&(ur(l,u,m),Zl(l,u,m))},enqueueForceUpdate:function(u,l){u=u._reactInternals;var h=_r(),m=so(h);m.tag=2,l!=null&&(m.callback=l),l=lo(u,m,h),l!==null&&(ur(l,u,h),Zl(l,u,h))}};function t_(u,l,h,m,w,E,D){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(m,E,D):l.prototype&&l.prototype.isPureReactComponent?!Hl(h,m)||!Hl(w,E):!0}function n_(u,l,h,m){u=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,m),l.state!==u&&Ig.enqueueReplaceState(l,l.state,null)}function fu(u,l){var h=l;if("ref"in l){h={};for(var m in l)m!=="ref"&&(h[m]=l[m])}if(u=u.defaultProps){h===l&&(h=p({},h));for(var w in u)h[w]===void 0&&(h[w]=u[w])}return h}function r_(u){dd(u)}function a_(u){console.error(u)}function i_(u){dd(u)}function Pd(u,l){try{var h=u.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function o_(u,l,h){try{var m=u.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Pg(u,l,h){return h=so(h),h.tag=3,h.payload={element:null},h.callback=function(){Pd(u,l)},h}function u_(u){return u=so(u),u.tag=3,u}function s_(u,l,h,m){var w=h.type.getDerivedStateFromError;if(typeof w=="function"){var E=m.value;u.payload=function(){return w(E)},u.callback=function(){o_(l,h,m)}}var D=h.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(u.callback=function(){o_(l,h,m),typeof w!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var N=m.stack;this.componentDidCatch(m.value,{componentStack:N!==null?N:""})})}function $F(u,l,h,m,w){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=h.alternate,l!==null&&ps(l,h,w,!0),h=xr.current,h!==null){switch(h.tag){case 31:case 13:return Gr===null?$d():h.alternate===null&&Bt===0&&(Bt=3),h.flags&=-257,h.flags|=65536,h.lanes=w,m===Sd?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([m]):l.add(m),oy(u,m,w)),!1;case 22:return h.flags|=65536,m===Sd?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([m]):h.add(m)),oy(u,m,w)),!1}throw Error(r(435,h.tag))}return oy(u,m,w),$d(),!1}if(nt)return l=xr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=w,m!==eg&&(u=Error(r(422),{cause:m}),Gl(Wr(u,h)))):(m!==eg&&(l=Error(r(423),{cause:m}),Gl(Wr(l,h))),u=u.current.alternate,u.flags|=65536,w&=-w,u.lanes|=w,m=Wr(m,h),w=Pg(u.stateNode,m,w),fg(u,w),Bt!==4&&(Bt=2)),!1;var E=Error(r(520),{cause:m});if(E=Wr(E,h),fc===null?fc=[E]:fc.push(E),Bt!==4&&(Bt=2),l===null)return!0;m=Wr(m,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,u=w&-w,h.lanes|=u,u=Pg(h.stateNode,m,u),fg(h,u),!1;case 1:if(l=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(mo===null||!mo.has(E))))return h.flags|=65536,w&=-w,h.lanes|=w,w=u_(w),s_(w,u,h,m),fg(h,w),!1}h=h.return}while(h!==null);return!1}var Bg=Error(r(461)),Kt=!1;function Tn(u,l,h,m){l.child=u===null?dE(l,null,h,m):lu(l,u.child,h,m)}function l_(u,l,h,m,w){h=h.render;var E=l.ref;if("ref"in m){var D={};for(var N in m)N!=="ref"&&(D[N]=m[N])}else D=m;return iu(l),m=gg(u,l,h,D,E,w),N=yg(),u!==null&&!Kt?(bg(u,l,w),fi(u,l,w)):(nt&&N&&Qm(l),l.flags|=1,Tn(u,l,m,w),l.child)}function c_(u,l,h,m,w){if(u===null){var E=h.type;return typeof E=="function"&&!Xm(E)&&E.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=E,f_(u,l,E,m,w)):(u=md(h.type,null,m,l,l.mode,w),u.ref=l.ref,u.return=l,l.child=u)}if(E=u.child,!qg(u,w)){var D=E.memoizedProps;if(h=h.compare,h=h!==null?h:Hl,h(D,m)&&u.ref===l.ref)return fi(u,l,w)}return l.flags|=1,u=ii(E,m),u.ref=l.ref,u.return=l,l.child=u}function f_(u,l,h,m,w){if(u!==null){var E=u.memoizedProps;if(Hl(E,m)&&u.ref===l.ref)if(Kt=!1,l.pendingProps=m=E,qg(u,w))(u.flags&131072)!==0&&(Kt=!0);else return l.lanes=u.lanes,fi(u,l,w)}return Lg(u,l,h,m,w)}function d_(u,l,h,m){var w=m.children,E=u!==null?u.memoizedState:null;if(u===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(E=E!==null?E.baseLanes|h:h,u!==null){for(m=l.child=u.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;m=w&~E}else m=0,l.child=null;return h_(u,l,E,h,m)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},u!==null&&xd(l,E!==null?E.cachePool:null),E!==null?vE(l,E):hg(),mE(l);else return m=l.lanes=536870912,h_(u,l,E!==null?E.baseLanes|h:h,h,m)}else E!==null?(xd(l,E.cachePool),vE(l,E),fo(),l.memoizedState=null):(u!==null&&xd(l,null),hg(),fo());return Tn(u,l,w,h),l.child}function ac(u,l){return u!==null&&u.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function h_(u,l,h,m,w){var E=ug();return E=E===null?null:{parent:Gt._currentValue,pool:E},l.memoizedState={baseLanes:h,cachePool:E},u!==null&&xd(l,null),hg(),mE(l),u!==null&&ps(u,l,m,!0),l.childLanes=w,null}function Bd(u,l){return l=Fd({mode:l.mode,children:l.children},u.mode),l.ref=u.ref,u.child=l,l.return=u,l}function p_(u,l,h){return lu(l,u.child,null,h),u=Bd(l,l.pendingProps),u.flags|=2,wr(l),l.memoizedState=null,u}function KF(u,l,h){var m=l.pendingProps,w=(l.flags&128)!==0;if(l.flags&=-129,u===null){if(nt){if(m.mode==="hidden")return u=Bd(l,m),l.lanes=536870912,ac(null,u);if(vg(l),(u=St)?(u=AC(u,Vr),u=u!==null&&u.data==="&"?u:null,u!==null&&(l.memoizedState={dehydrated:u,treeContext:ro!==null?{id:Da,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},h=ZS(u),h.return=l,l.child=h,An=l,St=null)):u=null,u===null)throw io(l);return l.lanes=536870912,null}return Bd(l,m)}var E=u.memoizedState;if(E!==null){var D=E.dehydrated;if(vg(l),w)if(l.flags&256)l.flags&=-257,l=p_(u,l,h);else if(l.memoizedState!==null)l.child=u.child,l.flags|=128,l=null;else throw Error(r(558));else if(Kt||ps(u,l,h,!1),w=(h&u.childLanes)!==0,Kt||w){if(m=yt,m!==null&&(D=aS(m,h),D!==0&&D!==E.retryLane))throw E.retryLane=D,tu(u,D),ur(m,u,D),Bg;$d(),l=p_(u,l,h)}else u=E.treeContext,St=$r(D.nextSibling),An=l,nt=!0,ao=null,Vr=!1,u!==null&&eE(l,u),l=Bd(l,m),l.flags|=4096;return l}return u=ii(u.child,{mode:m.mode,children:m.children}),u.ref=l.ref,l.child=u,u.return=l,u}function Ld(u,l){var h=l.ref;if(h===null)u!==null&&u.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(u===null||u.ref!==h)&&(l.flags|=4194816)}}function Lg(u,l,h,m,w){return iu(l),h=gg(u,l,h,m,void 0,w),m=yg(),u!==null&&!Kt?(bg(u,l,w),fi(u,l,w)):(nt&&m&&Qm(l),l.flags|=1,Tn(u,l,h,w),l.child)}function v_(u,l,h,m,w,E){return iu(l),l.updateQueue=null,h=yE(l,m,h,w),gE(u),m=yg(),u!==null&&!Kt?(bg(u,l,E),fi(u,l,E)):(nt&&m&&Qm(l),l.flags|=1,Tn(u,l,h,E),l.child)}function m_(u,l,h,m,w){if(iu(l),l.stateNode===null){var E=cs,D=h.contextType;typeof D=="object"&&D!==null&&(E=On(D)),E=new h(m,E),l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Ig,l.stateNode=E,E._reactInternals=l,E=l.stateNode,E.props=m,E.state=l.memoizedState,E.refs={},lg(l),D=h.contextType,E.context=typeof D=="object"&&D!==null?On(D):cs,E.state=l.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(Ng(l,h,D,m),E.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(D=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),D!==E.state&&Ig.enqueueReplaceState(E,E.state,null),Jl(l,m,E,w),Ql(),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(u===null){E=l.stateNode;var N=l.memoizedProps,W=fu(h,N);E.props=W;var te=E.context,fe=h.contextType;D=cs,typeof fe=="object"&&fe!==null&&(D=On(fe));var me=h.getDerivedStateFromProps;fe=typeof me=="function"||typeof E.getSnapshotBeforeUpdate=="function",N=l.pendingProps!==N,fe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(N||te!==D)&&n_(l,E,m,D),uo=!1;var re=l.memoizedState;E.state=re,Jl(l,m,E,w),Ql(),te=l.memoizedState,N||re!==te||uo?(typeof me=="function"&&(Ng(l,h,me,m),te=l.memoizedState),(W=uo||t_(l,h,W,m,re,te,D))?(fe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(l.flags|=4194308)):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=te),E.props=m,E.state=te,E.context=D,m=W):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{E=l.stateNode,cg(u,l),D=l.memoizedProps,fe=fu(h,D),E.props=fe,me=l.pendingProps,re=E.context,te=h.contextType,W=cs,typeof te=="object"&&te!==null&&(W=On(te)),N=h.getDerivedStateFromProps,(te=typeof N=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D!==me||re!==W)&&n_(l,E,m,W),uo=!1,re=l.memoizedState,E.state=re,Jl(l,m,E,w),Ql();var ue=l.memoizedState;D!==me||re!==ue||uo||u!==null&&u.dependencies!==null&&yd(u.dependencies)?(typeof N=="function"&&(Ng(l,h,N,m),ue=l.memoizedState),(fe=uo||t_(l,h,fe,m,re,ue,W)||u!==null&&u.dependencies!==null&&yd(u.dependencies))?(te||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,ue,W),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,ue,W)),typeof E.componentDidUpdate=="function"&&(l.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof E.componentDidUpdate!="function"||D===u.memoizedProps&&re===u.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&re===u.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=ue),E.props=m,E.state=ue,E.context=W,m=fe):(typeof E.componentDidUpdate!="function"||D===u.memoizedProps&&re===u.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&re===u.memoizedState||(l.flags|=1024),m=!1)}return E=m,Ld(u,l),m=(l.flags&128)!==0,E||m?(E=l.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:E.render(),l.flags|=1,u!==null&&m?(l.child=lu(l,u.child,null,w),l.child=lu(l,null,h,w)):Tn(u,l,h,w),l.memoizedState=E.state,u=l.child):u=fi(u,l,w),u}function g_(u,l,h,m){return ru(),l.flags|=256,Tn(u,l,h,m),l.child}var Fg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jg(u){return{baseLanes:u,cachePool:oE()}}function zg(u,l,h){return u=u!==null?u.childLanes&~h:0,l&&(u|=Er),u}function y_(u,l,h){var m=l.pendingProps,w=!1,E=(l.flags&128)!==0,D;if((D=E)||(D=u!==null&&u.memoizedState===null?!1:(jt.current&2)!==0),D&&(w=!0,l.flags&=-129),D=(l.flags&32)!==0,l.flags&=-33,u===null){if(nt){if(w?co(l):fo(),(u=St)?(u=AC(u,Vr),u=u!==null&&u.data!=="&"?u:null,u!==null&&(l.memoizedState={dehydrated:u,treeContext:ro!==null?{id:Da,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},h=ZS(u),h.return=l,l.child=h,An=l,St=null)):u=null,u===null)throw io(l);return Sy(u)?l.lanes=32:l.lanes=536870912,null}var N=m.children;return m=m.fallback,w?(fo(),w=l.mode,N=Fd({mode:"hidden",children:N},w),m=nu(m,w,h,null),N.return=l,m.return=l,N.sibling=m,l.child=N,m=l.child,m.memoizedState=jg(h),m.childLanes=zg(u,D,h),l.memoizedState=Fg,ac(null,m)):(co(l),Ug(l,N))}var W=u.memoizedState;if(W!==null&&(N=W.dehydrated,N!==null)){if(E)l.flags&256?(co(l),l.flags&=-257,l=Wg(u,l,h)):l.memoizedState!==null?(fo(),l.child=u.child,l.flags|=128,l=null):(fo(),N=m.fallback,w=l.mode,m=Fd({mode:"visible",children:m.children},w),N=nu(N,w,h,null),N.flags|=2,m.return=l,N.return=l,m.sibling=N,l.child=m,lu(l,u.child,null,h),m=l.child,m.memoizedState=jg(h),m.childLanes=zg(u,D,h),l.memoizedState=Fg,l=ac(null,m));else if(co(l),Sy(N)){if(D=N.nextSibling&&N.nextSibling.dataset,D)var te=D.dgst;D=te,m=Error(r(419)),m.stack="",m.digest=D,Gl({value:m,source:null,stack:null}),l=Wg(u,l,h)}else if(Kt||ps(u,l,h,!1),D=(h&u.childLanes)!==0,Kt||D){if(D=yt,D!==null&&(m=aS(D,h),m!==0&&m!==W.retryLane))throw W.retryLane=m,tu(u,m),ur(D,u,m),Bg;wy(N)||$d(),l=Wg(u,l,h)}else wy(N)?(l.flags|=192,l.child=u.child,l=null):(u=W.treeContext,St=$r(N.nextSibling),An=l,nt=!0,ao=null,Vr=!1,u!==null&&eE(l,u),l=Ug(l,m.children),l.flags|=4096);return l}return w?(fo(),N=m.fallback,w=l.mode,W=u.child,te=W.sibling,m=ii(W,{mode:"hidden",children:m.children}),m.subtreeFlags=W.subtreeFlags&65011712,te!==null?N=ii(te,N):(N=nu(N,w,h,null),N.flags|=2),N.return=l,m.return=l,m.sibling=N,l.child=m,ac(null,m),m=l.child,N=u.child.memoizedState,N===null?N=jg(h):(w=N.cachePool,w!==null?(W=Gt._currentValue,w=w.parent!==W?{parent:W,pool:W}:w):w=oE(),N={baseLanes:N.baseLanes|h,cachePool:w}),m.memoizedState=N,m.childLanes=zg(u,D,h),l.memoizedState=Fg,ac(u.child,m)):(co(l),h=u.child,u=h.sibling,h=ii(h,{mode:"visible",children:m.children}),h.return=l,h.sibling=null,u!==null&&(D=l.deletions,D===null?(l.deletions=[u],l.flags|=16):D.push(u)),l.child=h,l.memoizedState=null,h)}function Ug(u,l){return l=Fd({mode:"visible",children:l},u.mode),l.return=u,u.child=l}function Fd(u,l){return u=br(22,u,null,l),u.lanes=0,u}function Wg(u,l,h){return lu(l,u.child,null,h),u=Ug(l,l.pendingProps.children),u.flags|=2,l.memoizedState=null,u}function b_(u,l,h){u.lanes|=l;var m=u.alternate;m!==null&&(m.lanes|=l),rg(u.return,l,h)}function Hg(u,l,h,m,w,E){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:w,treeForkCount:E}:(D.isBackwards=l,D.rendering=null,D.renderingStartTime=0,D.last=m,D.tail=h,D.tailMode=w,D.treeForkCount=E)}function x_(u,l,h){var m=l.pendingProps,w=m.revealOrder,E=m.tail;m=m.children;var D=jt.current,N=(D&2)!==0;if(N?(D=D&1|2,l.flags|=128):D&=1,ce(jt,D),Tn(u,l,m,h),m=nt?Vl:0,!N&&u!==null&&(u.flags&128)!==0)e:for(u=l.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&b_(u,h,l);else if(u.tag===19)b_(u,h,l);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(w){case"forwards":for(h=l.child,w=null;h!==null;)u=h.alternate,u!==null&&Ad(u)===null&&(w=h),h=h.sibling;h=w,h===null?(w=l.child,l.child=null):(w=h.sibling,h.sibling=null),Hg(l,!1,w,h,E,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,w=l.child,l.child=null;w!==null;){if(u=w.alternate,u!==null&&Ad(u)===null){l.child=w;break}u=w.sibling,w.sibling=h,h=w,w=u}Hg(l,!0,h,null,E,m);break;case"together":Hg(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function fi(u,l,h){if(u!==null&&(l.dependencies=u.dependencies),vo|=l.lanes,(h&l.childLanes)===0)if(u!==null){if(ps(u,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(u!==null&&l.child!==u.child)throw Error(r(153));if(l.child!==null){for(u=l.child,h=ii(u,u.pendingProps),l.child=h,h.return=l;u.sibling!==null;)u=u.sibling,h=h.sibling=ii(u,u.pendingProps),h.return=l;h.sibling=null}return l.child}function qg(u,l){return(u.lanes&l)!==0?!0:(u=u.dependencies,!!(u!==null&&yd(u)))}function XF(u,l,h){switch(l.tag){case 3:Pe(l,l.stateNode.containerInfo),oo(l,Gt,u.memoizedState.cache),ru();break;case 27:case 5:Ae(l);break;case 4:Pe(l,l.stateNode.containerInfo);break;case 10:oo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,vg(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(co(l),l.flags|=128,null):(h&l.child.childLanes)!==0?y_(u,l,h):(co(l),u=fi(u,l,h),u!==null?u.sibling:null);co(l);break;case 19:var w=(u.flags&128)!==0;if(m=(h&l.childLanes)!==0,m||(ps(u,l,h,!1),m=(h&l.childLanes)!==0),w){if(m)return x_(u,l,h);l.flags|=128}if(w=l.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ce(jt,jt.current),m)break;return null;case 22:return l.lanes=0,d_(u,l,h,l.pendingProps);case 24:oo(l,Gt,u.memoizedState.cache)}return fi(u,l,h)}function w_(u,l,h){if(u!==null)if(u.memoizedProps!==l.pendingProps)Kt=!0;else{if(!qg(u,h)&&(l.flags&128)===0)return Kt=!1,XF(u,l,h);Kt=(u.flags&131072)!==0}else Kt=!1,nt&&(l.flags&1048576)!==0&&JS(l,Vl,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(u=uu(l.elementType),l.type=u,typeof u=="function")Xm(u)?(m=fu(u,m),l.tag=1,l=m_(null,l,u,m,h)):(l.tag=0,l=Lg(null,l,u,m,h));else{if(u!=null){var w=u.$$typeof;if(w===A){l.tag=11,l=l_(null,l,u,m,h);break e}else if(w===M){l.tag=14,l=c_(null,l,u,m,h);break e}}throw l=Z(u)||u,Error(r(306,l,""))}}return l;case 0:return Lg(u,l,l.type,l.pendingProps,h);case 1:return m=l.type,w=fu(m,l.pendingProps),m_(u,l,m,w,h);case 3:e:{if(Pe(l,l.stateNode.containerInfo),u===null)throw Error(r(387));m=l.pendingProps;var E=l.memoizedState;w=E.element,cg(u,l),Jl(l,m,null,h);var D=l.memoizedState;if(m=D.cache,oo(l,Gt,m),m!==E.cache&&ag(l,[Gt],h,!0),Ql(),m=D.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:D.cache},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){l=g_(u,l,m,h);break e}else if(m!==w){w=Wr(Error(r(424)),l),Gl(w),l=g_(u,l,m,h);break e}else for(u=l.stateNode.containerInfo,u.nodeType===9?u=u.body:u=u.nodeName==="HTML"?u.ownerDocument.body:u,St=$r(u.firstChild),An=l,nt=!0,ao=null,Vr=!0,h=dE(l,null,m,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(ru(),m===w){l=fi(u,l,h);break e}Tn(u,l,m,h)}l=l.child}return l;case 26:return Ld(u,l),u===null?(h=kC(l.type,null,l.pendingProps,null))?l.memoizedState=h:nt||(h=l.type,u=l.pendingProps,m=eh(be.current).createElement(h),m[Cn]=l,m[tr]=u,Rn(m,h,u),dn(m),l.stateNode=m):l.memoizedState=kC(l.type,u.memoizedProps,l.pendingProps,u.memoizedState),null;case 27:return Ae(l),u===null&&nt&&(m=l.stateNode=RC(l.type,l.pendingProps,be.current),An=l,Vr=!0,w=St,xo(l.type)?(Ey=w,St=$r(m.firstChild)):St=w),Tn(u,l,l.pendingProps.children,h),Ld(u,l),u===null&&(l.flags|=4194304),l.child;case 5:return u===null&&nt&&((w=m=St)&&(m=Cj(m,l.type,l.pendingProps,Vr),m!==null?(l.stateNode=m,An=l,St=$r(m.firstChild),Vr=!1,w=!0):w=!1),w||io(l)),Ae(l),w=l.type,E=l.pendingProps,D=u!==null?u.memoizedProps:null,m=E.children,yy(w,E)?m=null:D!==null&&yy(w,D)&&(l.flags|=32),l.memoizedState!==null&&(w=gg(u,l,zF,null,null,h),bc._currentValue=w),Ld(u,l),Tn(u,l,m,h),l.child;case 6:return u===null&&nt&&((u=h=St)&&(h=Aj(h,l.pendingProps,Vr),h!==null?(l.stateNode=h,An=l,St=null,u=!0):u=!1),u||io(l)),null;case 13:return y_(u,l,h);case 4:return Pe(l,l.stateNode.containerInfo),m=l.pendingProps,u===null?l.child=lu(l,null,m,h):Tn(u,l,m,h),l.child;case 11:return l_(u,l,l.type,l.pendingProps,h);case 7:return Tn(u,l,l.pendingProps,h),l.child;case 8:return Tn(u,l,l.pendingProps.children,h),l.child;case 12:return Tn(u,l,l.pendingProps.children,h),l.child;case 10:return m=l.pendingProps,oo(l,l.type,m.value),Tn(u,l,m.children,h),l.child;case 9:return w=l.type._context,m=l.pendingProps.children,iu(l),w=On(w),m=m(w),l.flags|=1,Tn(u,l,m,h),l.child;case 14:return c_(u,l,l.type,l.pendingProps,h);case 15:return f_(u,l,l.type,l.pendingProps,h);case 19:return x_(u,l,h);case 31:return KF(u,l,h);case 22:return d_(u,l,h,l.pendingProps);case 24:return iu(l),m=On(Gt),u===null?(w=ug(),w===null&&(w=yt,E=ig(),w.pooledCache=E,E.refCount++,E!==null&&(w.pooledCacheLanes|=h),w=E),l.memoizedState={parent:m,cache:w},lg(l),oo(l,Gt,w)):((u.lanes&h)!==0&&(cg(u,l),Jl(l,null,null,h),Ql()),w=u.memoizedState,E=l.memoizedState,w.parent!==m?(w={parent:m,cache:m},l.memoizedState=w,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=w),oo(l,Gt,m)):(m=E.cache,oo(l,Gt,m),m!==w.cache&&ag(l,[Gt],h,!0))),Tn(u,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function di(u){u.flags|=4}function Vg(u,l,h,m,w){if((l=(u.mode&32)!==0)&&(l=!1),l){if(u.flags|=16777216,(w&335544128)===w)if(u.stateNode.complete)u.flags|=8192;else if(K_())u.flags|=8192;else throw su=Sd,sg}else u.flags&=-16777217}function S_(u,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!LC(l))if(K_())u.flags|=8192;else throw su=Sd,sg}function jd(u,l){l!==null&&(u.flags|=4),u.flags&16384&&(l=u.tag!==22?tS():536870912,u.lanes|=l,As|=l)}function ic(u,l){if(!nt)switch(u.tailMode){case"hidden":l=u.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?u.tail=null:h.sibling=null;break;case"collapsed":h=u.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l||u.tail===null?u.tail=null:u.tail.sibling=null:m.sibling=null}}function Et(u){var l=u.alternate!==null&&u.alternate.child===u.child,h=0,m=0;if(l)for(var w=u.child;w!==null;)h|=w.lanes|w.childLanes,m|=w.subtreeFlags&65011712,m|=w.flags&65011712,w.return=u,w=w.sibling;else for(w=u.child;w!==null;)h|=w.lanes|w.childLanes,m|=w.subtreeFlags,m|=w.flags,w.return=u,w=w.sibling;return u.subtreeFlags|=m,u.childLanes=h,l}function YF(u,l,h){var m=l.pendingProps;switch(Jm(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(l),null;case 1:return Et(l),null;case 3:return h=l.stateNode,m=null,u!==null&&(m=u.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),si(Gt),ne(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(u===null||u.child===null)&&(hs(l)?di(l):u===null||u.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,tg())),Et(l),null;case 26:var w=l.type,E=l.memoizedState;return u===null?(di(l),E!==null?(Et(l),S_(l,E)):(Et(l),Vg(l,w,null,m,h))):E?E!==u.memoizedState?(di(l),Et(l),S_(l,E)):(Et(l),l.flags&=-16777217):(u=u.memoizedProps,u!==m&&di(l),Et(l),Vg(l,w,u,m,h)),null;case 27:if(Se(l),h=be.current,w=l.type,u!==null&&l.stateNode!=null)u.memoizedProps!==m&&di(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Et(l),null}u=ve.current,hs(l)?tE(l):(u=RC(w,m,h),l.stateNode=u,di(l))}return Et(l),null;case 5:if(Se(l),w=l.type,u!==null&&l.stateNode!=null)u.memoizedProps!==m&&di(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Et(l),null}if(E=ve.current,hs(l))tE(l);else{var D=eh(be.current);switch(E){case 1:E=D.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:E=D.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":E=D.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":E=D.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":E=D.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof m.is=="string"?D.createElement("select",{is:m.is}):D.createElement("select"),m.multiple?E.multiple=!0:m.size&&(E.size=m.size);break;default:E=typeof m.is=="string"?D.createElement(w,{is:m.is}):D.createElement(w)}}E[Cn]=l,E[tr]=m;e:for(D=l.child;D!==null;){if(D.tag===5||D.tag===6)E.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===l)break e;for(;D.sibling===null;){if(D.return===null||D.return===l)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}l.stateNode=E;e:switch(Rn(E,w,m),w){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&di(l)}}return Et(l),Vg(l,l.type,u===null?null:u.memoizedProps,l.pendingProps,h),null;case 6:if(u&&l.stateNode!=null)u.memoizedProps!==m&&di(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(u=be.current,hs(l)){if(u=l.stateNode,h=l.memoizedProps,m=null,w=An,w!==null)switch(w.tag){case 27:case 5:m=w.memoizedProps}u[Cn]=l,u=!!(u.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||yC(u.nodeValue,h)),u||io(l,!0)}else u=eh(u).createTextNode(m),u[Cn]=l,l.stateNode=u}return Et(l),null;case 31:if(h=l.memoizedState,u===null||u.memoizedState!==null){if(m=hs(l),h!==null){if(u===null){if(!m)throw Error(r(318));if(u=l.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(557));u[Cn]=l}else ru(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Et(l),u=!1}else h=tg(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=h),u=!0;if(!u)return l.flags&256?(wr(l),l):(wr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Et(l),null;case 13:if(m=l.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(w=hs(l),m!==null&&m.dehydrated!==null){if(u===null){if(!w)throw Error(r(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[Cn]=l}else ru(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Et(l),w=!1}else w=tg(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=w),w=!0;if(!w)return l.flags&256?(wr(l),l):(wr(l),null)}return wr(l),(l.flags&128)!==0?(l.lanes=h,l):(h=m!==null,u=u!==null&&u.memoizedState!==null,h&&(m=l.child,w=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(w=m.alternate.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==w&&(m.flags|=2048)),h!==u&&h&&(l.child.flags|=8192),jd(l,l.updateQueue),Et(l),null);case 4:return ne(),u===null&&hy(l.stateNode.containerInfo),Et(l),null;case 10:return si(l.type),Et(l),null;case 19:if(K(jt),m=l.memoizedState,m===null)return Et(l),null;if(w=(l.flags&128)!==0,E=m.rendering,E===null)if(w)ic(m,!1);else{if(Bt!==0||u!==null&&(u.flags&128)!==0)for(u=l.child;u!==null;){if(E=Ad(u),E!==null){for(l.flags|=128,ic(m,!1),u=E.updateQueue,l.updateQueue=u,jd(l,u),l.subtreeFlags=0,u=h,h=l.child;h!==null;)YS(h,u),h=h.sibling;return ce(jt,jt.current&1|2),nt&&oi(l,m.treeForkCount),l.child}u=u.sibling}m.tail!==null&&Vt()>qd&&(l.flags|=128,w=!0,ic(m,!1),l.lanes=4194304)}else{if(!w)if(u=Ad(E),u!==null){if(l.flags|=128,w=!0,u=u.updateQueue,l.updateQueue=u,jd(l,u),ic(m,!0),m.tail===null&&m.tailMode==="hidden"&&!E.alternate&&!nt)return Et(l),null}else 2*Vt()-m.renderingStartTime>qd&&h!==536870912&&(l.flags|=128,w=!0,ic(m,!1),l.lanes=4194304);m.isBackwards?(E.sibling=l.child,l.child=E):(u=m.last,u!==null?u.sibling=E:l.child=E,m.last=E)}return m.tail!==null?(u=m.tail,m.rendering=u,m.tail=u.sibling,m.renderingStartTime=Vt(),u.sibling=null,h=jt.current,ce(jt,w?h&1|2:h&1),nt&&oi(l,m.treeForkCount),u):(Et(l),null);case 22:case 23:return wr(l),pg(),m=l.memoizedState!==null,u!==null?u.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(h&536870912)!==0&&(l.flags&128)===0&&(Et(l),l.subtreeFlags&6&&(l.flags|=8192)):Et(l),h=l.updateQueue,h!==null&&jd(l,h.retryQueue),h=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(h=u.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048),u!==null&&K(ou),null;case 24:return h=null,u!==null&&(h=u.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),si(Gt),Et(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function ZF(u,l){switch(Jm(l),l.tag){case 1:return u=l.flags,u&65536?(l.flags=u&-65537|128,l):null;case 3:return si(Gt),ne(),u=l.flags,(u&65536)!==0&&(u&128)===0?(l.flags=u&-65537|128,l):null;case 26:case 27:case 5:return Se(l),null;case 31:if(l.memoizedState!==null){if(wr(l),l.alternate===null)throw Error(r(340));ru()}return u=l.flags,u&65536?(l.flags=u&-65537|128,l):null;case 13:if(wr(l),u=l.memoizedState,u!==null&&u.dehydrated!==null){if(l.alternate===null)throw Error(r(340));ru()}return u=l.flags,u&65536?(l.flags=u&-65537|128,l):null;case 19:return K(jt),null;case 4:return ne(),null;case 10:return si(l.type),null;case 22:case 23:return wr(l),pg(),u!==null&&K(ou),u=l.flags,u&65536?(l.flags=u&-65537|128,l):null;case 24:return si(Gt),null;case 25:return null;default:return null}}function E_(u,l){switch(Jm(l),l.tag){case 3:si(Gt),ne();break;case 26:case 27:case 5:Se(l);break;case 4:ne();break;case 31:l.memoizedState!==null&&wr(l);break;case 13:wr(l);break;case 19:K(jt);break;case 10:si(l.type);break;case 22:case 23:wr(l),pg(),u!==null&&K(ou);break;case 24:si(Gt)}}function oc(u,l){try{var h=l.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var w=m.next;h=w;do{if((h.tag&u)===u){m=void 0;var E=h.create,D=h.inst;m=E(),D.destroy=m}h=h.next}while(h!==w)}}catch(N){ft(l,l.return,N)}}function ho(u,l,h){try{var m=l.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var E=w.next;m=E;do{if((m.tag&u)===u){var D=m.inst,N=D.destroy;if(N!==void 0){D.destroy=void 0,w=l;var W=h,te=N;try{te()}catch(fe){ft(w,W,fe)}}}m=m.next}while(m!==E)}}catch(fe){ft(l,l.return,fe)}}function __(u){var l=u.updateQueue;if(l!==null){var h=u.stateNode;try{pE(l,h)}catch(m){ft(u,u.return,m)}}}function C_(u,l,h){h.props=fu(u.type,u.memoizedProps),h.state=u.memoizedState;try{h.componentWillUnmount()}catch(m){ft(u,l,m)}}function uc(u,l){try{var h=u.ref;if(h!==null){switch(u.tag){case 26:case 27:case 5:var m=u.stateNode;break;case 30:m=u.stateNode;break;default:m=u.stateNode}typeof h=="function"?u.refCleanup=h(m):h.current=m}}catch(w){ft(u,l,w)}}function ka(u,l){var h=u.ref,m=u.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(w){ft(u,l,w)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(w){ft(u,l,w)}else h.current=null}function A_(u){var l=u.type,h=u.memoizedProps,m=u.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(w){ft(u,u.return,w)}}function Gg(u,l,h){try{var m=u.stateNode;bj(m,u.type,h,l),m[tr]=l}catch(w){ft(u,u.return,w)}}function O_(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&xo(u.type)||u.tag===4}function $g(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||O_(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&xo(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Kg(u,l,h){var m=u.tag;if(m===5||m===6)u=u.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(u,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(u),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=ri));else if(m!==4&&(m===27&&xo(u.type)&&(h=u.stateNode,l=null),u=u.child,u!==null))for(Kg(u,l,h),u=u.sibling;u!==null;)Kg(u,l,h),u=u.sibling}function zd(u,l,h){var m=u.tag;if(m===5||m===6)u=u.stateNode,l?h.insertBefore(u,l):h.appendChild(u);else if(m!==4&&(m===27&&xo(u.type)&&(h=u.stateNode),u=u.child,u!==null))for(zd(u,l,h),u=u.sibling;u!==null;)zd(u,l,h),u=u.sibling}function T_(u){var l=u.stateNode,h=u.memoizedProps;try{for(var m=u.type,w=l.attributes;w.length;)l.removeAttributeNode(w[0]);Rn(l,m,h),l[Cn]=u,l[tr]=h}catch(E){ft(u,u.return,E)}}var hi=!1,Xt=!1,Xg=!1,R_=typeof WeakSet=="function"?WeakSet:Set,hn=null;function QF(u,l){if(u=u.containerInfo,my=uh,u=US(u),Wm(u)){if("selectionStart"in u)var h={start:u.selectionStart,end:u.selectionEnd};else e:{h=(h=u.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var w=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var D=0,N=-1,W=-1,te=0,fe=0,me=u,re=null;t:for(;;){for(var ue;me!==h||w!==0&&me.nodeType!==3||(N=D+w),me!==E||m!==0&&me.nodeType!==3||(W=D+m),me.nodeType===3&&(D+=me.nodeValue.length),(ue=me.firstChild)!==null;)re=me,me=ue;for(;;){if(me===u)break t;if(re===h&&++te===w&&(N=D),re===E&&++fe===m&&(W=D),(ue=me.nextSibling)!==null)break;me=re,re=me.parentNode}me=ue}h=N===-1||W===-1?null:{start:N,end:W}}else h=null}h=h||{start:0,end:0}}else h=null;for(gy={focusedElem:u,selectionRange:h},uh=!1,hn=l;hn!==null;)if(l=hn,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,hn=u;else for(;hn!==null;){switch(l=hn,E=l.alternate,u=l.flags,l.tag){case 0:if((u&4)!==0&&(u=l.updateQueue,u=u!==null?u.events:null,u!==null))for(h=0;h<u.length;h++)w=u[h],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&E!==null){u=void 0,h=l,w=E.memoizedProps,E=E.memoizedState,m=h.stateNode;try{var Ce=fu(h.type,w);u=m.getSnapshotBeforeUpdate(Ce,E),m.__reactInternalSnapshotBeforeUpdate=u}catch(Fe){ft(h,h.return,Fe)}}break;case 3:if((u&1024)!==0){if(u=l.stateNode.containerInfo,h=u.nodeType,h===9)xy(u);else if(h===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":xy(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=l.sibling,u!==null){u.return=l.return,hn=u;break}hn=l.return}}function D_(u,l,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:vi(u,h),m&4&&oc(5,h);break;case 1:if(vi(u,h),m&4)if(u=h.stateNode,l===null)try{u.componentDidMount()}catch(D){ft(h,h.return,D)}else{var w=fu(h.type,l.memoizedProps);l=l.memoizedState;try{u.componentDidUpdate(w,l,u.__reactInternalSnapshotBeforeUpdate)}catch(D){ft(h,h.return,D)}}m&64&&__(h),m&512&&uc(h,h.return);break;case 3:if(vi(u,h),m&64&&(u=h.updateQueue,u!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{pE(u,l)}catch(D){ft(h,h.return,D)}}break;case 27:l===null&&m&4&&T_(h);case 26:case 5:vi(u,h),l===null&&m&4&&A_(h),m&512&&uc(h,h.return);break;case 12:vi(u,h);break;case 31:vi(u,h),m&4&&N_(u,h);break;case 13:vi(u,h),m&4&&I_(u,h),m&64&&(u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(h=uj.bind(null,h),Oj(u,h))));break;case 22:if(m=h.memoizedState!==null||hi,!m){l=l!==null&&l.memoizedState!==null||Xt,w=hi;var E=Xt;hi=m,(Xt=l)&&!E?mi(u,h,(h.subtreeFlags&8772)!==0):vi(u,h),hi=w,Xt=E}break;case 30:break;default:vi(u,h)}}function M_(u){var l=u.alternate;l!==null&&(u.alternate=null,M_(l)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(l=u.stateNode,l!==null&&Cm(l)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Ot=null,rr=!1;function pi(u,l,h){for(h=h.child;h!==null;)k_(u,l,h),h=h.sibling}function k_(u,l,h){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(ti,h)}catch{}switch(h.tag){case 26:Xt||ka(h,l),pi(u,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Xt||ka(h,l);var m=Ot,w=rr;xo(h.type)&&(Ot=h.stateNode,rr=!1),pi(u,l,h),mc(h.stateNode),Ot=m,rr=w;break;case 5:Xt||ka(h,l);case 6:if(m=Ot,w=rr,Ot=null,pi(u,l,h),Ot=m,rr=w,Ot!==null)if(rr)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(h.stateNode)}catch(E){ft(h,l,E)}else try{Ot.removeChild(h.stateNode)}catch(E){ft(h,l,E)}break;case 18:Ot!==null&&(rr?(u=Ot,_C(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,h.stateNode),Is(u)):_C(Ot,h.stateNode));break;case 4:m=Ot,w=rr,Ot=h.stateNode.containerInfo,rr=!0,pi(u,l,h),Ot=m,rr=w;break;case 0:case 11:case 14:case 15:ho(2,h,l),Xt||ho(4,h,l),pi(u,l,h);break;case 1:Xt||(ka(h,l),m=h.stateNode,typeof m.componentWillUnmount=="function"&&C_(h,l,m)),pi(u,l,h);break;case 21:pi(u,l,h);break;case 22:Xt=(m=Xt)||h.memoizedState!==null,pi(u,l,h),Xt=m;break;default:pi(u,l,h)}}function N_(u,l){if(l.memoizedState===null&&(u=l.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{Is(u)}catch(h){ft(l,l.return,h)}}}function I_(u,l){if(l.memoizedState===null&&(u=l.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Is(u)}catch(h){ft(l,l.return,h)}}function JF(u){switch(u.tag){case 31:case 13:case 19:var l=u.stateNode;return l===null&&(l=u.stateNode=new R_),l;case 22:return u=u.stateNode,l=u._retryCache,l===null&&(l=u._retryCache=new R_),l;default:throw Error(r(435,u.tag))}}function Ud(u,l){var h=JF(u);l.forEach(function(m){if(!h.has(m)){h.add(m);var w=sj.bind(null,u,m);m.then(w,w)}})}function ar(u,l){var h=l.deletions;if(h!==null)for(var m=0;m<h.length;m++){var w=h[m],E=u,D=l,N=D;e:for(;N!==null;){switch(N.tag){case 27:if(xo(N.type)){Ot=N.stateNode,rr=!1;break e}break;case 5:Ot=N.stateNode,rr=!1;break e;case 3:case 4:Ot=N.stateNode.containerInfo,rr=!0;break e}N=N.return}if(Ot===null)throw Error(r(160));k_(E,D,w),Ot=null,rr=!1,E=w.alternate,E!==null&&(E.return=null),w.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)P_(l,u),l=l.sibling}var da=null;function P_(u,l){var h=u.alternate,m=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:ar(l,u),ir(u),m&4&&(ho(3,u,u.return),oc(3,u),ho(5,u,u.return));break;case 1:ar(l,u),ir(u),m&512&&(Xt||h===null||ka(h,h.return)),m&64&&hi&&(u=u.updateQueue,u!==null&&(m=u.callbacks,m!==null&&(h=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var w=da;if(ar(l,u),ir(u),m&512&&(Xt||h===null||ka(h,h.return)),m&4){var E=h!==null?h.memoizedState:null;if(m=u.memoizedState,h===null)if(m===null)if(u.stateNode===null){e:{m=u.type,h=u.memoizedProps,w=w.ownerDocument||w;t:switch(m){case"title":E=w.getElementsByTagName("title")[0],(!E||E[Il]||E[Cn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=w.createElement(m),w.head.insertBefore(E,w.querySelector("head > title"))),Rn(E,m,h),E[Cn]=u,dn(E),m=E;break e;case"link":var D=PC("link","href",w).get(m+(h.href||""));if(D){for(var N=0;N<D.length;N++)if(E=D[N],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){D.splice(N,1);break t}}E=w.createElement(m),Rn(E,m,h),w.head.appendChild(E);break;case"meta":if(D=PC("meta","content",w).get(m+(h.content||""))){for(N=0;N<D.length;N++)if(E=D[N],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){D.splice(N,1);break t}}E=w.createElement(m),Rn(E,m,h),w.head.appendChild(E);break;default:throw Error(r(468,m))}E[Cn]=u,dn(E),m=E}u.stateNode=m}else BC(w,u.type,u.stateNode);else u.stateNode=IC(w,m,u.memoizedProps);else E!==m?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,m===null?BC(w,u.type,u.stateNode):IC(w,m,u.memoizedProps)):m===null&&u.stateNode!==null&&Gg(u,u.memoizedProps,h.memoizedProps)}break;case 27:ar(l,u),ir(u),m&512&&(Xt||h===null||ka(h,h.return)),h!==null&&m&4&&Gg(u,u.memoizedProps,h.memoizedProps);break;case 5:if(ar(l,u),ir(u),m&512&&(Xt||h===null||ka(h,h.return)),u.flags&32){w=u.stateNode;try{rs(w,"")}catch(Ce){ft(u,u.return,Ce)}}m&4&&u.stateNode!=null&&(w=u.memoizedProps,Gg(u,w,h!==null?h.memoizedProps:w)),m&1024&&(Xg=!0);break;case 6:if(ar(l,u),ir(u),m&4){if(u.stateNode===null)throw Error(r(162));m=u.memoizedProps,h=u.stateNode;try{h.nodeValue=m}catch(Ce){ft(u,u.return,Ce)}}break;case 3:if(rh=null,w=da,da=th(l.containerInfo),ar(l,u),da=w,ir(u),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Is(l.containerInfo)}catch(Ce){ft(u,u.return,Ce)}Xg&&(Xg=!1,B_(u));break;case 4:m=da,da=th(u.stateNode.containerInfo),ar(l,u),ir(u),da=m;break;case 12:ar(l,u),ir(u);break;case 31:ar(l,u),ir(u),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,Ud(u,m)));break;case 13:ar(l,u),ir(u),u.child.flags&8192&&u.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Hd=Vt()),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,Ud(u,m)));break;case 22:w=u.memoizedState!==null;var W=h!==null&&h.memoizedState!==null,te=hi,fe=Xt;if(hi=te||w,Xt=fe||W,ar(l,u),Xt=fe,hi=te,ir(u),m&8192)e:for(l=u.stateNode,l._visibility=w?l._visibility&-2:l._visibility|1,w&&(h===null||W||hi||Xt||du(u)),h=null,l=u;;){if(l.tag===5||l.tag===26){if(h===null){W=h=l;try{if(E=W.stateNode,w)D=E.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{N=W.stateNode;var me=W.memoizedProps.style,re=me!=null&&me.hasOwnProperty("display")?me.display:null;N.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Ce){ft(W,W.return,Ce)}}}else if(l.tag===6){if(h===null){W=l;try{W.stateNode.nodeValue=w?"":W.memoizedProps}catch(Ce){ft(W,W.return,Ce)}}}else if(l.tag===18){if(h===null){W=l;try{var ue=W.stateNode;w?CC(ue,!0):CC(W.stateNode,!1)}catch(Ce){ft(W,W.return,Ce)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===u)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=u.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Ud(u,h))));break;case 19:ar(l,u),ir(u),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,Ud(u,m)));break;case 30:break;case 21:break;default:ar(l,u),ir(u)}}function ir(u){var l=u.flags;if(l&2){try{for(var h,m=u.return;m!==null;){if(O_(m)){h=m;break}m=m.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var w=h.stateNode,E=$g(u);zd(u,E,w);break;case 5:var D=h.stateNode;h.flags&32&&(rs(D,""),h.flags&=-33);var N=$g(u);zd(u,N,D);break;case 3:case 4:var W=h.stateNode.containerInfo,te=$g(u);Kg(u,te,W);break;default:throw Error(r(161))}}catch(fe){ft(u,u.return,fe)}u.flags&=-3}l&4096&&(u.flags&=-4097)}function B_(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var l=u;B_(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),u=u.sibling}}function vi(u,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)D_(u,l.alternate,l),l=l.sibling}function du(u){for(u=u.child;u!==null;){var l=u;switch(l.tag){case 0:case 11:case 14:case 15:ho(4,l,l.return),du(l);break;case 1:ka(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&C_(l,l.return,h),du(l);break;case 27:mc(l.stateNode);case 26:case 5:ka(l,l.return),du(l);break;case 22:l.memoizedState===null&&du(l);break;case 30:du(l);break;default:du(l)}u=u.sibling}}function mi(u,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,w=u,E=l,D=E.flags;switch(E.tag){case 0:case 11:case 15:mi(w,E,h),oc(4,E);break;case 1:if(mi(w,E,h),m=E,w=m.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(te){ft(m,m.return,te)}if(m=E,w=m.updateQueue,w!==null){var N=m.stateNode;try{var W=w.shared.hiddenCallbacks;if(W!==null)for(w.shared.hiddenCallbacks=null,w=0;w<W.length;w++)hE(W[w],N)}catch(te){ft(m,m.return,te)}}h&&D&64&&__(E),uc(E,E.return);break;case 27:T_(E);case 26:case 5:mi(w,E,h),h&&m===null&&D&4&&A_(E),uc(E,E.return);break;case 12:mi(w,E,h);break;case 31:mi(w,E,h),h&&D&4&&N_(w,E);break;case 13:mi(w,E,h),h&&D&4&&I_(w,E);break;case 22:E.memoizedState===null&&mi(w,E,h),uc(E,E.return);break;case 30:break;default:mi(w,E,h)}l=l.sibling}}function Yg(u,l){var h=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(h=u.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==h&&(u!=null&&u.refCount++,h!=null&&$l(h))}function Zg(u,l){u=null,l.alternate!==null&&(u=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==u&&(l.refCount++,u!=null&&$l(u))}function ha(u,l,h,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)L_(u,l,h,m),l=l.sibling}function L_(u,l,h,m){var w=l.flags;switch(l.tag){case 0:case 11:case 15:ha(u,l,h,m),w&2048&&oc(9,l);break;case 1:ha(u,l,h,m);break;case 3:ha(u,l,h,m),w&2048&&(u=null,l.alternate!==null&&(u=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==u&&(l.refCount++,u!=null&&$l(u)));break;case 12:if(w&2048){ha(u,l,h,m),u=l.stateNode;try{var E=l.memoizedProps,D=E.id,N=E.onPostCommit;typeof N=="function"&&N(D,l.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(W){ft(l,l.return,W)}}else ha(u,l,h,m);break;case 31:ha(u,l,h,m);break;case 13:ha(u,l,h,m);break;case 23:break;case 22:E=l.stateNode,D=l.alternate,l.memoizedState!==null?E._visibility&2?ha(u,l,h,m):sc(u,l):E._visibility&2?ha(u,l,h,m):(E._visibility|=2,Es(u,l,h,m,(l.subtreeFlags&10256)!==0||!1)),w&2048&&Yg(D,l);break;case 24:ha(u,l,h,m),w&2048&&Zg(l.alternate,l);break;default:ha(u,l,h,m)}}function Es(u,l,h,m,w){for(w=w&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var E=u,D=l,N=h,W=m,te=D.flags;switch(D.tag){case 0:case 11:case 15:Es(E,D,N,W,w),oc(8,D);break;case 23:break;case 22:var fe=D.stateNode;D.memoizedState!==null?fe._visibility&2?Es(E,D,N,W,w):sc(E,D):(fe._visibility|=2,Es(E,D,N,W,w)),w&&te&2048&&Yg(D.alternate,D);break;case 24:Es(E,D,N,W,w),w&&te&2048&&Zg(D.alternate,D);break;default:Es(E,D,N,W,w)}l=l.sibling}}function sc(u,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=u,m=l,w=m.flags;switch(m.tag){case 22:sc(h,m),w&2048&&Yg(m.alternate,m);break;case 24:sc(h,m),w&2048&&Zg(m.alternate,m);break;default:sc(h,m)}l=l.sibling}}var lc=8192;function _s(u,l,h){if(u.subtreeFlags&lc)for(u=u.child;u!==null;)F_(u,l,h),u=u.sibling}function F_(u,l,h){switch(u.tag){case 26:_s(u,l,h),u.flags&lc&&u.memoizedState!==null&&jj(h,da,u.memoizedState,u.memoizedProps);break;case 5:_s(u,l,h);break;case 3:case 4:var m=da;da=th(u.stateNode.containerInfo),_s(u,l,h),da=m;break;case 22:u.memoizedState===null&&(m=u.alternate,m!==null&&m.memoizedState!==null?(m=lc,lc=16777216,_s(u,l,h),lc=m):_s(u,l,h));break;default:_s(u,l,h)}}function j_(u){var l=u.alternate;if(l!==null&&(u=l.child,u!==null)){l.child=null;do l=u.sibling,u.sibling=null,u=l;while(u!==null)}}function cc(u){var l=u.deletions;if((u.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];hn=m,U_(m,u)}j_(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)z_(u),u=u.sibling}function z_(u){switch(u.tag){case 0:case 11:case 15:cc(u),u.flags&2048&&ho(9,u,u.return);break;case 3:cc(u);break;case 12:cc(u);break;case 22:var l=u.stateNode;u.memoizedState!==null&&l._visibility&2&&(u.return===null||u.return.tag!==13)?(l._visibility&=-3,Wd(u)):cc(u);break;default:cc(u)}}function Wd(u){var l=u.deletions;if((u.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];hn=m,U_(m,u)}j_(u)}for(u=u.child;u!==null;){switch(l=u,l.tag){case 0:case 11:case 15:ho(8,l,l.return),Wd(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,Wd(l));break;default:Wd(l)}u=u.sibling}}function U_(u,l){for(;hn!==null;){var h=hn;switch(h.tag){case 0:case 11:case 15:ho(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:$l(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,hn=m;else e:for(h=u;hn!==null;){m=hn;var w=m.sibling,E=m.return;if(M_(m),m===h){hn=null;break e}if(w!==null){w.return=E,hn=w;break e}hn=E}}}var ej={getCacheForType:function(u){var l=On(Gt),h=l.data.get(u);return h===void 0&&(h=u(),l.data.set(u,h)),h},cacheSignal:function(){return On(Gt).controller.signal}},tj=typeof WeakMap=="function"?WeakMap:Map,ut=0,yt=null,Ze=null,et=0,ct=0,Sr=null,po=!1,Cs=!1,Qg=!1,gi=0,Bt=0,vo=0,hu=0,Jg=0,Er=0,As=0,fc=null,or=null,ey=!1,Hd=0,W_=0,qd=1/0,Vd=null,mo=null,Jt=0,go=null,Os=null,yi=0,ty=0,ny=null,H_=null,dc=0,ry=null;function _r(){return(ut&2)!==0&&et!==0?et&-et:U.T!==null?ly():iS()}function q_(){if(Er===0)if((et&536870912)===0||nt){var u=Jf;Jf<<=1,(Jf&3932160)===0&&(Jf=262144),Er=u}else Er=536870912;return u=xr.current,u!==null&&(u.flags|=32),Er}function ur(u,l,h){(u===yt&&(ct===2||ct===9)||u.cancelPendingCommit!==null)&&(Ts(u,0),yo(u,et,Er,!1)),Nl(u,h),((ut&2)===0||u!==yt)&&(u===yt&&((ut&2)===0&&(hu|=h),Bt===4&&yo(u,et,Er,!1)),Na(u))}function V_(u,l,h){if((ut&6)!==0)throw Error(r(327));var m=!h&&(l&127)===0&&(l&u.expiredLanes)===0||kl(u,l),w=m?aj(u,l):iy(u,l,!0),E=m;do{if(w===0){Cs&&!m&&yo(u,l,0,!1);break}else{if(h=u.current.alternate,E&&!nj(h)){w=iy(u,l,!1),E=!1;continue}if(w===2){if(E=l,u.errorRecoveryDisabledLanes&E)var D=0;else D=u.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){l=D;e:{var N=u;w=fc;var W=N.current.memoizedState.isDehydrated;if(W&&(Ts(N,D).flags|=256),D=iy(N,D,!1),D!==2){if(Qg&&!W){N.errorRecoveryDisabledLanes|=E,hu|=E,w=4;break e}E=or,or=w,E!==null&&(or===null?or=E:or.push.apply(or,E))}w=D}if(E=!1,w!==2)continue}}if(w===1){Ts(u,0),yo(u,l,0,!0);break}e:{switch(m=u,E=w,E){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:yo(m,l,Er,!po);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(w=Hd+300-Vt(),10<w)){if(yo(m,l,Er,!po),td(m,0,!0)!==0)break e;yi=l,m.timeoutHandle=SC(G_.bind(null,m,h,or,Vd,ey,l,Er,hu,As,po,E,"Throttled",-0,0),w);break e}G_(m,h,or,Vd,ey,l,Er,hu,As,po,E,null,-0,0)}}break}while(!0);Na(u)}function G_(u,l,h,m,w,E,D,N,W,te,fe,me,re,ue){if(u.timeoutHandle=-1,me=l.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},F_(l,E,me);var Ce=(E&62914560)===E?Hd-Vt():(E&4194048)===E?W_-Vt():0;if(Ce=zj(me,Ce),Ce!==null){yi=E,u.cancelPendingCommit=Ce(eC.bind(null,u,l,E,h,m,w,D,N,W,fe,me,null,re,ue)),yo(u,E,D,!te);return}}eC(u,l,E,h,m,w,D,N,W)}function nj(u){for(var l=u;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var w=h[m],E=w.getSnapshot;w=w.value;try{if(!yr(E(),w))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===u)break;for(;l.sibling===null;){if(l.return===null||l.return===u)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function yo(u,l,h,m){l&=~Jg,l&=~hu,u.suspendedLanes|=l,u.pingedLanes&=~l,m&&(u.warmLanes|=l),m=u.expirationTimes;for(var w=l;0<w;){var E=31-gr(w),D=1<<E;m[E]=-1,w&=~D}h!==0&&nS(u,h,l)}function Gd(){return(ut&6)===0?(hc(0),!1):!0}function ay(){if(Ze!==null){if(ct===0)var u=Ze.return;else u=Ze,ui=au=null,xg(u),ys=null,Xl=0,u=Ze;for(;u!==null;)E_(u.alternate,u),u=u.return;Ze=null}}function Ts(u,l){var h=u.timeoutHandle;h!==-1&&(u.timeoutHandle=-1,Sj(h)),h=u.cancelPendingCommit,h!==null&&(u.cancelPendingCommit=null,h()),yi=0,ay(),yt=u,Ze=h=ii(u.current,null),et=l,ct=0,Sr=null,po=!1,Cs=kl(u,l),Qg=!1,As=Er=Jg=hu=vo=Bt=0,or=fc=null,ey=!1,(l&8)!==0&&(l|=l&32);var m=u.entangledLanes;if(m!==0)for(u=u.entanglements,m&=l;0<m;){var w=31-gr(m),E=1<<w;l|=u[w],m&=~E}return gi=l,hd(),h}function $_(u,l){Ve=null,U.H=rc,l===gs||l===wd?(l=lE(),ct=3):l===sg?(l=lE(),ct=4):ct=l===Bg?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Sr=l,Ze===null&&(Bt=1,Pd(u,Wr(l,u.current)))}function K_(){var u=xr.current;return u===null?!0:(et&4194048)===et?Gr===null:(et&62914560)===et||(et&536870912)!==0?u===Gr:!1}function X_(){var u=U.H;return U.H=rc,u===null?rc:u}function Y_(){var u=U.A;return U.A=ej,u}function $d(){Bt=4,po||(et&4194048)!==et&&xr.current!==null||(Cs=!0),(vo&134217727)===0&&(hu&134217727)===0||yt===null||yo(yt,et,Er,!1)}function iy(u,l,h){var m=ut;ut|=2;var w=X_(),E=Y_();(yt!==u||et!==l)&&(Vd=null,Ts(u,l)),l=!1;var D=Bt;e:do try{if(ct!==0&&Ze!==null){var N=Ze,W=Sr;switch(ct){case 8:ay(),D=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(l=!0);var te=ct;if(ct=0,Sr=null,Rs(u,N,W,te),h&&Cs){D=0;break e}break;default:te=ct,ct=0,Sr=null,Rs(u,N,W,te)}}rj(),D=Bt;break}catch(fe){$_(u,fe)}while(!0);return l&&u.shellSuspendCounter++,ui=au=null,ut=m,U.H=w,U.A=E,Ze===null&&(yt=null,et=0,hd()),D}function rj(){for(;Ze!==null;)Z_(Ze)}function aj(u,l){var h=ut;ut|=2;var m=X_(),w=Y_();yt!==u||et!==l?(Vd=null,qd=Vt()+500,Ts(u,l)):Cs=kl(u,l);e:do try{if(ct!==0&&Ze!==null){l=Ze;var E=Sr;t:switch(ct){case 1:ct=0,Sr=null,Rs(u,l,E,1);break;case 2:case 9:if(uE(E)){ct=0,Sr=null,Q_(l);break}l=function(){ct!==2&&ct!==9||yt!==u||(ct=7),Na(u)},E.then(l,l);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:uE(E)?(ct=0,Sr=null,Q_(l)):(ct=0,Sr=null,Rs(u,l,E,7));break;case 5:var D=null;switch(Ze.tag){case 26:D=Ze.memoizedState;case 5:case 27:var N=Ze;if(D?LC(D):N.stateNode.complete){ct=0,Sr=null;var W=N.sibling;if(W!==null)Ze=W;else{var te=N.return;te!==null?(Ze=te,Kd(te)):Ze=null}break t}}ct=0,Sr=null,Rs(u,l,E,5);break;case 6:ct=0,Sr=null,Rs(u,l,E,6);break;case 8:ay(),Bt=6;break e;default:throw Error(r(462))}}ij();break}catch(fe){$_(u,fe)}while(!0);return ui=au=null,U.H=m,U.A=w,ut=h,Ze!==null?0:(yt=null,et=0,hd(),Bt)}function ij(){for(;Ze!==null&&!Ra();)Z_(Ze)}function Z_(u){var l=w_(u.alternate,u,gi);u.memoizedProps=u.pendingProps,l===null?Kd(u):Ze=l}function Q_(u){var l=u,h=l.alternate;switch(l.tag){case 15:case 0:l=v_(h,l,l.pendingProps,l.type,void 0,et);break;case 11:l=v_(h,l,l.pendingProps,l.type.render,l.ref,et);break;case 5:xg(l);default:E_(h,l),l=Ze=YS(l,gi),l=w_(h,l,gi)}u.memoizedProps=u.pendingProps,l===null?Kd(u):Ze=l}function Rs(u,l,h,m){ui=au=null,xg(l),ys=null,Xl=0;var w=l.return;try{if($F(u,w,l,h,et)){Bt=1,Pd(u,Wr(h,u.current)),Ze=null;return}}catch(E){if(w!==null)throw Ze=w,E;Bt=1,Pd(u,Wr(h,u.current)),Ze=null;return}l.flags&32768?(nt||m===1?u=!0:Cs||(et&536870912)!==0?u=!1:(po=u=!0,(m===2||m===9||m===3||m===6)&&(m=xr.current,m!==null&&m.tag===13&&(m.flags|=16384))),J_(l,u)):Kd(l)}function Kd(u){var l=u;do{if((l.flags&32768)!==0){J_(l,po);return}u=l.return;var h=YF(l.alternate,l,gi);if(h!==null){Ze=h;return}if(l=l.sibling,l!==null){Ze=l;return}Ze=l=u}while(l!==null);Bt===0&&(Bt=5)}function J_(u,l){do{var h=ZF(u.alternate,u);if(h!==null){h.flags&=32767,Ze=h;return}if(h=u.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(u=u.sibling,u!==null)){Ze=u;return}Ze=u=h}while(u!==null);Bt=6,Ze=null}function eC(u,l,h,m,w,E,D,N,W){u.cancelPendingCommit=null;do Xd();while(Jt!==0);if((ut&6)!==0)throw Error(r(327));if(l!==null){if(l===u.current)throw Error(r(177));if(E=l.lanes|l.childLanes,E|=$m,FL(u,h,E,D,N,W),u===yt&&(Ze=yt=null,et=0),Os=l,go=u,yi=h,ty=E,ny=w,H_=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,lj(Kn,function(){return iC(),null})):(u.callbackNode=null,u.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=U.T,U.T=null,w=H.p,H.p=2,D=ut,ut|=4;try{QF(u,l,h)}finally{ut=D,H.p=w,U.T=m}}Jt=1,tC(),nC(),rC()}}function tC(){if(Jt===1){Jt=0;var u=go,l=Os,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=U.T,U.T=null;var m=H.p;H.p=2;var w=ut;ut|=4;try{P_(l,u);var E=gy,D=US(u.containerInfo),N=E.focusedElem,W=E.selectionRange;if(D!==N&&N&&N.ownerDocument&&zS(N.ownerDocument.documentElement,N)){if(W!==null&&Wm(N)){var te=W.start,fe=W.end;if(fe===void 0&&(fe=te),"selectionStart"in N)N.selectionStart=te,N.selectionEnd=Math.min(fe,N.value.length);else{var me=N.ownerDocument||document,re=me&&me.defaultView||window;if(re.getSelection){var ue=re.getSelection(),Ce=N.textContent.length,Fe=Math.min(W.start,Ce),mt=W.end===void 0?Fe:Math.min(W.end,Ce);!ue.extend&&Fe>mt&&(D=mt,mt=Fe,Fe=D);var X=jS(N,Fe),V=jS(N,mt);if(X&&V&&(ue.rangeCount!==1||ue.anchorNode!==X.node||ue.anchorOffset!==X.offset||ue.focusNode!==V.node||ue.focusOffset!==V.offset)){var ee=me.createRange();ee.setStart(X.node,X.offset),ue.removeAllRanges(),Fe>mt?(ue.addRange(ee),ue.extend(V.node,V.offset)):(ee.setEnd(V.node,V.offset),ue.addRange(ee))}}}}for(me=[],ue=N;ue=ue.parentNode;)ue.nodeType===1&&me.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<me.length;N++){var pe=me[N];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}uh=!!my,gy=my=null}finally{ut=w,H.p=m,U.T=h}}u.current=l,Jt=2}}function nC(){if(Jt===2){Jt=0;var u=go,l=Os,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=U.T,U.T=null;var m=H.p;H.p=2;var w=ut;ut|=4;try{D_(u,l.alternate,l)}finally{ut=w,H.p=m,U.T=h}}Jt=3}}function rC(){if(Jt===4||Jt===3){Jt=0,la();var u=go,l=Os,h=yi,m=H_;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Jt=5:(Jt=0,Os=go=null,aC(u,u.pendingLanes));var w=u.pendingLanes;if(w===0&&(mo=null),Em(h),l=l.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(ti,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=U.T,w=H.p,H.p=2,U.T=null;try{for(var E=u.onRecoverableError,D=0;D<m.length;D++){var N=m[D];E(N.value,{componentStack:N.stack})}}finally{U.T=l,H.p=w}}(yi&3)!==0&&Xd(),Na(u),w=u.pendingLanes,(h&261930)!==0&&(w&42)!==0?u===ry?dc++:(dc=0,ry=u):dc=0,hc(0)}}function aC(u,l){(u.pooledCacheLanes&=l)===0&&(l=u.pooledCache,l!=null&&(u.pooledCache=null,$l(l)))}function Xd(){return tC(),nC(),rC(),iC()}function iC(){if(Jt!==5)return!1;var u=go,l=ty;ty=0;var h=Em(yi),m=U.T,w=H.p;try{H.p=32>h?32:h,U.T=null,h=ny,ny=null;var E=go,D=yi;if(Jt=0,Os=go=null,yi=0,(ut&6)!==0)throw Error(r(331));var N=ut;if(ut|=4,z_(E.current),L_(E,E.current,D,h),ut=N,hc(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(ti,E)}catch{}return!0}finally{H.p=w,U.T=m,aC(u,l)}}function oC(u,l,h){l=Wr(h,l),l=Pg(u.stateNode,l,2),u=lo(u,l,2),u!==null&&(Nl(u,2),Na(u))}function ft(u,l,h){if(u.tag===3)oC(u,u,h);else for(;l!==null;){if(l.tag===3){oC(l,u,h);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(mo===null||!mo.has(m))){u=Wr(h,u),h=u_(2),m=lo(l,h,2),m!==null&&(s_(h,m,l,u),Nl(m,2),Na(m));break}}l=l.return}}function oy(u,l,h){var m=u.pingCache;if(m===null){m=u.pingCache=new tj;var w=new Set;m.set(l,w)}else w=m.get(l),w===void 0&&(w=new Set,m.set(l,w));w.has(h)||(Qg=!0,w.add(h),u=oj.bind(null,u,l,h),l.then(u,u))}function oj(u,l,h){var m=u.pingCache;m!==null&&m.delete(l),u.pingedLanes|=u.suspendedLanes&h,u.warmLanes&=~h,yt===u&&(et&h)===h&&(Bt===4||Bt===3&&(et&62914560)===et&&300>Vt()-Hd?(ut&2)===0&&Ts(u,0):Jg|=h,As===et&&(As=0)),Na(u)}function uC(u,l){l===0&&(l=tS()),u=tu(u,l),u!==null&&(Nl(u,l),Na(u))}function uj(u){var l=u.memoizedState,h=0;l!==null&&(h=l.retryLane),uC(u,h)}function sj(u,l){var h=0;switch(u.tag){case 31:case 13:var m=u.stateNode,w=u.memoizedState;w!==null&&(h=w.retryLane);break;case 19:m=u.stateNode;break;case 22:m=u.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),uC(u,h)}function lj(u,l){return Ta(u,l)}var Yd=null,Ds=null,uy=!1,Zd=!1,sy=!1,bo=0;function Na(u){u!==Ds&&u.next===null&&(Ds===null?Yd=Ds=u:Ds=Ds.next=u),Zd=!0,uy||(uy=!0,fj())}function hc(u,l){if(!sy&&Zd){sy=!0;do for(var h=!1,m=Yd;m!==null;){if(u!==0){var w=m.pendingLanes;if(w===0)var E=0;else{var D=m.suspendedLanes,N=m.pingedLanes;E=(1<<31-gr(42|u)+1)-1,E&=w&~(D&~N),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,fC(m,E))}else E=et,E=td(m,m===yt?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||kl(m,E)||(h=!0,fC(m,E));m=m.next}while(h);sy=!1}}function cj(){sC()}function sC(){Zd=uy=!1;var u=0;bo!==0&&wj()&&(u=bo);for(var l=Vt(),h=null,m=Yd;m!==null;){var w=m.next,E=lC(m,l);E===0?(m.next=null,h===null?Yd=w:h.next=w,w===null&&(Ds=h)):(h=m,(u!==0||(E&3)!==0)&&(Zd=!0)),m=w}Jt!==0&&Jt!==5||hc(u),bo!==0&&(bo=0)}function lC(u,l){for(var h=u.suspendedLanes,m=u.pingedLanes,w=u.expirationTimes,E=u.pendingLanes&-62914561;0<E;){var D=31-gr(E),N=1<<D,W=w[D];W===-1?((N&h)===0||(N&m)!==0)&&(w[D]=LL(N,l)):W<=l&&(u.expiredLanes|=N),E&=~N}if(l=yt,h=et,h=td(u,u===l?h:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m=u.callbackNode,h===0||u===l&&(ct===2||ct===9)||u.cancelPendingCommit!==null)return m!==null&&m!==null&&mr(m),u.callbackNode=null,u.callbackPriority=0;if((h&3)===0||kl(u,h)){if(l=h&-h,l===u.callbackPriority)return l;switch(m!==null&&mr(m),Em(h)){case 2:case 8:h=ei;break;case 32:h=Kn;break;case 268435456:h=Zf;break;default:h=Kn}return m=cC.bind(null,u),h=Ta(h,m),u.callbackPriority=l,u.callbackNode=h,l}return m!==null&&m!==null&&mr(m),u.callbackPriority=2,u.callbackNode=null,2}function cC(u,l){if(Jt!==0&&Jt!==5)return u.callbackNode=null,u.callbackPriority=0,null;var h=u.callbackNode;if(Xd()&&u.callbackNode!==h)return null;var m=et;return m=td(u,u===yt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m===0?null:(V_(u,m,l),lC(u,Vt()),u.callbackNode!=null&&u.callbackNode===h?cC.bind(null,u):null)}function fC(u,l){if(Xd())return null;V_(u,l,!0)}function fj(){Ej(function(){(ut&6)!==0?Ta(Yu,cj):sC()})}function ly(){if(bo===0){var u=vs;u===0&&(u=Qf,Qf<<=1,(Qf&261888)===0&&(Qf=256)),bo=u}return bo}function dC(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:id(""+u)}function hC(u,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,u.id&&h.setAttribute("form",u.id),l.parentNode.insertBefore(h,l),u=new FormData(u),h.parentNode.removeChild(h),u}function dj(u,l,h,m,w){if(l==="submit"&&h&&h.stateNode===w){var E=dC((w[tr]||null).action),D=m.submitter;D&&(l=(l=D[tr]||null)?dC(l.formAction):D.getAttribute("formAction"),l!==null&&(E=l,D=null));var N=new ld("action","action",null,m,w);u.push({event:N,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(bo!==0){var W=D?hC(w,D):new FormData(w);Rg(h,{pending:!0,data:W,method:w.method,action:E},null,W)}}else typeof E=="function"&&(N.preventDefault(),W=D?hC(w,D):new FormData(w),Rg(h,{pending:!0,data:W,method:w.method,action:E},E,W))},currentTarget:w}]})}}for(var cy=0;cy<Gm.length;cy++){var fy=Gm[cy],hj=fy.toLowerCase(),pj=fy[0].toUpperCase()+fy.slice(1);fa(hj,"on"+pj)}fa(qS,"onAnimationEnd"),fa(VS,"onAnimationIteration"),fa(GS,"onAnimationStart"),fa("dblclick","onDoubleClick"),fa("focusin","onFocus"),fa("focusout","onBlur"),fa(DF,"onTransitionRun"),fa(MF,"onTransitionStart"),fa(kF,"onTransitionCancel"),fa($S,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),Zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function pC(u,l){l=(l&4)!==0;for(var h=0;h<u.length;h++){var m=u[h],w=m.event;m=m.listeners;e:{var E=void 0;if(l)for(var D=m.length-1;0<=D;D--){var N=m[D],W=N.instance,te=N.currentTarget;if(N=N.listener,W!==E&&w.isPropagationStopped())break e;E=N,w.currentTarget=te;try{E(w)}catch(fe){dd(fe)}w.currentTarget=null,E=W}else for(D=0;D<m.length;D++){if(N=m[D],W=N.instance,te=N.currentTarget,N=N.listener,W!==E&&w.isPropagationStopped())break e;E=N,w.currentTarget=te;try{E(w)}catch(fe){dd(fe)}w.currentTarget=null,E=W}}}}function Qe(u,l){var h=l[_m];h===void 0&&(h=l[_m]=new Set);var m=u+"__bubble";h.has(m)||(vC(l,u,2,!1),h.add(m))}function dy(u,l,h){var m=0;l&&(m|=4),vC(h,u,m,l)}var Qd="_reactListening"+Math.random().toString(36).slice(2);function hy(u){if(!u[Qd]){u[Qd]=!0,sS.forEach(function(h){h!=="selectionchange"&&(vj.has(h)||dy(h,!1,u),dy(h,!0,u))});var l=u.nodeType===9?u:u.ownerDocument;l===null||l[Qd]||(l[Qd]=!0,dy("selectionchange",!1,l))}}function vC(u,l,h,m){switch(qC(l)){case 2:var w=Hj;break;case 8:w=qj;break;default:w=Ty}h=w.bind(null,l,h,u),w=void 0,!Nm||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(w=!0),m?w!==void 0?u.addEventListener(l,h,{capture:!0,passive:w}):u.addEventListener(l,h,!0):w!==void 0?u.addEventListener(l,h,{passive:w}):u.addEventListener(l,h,!1)}function py(u,l,h,m,w){var E=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var N=m.stateNode.containerInfo;if(N===w)break;if(D===4)for(D=m.return;D!==null;){var W=D.tag;if((W===3||W===4)&&D.stateNode.containerInfo===w)return;D=D.return}for(;N!==null;){if(D=Qu(N),D===null)return;if(W=D.tag,W===5||W===6||W===26||W===27){m=E=D;continue e}N=N.parentNode}}m=m.return}xS(function(){var te=E,fe=Mm(h),me=[];e:{var re=KS.get(u);if(re!==void 0){var ue=ld,Ce=u;switch(u){case"keypress":if(ud(h)===0)break e;case"keydown":case"keyup":ue=sF;break;case"focusin":Ce="focus",ue=Lm;break;case"focusout":Ce="blur",ue=Lm;break;case"beforeblur":case"afterblur":ue=Lm;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=ES;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=YL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=fF;break;case qS:case VS:case GS:ue=JL;break;case $S:ue=hF;break;case"scroll":case"scrollend":ue=KL;break;case"wheel":ue=vF;break;case"copy":case"cut":case"paste":ue=tF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=CS;break;case"toggle":case"beforetoggle":ue=gF}var Fe=(l&4)!==0,mt=!Fe&&(u==="scroll"||u==="scrollend"),X=Fe?re!==null?re+"Capture":null:re;Fe=[];for(var V=te,ee;V!==null;){var pe=V;if(ee=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||ee===null||X===null||(pe=Bl(V,X),pe!=null&&Fe.push(vc(V,pe,ee))),mt)break;V=V.return}0<Fe.length&&(re=new ue(re,Ce,null,h,fe),me.push({event:re,listeners:Fe}))}}if((l&7)===0){e:{if(re=u==="mouseover"||u==="pointerover",ue=u==="mouseout"||u==="pointerout",re&&h!==Dm&&(Ce=h.relatedTarget||h.fromElement)&&(Qu(Ce)||Ce[Zu]))break e;if((ue||re)&&(re=fe.window===fe?fe:(re=fe.ownerDocument)?re.defaultView||re.parentWindow:window,ue?(Ce=h.relatedTarget||h.toElement,ue=te,Ce=Ce?Qu(Ce):null,Ce!==null&&(mt=i(Ce),Fe=Ce.tag,Ce!==mt||Fe!==5&&Fe!==27&&Fe!==6)&&(Ce=null)):(ue=null,Ce=te),ue!==Ce)){if(Fe=ES,pe="onMouseLeave",X="onMouseEnter",V="mouse",(u==="pointerout"||u==="pointerover")&&(Fe=CS,pe="onPointerLeave",X="onPointerEnter",V="pointer"),mt=ue==null?re:Pl(ue),ee=Ce==null?re:Pl(Ce),re=new Fe(pe,V+"leave",ue,h,fe),re.target=mt,re.relatedTarget=ee,pe=null,Qu(fe)===te&&(Fe=new Fe(X,V+"enter",Ce,h,fe),Fe.target=ee,Fe.relatedTarget=mt,pe=Fe),mt=pe,ue&&Ce)t:{for(Fe=mj,X=ue,V=Ce,ee=0,pe=X;pe;pe=Fe(pe))ee++;pe=0;for(var Be=V;Be;Be=Fe(Be))pe++;for(;0<ee-pe;)X=Fe(X),ee--;for(;0<pe-ee;)V=Fe(V),pe--;for(;ee--;){if(X===V||V!==null&&X===V.alternate){Fe=X;break t}X=Fe(X),V=Fe(V)}Fe=null}else Fe=null;ue!==null&&mC(me,re,ue,Fe,!1),Ce!==null&&mt!==null&&mC(me,mt,Ce,Fe,!0)}}e:{if(re=te?Pl(te):window,ue=re.nodeName&&re.nodeName.toLowerCase(),ue==="select"||ue==="input"&&re.type==="file")var at=NS;else if(MS(re))if(IS)at=OF;else{at=CF;var Re=_F}else ue=re.nodeName,!ue||ue.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?te&&Rm(te.elementType)&&(at=NS):at=AF;if(at&&(at=at(u,te))){kS(me,at,h,fe);break e}Re&&Re(u,re,te),u==="focusout"&&te&&re.type==="number"&&te.memoizedProps.value!=null&&Tm(re,"number",re.value)}switch(Re=te?Pl(te):window,u){case"focusin":(MS(Re)||Re.contentEditable==="true")&&(us=Re,Hm=te,ql=null);break;case"focusout":ql=Hm=us=null;break;case"mousedown":qm=!0;break;case"contextmenu":case"mouseup":case"dragend":qm=!1,WS(me,h,fe);break;case"selectionchange":if(RF)break;case"keydown":case"keyup":WS(me,h,fe)}var Ke;if(jm)e:{switch(u){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else os?RS(u,h)&&(tt="onCompositionEnd"):u==="keydown"&&h.keyCode===229&&(tt="onCompositionStart");tt&&(AS&&h.locale!=="ko"&&(os||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&os&&(Ke=wS()):(no=fe,Im="value"in no?no.value:no.textContent,os=!0)),Re=Jd(te,tt),0<Re.length&&(tt=new _S(tt,u,null,h,fe),me.push({event:tt,listeners:Re}),Ke?tt.data=Ke:(Ke=DS(h),Ke!==null&&(tt.data=Ke)))),(Ke=bF?xF(u,h):wF(u,h))&&(tt=Jd(te,"onBeforeInput"),0<tt.length&&(Re=new _S("onBeforeInput","beforeinput",null,h,fe),me.push({event:Re,listeners:tt}),Re.data=Ke)),dj(me,u,te,h,fe)}pC(me,l)})}function vc(u,l,h){return{instance:u,listener:l,currentTarget:h}}function Jd(u,l){for(var h=l+"Capture",m=[];u!==null;){var w=u,E=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||E===null||(w=Bl(u,h),w!=null&&m.unshift(vc(u,w,E)),w=Bl(u,l),w!=null&&m.push(vc(u,w,E))),u.tag===3)return m;u=u.return}return[]}function mj(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function mC(u,l,h,m,w){for(var E=l._reactName,D=[];h!==null&&h!==m;){var N=h,W=N.alternate,te=N.stateNode;if(N=N.tag,W!==null&&W===m)break;N!==5&&N!==26&&N!==27||te===null||(W=te,w?(te=Bl(h,E),te!=null&&D.unshift(vc(h,te,W))):w||(te=Bl(h,E),te!=null&&D.push(vc(h,te,W)))),h=h.return}D.length!==0&&u.push({event:l,listeners:D})}var gj=/\r\n?/g,yj=/\u0000|\uFFFD/g;function gC(u){return(typeof u=="string"?u:""+u).replace(gj,`
`).replace(yj,"")}function yC(u,l){return l=gC(l),gC(u)===l}function vt(u,l,h,m,w,E){switch(h){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||rs(u,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&rs(u,""+m);break;case"className":rd(u,"class",m);break;case"tabIndex":rd(u,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":rd(u,h,m);break;case"style":yS(u,m,E);break;case"data":if(l!=="object"){rd(u,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||h!=="href")){u.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(h);break}m=id(""+m),u.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){u.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(l!=="input"&&vt(u,l,"name",w.name,w,null),vt(u,l,"formEncType",w.formEncType,w,null),vt(u,l,"formMethod",w.formMethod,w,null),vt(u,l,"formTarget",w.formTarget,w,null)):(vt(u,l,"encType",w.encType,w,null),vt(u,l,"method",w.method,w,null),vt(u,l,"target",w.target,w,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(h);break}m=id(""+m),u.setAttribute(h,m);break;case"onClick":m!=null&&(u.onclick=ri);break;case"onScroll":m!=null&&Qe("scroll",u);break;case"onScrollEnd":m!=null&&Qe("scrollend",u);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(w.children!=null)throw Error(r(60));u.innerHTML=h}}break;case"multiple":u.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":u.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){u.removeAttribute("xlink:href");break}h=id(""+m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(h,""+m):u.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(h,""):u.removeAttribute(h);break;case"capture":case"download":m===!0?u.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(h,m):u.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?u.setAttribute(h,m):u.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?u.removeAttribute(h):u.setAttribute(h,m);break;case"popover":Qe("beforetoggle",u),Qe("toggle",u),nd(u,"popover",m);break;case"xlinkActuate":ni(u,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ni(u,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ni(u,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ni(u,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ni(u,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ni(u,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ni(u,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ni(u,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ni(u,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":nd(u,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=GL.get(h)||h,nd(u,h,m))}}function vy(u,l,h,m,w,E){switch(h){case"style":yS(u,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(w.children!=null)throw Error(r(60));u.innerHTML=h}}break;case"children":typeof m=="string"?rs(u,m):(typeof m=="number"||typeof m=="bigint")&&rs(u,""+m);break;case"onScroll":m!=null&&Qe("scroll",u);break;case"onScrollEnd":m!=null&&Qe("scrollend",u);break;case"onClick":m!=null&&(u.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lS.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(w=h.endsWith("Capture"),l=h.slice(2,w?h.length-7:void 0),E=u[tr]||null,E=E!=null?E[h]:null,typeof E=="function"&&u.removeEventListener(l,E,w),typeof m=="function")){typeof E!="function"&&E!==null&&(h in u?u[h]=null:u.hasAttribute(h)&&u.removeAttribute(h)),u.addEventListener(l,m,w);break e}h in u?u[h]=m:m===!0?u.setAttribute(h,""):nd(u,h,m)}}}function Rn(u,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",u),Qe("load",u);var m=!1,w=!1,E;for(E in h)if(h.hasOwnProperty(E)){var D=h[E];if(D!=null)switch(E){case"src":m=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:vt(u,l,E,D,h,null)}}w&&vt(u,l,"srcSet",h.srcSet,h,null),m&&vt(u,l,"src",h.src,h,null);return;case"input":Qe("invalid",u);var N=E=D=w=null,W=null,te=null;for(m in h)if(h.hasOwnProperty(m)){var fe=h[m];if(fe!=null)switch(m){case"name":w=fe;break;case"type":D=fe;break;case"checked":W=fe;break;case"defaultChecked":te=fe;break;case"value":E=fe;break;case"defaultValue":N=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,l));break;default:vt(u,l,m,fe,h,null)}}pS(u,E,N,W,te,D,w,!1);return;case"select":Qe("invalid",u),m=D=E=null;for(w in h)if(h.hasOwnProperty(w)&&(N=h[w],N!=null))switch(w){case"value":E=N;break;case"defaultValue":D=N;break;case"multiple":m=N;default:vt(u,l,w,N,h,null)}l=E,h=D,u.multiple=!!m,l!=null?ns(u,!!m,l,!1):h!=null&&ns(u,!!m,h,!0);return;case"textarea":Qe("invalid",u),E=w=m=null;for(D in h)if(h.hasOwnProperty(D)&&(N=h[D],N!=null))switch(D){case"value":m=N;break;case"defaultValue":w=N;break;case"children":E=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:vt(u,l,D,N,h,null)}mS(u,m,w,E);return;case"option":for(W in h)h.hasOwnProperty(W)&&(m=h[W],m!=null)&&(W==="selected"?u.selected=m&&typeof m!="function"&&typeof m!="symbol":vt(u,l,W,m,h,null));return;case"dialog":Qe("beforetoggle",u),Qe("toggle",u),Qe("cancel",u),Qe("close",u);break;case"iframe":case"object":Qe("load",u);break;case"video":case"audio":for(m=0;m<pc.length;m++)Qe(pc[m],u);break;case"image":Qe("error",u),Qe("load",u);break;case"details":Qe("toggle",u);break;case"embed":case"source":case"link":Qe("error",u),Qe("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in h)if(h.hasOwnProperty(te)&&(m=h[te],m!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:vt(u,l,te,m,h,null)}return;default:if(Rm(l)){for(fe in h)h.hasOwnProperty(fe)&&(m=h[fe],m!==void 0&&vy(u,l,fe,m,h,void 0));return}}for(N in h)h.hasOwnProperty(N)&&(m=h[N],m!=null&&vt(u,l,N,m,h,null))}function bj(u,l,h,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,E=null,D=null,N=null,W=null,te=null,fe=null;for(ue in h){var me=h[ue];if(h.hasOwnProperty(ue)&&me!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":W=me;default:m.hasOwnProperty(ue)||vt(u,l,ue,null,m,me)}}for(var re in m){var ue=m[re];if(me=h[re],m.hasOwnProperty(re)&&(ue!=null||me!=null))switch(re){case"type":E=ue;break;case"name":w=ue;break;case"checked":te=ue;break;case"defaultChecked":fe=ue;break;case"value":D=ue;break;case"defaultValue":N=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,l));break;default:ue!==me&&vt(u,l,re,ue,m,me)}}Om(u,D,N,W,te,fe,E,w);return;case"select":ue=D=N=re=null;for(E in h)if(W=h[E],h.hasOwnProperty(E)&&W!=null)switch(E){case"value":break;case"multiple":ue=W;default:m.hasOwnProperty(E)||vt(u,l,E,null,m,W)}for(w in m)if(E=m[w],W=h[w],m.hasOwnProperty(w)&&(E!=null||W!=null))switch(w){case"value":re=E;break;case"defaultValue":N=E;break;case"multiple":D=E;default:E!==W&&vt(u,l,w,E,m,W)}l=N,h=D,m=ue,re!=null?ns(u,!!h,re,!1):!!m!=!!h&&(l!=null?ns(u,!!h,l,!0):ns(u,!!h,h?[]:"",!1));return;case"textarea":ue=re=null;for(N in h)if(w=h[N],h.hasOwnProperty(N)&&w!=null&&!m.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:vt(u,l,N,null,m,w)}for(D in m)if(w=m[D],E=h[D],m.hasOwnProperty(D)&&(w!=null||E!=null))switch(D){case"value":re=w;break;case"defaultValue":ue=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:w!==E&&vt(u,l,D,w,m,E)}vS(u,re,ue);return;case"option":for(var Ce in h)re=h[Ce],h.hasOwnProperty(Ce)&&re!=null&&!m.hasOwnProperty(Ce)&&(Ce==="selected"?u.selected=!1:vt(u,l,Ce,null,m,re));for(W in m)re=m[W],ue=h[W],m.hasOwnProperty(W)&&re!==ue&&(re!=null||ue!=null)&&(W==="selected"?u.selected=re&&typeof re!="function"&&typeof re!="symbol":vt(u,l,W,re,m,ue));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in h)re=h[Fe],h.hasOwnProperty(Fe)&&re!=null&&!m.hasOwnProperty(Fe)&&vt(u,l,Fe,null,m,re);for(te in m)if(re=m[te],ue=h[te],m.hasOwnProperty(te)&&re!==ue&&(re!=null||ue!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:vt(u,l,te,re,m,ue)}return;default:if(Rm(l)){for(var mt in h)re=h[mt],h.hasOwnProperty(mt)&&re!==void 0&&!m.hasOwnProperty(mt)&&vy(u,l,mt,void 0,m,re);for(fe in m)re=m[fe],ue=h[fe],!m.hasOwnProperty(fe)||re===ue||re===void 0&&ue===void 0||vy(u,l,fe,re,m,ue);return}}for(var X in h)re=h[X],h.hasOwnProperty(X)&&re!=null&&!m.hasOwnProperty(X)&&vt(u,l,X,null,m,re);for(me in m)re=m[me],ue=h[me],!m.hasOwnProperty(me)||re===ue||re==null&&ue==null||vt(u,l,me,re,m,ue)}function bC(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xj(){if(typeof performance.getEntriesByType=="function"){for(var u=0,l=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var w=h[m],E=w.transferSize,D=w.initiatorType,N=w.duration;if(E&&N&&bC(D)){for(D=0,N=w.responseEnd,m+=1;m<h.length;m++){var W=h[m],te=W.startTime;if(te>N)break;var fe=W.transferSize,me=W.initiatorType;fe&&bC(me)&&(W=W.responseEnd,D+=fe*(W<N?1:(N-te)/(W-te)))}if(--m,l+=8*(E+D)/(w.duration/1e3),u++,10<u)break}}if(0<u)return l/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var my=null,gy=null;function eh(u){return u.nodeType===9?u:u.ownerDocument}function xC(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wC(u,l){if(u===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&l==="foreignObject"?0:u}function yy(u,l){return u==="textarea"||u==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var by=null;function wj(){var u=window.event;return u&&u.type==="popstate"?u===by?!1:(by=u,!0):(by=null,!1)}var SC=typeof setTimeout=="function"?setTimeout:void 0,Sj=typeof clearTimeout=="function"?clearTimeout:void 0,EC=typeof Promise=="function"?Promise:void 0,Ej=typeof queueMicrotask=="function"?queueMicrotask:typeof EC<"u"?function(u){return EC.resolve(null).then(u).catch(_j)}:SC;function _j(u){setTimeout(function(){throw u})}function xo(u){return u==="head"}function _C(u,l){var h=l,m=0;do{var w=h.nextSibling;if(u.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"||h==="/&"){if(m===0){u.removeChild(w),Is(l);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")mc(u.ownerDocument.documentElement);else if(h==="head"){h=u.ownerDocument.head,mc(h);for(var E=h.firstChild;E;){var D=E.nextSibling,N=E.nodeName;E[Il]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&E.rel.toLowerCase()==="stylesheet"||h.removeChild(E),E=D}}else h==="body"&&mc(u.ownerDocument.body);h=w}while(h);Is(l)}function CC(u,l){var h=u;u=0;do{var m=h.nextSibling;if(h.nodeType===1?l?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(l?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(u===0)break;u--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||u++;h=m}while(h)}function xy(u){var l=u.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":xy(h),Cm(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}u.removeChild(h)}}function Cj(u,l,h,m){for(;u.nodeType===1;){var w=h;if(u.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(m){if(!u[Il])switch(l){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(E=u.getAttribute("rel"),E==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(E!==w.rel||u.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||u.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||u.getAttribute("title")!==(w.title==null?null:w.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(E=u.getAttribute("src"),(E!==(w.src==null?null:w.src)||u.getAttribute("type")!==(w.type==null?null:w.type)||u.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&E&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(l==="input"&&u.type==="hidden"){var E=w.name==null?null:""+w.name;if(w.type==="hidden"&&u.getAttribute("name")===E)return u}else return u;if(u=$r(u.nextSibling),u===null)break}return null}function Aj(u,l,h){if(l==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!h||(u=$r(u.nextSibling),u===null))return null;return u}function AC(u,l){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!l||(u=$r(u.nextSibling),u===null))return null;return u}function wy(u){return u.data==="$?"||u.data==="$~"}function Sy(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function Oj(u,l){var h=u.ownerDocument;if(u.data==="$~")u._reactRetry=l;else if(u.data!=="$?"||h.readyState!=="loading")l();else{var m=function(){l(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),u._reactRetry=m}}function $r(u){for(;u!=null;u=u.nextSibling){var l=u.nodeType;if(l===1||l===3)break;if(l===8){if(l=u.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return u}var Ey=null;function OC(u){u=u.nextSibling;for(var l=0;u;){if(u.nodeType===8){var h=u.data;if(h==="/$"||h==="/&"){if(l===0)return $r(u.nextSibling);l--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||l++}u=u.nextSibling}return null}function TC(u){u=u.previousSibling;for(var l=0;u;){if(u.nodeType===8){var h=u.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(l===0)return u;l--}else h!=="/$"&&h!=="/&"||l++}u=u.previousSibling}return null}function RC(u,l,h){switch(l=eh(h),u){case"html":if(u=l.documentElement,!u)throw Error(r(452));return u;case"head":if(u=l.head,!u)throw Error(r(453));return u;case"body":if(u=l.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function mc(u){for(var l=u.attributes;l.length;)u.removeAttributeNode(l[0]);Cm(u)}var Kr=new Map,DC=new Set;function th(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var bi=H.d;H.d={f:Tj,r:Rj,D:Dj,C:Mj,L:kj,m:Nj,X:Pj,S:Ij,M:Bj};function Tj(){var u=bi.f(),l=Gd();return u||l}function Rj(u){var l=Ju(u);l!==null&&l.tag===5&&l.type==="form"?$E(l):bi.r(u)}var Ms=typeof document>"u"?null:document;function MC(u,l,h){var m=Ms;if(m&&typeof l=="string"&&l){var w=zr(l);w='link[rel="'+u+'"][href="'+w+'"]',typeof h=="string"&&(w+='[crossorigin="'+h+'"]'),DC.has(w)||(DC.add(w),u={rel:u,crossOrigin:h,href:l},m.querySelector(w)===null&&(l=m.createElement("link"),Rn(l,"link",u),dn(l),m.head.appendChild(l)))}}function Dj(u){bi.D(u),MC("dns-prefetch",u,null)}function Mj(u,l){bi.C(u,l),MC("preconnect",u,l)}function kj(u,l,h){bi.L(u,l,h);var m=Ms;if(m&&u&&l){var w='link[rel="preload"][as="'+zr(l)+'"]';l==="image"&&h&&h.imageSrcSet?(w+='[imagesrcset="'+zr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(w+='[imagesizes="'+zr(h.imageSizes)+'"]')):w+='[href="'+zr(u)+'"]';var E=w;switch(l){case"style":E=ks(u);break;case"script":E=Ns(u)}Kr.has(E)||(u=p({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:u,as:l},h),Kr.set(E,u),m.querySelector(w)!==null||l==="style"&&m.querySelector(gc(E))||l==="script"&&m.querySelector(yc(E))||(l=m.createElement("link"),Rn(l,"link",u),dn(l),m.head.appendChild(l)))}}function Nj(u,l){bi.m(u,l);var h=Ms;if(h&&u){var m=l&&typeof l.as=="string"?l.as:"script",w='link[rel="modulepreload"][as="'+zr(m)+'"][href="'+zr(u)+'"]',E=w;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Ns(u)}if(!Kr.has(E)&&(u=p({rel:"modulepreload",href:u},l),Kr.set(E,u),h.querySelector(w)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(yc(E)))return}m=h.createElement("link"),Rn(m,"link",u),dn(m),h.head.appendChild(m)}}}function Ij(u,l,h){bi.S(u,l,h);var m=Ms;if(m&&u){var w=es(m).hoistableStyles,E=ks(u);l=l||"default";var D=w.get(E);if(!D){var N={loading:0,preload:null};if(D=m.querySelector(gc(E)))N.loading=5;else{u=p({rel:"stylesheet",href:u,"data-precedence":l},h),(h=Kr.get(E))&&_y(u,h);var W=D=m.createElement("link");dn(W),Rn(W,"link",u),W._p=new Promise(function(te,fe){W.onload=te,W.onerror=fe}),W.addEventListener("load",function(){N.loading|=1}),W.addEventListener("error",function(){N.loading|=2}),N.loading|=4,nh(D,l,m)}D={type:"stylesheet",instance:D,count:1,state:N},w.set(E,D)}}}function Pj(u,l){bi.X(u,l);var h=Ms;if(h&&u){var m=es(h).hoistableScripts,w=Ns(u),E=m.get(w);E||(E=h.querySelector(yc(w)),E||(u=p({src:u,async:!0},l),(l=Kr.get(w))&&Cy(u,l),E=h.createElement("script"),dn(E),Rn(E,"link",u),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(w,E))}}function Bj(u,l){bi.M(u,l);var h=Ms;if(h&&u){var m=es(h).hoistableScripts,w=Ns(u),E=m.get(w);E||(E=h.querySelector(yc(w)),E||(u=p({src:u,async:!0,type:"module"},l),(l=Kr.get(w))&&Cy(u,l),E=h.createElement("script"),dn(E),Rn(E,"link",u),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(w,E))}}function kC(u,l,h,m){var w=(w=be.current)?th(w):null;if(!w)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=ks(h.href),h=es(w).hoistableStyles,m=h.get(l),m||(m={type:"style",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){u=ks(h.href);var E=es(w).hoistableStyles,D=E.get(u);if(D||(w=w.ownerDocument||w,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(u,D),(E=w.querySelector(gc(u)))&&!E._p&&(D.instance=E,D.state.loading=5),Kr.has(u)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Kr.set(u,h),E||Lj(w,u,h,D.state))),l&&m===null)throw Error(r(528,""));return D}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ns(h),h=es(w).hoistableScripts,m=h.get(l),m||(m={type:"script",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function ks(u){return'href="'+zr(u)+'"'}function gc(u){return'link[rel="stylesheet"]['+u+"]"}function NC(u){return p({},u,{"data-precedence":u.precedence,precedence:null})}function Lj(u,l,h,m){u.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=u.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Rn(l,"link",h),dn(l),u.head.appendChild(l))}function Ns(u){return'[src="'+zr(u)+'"]'}function yc(u){return"script[async]"+u}function IC(u,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var m=u.querySelector('style[data-href~="'+zr(h.href)+'"]');if(m)return l.instance=m,dn(m),m;var w=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(u.ownerDocument||u).createElement("style"),dn(m),Rn(m,"style",w),nh(m,h.precedence,u),l.instance=m;case"stylesheet":w=ks(h.href);var E=u.querySelector(gc(w));if(E)return l.state.loading|=4,l.instance=E,dn(E),E;m=NC(h),(w=Kr.get(w))&&_y(m,w),E=(u.ownerDocument||u).createElement("link"),dn(E);var D=E;return D._p=new Promise(function(N,W){D.onload=N,D.onerror=W}),Rn(E,"link",m),l.state.loading|=4,nh(E,h.precedence,u),l.instance=E;case"script":return E=Ns(h.src),(w=u.querySelector(yc(E)))?(l.instance=w,dn(w),w):(m=h,(w=Kr.get(E))&&(m=p({},h),Cy(m,w)),u=u.ownerDocument||u,w=u.createElement("script"),dn(w),Rn(w,"link",m),u.head.appendChild(w),l.instance=w);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,nh(m,h.precedence,u));return l.instance}function nh(u,l,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=m.length?m[m.length-1]:null,E=w,D=0;D<m.length;D++){var N=m[D];if(N.dataset.precedence===l)E=N;else if(E!==w)break}E?E.parentNode.insertBefore(u,E.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(u,l.firstChild))}function _y(u,l){u.crossOrigin==null&&(u.crossOrigin=l.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=l.referrerPolicy),u.title==null&&(u.title=l.title)}function Cy(u,l){u.crossOrigin==null&&(u.crossOrigin=l.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=l.referrerPolicy),u.integrity==null&&(u.integrity=l.integrity)}var rh=null;function PC(u,l,h){if(rh===null){var m=new Map,w=rh=new Map;w.set(h,m)}else w=rh,m=w.get(h),m||(m=new Map,w.set(h,m));if(m.has(u))return m;for(m.set(u,null),h=h.getElementsByTagName(u),w=0;w<h.length;w++){var E=h[w];if(!(E[Il]||E[Cn]||u==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var D=E.getAttribute(l)||"";D=u+D;var N=m.get(D);N?N.push(E):m.set(D,[E])}}return m}function BC(u,l,h){u=u.ownerDocument||u,u.head.insertBefore(h,l==="title"?u.querySelector("head > title"):null)}function Fj(u,l,h){if(h===1||l.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(u=l.disabled,typeof l.precedence=="string"&&u==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function LC(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function jj(u,l,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var w=ks(m.href),E=l.querySelector(gc(w));if(E){l=E._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(u.count++,u=ah.bind(u),l.then(u,u)),h.state.loading|=4,h.instance=E,dn(E);return}E=l.ownerDocument||l,m=NC(m),(w=Kr.get(w))&&_y(m,w),E=E.createElement("link"),dn(E);var D=E;D._p=new Promise(function(N,W){D.onload=N,D.onerror=W}),Rn(E,"link",m),h.instance=E}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(u.count++,h=ah.bind(u),l.addEventListener("load",h),l.addEventListener("error",h))}}var Ay=0;function zj(u,l){return u.stylesheets&&u.count===0&&oh(u,u.stylesheets),0<u.count||0<u.imgCount?function(h){var m=setTimeout(function(){if(u.stylesheets&&oh(u,u.stylesheets),u.unsuspend){var E=u.unsuspend;u.unsuspend=null,E()}},6e4+l);0<u.imgBytes&&Ay===0&&(Ay=62500*xj());var w=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&oh(u,u.stylesheets),u.unsuspend)){var E=u.unsuspend;u.unsuspend=null,E()}},(u.imgBytes>Ay?50:800)+l);return u.unsuspend=h,function(){u.unsuspend=null,clearTimeout(m),clearTimeout(w)}}:null}function ah(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oh(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var ih=null;function oh(u,l){u.stylesheets=null,u.unsuspend!==null&&(u.count++,ih=new Map,l.forEach(Uj,u),ih=null,ah.call(u))}function Uj(u,l){if(!(l.state.loading&4)){var h=ih.get(u);if(h)var m=h.get(null);else{h=new Map,ih.set(u,h);for(var w=u.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<w.length;E++){var D=w[E];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(h.set(D.dataset.precedence,D),m=D)}m&&h.set(null,m)}w=l.instance,D=w.getAttribute("data-precedence"),E=h.get(D)||m,E===m&&h.set(null,w),h.set(D,w),this.count++,m=ah.bind(this),w.addEventListener("load",m),w.addEventListener("error",m),E?E.parentNode.insertBefore(w,E.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(w,u.firstChild)),l.state.loading|=4}}var bc={$$typeof:C,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Wj(u,l,h,m,w,E,D,N,W){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wm(0),this.hiddenUpdates=wm(null),this.identifierPrefix=m,this.onUncaughtError=w,this.onCaughtError=E,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function FC(u,l,h,m,w,E,D,N,W,te,fe,me){return u=new Wj(u,l,h,D,W,te,fe,me,N),l=1,E===!0&&(l|=24),E=br(3,null,null,l),u.current=E,E.stateNode=u,l=ig(),l.refCount++,u.pooledCache=l,l.refCount++,E.memoizedState={element:m,isDehydrated:h,cache:l},lg(E),u}function jC(u){return u?(u=cs,u):cs}function zC(u,l,h,m,w,E){w=jC(w),m.context===null?m.context=w:m.pendingContext=w,m=so(l),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=lo(u,m,l),h!==null&&(ur(h,u,l),Zl(h,u,l))}function UC(u,l){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var h=u.retryLane;u.retryLane=h!==0&&h<l?h:l}}function Oy(u,l){UC(u,l),(u=u.alternate)&&UC(u,l)}function WC(u){if(u.tag===13||u.tag===31){var l=tu(u,67108864);l!==null&&ur(l,u,67108864),Oy(u,67108864)}}function HC(u){if(u.tag===13||u.tag===31){var l=_r();l=Sm(l);var h=tu(u,l);h!==null&&ur(h,u,l),Oy(u,l)}}var uh=!0;function Hj(u,l,h,m){var w=U.T;U.T=null;var E=H.p;try{H.p=2,Ty(u,l,h,m)}finally{H.p=E,U.T=w}}function qj(u,l,h,m){var w=U.T;U.T=null;var E=H.p;try{H.p=8,Ty(u,l,h,m)}finally{H.p=E,U.T=w}}function Ty(u,l,h,m){if(uh){var w=Ry(m);if(w===null)py(u,l,m,sh,h),VC(u,m);else if(Gj(w,u,l,h,m))m.stopPropagation();else if(VC(u,m),l&4&&-1<Vj.indexOf(u)){for(;w!==null;){var E=Ju(w);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var D=Yo(E.pendingLanes);if(D!==0){var N=E;for(N.pendingLanes|=2,N.entangledLanes|=2;D;){var W=1<<31-gr(D);N.entanglements[1]|=W,D&=~W}Na(E),(ut&6)===0&&(qd=Vt()+500,hc(0))}}break;case 31:case 13:N=tu(E,2),N!==null&&ur(N,E,2),Gd(),Oy(E,2)}if(E=Ry(m),E===null&&py(u,l,m,sh,h),E===w)break;w=E}w!==null&&m.stopPropagation()}else py(u,l,m,null,h)}}function Ry(u){return u=Mm(u),Dy(u)}var sh=null;function Dy(u){if(sh=null,u=Qu(u),u!==null){var l=i(u);if(l===null)u=null;else{var h=l.tag;if(h===13){if(u=o(l),u!==null)return u;u=null}else if(h===31){if(u=s(l),u!==null)return u;u=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;u=null}else l!==u&&(u=null)}}return sh=u,null}function qC(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ca()){case Yu:return 2;case ei:return 8;case Kn:case Ml:return 32;case Zf:return 268435456;default:return 32}default:return 32}}var My=!1,wo=null,So=null,Eo=null,xc=new Map,wc=new Map,_o=[],Vj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VC(u,l){switch(u){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":xc.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(l.pointerId)}}function Sc(u,l,h,m,w,E){return u===null||u.nativeEvent!==E?(u={blockedOn:l,domEventName:h,eventSystemFlags:m,nativeEvent:E,targetContainers:[w]},l!==null&&(l=Ju(l),l!==null&&WC(l)),u):(u.eventSystemFlags|=m,l=u.targetContainers,w!==null&&l.indexOf(w)===-1&&l.push(w),u)}function Gj(u,l,h,m,w){switch(l){case"focusin":return wo=Sc(wo,u,l,h,m,w),!0;case"dragenter":return So=Sc(So,u,l,h,m,w),!0;case"mouseover":return Eo=Sc(Eo,u,l,h,m,w),!0;case"pointerover":var E=w.pointerId;return xc.set(E,Sc(xc.get(E)||null,u,l,h,m,w)),!0;case"gotpointercapture":return E=w.pointerId,wc.set(E,Sc(wc.get(E)||null,u,l,h,m,w)),!0}return!1}function GC(u){var l=Qu(u.target);if(l!==null){var h=i(l);if(h!==null){if(l=h.tag,l===13){if(l=o(h),l!==null){u.blockedOn=l,oS(u.priority,function(){HC(h)});return}}else if(l===31){if(l=s(h),l!==null){u.blockedOn=l,oS(u.priority,function(){HC(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){u.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}u.blockedOn=null}function lh(u){if(u.blockedOn!==null)return!1;for(var l=u.targetContainers;0<l.length;){var h=Ry(u.nativeEvent);if(h===null){h=u.nativeEvent;var m=new h.constructor(h.type,h);Dm=m,h.target.dispatchEvent(m),Dm=null}else return l=Ju(h),l!==null&&WC(l),u.blockedOn=h,!1;l.shift()}return!0}function $C(u,l,h){lh(u)&&h.delete(l)}function $j(){My=!1,wo!==null&&lh(wo)&&(wo=null),So!==null&&lh(So)&&(So=null),Eo!==null&&lh(Eo)&&(Eo=null),xc.forEach($C),wc.forEach($C)}function ch(u,l){u.blockedOn===l&&(u.blockedOn=null,My||(My=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$j)))}var fh=null;function KC(u){fh!==u&&(fh=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){fh===u&&(fh=null);for(var l=0;l<u.length;l+=3){var h=u[l],m=u[l+1],w=u[l+2];if(typeof m!="function"){if(Dy(m||h)===null)continue;break}var E=Ju(h);E!==null&&(u.splice(l,3),l-=3,Rg(E,{pending:!0,data:w,method:h.method,action:m},m,w))}}))}function Is(u){function l(W){return ch(W,u)}wo!==null&&ch(wo,u),So!==null&&ch(So,u),Eo!==null&&ch(Eo,u),xc.forEach(l),wc.forEach(l);for(var h=0;h<_o.length;h++){var m=_o[h];m.blockedOn===u&&(m.blockedOn=null)}for(;0<_o.length&&(h=_o[0],h.blockedOn===null);)GC(h),h.blockedOn===null&&_o.shift();if(h=(u.ownerDocument||u).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var w=h[m],E=h[m+1],D=w[tr]||null;if(typeof E=="function")D||KC(h);else if(D){var N=null;if(E&&E.hasAttribute("formAction")){if(w=E,D=E[tr]||null)N=D.formAction;else if(Dy(w)!==null)continue}else N=D.action;typeof N=="function"?h[m+1]=N:(h.splice(m,3),m-=3),KC(h)}}}function XC(){function u(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(D){return w=D})},focusReset:"manual",scroll:"manual"})}function l(){w!==null&&(w(),w=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,w=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),w!==null&&(w(),w=null)}}}function ky(u){this._internalRoot=u}dh.prototype.render=ky.prototype.render=function(u){var l=this._internalRoot;if(l===null)throw Error(r(409));var h=l.current,m=_r();zC(h,m,u,l,null,null)},dh.prototype.unmount=ky.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var l=u.containerInfo;zC(u.current,2,null,u,null,null),Gd(),l[Zu]=null}};function dh(u){this._internalRoot=u}dh.prototype.unstable_scheduleHydration=function(u){if(u){var l=iS();u={blockedOn:null,target:u,priority:l};for(var h=0;h<_o.length&&l!==0&&l<_o[h].priority;h++);_o.splice(h,0,u),h===0&&GC(u)}};var YC=t.version;if(YC!=="19.2.3")throw Error(r(527,YC,"19.2.3"));H.findDOMNode=function(u){var l=u._reactInternals;if(l===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=f(l),u=u!==null?d(u):null,u=u===null?null:u.stateNode,u};var Kj={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{ti=hh.inject(Kj),_n=hh}catch{}}return _c.createRoot=function(u,l){if(!a(u))throw Error(r(299));var h=!1,m="",w=r_,E=a_,D=i_;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError)),l=FC(u,1,!1,null,null,h,m,null,w,E,D,XC),u[Zu]=l.current,hy(u),new ky(l)},_c.hydrateRoot=function(u,l,h){if(!a(u))throw Error(r(299));var m=!1,w="",E=r_,D=a_,N=i_,W=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(D=h.onCaughtError),h.onRecoverableError!==void 0&&(N=h.onRecoverableError),h.formState!==void 0&&(W=h.formState)),l=FC(u,1,!0,l,h??null,m,w,W,E,D,N,XC),l.context=jC(null),h=l.current,m=_r(),m=Sm(m),w=so(m),w.callback=null,lo(h,w,m),h=m,l.current.lanes=h,Nl(l,h),Na(l),u[Zu]=l.current,hy(u),new dh(l)},_c.version="19.2.3",_c}var oA;function oz(){if(oA)return Py.exports;oA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Py.exports=iz(),Py.exports}var uz=oz();const sz=Ya(uz);var uA="popstate";function lz(e={}){function t(r,a){let{pathname:i,search:o,hash:s}=r.location;return Kb("",{pathname:i,search:o,hash:s},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Gc(a)}return fz(t,n,null,e)}function kt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wa(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cz(){return Math.random().toString(36).substring(2,10)}function sA(e,t){return{usr:e.state,key:e.key,idx:t}}function Kb(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?bl(t):t,state:n,key:t&&t.key||r||cz()}}function Gc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function bl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function fz(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,s="POP",c=null,f=d();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function d(){return(o.state||{idx:null}).idx}function p(){s="POP";let x=d(),S=x==null?null:x-f;f=x,c&&c({action:s,location:b.location,delta:S})}function v(x,S){s="PUSH";let _=Kb(b.location,x,S);f=d()+1;let C=sA(_,f),A=b.createHref(_);try{o.pushState(C,"",A)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(A)}i&&c&&c({action:s,location:b.location,delta:1})}function g(x,S){s="REPLACE";let _=Kb(b.location,x,S);f=d();let C=sA(_,f),A=b.createHref(_);o.replaceState(C,"",A),i&&c&&c({action:s,location:b.location,delta:0})}function y(x){return dz(x)}let b={get action(){return s},get location(){return e(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(uA,p),c=x,()=>{a.removeEventListener(uA,p),c=null}},createHref(x){return t(a,x)},createURL:y,encodeLocation(x){let S=y(x);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:g,go(x){return o.go(x)}};return b}function dz(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),kt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Gc(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function KM(e,t,n="/"){return hz(e,t,n,!1)}function hz(e,t,n,r){let a=typeof t=="string"?bl(t):t,i=Di(a.pathname||"/",n);if(i==null)return null;let o=XM(e);pz(o);let s=null;for(let c=0;s==null&&c<o.length;++c){let f=Cz(i);s=Ez(o[c],f,r)}return s}function XM(e,t=[],n=[],r="",a=!1){let i=(o,s,c=a,f)=>{let d={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;kt(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let p=Ti([r,d.relativePath]),v=n.concat(d);o.children&&o.children.length>0&&(kt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),XM(o.children,t,v,p,c)),!(o.path==null&&!o.index)&&t.push({path:p,score:wz(p,o.index),routesMeta:v})};return e.forEach((o,s)=>{if(o.path===""||!o.path?.includes("?"))i(o,s);else for(let c of YM(o.path))i(o,s,!0,c)}),t}function YM(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=YM(r.join("/")),s=[];return s.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&s.push(...o),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function pz(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Sz(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var vz=/^:[\w-]+$/,mz=3,gz=2,yz=1,bz=10,xz=-2,lA=e=>e==="*";function wz(e,t){let n=e.split("/"),r=n.length;return n.some(lA)&&(r+=xz),t&&(r+=gz),n.filter(a=>!lA(a)).reduce((a,i)=>a+(vz.test(i)?mz:i===""?yz:bz),r)}function Sz(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function Ez(e,t,n=!1){let{routesMeta:r}=e,a={},i="/",o=[];for(let s=0;s<r.length;++s){let c=r[s],f=s===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",p=ep({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},d),v=c.route;if(!p&&f&&n&&!r[r.length-1].route.index&&(p=ep({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Ti([i,p.pathname]),pathnameBase:Rz(Ti([i,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(i=Ti([i,p.pathnameBase]))}return o}function ep(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=_z(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((f,{paramName:d,isOptional:p},v)=>{if(d==="*"){let y=s[v]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=s[v];return p&&!g?f[d]=void 0:f[d]=(g||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:e}}function _z(e,t=!1,n=!0){wa(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,c)=>(r.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function Cz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return wa(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Di(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var ZM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Az=e=>ZM.test(e);function Oz(e,t="/"){let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?bl(e):e,i;if(n)if(Az(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),wa(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=cA(n.substring(1),"/"):i=cA(n,t)}else i=t;return{pathname:i,search:Dz(r),hash:Mz(a)}}function cA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function jy(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Tz(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function QM(e){let t=Tz(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function JM(e,t,n,r=!1){let a;typeof e=="string"?a=bl(e):(a={...e},kt(!a.pathname||!a.pathname.includes("?"),jy("?","pathname","search",a)),kt(!a.pathname||!a.pathname.includes("#"),jy("#","pathname","hash",a)),kt(!a.search||!a.search.includes("#"),jy("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),p-=1;a.pathname=v.join("/")}s=p>=0?t[p]:"/"}let c=Oz(a,s),f=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||d)&&(c.pathname+="/"),c}var Ti=e=>e.join("/").replace(/\/\/+/g,"/"),Rz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Dz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Mz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,kz=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Nz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Iz(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ek=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tk(e,t){let n=e;if(typeof n!="string"||!ZM.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,a=!1;if(ek)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),s=Di(o.pathname,t);o.origin===i.origin&&s!=null?n=s+o.search+o.hash:a=!0}catch{wa(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nk=["POST","PUT","PATCH","DELETE"];new Set(nk);var Pz=["GET",...nk];new Set(Pz);var xl=T.createContext(null);xl.displayName="DataRouter";var hv=T.createContext(null);hv.displayName="DataRouterState";var Bz=T.createContext(!1),rk=T.createContext({isTransitioning:!1});rk.displayName="ViewTransition";var Lz=T.createContext(new Map);Lz.displayName="Fetchers";var Fz=T.createContext(null);Fz.displayName="Await";var ia=T.createContext(null);ia.displayName="Navigation";var yf=T.createContext(null);yf.displayName="Location";var Ui=T.createContext({outlet:null,matches:[],isDataRoute:!1});Ui.displayName="Route";var gx=T.createContext(null);gx.displayName="RouteError";var ak="REACT_ROUTER_ERROR",jz="REDIRECT",zz="ROUTE_ERROR_RESPONSE";function Uz(e){if(e.startsWith(`${ak}:${jz}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Wz(e){if(e.startsWith(`${ak}:${zz}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new kz(t.status,t.statusText,t.data)}catch{}}function Hz(e,{relative:t}={}){kt(bf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=T.useContext(ia),{hash:a,pathname:i,search:o}=xf(e,{relative:t}),s=i;return n!=="/"&&(s=i==="/"?n:Ti([n,i])),r.createHref({pathname:s,search:o,hash:a})}function bf(){return T.useContext(yf)!=null}function Ho(){return kt(bf(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(yf).location}var ik="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ok(e){T.useContext(ia).static||T.useLayoutEffect(e)}function uk(){let{isDataRoute:e}=T.useContext(Ui);return e?nU():qz()}function qz(){kt(bf(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(xl),{basename:t,navigator:n}=T.useContext(ia),{matches:r}=T.useContext(Ui),{pathname:a}=Ho(),i=JSON.stringify(QM(r)),o=T.useRef(!1);return ok(()=>{o.current=!0}),T.useCallback((c,f={})=>{if(wa(o.current,ik),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=JM(c,JSON.parse(i),a,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Ti([t,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[t,n,i,a,e])}T.createContext(null);function xf(e,{relative:t}={}){let{matches:n}=T.useContext(Ui),{pathname:r}=Ho(),a=JSON.stringify(QM(n));return T.useMemo(()=>JM(e,JSON.parse(a),r,t==="path"),[e,a,r,t])}function Vz(e,t){return sk(e,t)}function sk(e,t,n,r,a){kt(bf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=T.useContext(ia),{matches:o}=T.useContext(Ui),s=o[o.length-1],c=s?s.params:{},f=s?s.pathname:"/",d=s?s.pathnameBase:"/",p=s&&s.route;{let _=p&&p.path||"";ck(f,!p||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let v=Ho(),g;if(t){let _=typeof t=="string"?bl(t):t;kt(d==="/"||_.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),g=_}else g=v;let y=g.pathname||"/",b=y;if(d!=="/"){let _=d.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=KM(e,{pathname:b});wa(p||x!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),wa(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Yz(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:Ti([d,i.encodeLocation?i.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:Ti([d,i.encodeLocation?i.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,a);return t&&S?T.createElement(yf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},S):S}function Gz(){let e=tU(),t=Nz(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:i},"ErrorBoundary")," or"," ",T.createElement("code",{style:i},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),n?T.createElement("pre",{style:a},n):null,o)}var $z=T.createElement(Gz,null),lk=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=Wz(e.digest);n&&(e=n)}let t=e!==void 0?T.createElement(Ui.Provider,{value:this.props.routeContext},T.createElement(gx.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?T.createElement(Kz,{error:e},t):t}};lk.contextType=Bz;var zy=new WeakMap;function Kz({children:e,error:t}){let{basename:n}=T.useContext(ia);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=Uz(t.digest);if(r){let a=zy.get(t);if(a)throw a;let i=tk(r.location,n);if(ek&&!zy.get(t))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw zy.set(t,o),o}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function Xz({routeContext:e,match:t,children:n}){let r=T.useContext(xl);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(Ui.Provider,{value:e},n)}function Yz(e,t=[],n=null,r=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n?.errors;if(o!=null){let d=i.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);kt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let s=!1,c=-1;if(n)for(let d=0;d<i.length;d++){let p=i[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:v,errors:g}=n,y=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!g||g[p.route.id]===void 0);if(p.route.lazy||y){s=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let f=n&&r?(d,p)=>{r(d,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Iz(n.matches),errorInfo:p})}:void 0;return i.reduceRight((d,p,v)=>{let g,y=!1,b=null,x=null;n&&(g=o&&p.route.id?o[p.route.id]:void 0,b=p.route.errorElement||$z,s&&(c<0&&v===0?(ck("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,x=null):c===v&&(y=!0,x=p.route.hydrateFallbackElement||null)));let S=t.concat(i.slice(0,v+1)),_=()=>{let C;return g?C=b:y?C=x:p.route.Component?C=T.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=d,T.createElement(Xz,{match:p,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?T.createElement(lk,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:f}):_()},null)}function yx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zz(e){let t=T.useContext(xl);return kt(t,yx(e)),t}function Qz(e){let t=T.useContext(hv);return kt(t,yx(e)),t}function Jz(e){let t=T.useContext(Ui);return kt(t,yx(e)),t}function bx(e){let t=Jz(e),n=t.matches[t.matches.length-1];return kt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function eU(){return bx("useRouteId")}function tU(){let e=T.useContext(gx),t=Qz("useRouteError"),n=bx("useRouteError");return e!==void 0?e:t.errors?.[n]}function nU(){let{router:e}=Zz("useNavigate"),t=bx("useNavigate"),n=T.useRef(!1);return ok(()=>{n.current=!0}),T.useCallback(async(a,i={})=>{wa(n.current,ik),n.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var fA={};function ck(e,t,n){!t&&!fA[e]&&(fA[e]=!0,wa(!1,n))}T.memo(rU);function rU({routes:e,future:t,state:n,onError:r}){return sk(e,void 0,n,r,t)}function Vh(e){kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aU({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:i=!1,unstable_useTransitions:o}){kt(!bf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:s,navigator:a,static:i,unstable_useTransitions:o,future:{}}),[s,a,i,o]);typeof n=="string"&&(n=bl(n));let{pathname:f="/",search:d="",hash:p="",state:v=null,key:g="default"}=n,y=T.useMemo(()=>{let b=Di(f,s);return b==null?null:{location:{pathname:b,search:d,hash:p,state:v,key:g},navigationType:r}},[s,f,d,p,v,g,r]);return wa(y!=null,`<Router basename="${s}"> is not able to match the URL "${f}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:T.createElement(ia.Provider,{value:c},T.createElement(yf.Provider,{children:t,value:y}))}function iU({children:e,location:t}){return Vz(Xb(e),t)}function Xb(e,t=[]){let n=[];return T.Children.forEach(e,(r,a)=>{if(!T.isValidElement(r))return;let i=[...t,a];if(r.type===T.Fragment){n.push.apply(n,Xb(r.props.children,i));return}kt(r.type===Vh,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Xb(r.props.children,i)),n.push(o)}),n}var Gh="get",$h="application/x-www-form-urlencoded";function pv(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function oU(e){return pv(e)&&e.tagName.toLowerCase()==="button"}function uU(e){return pv(e)&&e.tagName.toLowerCase()==="form"}function sU(e){return pv(e)&&e.tagName.toLowerCase()==="input"}function lU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cU(e,t){return e.button===0&&(!t||t==="_self")&&!lU(e)}var ph=null;function fU(){if(ph===null)try{new FormData(document.createElement("form"),0),ph=!1}catch{ph=!0}return ph}var dU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Uy(e){return e!=null&&!dU.has(e)?(wa(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$h}"`),null):e}function hU(e,t){let n,r,a,i,o;if(uU(e)){let s=e.getAttribute("action");r=s?Di(s,t):null,n=e.getAttribute("method")||Gh,a=Uy(e.getAttribute("enctype"))||$h,i=new FormData(e)}else if(oU(e)||sU(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||s.getAttribute("action");if(r=c?Di(c,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Gh,a=Uy(e.getAttribute("formenctype"))||Uy(s.getAttribute("enctype"))||$h,i=new FormData(s,e),!fU()){let{name:f,type:d,value:p}=e;if(d==="image"){let v=f?`${f}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else f&&i.append(f,p)}}else{if(pv(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Gh,r=null,a=$h,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pU(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Di(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function vU(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mU(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function gU(e,t,n){let r=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await vU(i,n);return o.links?o.links():[]}return[]}));return wU(r.flat(1).filter(mU).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function dA(e,t,n,r,a,i){let o=(c,f)=>n[f]?c.route.id!==n[f].route.id:!0,s=(c,f)=>n[f].pathname!==c.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,f)=>o(c,f)||s(c,f)):i==="data"?t.filter((c,f)=>{let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,f)||s(c,f))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function yU(e,t,{includeHydrateFallback:n}={}){return bU(e.map(r=>{let a=t.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function bU(e){return[...new Set(e)]}function xU(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function wU(e,t){let n=new Set;return new Set(t),e.reduce((r,a)=>{let i=JSON.stringify(xU(a));return n.has(i)||(n.add(i),r.push({key:i,link:a})),r},[])}function fk(){let e=T.useContext(xl);return xx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function SU(){let e=T.useContext(hv);return xx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var wx=T.createContext(void 0);wx.displayName="FrameworkContext";function dk(){let e=T.useContext(wx);return xx(e,"You must render this element inside a <HydratedRouter> element"),e}function EU(e,t){let n=T.useContext(wx),[r,a]=T.useState(!1),[i,o]=T.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:f,onMouseLeave:d,onTouchStart:p}=t,v=T.useRef(null);T.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let b=S=>{S.forEach(_=>{o(_.isIntersecting)})},x=new IntersectionObserver(b,{threshold:.5});return v.current&&x.observe(v.current),()=>{x.disconnect()}}},[e]),T.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let g=()=>{a(!0)},y=()=>{a(!1),o(!1)};return n?e!=="intent"?[i,v,{}]:[i,v,{onFocus:Cc(s,g),onBlur:Cc(c,y),onMouseEnter:Cc(f,g),onMouseLeave:Cc(d,y),onTouchStart:Cc(p,g)}]:[!1,v,{}]}function Cc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function _U({page:e,...t}){let{router:n}=fk(),r=T.useMemo(()=>KM(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?T.createElement(AU,{page:e,matches:r,...t}):null}function CU(e){let{manifest:t,routeModules:n}=dk(),[r,a]=T.useState([]);return T.useEffect(()=>{let i=!1;return gU(e,t,n).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,n]),r}function AU({page:e,matches:t,...n}){let r=Ho(),{manifest:a,routeModules:i}=dk(),{basename:o}=fk(),{loaderData:s,matches:c}=SU(),f=T.useMemo(()=>dA(e,t,c,a,r,"data"),[e,t,c,a,r]),d=T.useMemo(()=>dA(e,t,c,a,r,"assets"),[e,t,c,a,r]),p=T.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let y=new Set,b=!1;if(t.forEach(S=>{let _=a.routes[S.route.id];!_||!_.hasLoader||(!f.some(C=>C.route.id===S.route.id)&&S.route.id in s&&i[S.route.id]?.shouldRevalidate||_.hasClientLoader?b=!0:y.add(S.route.id))}),y.size===0)return[];let x=pU(e,o,"data");return b&&y.size>0&&x.searchParams.set("_routes",t.filter(S=>y.has(S.route.id)).map(S=>S.route.id).join(",")),[x.pathname+x.search]},[o,s,r,a,f,t,e,i]),v=T.useMemo(()=>yU(d,a),[d,a]),g=CU(d);return T.createElement(T.Fragment,null,p.map(y=>T.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),v.map(y=>T.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),g.map(({key:y,link:b})=>T.createElement("link",{key:y,nonce:n.nonce,...b})))}function OU(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var TU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TU&&(window.__reactRouterVersion="7.11.0")}catch{}function RU({basename:e,children:t,unstable_useTransitions:n,window:r}){let a=T.useRef();a.current==null&&(a.current=lz({window:r,v5Compat:!0}));let i=a.current,[o,s]=T.useState({action:i.action,location:i.location}),c=T.useCallback(f=>{n===!1?s(f):T.startTransition(()=>s(f))},[n]);return T.useLayoutEffect(()=>i.listen(c),[i,c]),T.createElement(aU,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var hk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xs=T.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:a,reloadDocument:i,replace:o,state:s,target:c,to:f,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:v,...g},y){let{basename:b,unstable_useTransitions:x}=T.useContext(ia),S=typeof f=="string"&&hk.test(f),_=tk(f,b);f=_.to;let C=Hz(f,{relative:a}),[A,O,R]=EU(r,g),M=NU(f,{replace:o,state:s,target:c,preventScrollReset:d,relative:a,viewTransition:p,unstable_defaultShouldRevalidate:v,unstable_useTransitions:x});function k(P){t&&t(P),P.defaultPrevented||M(P)}let I=T.createElement("a",{...g,...R,href:_.absoluteURL||C,onClick:_.isExternal||i?t:k,ref:OU(y,O),target:c,"data-discover":!S&&n==="render"?"true":void 0});return A&&!S?T.createElement(T.Fragment,null,I,T.createElement(_U,{page:C})):I});Xs.displayName="Link";var DU=T.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:a=!1,style:i,to:o,viewTransition:s,children:c,...f},d){let p=xf(o,{relative:f.relative}),v=Ho(),g=T.useContext(hv),{navigator:y,basename:b}=T.useContext(ia),x=g!=null&&FU(p)&&s===!0,S=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,_=v.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(_=_.toLowerCase(),C=C?C.toLowerCase():null,S=S.toLowerCase()),C&&b&&(C=Di(C,b)||C);const A=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=_===S||!a&&_.startsWith(S)&&_.charAt(A)==="/",R=C!=null&&(C===S||!a&&C.startsWith(S)&&C.charAt(S.length)==="/"),M={isActive:O,isPending:R,isTransitioning:x},k=O?t:void 0,I;typeof r=="function"?I=r(M):I=[r,O?"active":null,R?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(M):i;return T.createElement(Xs,{...f,"aria-current":k,className:I,ref:d,style:P,to:o,viewTransition:s},typeof c=="function"?c(M):c)});DU.displayName="NavLink";var MU=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:i,method:o=Gh,action:s,onSubmit:c,relative:f,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:v,...g},y)=>{let{unstable_useTransitions:b}=T.useContext(ia),x=BU(),S=LU(s,{relative:f}),_=o.toLowerCase()==="get"?"get":"post",C=typeof s=="string"&&hk.test(s),A=O=>{if(c&&c(O),O.defaultPrevented)return;O.preventDefault();let R=O.nativeEvent.submitter,M=R?.getAttribute("formmethod")||o,k=()=>x(R||O.currentTarget,{fetcherKey:t,method:M,navigate:n,replace:a,state:i,relative:f,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:v});b&&n!==!1?T.startTransition(()=>k()):k()};return T.createElement("form",{ref:y,method:_,action:S,onSubmit:r?c:A,...g,"data-discover":!C&&e==="render"?"true":void 0})});MU.displayName="Form";function kU(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pk(e){let t=T.useContext(xl);return kt(t,kU(e)),t}function NU(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:s,unstable_useTransitions:c}={}){let f=uk(),d=Ho(),p=xf(e,{relative:i});return T.useCallback(v=>{if(cU(v,t)){v.preventDefault();let g=n!==void 0?n:Gc(d)===Gc(p),y=()=>f(e,{replace:g,state:r,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:s});c?T.startTransition(()=>y()):y()}},[d,f,p,n,r,t,e,a,i,o,s,c])}var IU=0,PU=()=>`__${String(++IU)}__`;function BU(){let{router:e}=pk("useSubmit"),{basename:t}=T.useContext(ia),n=eU(),r=e.fetch,a=e.navigate;return T.useCallback(async(i,o={})=>{let{action:s,method:c,encType:f,formData:d,body:p}=hU(i,t);if(o.navigate===!1){let v=o.fetcherKey||PU();await r(v,n,o.action||s,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:p,formMethod:o.method||c,formEncType:o.encType||f,flushSync:o.flushSync})}else await a(o.action||s,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:p,formMethod:o.method||c,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,a,t,n])}function LU(e,{relative:t}={}){let{basename:n}=T.useContext(ia),r=T.useContext(Ui);kt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...xf(e||".",{relative:t})},o=Ho();if(e==null){i.search=o.search;let s=new URLSearchParams(i.search),c=s.getAll("index");if(c.some(d=>d==="")){s.delete("index"),c.filter(p=>p).forEach(p=>s.append("index",p));let d=s.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Ti([n,i.pathname])),Gc(i)}function FU(e,{relative:t}={}){let n=T.useContext(rk);kt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=pk("useViewTransitionState"),a=xf(e,{relative:t});if(!n.isTransitioning)return!1;let i=Di(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Di(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ep(a.pathname,o)!=null||ep(a.pathname,i)!=null}var vk=$M();const jU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),hA=e=>{const t=zU(e);return t.charAt(0).toUpperCase()+t.slice(1)},mk=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),UU=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var WU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const HU=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},c)=>T.createElement("svg",{ref:c,...WU,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:mk("lucide",a),...!i&&!UU(s)&&{"aria-hidden":"true"},...s},[...o.map(([f,d])=>T.createElement(f,d)),...Array.isArray(i)?i:[i]]));const $n=(e,t)=>{const n=T.forwardRef(({className:r,...a},i)=>T.createElement(HU,{ref:i,iconNode:t,className:mk(`lucide-${jU(hA(e))}`,`lucide-${e}`,r),...a}));return n.displayName=hA(e),n};const qU=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],VU=$n("activity",qU);const GU=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],gk=$n("building-2",GU);const $U=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],KU=$n("camera",$U);const XU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pA=$n("check",XU);const YU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ZU=$n("circle-alert",YU);const QU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],JU=$n("circle-x",QU);const e6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],t6=$n("clock",e6);const n6=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],r6=$n("download",n6);const a6=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],i6=$n("layout-dashboard",a6);const o6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],u6=$n("loader-circle",o6);const s6=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],l6=$n("log-in",s6);const c6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],f6=$n("log-out",c6);const d6=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 9h.01",key:"x1ddxp"}]],yk=$n("scan-face",d6);const h6=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],p6=$n("user-check",h6);const v6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bk=$n("user-plus",v6);const m6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],g6=$n("users",m6);function xk(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=xk(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function At(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=xk(e))&&(r&&(r+=" "),r+=t);return r}var y6=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Sx(e){if(typeof e!="string")return!1;var t=y6;return t.includes(e)}var b6=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],x6=new Set(b6);function wk(e){return typeof e!="string"?!1:x6.has(e)}function Sk(e){return typeof e=="string"&&e.startsWith("data-")}function jo(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(wk(n)||Sk(n))&&(t[n]=e[n]);return t}function Ex(e){if(e==null)return null;if(T.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return jo(t)}return typeof e=="object"&&!Array.isArray(e)?jo(e):null}function na(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(wk(n)||Sk(n)||Sx(n))&&(t[n]=e[n]);return t}var w6=["children","width","height","viewBox","className","style","title","desc"];function Yb(){return Yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yb.apply(null,arguments)}function S6(e,t){if(e==null)return{};var n,r,a=E6(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function E6(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Ek=T.forwardRef((e,t)=>{var{children:n,width:r,height:a,viewBox:i,className:o,style:s,title:c,desc:f}=e,d=S6(e,w6),p=i||{width:r,height:a,x:0,y:0},v=At("recharts-surface",o);return T.createElement("svg",Yb({},na(d),{className:v,width:r,height:a,style:s,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),T.createElement("title",null,c),T.createElement("desc",null,f),n)}),_6=["children","className"];function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zb.apply(null,arguments)}function C6(e,t){if(e==null)return{};var n,r,a=A6(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function A6(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Mi=T.forwardRef((e,t)=>{var{children:n,className:r}=e,a=C6(e,_6),i=At("recharts-layer",r);return T.createElement("g",Zb({className:i},na(a),{ref:t}),n)}),O6=T.createContext(null);function xt(e){return function(){return e}}const _k=Math.cos,tp=Math.sin,_a=Math.sqrt,np=Math.PI,vv=2*np,Qb=Math.PI,Jb=2*Qb,vu=1e-6,T6=Jb-vu;function Ck(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function R6(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ck;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class D6{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ck:R6(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,c=r-t,f=a-n,d=o-t,p=s-n,v=d*d+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(v>vu)if(!(Math.abs(p*c-f*d)>vu)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-o,y=a-s,b=c*c+f*f,x=g*g+y*y,S=Math.sqrt(b),_=Math.sqrt(v),C=i*Math.tan((Qb-Math.acos((b+v-x)/(2*S*_)))/2),A=C/_,O=C/S;Math.abs(A-1)>vu&&this._append`L${t+A*d},${n+A*p}`,this._append`A${i},${i},0,0,${+(p*g>d*y)},${this._x1=t+O*c},${this._y1=n+O*f}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(a),c=r*Math.sin(a),f=t+s,d=n+c,p=1^o,v=o?a-i:i-a;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>vu||Math.abs(this._y1-d)>vu)&&this._append`L${f},${d}`,r&&(v<0&&(v=v%Jb+Jb),v>T6?this._append`A${r},${r},0,1,${p},${t-s},${n-c}A${r},${r},0,1,${p},${this._x1=f},${this._y1=d}`:v>vu&&this._append`A${r},${r},0,${+(v>=Qb)},${p},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function _x(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new D6(t)}function Cx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ak(e){this._context=e}Ak.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function mv(e){return new Ak(e)}function Ok(e){return e[0]}function Tk(e){return e[1]}function Rk(e,t){var n=xt(!0),r=null,a=mv,i=null,o=_x(s);e=typeof e=="function"?e:e===void 0?Ok:xt(e),t=typeof t=="function"?t:t===void 0?Tk:xt(t);function s(c){var f,d=(c=Cx(c)).length,p,v=!1,g;for(r==null&&(i=a(g=o())),f=0;f<=d;++f)!(f<d&&n(p=c[f],f,c))===v&&((v=!v)?i.lineStart():i.lineEnd()),v&&i.point(+e(p,f,c),+t(p,f,c));if(g)return i=null,g+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:xt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:xt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:xt(!!c),s):n},s.curve=function(c){return arguments.length?(a=c,r!=null&&(i=a(r)),s):a},s.context=function(c){return arguments.length?(c==null?r=i=null:i=a(r=c),s):r},s}function vh(e,t,n){var r=null,a=xt(!0),i=null,o=mv,s=null,c=_x(f);e=typeof e=="function"?e:e===void 0?Ok:xt(+e),t=typeof t=="function"?t:xt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Tk:xt(+n);function f(p){var v,g,y,b=(p=Cx(p)).length,x,S=!1,_,C=new Array(b),A=new Array(b);for(i==null&&(s=o(_=c())),v=0;v<=b;++v){if(!(v<b&&a(x=p[v],v,p))===S)if(S=!S)g=v,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=v-1;y>=g;--y)s.point(C[y],A[y]);s.lineEnd(),s.areaEnd()}S&&(C[v]=+e(x,v,p),A[v]=+t(x,v,p),s.point(r?+r(x,v,p):C[v],n?+n(x,v,p):A[v]))}if(_)return s=null,_+""||null}function d(){return Rk().defined(a).curve(o).context(i)}return f.x=function(p){return arguments.length?(e=typeof p=="function"?p:xt(+p),r=null,f):e},f.x0=function(p){return arguments.length?(e=typeof p=="function"?p:xt(+p),f):e},f.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:xt(+p),f):r},f.y=function(p){return arguments.length?(t=typeof p=="function"?p:xt(+p),n=null,f):t},f.y0=function(p){return arguments.length?(t=typeof p=="function"?p:xt(+p),f):t},f.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:xt(+p),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(r).y(t)},f.defined=function(p){return arguments.length?(a=typeof p=="function"?p:xt(!!p),f):a},f.curve=function(p){return arguments.length?(o=p,i!=null&&(s=o(i)),f):o},f.context=function(p){return arguments.length?(p==null?i=s=null:s=o(i=p),f):i},f}class Dk{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function M6(e){return new Dk(e,!0)}function k6(e){return new Dk(e,!1)}const Ax={draw(e,t){const n=_a(t/np);e.moveTo(n,0),e.arc(0,0,n,0,vv)}},N6={draw(e,t){const n=_a(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Mk=_a(1/3),I6=Mk*2,P6={draw(e,t){const n=_a(t/I6),r=n*Mk;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},B6={draw(e,t){const n=_a(t),r=-n/2;e.rect(r,r,n,n)}},L6=.8908130915292852,kk=tp(np/10)/tp(7*np/10),F6=tp(vv/10)*kk,j6=-_k(vv/10)*kk,z6={draw(e,t){const n=_a(t*L6),r=F6*n,a=j6*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const o=vv*i/5,s=_k(o),c=tp(o);e.lineTo(c*n,-s*n),e.lineTo(s*r-c*a,c*r+s*a)}e.closePath()}},Wy=_a(3),U6={draw(e,t){const n=-_a(t/(Wy*3));e.moveTo(0,n*2),e.lineTo(-Wy*n,-n),e.lineTo(Wy*n,-n),e.closePath()}},Xr=-.5,Yr=_a(3)/2,e1=1/_a(12),W6=(e1/2+1)*3,H6={draw(e,t){const n=_a(t/W6),r=n/2,a=n*e1,i=r,o=n*e1+n,s=-i,c=o;e.moveTo(r,a),e.lineTo(i,o),e.lineTo(s,c),e.lineTo(Xr*r-Yr*a,Yr*r+Xr*a),e.lineTo(Xr*i-Yr*o,Yr*i+Xr*o),e.lineTo(Xr*s-Yr*c,Yr*s+Xr*c),e.lineTo(Xr*r+Yr*a,Xr*a-Yr*r),e.lineTo(Xr*i+Yr*o,Xr*o-Yr*i),e.lineTo(Xr*s+Yr*c,Xr*c-Yr*s),e.closePath()}};function q6(e,t){let n=null,r=_x(a);e=typeof e=="function"?e:xt(e||Ax),t=typeof t=="function"?t:xt(t===void 0?64:+t);function a(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:xt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:xt(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function rp(){}function ap(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Nk(e){this._context=e}Nk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ap(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ap(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function V6(e){return new Nk(e)}function Ik(e){this._context=e}Ik.prototype={areaStart:rp,areaEnd:rp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ap(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function G6(e){return new Ik(e)}function Pk(e){this._context=e}Pk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ap(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $6(e){return new Pk(e)}function Bk(e){this._context=e}Bk.prototype={areaStart:rp,areaEnd:rp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function K6(e){return new Bk(e)}function vA(e){return e<0?-1:1}function mA(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),s=(i*a+o*r)/(r+a);return(vA(i)+vA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function gA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Hy(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-r)/3;e._context.bezierCurveTo(r+s,a+s*t,i-s,o-s*n,i,o)}function ip(e){this._context=e}ip.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hy(this,this._t0,gA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Hy(this,gA(this,n=mA(this,e,t)),n);break;default:Hy(this,this._t0,n=mA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Lk(e){this._context=new Fk(e)}(Lk.prototype=Object.create(ip.prototype)).point=function(e,t){ip.prototype.point.call(this,t,e)};function Fk(e){this._context=e}Fk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}};function X6(e){return new ip(e)}function Y6(e){return new Lk(e)}function jk(e){this._context=e}jk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=yA(e),a=yA(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yA(e){var t,n=e.length-1,r,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Z6(e){return new jk(e)}function gv(e,t){this._context=e,this._t=t}gv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Q6(e){return new gv(e,.5)}function J6(e){return new gv(e,0)}function e5(e){return new gv(e,1)}function ku(e,t){if((o=e.length)>1)for(var n=1,r,a,i=e[t[0]],o,s=i.length;n<o;++n)for(a=i,i=e[t[n]],r=0;r<s;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function t1(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function t5(e,t){return e[t]}function n5(e){const t=[];return t.key=e,t}function r5(){var e=xt([]),t=t1,n=ku,r=t5;function a(i){var o=Array.from(e.apply(this,arguments),n5),s,c=o.length,f=-1,d;for(const p of i)for(s=0,++f;s<c;++s)(o[s][f]=[0,+r(p,o[s].key,f,i)]).data=p;for(s=0,d=Cx(t(o));s<c;++s)o[d[s]].index=s;return n(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:xt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:xt(+i),a):r},a.order=function(i){return arguments.length?(t=i==null?t1:typeof i=="function"?i:xt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??ku,a):n},a}function a5(e,t){if((r=e.length)>0){for(var n,r,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}ku(e,t)}}function i5(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,i=r.length;n<i;++n){for(var o=0,s=0;o<a;++o)s+=e[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}ku(e,t)}}function o5(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,i,o;r<i;++r){for(var s=0,c=0,f=0;s<o;++s){for(var d=e[t[s]],p=d[r][1]||0,v=d[r-1][1]||0,g=(p-v)/2,y=0;y<s;++y){var b=e[t[y]],x=b[r][1]||0,S=b[r-1][1]||0;g+=x-S}c+=p,f+=g*p}a[r-1][1]+=a[r-1][0]=n,c&&(n-=f/c)}a[r-1][1]+=a[r-1][0]=n,ku(e,t)}}var qy={},Vy={},bA;function u5(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Vy)),Vy}var Gy={},xA;function zk(){return xA||(xA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Gy)),Gy}var $y={},wA;function Ox(){return wA||(wA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})($y)),$y}var Ky={},Xy={},SA;function s5(){return SA||(SA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(Xy)),Xy}var EA;function Tx(){return EA||(EA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s5(),n=Ox();function r(a){if(Array.isArray(a))return a.map(n.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const i=[],o=a.length;if(o===0)return i;let s=0,c="",f="",d=!1;for(a.charCodeAt(0)===46&&(i.push(""),s++);s<o;){const p=a[s];f?p==="\\"&&s+1<o?(s++,c+=a[s]):p===f?f="":c+=p:d?p==='"'||p==="'"?f=p:p==="]"?(d=!1,i.push(c),c=""):c+=p:p==="["?(d=!0,c&&(i.push(c),c="")):p==="."?c&&(i.push(c),c=""):c+=p,s++}return c&&i.push(c),i}e.toPath=r})(Ky)),Ky}var _A;function Rx(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u5(),n=zk(),r=Ox(),a=Tx();function i(s,c,f){if(s==null)return f;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return f;const d=s[c];return d===void 0?n.isDeepKey(c)?i(s,a.toPath(c),f):f:d}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const d=s[c];return d===void 0?f:d}default:{if(Array.isArray(c))return o(s,c,f);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return f;const d=s[c];return d===void 0?f:d}}}function o(s,c,f){if(c.length===0)return f;let d=s;for(let p=0;p<c.length;p++){if(d==null||t.isUnsafeProperty(c[p]))return f;d=d[c[p]]}return d===void 0?f:d}e.get=i})(qy)),qy}var Yy,CA;function l5(){return CA||(CA=1,Yy=Rx().get),Yy}var c5=l5();const il=Ya(c5);var f5=4;function Mo(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f5,n=10**t,r=Math.round(e*n)/n;return Object.is(r,-0)?0:r}function Ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.reduce((a,i,o)=>{var s=n[o-1];return typeof s=="string"?a+s+i:s!==void 0?a+Mo(s)+i:a+i},"")}var Rr=e=>e===0?0:e>0?1:-1,Ga=e=>typeof e=="number"&&e!=+e,ki=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Le=e=>(typeof e=="number"||e instanceof Number)&&!Ga(e),$a=e=>Le(e)||typeof e=="string",d5=0,$c=e=>{var t=++d5;return"".concat(e||"").concat(t)},Sa=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Le(t)&&typeof t!="string")return r;var i;if(ki(t)){if(n==null)return r;var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Ga(i)&&(i=r),a&&n!=null&&i>n&&(i=n),i},Uk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[String(e[r])])n[String(e[r])]=!0;else return!0;return!1};function Nn(e,t,n){return Le(e)&&Le(t)?Mo(e+n*(t-e)):t}function h5(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):il(r,t))===n)}var bn=e=>e===null||typeof e>"u",wf=e=>bn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function p5(e){return e!=null}function Sf(){}var v5=["type","size","sizeType"];function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n1.apply(null,arguments)}function AA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function OA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(n),!0).forEach(function(r){m5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m5(e,t,n){return(t=g5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g5(e){var t=y5(e,"string");return typeof t=="symbol"?t:t+""}function y5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b5(e,t){if(e==null)return{};var n,r,a=x5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function x5(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Wk={symbolCircle:Ax,symbolCross:N6,symbolDiamond:P6,symbolSquare:B6,symbolStar:z6,symbolTriangle:U6,symbolWye:H6},w5=Math.PI/180,S5=e=>{var t="symbol".concat(wf(e));return Wk[t]||Ax},E5=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*w5;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},_5=(e,t)=>{Wk["symbol".concat(wf(e))]=t},Hk=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,a=b5(e,v5),i=OA(OA({},a),{},{type:t,size:n,sizeType:r}),o="circle";typeof t=="string"&&(o=t);var s=()=>{var v=S5(o),g=q6().type(v).size(E5(n,r,o)),y=g();if(y!==null)return y},{className:c,cx:f,cy:d}=i,p=na(i);return Le(f)&&Le(d)&&Le(n)?T.createElement("path",n1({},p,{className:At("recharts-symbols",c),transform:"translate(".concat(f,", ").concat(d,")"),d:s()})):null};Hk.registerSymbol=_5;var qk=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,C5=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(T.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(a=>{Sx(a)&&(r[a]=(i=>n[a](n,i)))}),r},A5=(e,t,n)=>r=>(e(t,n,r),null),Dx=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(a=>{var i=e[a];Sx(a)&&typeof i=="function"&&(r||(r={}),r[a]=A5(i,t,n))}),r};function TA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function O5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TA(Object(n),!0).forEach(function(r){T5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T5(e,t,n){return(t=R5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R5(e){var t=D5(e,"string");return typeof t=="symbol"?t:t+""}function D5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oa(e,t){var n=O5({},e),r=t,a=Object.keys(t),i=a.reduce((o,s)=>(o[s]===void 0&&r[s]!==void 0&&(o[s]=r[s]),o),n);return i}var Zy={},Qy={},RA;function M5(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const a=new Map;for(let i=0;i<n.length;i++){const o=n[i],s=r(o);a.has(s)||a.set(s,o)}return Array.from(a.values())}e.uniqBy=t})(Qy)),Qy}var Jy={},DA;function Vk(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Jy)),Jy}var e0={},t0={},n0={},MA;function k5(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(n0)),n0}var kA;function Mx(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k5();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(t0)),t0}var r0={},NA;function N5(){return NA||(NA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(r0)),r0}var IA;function I5(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mx(),n=N5();function r(a){return n.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=r})(e0)),e0}var a0={},i0={},PA;function P5(){return PA||(PA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rx();function n(r){return function(a){return t.get(a,r)}}e.property=n})(i0)),i0}var o0={},u0={},s0={},l0={},BA;function Gk(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(l0)),l0}var c0={},LA;function $k(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(c0)),c0}var f0={},FA;function Kk(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(f0)),f0}var jA;function B5(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gk(),n=$k(),r=Kk();function a(d,p,v){return typeof v!="function"?a(d,p,()=>{}):i(d,p,function g(y,b,x,S,_,C){const A=v(y,b,x,S,_,C);return A!==void 0?!!A:i(y,b,g,C)},new Map)}function i(d,p,v,g){if(p===d)return!0;switch(typeof p){case"object":return o(d,p,v,g);case"function":return Object.keys(p).length>0?i(d,{...p},v,g):r.eq(d,p);default:return t.isObject(d)?typeof p=="string"?p==="":!0:r.eq(d,p)}}function o(d,p,v,g){if(p==null)return!0;if(Array.isArray(p))return c(d,p,v,g);if(p instanceof Map)return s(d,p,v,g);if(p instanceof Set)return f(d,p,v,g);const y=Object.keys(p);if(d==null||n.isPrimitive(d))return y.length===0;if(y.length===0)return!0;if(g?.has(p))return g.get(p)===d;g?.set(p,d);try{for(let b=0;b<y.length;b++){const x=y[b];if(!n.isPrimitive(d)&&!(x in d)||p[x]===void 0&&d[x]!==void 0||p[x]===null&&d[x]!==null||!v(d[x],p[x],x,d,p,g))return!1}return!0}finally{g?.delete(p)}}function s(d,p,v,g){if(p.size===0)return!0;if(!(d instanceof Map))return!1;for(const[y,b]of p.entries()){const x=d.get(y);if(v(x,b,y,d,p,g)===!1)return!1}return!0}function c(d,p,v,g){if(p.length===0)return!0;if(!Array.isArray(d))return!1;const y=new Set;for(let b=0;b<p.length;b++){const x=p[b];let S=!1;for(let _=0;_<d.length;_++){if(y.has(_))continue;const C=d[_];let A=!1;if(v(C,x,b,d,p,g)&&(A=!0),A){y.add(_),S=!0;break}}if(!S)return!1}return!0}function f(d,p,v,g){return p.size===0?!0:d instanceof Set?c([...d],[...p],v,g):!1}e.isMatchWith=a,e.isSetMatch=f})(s0)),s0}var zA;function Xk(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B5();function n(r,a){return t.isMatchWith(r,a,()=>{})}e.isMatch=n})(u0)),u0}var d0={},h0={},p0={},UA;function L5(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(p0)),p0}var v0={},WA;function Yk(){return WA||(WA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(v0)),v0}var m0={},HA;function Zk(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",s="[object Date]",c="[object Map]",f="[object Set]",d="[object Array]",p="[object Function]",v="[object ArrayBuffer]",g="[object Object]",y="[object Error]",b="[object DataView]",x="[object Uint8Array]",S="[object Uint8ClampedArray]",_="[object Uint16Array]",C="[object Uint32Array]",A="[object BigUint64Array]",O="[object Int8Array]",R="[object Int16Array]",M="[object Int32Array]",k="[object BigInt64Array]",I="[object Float32Array]",P="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=v,e.arrayTag=d,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=A,e.booleanTag=a,e.dataViewTag=b,e.dateTag=s,e.errorTag=y,e.float32ArrayTag=I,e.float64ArrayTag=P,e.functionTag=p,e.int16ArrayTag=R,e.int32ArrayTag=M,e.int8ArrayTag=O,e.mapTag=c,e.numberTag=r,e.objectTag=g,e.regexpTag=t,e.setTag=f,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=_,e.uint32ArrayTag=C,e.uint8ArrayTag=x,e.uint8ClampedArrayTag=S})(m0)),m0}var g0={},qA;function F5(){return qA||(qA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(g0)),g0}var VA;function Qk(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5(),n=Yk(),r=Zk(),a=$k(),i=F5();function o(d,p){return s(d,void 0,d,new Map,p)}function s(d,p,v,g=new Map,y=void 0){const b=y?.(d,p,v,g);if(b!==void 0)return b;if(a.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const x=new Array(d.length);g.set(d,x);for(let S=0;S<d.length;S++)x[S]=s(d[S],S,v,g,y);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;g.set(d,x);for(const[S,_]of d)x.set(S,s(_,S,v,g,y));return x}if(d instanceof Set){const x=new Set;g.set(d,x);for(const S of d)x.add(s(S,void 0,v,g,y));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,x);for(let S=0;S<d.length;S++)x[S]=s(d[S],S,v,g,y);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,x),c(x,d,v,g,y),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return g.set(d,x),c(x,d,v,g,y),x}if(typeof Blob<"u"&&d instanceof Blob){const x=new Blob([d],{type:d.type});return g.set(d,x),c(x,d,v,g,y),x}if(d instanceof Error){const x=new d.constructor;return g.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,c(x,d,v,g,y),x}if(d instanceof Boolean){const x=new Boolean(d.valueOf());return g.set(d,x),c(x,d,v,g,y),x}if(d instanceof Number){const x=new Number(d.valueOf());return g.set(d,x),c(x,d,v,g,y),x}if(d instanceof String){const x=new String(d.valueOf());return g.set(d,x),c(x,d,v,g,y),x}if(typeof d=="object"&&f(d)){const x=Object.create(Object.getPrototypeOf(d));return g.set(d,x),c(x,d,v,g,y),x}return d}function c(d,p,v=d,g,y){const b=[...Object.keys(p),...t.getSymbols(p)];for(let x=0;x<b.length;x++){const S=b[x],_=Object.getOwnPropertyDescriptor(d,S);(_==null||_.writable)&&(d[S]=s(p[S],S,v,g,y))}}function f(d){switch(n.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=s,e.copyProperties=c})(h0)),h0}var GA;function j5(){return GA||(GA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qk();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(d0)),d0}var $A;function z5(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xk(),n=j5();function r(a){return a=n.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=r})(o0)),o0}var y0={},b0={},x0={},KA;function U5(){return KA||(KA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qk(),n=Zk();function r(a,i){return t.cloneDeepWith(a,(o,s,c,f)=>{const d=i?.(o,s,c,f);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new a.constructor(a?.valueOf());return t.copyProperties(p,a),p}case n.argumentsTag:{const p={};return t.copyProperties(p,a),p.length=a.length,p[Symbol.iterator]=a[Symbol.iterator],p}default:return}})}e.cloneDeepWith=r})(x0)),x0}var XA;function W5(){return XA||(XA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U5();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(b0)),b0}var w0={},S0={},YA;function Jk(){return YA||(YA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,a=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<a;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(S0)),S0}var E0={},ZA;function H5(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yk();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(E0)),E0}var QA;function q5(){return QA||(QA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zk(),n=Jk(),r=H5(),a=Tx();function i(o,s){let c;if(Array.isArray(s)?c=s:typeof s=="string"&&t.isDeepKey(s)&&o?.[s]==null?c=a.toPath(s):c=[s],c.length===0)return!1;let f=o;for(let d=0;d<c.length;d++){const p=c[d];if((f==null||!Object.hasOwn(f,p))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(p)&&p<f.length))return!1;f=f[p]}return!0}e.has=i})(w0)),w0}var JA;function V5(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xk(),n=Ox(),r=W5(),a=Rx(),i=q5();function o(s,c){switch(typeof s){case"object":{Object.is(s?.valueOf(),-0)&&(s="-0");break}case"number":{s=n.toKey(s);break}}return c=r.cloneDeep(c),function(f){const d=a.get(f,s);return d===void 0?i.has(f,s):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(y0)),y0}var eO;function G5(){return eO||(eO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vk(),n=P5(),r=z5(),a=V5();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=i})(a0)),a0}var tO;function $5(){return tO||(tO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M5(),n=Vk(),r=I5(),a=G5();function i(o,s=n.identity){return r.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(s)):[]}e.uniqBy=i})(Zy)),Zy}var _0,nO;function K5(){return nO||(nO=1,_0=$5().uniqBy),_0}var X5=K5();const rO=Ya(X5);function Y5(e,t,n){return t===!0?rO(e,n):typeof t=="function"?rO(e,t):e}var C0={exports:{}},A0={},O0={exports:{}},T0={};var aO;function Z5(){if(aO)return T0;aO=1;var e=yl();function t(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,a=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function s(p,v){var g=v(),y=r({inst:{value:g,getSnapshot:v}}),b=y[0].inst,x=y[1];return i(function(){b.value=g,b.getSnapshot=v,c(b)&&x({inst:b})},[p,g,v]),a(function(){return c(b)&&x({inst:b}),p(function(){c(b)&&x({inst:b})})},[p]),o(g),g}function c(p){var v=p.getSnapshot;p=p.value;try{var g=v();return!n(p,g)}catch{return!0}}function f(p,v){return v()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:s;return T0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,T0}var iO;function Q5(){return iO||(iO=1,O0.exports=Z5()),O0.exports}var oO;function J5(){if(oO)return A0;oO=1;var e=yl(),t=Q5();function n(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var r=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,s=e.useMemo,c=e.useDebugValue;return A0.useSyncExternalStoreWithSelector=function(f,d,p,v,g){var y=i(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=s(function(){function S(R){if(!_){if(_=!0,C=R,R=v(R),g!==void 0&&b.hasValue){var M=b.value;if(g(M,R))return A=M}return A=R}if(M=A,r(C,R))return M;var k=v(R);return g!==void 0&&g(M,k)?(C=R,M):(C=R,A=k)}var _=!1,C,A,O=p===void 0?null:p;return[function(){return S(d())},O===null?void 0:function(){return S(O())}]},[d,p,v,g]);var x=a(f,y[0],y[1]);return o(function(){b.hasValue=!0,b.value=x},[x]),c(x),x},A0}var uO;function eW(){return uO||(uO=1,C0.exports=J5()),C0.exports}var tW=eW(),kx=T.createContext(null),nW=e=>e,Ht=()=>{var e=T.useContext(kx);return e?e.store.dispatch:nW},Kh=()=>{},rW=()=>Kh,aW=(e,t)=>e===t;function je(e){var t=T.useContext(kx);return tW.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:rW,t?t.store.getState:Kh,t?t.store.getState:Kh,t?e:Kh,aW)}function iW(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function oW(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function uW(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var sO=e=>Array.isArray(e)?e:[e];function sW(e){const t=Array.isArray(e[0])?e[0]:e;return uW(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function lW(e,t){const n=[],{length:r}=e;for(let a=0;a<r;a++)n.push(e[a].apply(null,t));return n}var cW=class{constructor(e){this.value=e}deref(){return this.value}},fW=typeof WeakRef<"u"?WeakRef:cW,dW=0,lO=1;function mh(){return{s:dW,v:void 0,o:null,p:null}}function eN(e,t={}){let n=mh();const{resultEqualityCheck:r}=t;let a,i=0;function o(){let s=n;const{length:c}=arguments;for(let p=0,v=c;p<v;p++){const g=arguments[p];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=s.o;y===null&&(s.o=y=new WeakMap);const b=y.get(g);b===void 0?(s=mh(),y.set(g,s)):s=b}else{let y=s.p;y===null&&(s.p=y=new Map);const b=y.get(g);b===void 0?(s=mh(),y.set(g,s)):s=b}}const f=s;let d;if(s.s===lO)d=s.v;else if(d=e.apply(null,arguments),i++,r){const p=a?.deref?.()??a;p!=null&&r(p,d)&&(d=p,i!==0&&i--),a=typeof d=="object"&&d!==null||typeof d=="function"?new fW(d):d}return f.s=lO,f.v=d,d}return o.clearCache=()=>{n=mh(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function hW(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...a)=>{let i=0,o=0,s,c={},f=a.pop();typeof f=="object"&&(c=f,f=a.pop()),iW(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const d={...n,...c},{memoize:p,memoizeOptions:v=[],argsMemoize:g=eN,argsMemoizeOptions:y=[]}=d,b=sO(v),x=sO(y),S=sW(a),_=p(function(){return i++,f.apply(null,arguments)},...b),C=g(function(){o++;const O=lW(S,arguments);return s=_.apply(null,O),s},...x);return Object.assign(C,{resultFunc:f,memoizedResultFunc:_,dependencies:S,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var le=hW(eN),pW=Object.assign((e,t=le)=>{oW(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(i=>e[i]);return t(r,(...i)=>i.reduce((o,s,c)=>(o[n[c]]=s,o),{}))},{withTypes:()=>pW}),R0={},D0={},M0={},cO;function vW(){return cO||(cO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,a,i)=>{if(r!==a){const o=t(r),s=t(a);if(o===s&&o===0){if(r<a)return i==="desc"?1:-1;if(r>a)return i==="desc"?-1:1}return i==="desc"?s-o:o-s}return 0};e.compareValues=n})(M0)),M0}var k0={},N0={},fO;function tN(){return fO||(fO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(N0)),N0}var dO;function mW(){return dO||(dO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tN(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(r.test(i)||!n.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(k0)),k0}var hO;function gW(){return hO||(hO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vW(),n=mW(),r=Tx();function a(i,o,s,c){if(i==null)return[];s=c?void 0:s,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(s)||(s=s==null?[]:[s]),s=s.map(g=>String(g));const f=(g,y)=>{let b=g;for(let x=0;x<y.length&&b!=null;++x)b=b[y[x]];return b},d=(g,y)=>y==null||g==null?y:typeof g=="object"&&"key"in g?Object.hasOwn(y,g.key)?y[g.key]:f(y,g.path):typeof g=="function"?g(y):Array.isArray(g)?f(y,g):typeof y=="object"?y[g]:y,p=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:r.toPath(g)}));return i.map(g=>({original:g,criteria:p.map(y=>d(y,g))})).slice().sort((g,y)=>{for(let b=0;b<p.length;b++){const x=t.compareValues(g.criteria[b],y.criteria[b],s[b]);if(x!==0)return x}return 0}).map(g=>g.original)}e.orderBy=a})(D0)),D0}var I0={},pO;function yW(){return pO||(pO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const a=[],i=Math.floor(r),o=(s,c)=>{for(let f=0;f<s.length;f++){const d=s[f];Array.isArray(d)&&c<i?o(d,c+1):a.push(d)}};return o(n,0),a}e.flatten=t})(I0)),I0}var P0={},vO;function nN(){return vO||(vO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jk(),n=Mx(),r=Gk(),a=Kk();function i(o,s,c){return r.isObject(c)&&(typeof s=="number"&&n.isArrayLike(c)&&t.isIndex(s)&&s<c.length||typeof s=="string"&&s in c)?a.eq(c[s],o):!1}e.isIterateeCall=i})(P0)),P0}var mO;function bW(){return mO||(mO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gW(),n=yW(),r=nN();function a(i,...o){const s=o.length;return s>1&&r.isIterateeCall(i,o[0],o[1])?o=[]:s>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,n.flatten(o),["asc"])}e.sortBy=a})(R0)),R0}var B0,gO;function xW(){return gO||(gO=1,B0=bW().sortBy),B0}var wW=xW();const yv=Ya(wW);var rN=e=>e.legend.settings,SW=e=>e.legend.size,EW=e=>e.legend.payload;le([EW,rN],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?yv(r,n):r});var gh=1;function _W(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=T.useState({height:0,left:0,top:0,width:0}),r=T.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>gh||Math.abs(o.left-t.left)>gh||Math.abs(o.top-t.top)>gh||Math.abs(o.width-t.width)>gh)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Dn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var CW=typeof Symbol=="function"&&Symbol.observable||"@@observable",yO=CW,L0=()=>Math.random().toString(36).substring(7).split("").join("."),AW={INIT:`@@redux/INIT${L0()}`,REPLACE:`@@redux/REPLACE${L0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${L0()}`},op=AW;function Nx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function aN(e,t,n){if(typeof e!="function")throw new Error(Dn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Dn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Dn(1));return n(aN)(e,t)}let r=e,a=t,i=new Map,o=i,s=0,c=!1;function f(){o===i&&(o=new Map,i.forEach((x,S)=>{o.set(S,x)}))}function d(){if(c)throw new Error(Dn(3));return a}function p(x){if(typeof x!="function")throw new Error(Dn(4));if(c)throw new Error(Dn(5));let S=!0;f();const _=s++;return o.set(_,x),function(){if(S){if(c)throw new Error(Dn(6));S=!1,f(),o.delete(_),i=null}}}function v(x){if(!Nx(x))throw new Error(Dn(7));if(typeof x.type>"u")throw new Error(Dn(8));if(typeof x.type!="string")throw new Error(Dn(17));if(c)throw new Error(Dn(9));try{c=!0,a=r(a,x)}finally{c=!1}return(i=o).forEach(_=>{_()}),x}function g(x){if(typeof x!="function")throw new Error(Dn(10));r=x,v({type:op.REPLACE})}function y(){const x=p;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Dn(11));function _(){const A=S;A.next&&A.next(d())}return _(),{unsubscribe:x(_)}},[yO](){return this}}}return v({type:op.INIT}),{dispatch:v,subscribe:p,getState:d,replaceReducer:g,[yO]:y}}function OW(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:op.INIT})>"u")throw new Error(Dn(12));if(typeof n(void 0,{type:op.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Dn(13))})}function iN(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let a;try{OW(n)}catch(i){a=i}return function(o={},s){if(a)throw a;let c=!1;const f={};for(let d=0;d<r.length;d++){const p=r[d],v=n[p],g=o[p],y=v(g,s);if(typeof y>"u")throw s&&s.type,new Error(Dn(14));f[p]=y,c=c||y!==g}return c=c||r.length!==Object.keys(o).length,c?f:o}}function up(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function TW(...e){return t=>(n,r)=>{const a=t(n,r);let i=()=>{throw new Error(Dn(15))};const o={getState:a.getState,dispatch:(c,...f)=>i(c,...f)},s=e.map(c=>c(o));return i=up(...s)(a.dispatch),{...a,dispatch:i}}}function oN(e){return Nx(e)&&"type"in e&&typeof e.type=="string"}var uN=Symbol.for("immer-nothing"),bO=Symbol.for("immer-draftable"),Jn=Symbol.for("immer-state");function va(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Dr=Object,ol=Dr.getPrototypeOf,sp="constructor",bv="prototype",r1="configurable",lp="enumerable",Xh="writable",Kc="value",Ni=e=>!!e&&!!e[Jn];function Ea(e){return e?sN(e)||wv(e)||!!e[bO]||!!e[sp]?.[bO]||Sv(e)||Ev(e):!1}var RW=Dr[bv][sp].toString(),xO=new WeakMap;function sN(e){if(!e||!Ix(e))return!1;const t=ol(e);if(t===null||t===Dr[bv])return!0;const n=Dr.hasOwnProperty.call(t,sp)&&t[sp];if(n===Object)return!0;if(!Ws(n))return!1;let r=xO.get(n);return r===void 0&&(r=Function.toString.call(n),xO.set(n,r)),r===RW}function xv(e,t,n=!0){Ef(e)===0?(n?Reflect.ownKeys(e):Dr.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((r,a)=>t(a,r,e))}function Ef(e){const t=e[Jn];return t?t.type_:wv(e)?1:Sv(e)?2:Ev(e)?3:0}var wO=(e,t,n=Ef(e))=>n===2?e.has(t):Dr[bv].hasOwnProperty.call(e,t),a1=(e,t,n=Ef(e))=>n===2?e.get(t):e[t],cp=(e,t,n,r=Ef(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function DW(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var wv=Array.isArray,Sv=e=>e instanceof Map,Ev=e=>e instanceof Set,Ix=e=>typeof e=="object",Ws=e=>typeof e=="function",F0=e=>typeof e=="boolean";function MW(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Si=e=>e.copy_||e.base_,Px=e=>e.modified_?e.copy_:e.base_;function i1(e,t){if(Sv(e))return new Map(e);if(Ev(e))return new Set(e);if(wv(e))return Array[bv].slice.call(e);const n=sN(e);if(t===!0||t==="class_only"&&!n){const r=Dr.getOwnPropertyDescriptors(e);delete r[Jn];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s[Xh]===!1&&(s[Xh]=!0,s[r1]=!0),(s.get||s.set)&&(r[o]={[r1]:!0,[Xh]:!0,[lp]:s[lp],[Kc]:e[o]})}return Dr.create(ol(e),r)}else{const r=ol(e);if(r!==null&&n)return{...e};const a=Dr.create(r);return Dr.assign(a,e)}}function Bx(e,t=!1){return _v(e)||Ni(e)||!Ea(e)||(Ef(e)>1&&Dr.defineProperties(e,{set:yh,add:yh,clear:yh,delete:yh}),Dr.freeze(e),t&&xv(e,(n,r)=>{Bx(r,!0)},!1)),e}function kW(){va(2)}var yh={[Kc]:kW};function _v(e){return e===null||!Ix(e)?!0:Dr.isFrozen(e)}var fp="MapSet",o1="Patches",SO="ArrayMethods",lN={};function Nu(e){const t=lN[e];return t||va(0,e),t}var EO=e=>!!lN[e],Xc,cN=()=>Xc,NW=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:EO(fp)?Nu(fp):void 0,arrayMethodsPlugin_:EO(SO)?Nu(SO):void 0});function _O(e,t){t&&(e.patchPlugin_=Nu(o1),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function u1(e){s1(e),e.drafts_.forEach(IW),e.drafts_=null}function s1(e){e===Xc&&(Xc=e.parent_)}var CO=e=>Xc=NW(Xc,e);function IW(e){const t=e[Jn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function AO(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Jn].modified_&&(u1(t),va(4)),Ea(e)&&(e=OO(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(n[Jn].base_,e,t)}else e=OO(t,n);return PW(t,e,!0),u1(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==uN?e:void 0}function OO(e,t){if(_v(t))return t;const n=t[Jn];if(!n)return dp(t,e.handledSet_,e);if(!Cv(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);hN(n,e)}return n.copy_}function PW(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Bx(t,n)}function fN(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Cv=(e,t)=>e.scope_===t,BW=[];function dN(e,t,n,r){const a=Si(e),i=e.type_;if(r!==void 0&&a1(a,r,i)===t){cp(a,r,n,i);return}if(!e.draftLocations_){const s=e.draftLocations_=new Map;xv(a,(c,f)=>{if(Ni(f)){const d=s.get(f)||[];d.push(c),s.set(f,d)}})}const o=e.draftLocations_.get(t)??BW;for(const s of o)cp(a,s,n,i)}function LW(e,t,n){e.callbacks_.push(function(a){const i=t;if(!i||!Cv(i,a))return;a.mapSetPlugin_?.fixSetContents(i);const o=Px(i);dN(e,i.draft_??i,o,n),hN(i,a)})}function hN(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const a=r.getPath(e);a&&r.generatePatches_(e,a,t)}fN(e)}}function FW(e,t,n){const{scope_:r}=e;if(Ni(n)){const a=n[Jn];Cv(a,r)&&a.callbacks_.push(function(){Yh(e);const o=Px(a);dN(e,n,o,t)})}else Ea(n)&&e.callbacks_.push(function(){const i=Si(e);e.type_===3?i.has(n)&&dp(n,r.handledSet_,r):a1(i,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&dp(a1(e.copy_,t,e.type_),r.handledSet_,r)})}function dp(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ni(e)||t.has(e)||!Ea(e)||_v(e)||(t.add(e),xv(e,(r,a)=>{if(Ni(a)){const i=a[Jn];if(Cv(i,n)){const o=Px(i);cp(e,r,o,e.type_),fN(i)}}else Ea(a)&&dp(a,t,n)})),e}function jW(e,t){const n=wv(e),r={type_:n?1:0,scope_:t?t.scope_:cN(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=r,i=hp;n&&(a=[r],i=Yc);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,[s,r]}var hp={get(e,t){if(t===Jn)return e;let n=e.scope_.arrayMethodsPlugin_;const r=e.type_===1&&typeof t=="string";if(r&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const a=Si(e);if(!wO(a,t,e.type_))return zW(e,a,t);const i=a[t];if(e.finalized_||!Ea(i)||r&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&MW(t))return i;if(i===j0(e.base_,t)){Yh(e);const o=e.type_===1?+t:t,s=c1(e.scope_,i,e,o);return e.copy_[o]=s}return i},has(e,t){return t in Si(e)},ownKeys(e){return Reflect.ownKeys(Si(e))},set(e,t,n){const r=pN(Si(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=j0(Si(e),t),i=a?.[Jn];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(DW(n,a)&&(n!==void 0||wO(e.base_,t,e.type_)))return!0;Yh(e),l1(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),FW(e,t,n)),!0},deleteProperty(e,t){return Yh(e),j0(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),l1(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Si(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[Xh]:!0,[r1]:e.type_!==1||t!=="length",[lp]:r[lp],[Kc]:n[t]}},defineProperty(){va(11)},getPrototypeOf(e){return ol(e.base_)},setPrototypeOf(){va(12)}},Yc={};for(let e in hp){let t=hp[e];Yc[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}Yc.deleteProperty=function(e,t){return Yc.set.call(this,e,t,void 0)};Yc.set=function(e,t,n){return hp.set.call(this,e[0],t,n,e[0])};function j0(e,t){const n=e[Jn];return(n?Si(n):e)[t]}function zW(e,t,n){const r=pN(t,n);return r?Kc in r?r[Kc]:r.get?.call(e.draft_):void 0}function pN(e,t){if(!(t in e))return;let n=ol(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=ol(n)}}function l1(e){e.modified_||(e.modified_=!0,e.parent_&&l1(e.parent_))}function Yh(e){e.copy_||(e.assigned_=new Map,e.copy_=i1(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var UW=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,a)=>{if(Ws(n)&&!Ws(r)){const o=r;r=n;const s=this;return function(f=o,...d){return s.produce(f,p=>r.call(this,p,...d))}}Ws(r)||va(6),a!==void 0&&!Ws(a)&&va(7);let i;if(Ea(n)){const o=CO(this),s=c1(o,n,void 0);let c=!0;try{i=r(s),c=!1}finally{c?u1(o):s1(o)}return _O(o,a),AO(i,o)}else if(!n||!Ix(n)){if(i=r(n),i===void 0&&(i=n),i===uN&&(i=void 0),this.autoFreeze_&&Bx(i,!0),a){const o=[],s=[];Nu(o1).generateReplacementPatches_(n,i,{patches_:o,inversePatches_:s}),a(o,s)}return i}else va(1,n)},this.produceWithPatches=(n,r)=>{if(Ws(n))return(s,...c)=>this.produceWithPatches(s,f=>n(f,...c));let a,i;return[this.produce(n,r,(s,c)=>{a=s,i=c}),a,i]},F0(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),F0(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),F0(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ea(t)||va(8),Ni(t)&&(t=ba(t));const n=CO(this),r=c1(n,t,void 0);return r[Jn].isManual_=!0,s1(n),r}finishDraft(t,n){const r=t&&t[Jn];(!r||!r.isManual_)&&va(9);const{scope_:a}=r;return _O(a,n),AO(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const i=n[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(n=n.slice(r+1));const a=Nu(o1).applyPatches_;return Ni(t)?a(t,n):this.produce(t,i=>a(i,n))}};function c1(e,t,n,r){const[a,i]=Sv(t)?Nu(fp).proxyMap_(t,n):Ev(t)?Nu(fp).proxySet_(t,n):jW(t,n);return(n?.scope_??cN()).drafts_.push(a),i.callbacks_=n?.callbacks_??[],i.key_=r,n&&r!==void 0?LW(n,i,r):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:f}=c;i.modified_&&f&&f.generatePatches_(i,[],c)}),a}function ba(e){return Ni(e)||va(10,e),vN(e)}function vN(e){if(!Ea(e)||_v(e))return e;const t=e[Jn];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=i1(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=i1(e,!0);return xv(n,(a,i)=>{cp(n,a,vN(i))},r),t&&(t.finalized_=!1),n}var WW=new UW,mN=WW.produce;function gN(e){return({dispatch:n,getState:r})=>a=>i=>typeof i=="function"?i(n,r,e):a(i)}var HW=gN(),qW=gN,VW=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?up:up.apply(null,arguments)};function ra(e,t){function n(...r){if(t){let a=t(...r);if(!a)throw new Error(Ir(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>oN(r)&&r.type===e,n}var yN=class Fc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Fc.prototype)}static get[Symbol.species](){return Fc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Fc(...t[0].concat(this)):new Fc(...t.concat(this))}};function TO(e){return Ea(e)?mN(e,()=>{}):e}function bh(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function GW(e){return typeof e=="boolean"}var $W=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new yN;return n&&(GW(n)?o.push(HW):o.push(qW(n.extraArgument))),o},bN="RTK_autoBatch",Tt=()=>e=>({payload:e,meta:{[bN]:!0}}),RO=e=>t=>{setTimeout(t,e)},xN=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,i=!1,o=!1;const s=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:RO(10):e.type==="callback"?e.queueNotification:RO(e.timeout),f=()=>{o=!1,i&&(i=!1,s.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const p=()=>a&&d(),v=r.subscribe(p);return s.add(d),()=>{v(),s.delete(d)}},dispatch(d){try{return a=!d?.meta?.[bN],i=!a,i&&(o||(o=!0,c(f))),r.dispatch(d)}finally{a=!0}}})},KW=e=>function(n){const{autoBatch:r=!0}=n??{};let a=new yN(e);return r&&a.push(xN(typeof r=="object"?r:void 0)),a};function XW(e){const t=$W(),{reducer:n=void 0,middleware:r,devTools:a=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let s;if(typeof n=="function")s=n;else if(Nx(n))s=iN(n);else throw new Error(Ir(1));let c;typeof r=="function"?c=r(t):c=t();let f=up;a&&(f=VW({trace:!1,...typeof a=="object"&&a}));const d=TW(...c),p=KW(d);let v=typeof o=="function"?o(p):p();const g=f(...v);return aN(s,i,g)}function wN(e){const t={},n=[];let r;const a={addCase(i,o){const s=typeof i=="string"?i:i.type;if(!s)throw new Error(Ir(28));if(s in t)throw new Error(Ir(29));return t[s]=o,a},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:i.settled,reducer:o.settled}),a},addMatcher(i,o){return n.push({matcher:i,reducer:o}),a},addDefaultCase(i){return r=i,a}};return e(a),[t,n,r]}function YW(e){return typeof e=="function"}function ZW(e,t){let[n,r,a]=wN(t),i;if(YW(e))i=()=>TO(e());else{const s=TO(e);i=()=>s}function o(s=i(),c){let f=[n[c.type],...r.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return f.filter(d=>!!d).length===0&&(f=[a]),f.reduce((d,p)=>{if(p)if(Ni(d)){const g=p(d,c);return g===void 0?d:g}else{if(Ea(d))return mN(d,v=>p(v,c));{const v=p(d,c);if(v===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return d},s)}return o.getInitialState=i,o}var QW="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",JW=(e=21)=>{let t="",n=e;for(;n--;)t+=QW[Math.random()*64|0];return t},e8=Symbol.for("rtk-slice-createasyncthunk");function t8(e,t){return`${e}/${t}`}function n8({creators:e}={}){const t=e?.asyncThunk?.[e8];return function(r){const{name:a,reducerPath:i=a}=r;if(!a)throw new Error(Ir(11));const o=(typeof r.reducers=="function"?r.reducers(a8()):r.reducers)||{},s=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(C,A){const O=typeof C=="string"?C:C.type;if(!O)throw new Error(Ir(12));if(O in c.sliceCaseReducersByType)throw new Error(Ir(13));return c.sliceCaseReducersByType[O]=A,f},addMatcher(C,A){return c.sliceMatchers.push({matcher:C,reducer:A}),f},exposeAction(C,A){return c.actionCreators[C]=A,f},exposeCaseReducer(C,A){return c.sliceCaseReducersByName[C]=A,f}};s.forEach(C=>{const A=o[C],O={reducerName:C,type:t8(a,C),createNotation:typeof r.reducers=="function"};o8(A)?s8(O,A,f,t):i8(O,A,f)});function d(){const[C={},A=[],O=void 0]=typeof r.extraReducers=="function"?wN(r.extraReducers):[r.extraReducers],R={...C,...c.sliceCaseReducersByType};return ZW(r.initialState,M=>{for(let k in R)M.addCase(k,R[k]);for(let k of c.sliceMatchers)M.addMatcher(k.matcher,k.reducer);for(let k of A)M.addMatcher(k.matcher,k.reducer);O&&M.addDefaultCase(O)})}const p=C=>C,v=new Map,g=new WeakMap;let y;function b(C,A){return y||(y=d()),y(C,A)}function x(){return y||(y=d()),y.getInitialState()}function S(C,A=!1){function O(M){let k=M[C];return typeof k>"u"&&A&&(k=bh(g,O,x)),k}function R(M=p){const k=bh(v,A,()=>new WeakMap);return bh(k,M,()=>{const I={};for(const[P,L]of Object.entries(r.selectors??{}))I[P]=r8(L,M,()=>bh(g,M,x),A);return I})}return{reducerPath:C,getSelectors:R,get selectors(){return R(O)},selectSlice:O}}const _={name:a,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:x,...S(i),injectInto(C,{reducerPath:A,...O}={}){const R=A??i;return C.inject({reducerPath:R,reducer:b},O),{..._,...S(R,!0)}}};return _}}function r8(e,t,n,r){function a(i,...o){let s=t(i);return typeof s>"u"&&r&&(s=n()),e(s,...o)}return a.unwrapped=e,a}var vr=n8();function a8(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function i8({type:e,reducerName:t,createNotation:n},r,a){let i,o;if("reducer"in r){if(n&&!u8(r))throw new Error(Ir(17));i=r.reducer,o=r.prepare}else i=r;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?ra(e,o):ra(e))}function o8(e){return e._reducerDefinitionType==="asyncThunk"}function u8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function s8({type:e,reducerName:t},n,r,a){if(!a)throw new Error(Ir(18));const{payloadCreator:i,fulfilled:o,pending:s,rejected:c,settled:f,options:d}=n,p=a(e,i,d);r.exposeAction(t,p),o&&r.addCase(p.fulfilled,o),s&&r.addCase(p.pending,s),c&&r.addCase(p.rejected,c),f&&r.addMatcher(p.settled,f),r.exposeCaseReducer(t,{fulfilled:o||xh,pending:s||xh,rejected:c||xh,settled:f||xh})}function xh(){}var l8="task",SN="listener",EN="completed",Lx="cancelled",c8=`task-${Lx}`,f8=`task-${EN}`,f1=`${SN}-${Lx}`,d8=`${SN}-${EN}`,Av=class{constructor(e){this.code=e,this.message=`${l8} ${Lx} (reason: ${e})`}name="TaskAbortError";message},Fx=(e,t)=>{if(typeof e!="function")throw new TypeError(Ir(32))},pp=()=>{},_N=(e,t=pp)=>(e.catch(t),e),CN=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Au=e=>{if(e.aborted)throw new Av(e.reason)};function AN(e,t){let n=pp;return new Promise((r,a)=>{const i=()=>a(new Av(e.reason));if(e.aborted){i();return}n=CN(e,i),t.finally(()=>n()).then(r,a)}).finally(()=>{n=pp})}var h8=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Av?"cancelled":"rejected",error:n}}finally{t?.()}},vp=e=>t=>_N(AN(e,t).then(n=>(Au(e),n))),ON=e=>{const t=vp(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Ys}=Object,DO={},Ov="listenerMiddleware",p8=(e,t)=>{const n=r=>CN(e,()=>r.abort(e.reason));return(r,a)=>{Fx(r);const i=new AbortController;n(i);const o=h8(async()=>{Au(e),Au(i.signal);const s=await r({pause:vp(i.signal),delay:ON(i.signal),signal:i.signal});return Au(i.signal),s},()=>i.abort(f8));return a?.autoJoin&&t.push(o.catch(pp)),{result:vp(e)(o),cancel(){i.abort(c8)}}}},v8=(e,t)=>{const n=async(r,a)=>{Au(t);let i=()=>{};const s=[new Promise((c,f)=>{let d=e({predicate:r,effect:(p,v)=>{v.unsubscribe(),c([p,v.getState(),v.getOriginalState()])}});i=()=>{d(),f()}})];a!=null&&s.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await AN(t,Promise.race(s));return Au(t),c}finally{i()}};return(r,a)=>_N(n(r,a))},TN=e=>{let{type:t,actionCreator:n,matcher:r,predicate:a,effect:i}=e;if(t)a=ra(t).match;else if(n)t=n.type,a=n.match;else if(r)a=r;else if(!a)throw new Error(Ir(21));return Fx(i),{predicate:a,type:t,effect:i}},RN=Ys(e=>{const{type:t,predicate:n,effect:r}=TN(e);return{id:JW(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ir(22))}}},{withTypes:()=>RN}),MO=(e,t)=>{const{type:n,effect:r,predicate:a}=TN(t);return Array.from(e.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===a)&&i.effect===r)},d1=e=>{e.pending.forEach(t=>{t.abort(f1)})},m8=(e,t)=>()=>{for(const n of t.keys())d1(n);e.clear()},kO=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},DN=Ys(ra(`${Ov}/add`),{withTypes:()=>DN}),g8=ra(`${Ov}/removeAll`),MN=Ys(ra(`${Ov}/remove`),{withTypes:()=>MN}),y8=(...e)=>{console.error(`${Ov}/error`,...e)},_f=(e={})=>{const t=new Map,n=new Map,r=g=>{const y=n.get(g)??0;n.set(g,y+1)},a=g=>{const y=n.get(g)??1;y===1?n.delete(g):n.set(g,y-1)},{extra:i,onError:o=y8}=e;Fx(o);const s=g=>(g.unsubscribe=()=>t.delete(g.id),t.set(g.id,g),y=>{g.unsubscribe(),y?.cancelActive&&d1(g)}),c=g=>{const y=MO(t,g)??RN(g);return s(y)};Ys(c,{withTypes:()=>c});const f=g=>{const y=MO(t,g);return y&&(y.unsubscribe(),g.cancelActive&&d1(y)),!!y};Ys(f,{withTypes:()=>f});const d=async(g,y,b,x)=>{const S=new AbortController,_=v8(c,S.signal),C=[];try{g.pending.add(S),r(g),await Promise.resolve(g.effect(y,Ys({},b,{getOriginalState:x,condition:(A,O)=>_(A,O).then(Boolean),take:_,delay:ON(S.signal),pause:vp(S.signal),extra:i,signal:S.signal,fork:p8(S.signal,C),unsubscribe:g.unsubscribe,subscribe:()=>{t.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((A,O,R)=>{A!==S&&(A.abort(f1),R.delete(A))})},cancel:()=>{S.abort(f1),g.pending.delete(S)},throwIfCancelled:()=>{Au(S.signal)}})))}catch(A){A instanceof Av||kO(o,A,{raisedBy:"effect"})}finally{await Promise.all(C),S.abort(d8),a(g),g.pending.delete(S)}},p=m8(t,n);return{middleware:g=>y=>b=>{if(!oN(b))return y(b);if(DN.match(b))return c(b.payload);if(g8.match(b)){p();return}if(MN.match(b))return f(b.payload);let x=g.getState();const S=()=>{if(x===DO)throw new Error(Ir(23));return x};let _;try{if(_=y(b),t.size>0){const C=g.getState(),A=Array.from(t.values());for(const O of A){let R=!1;try{R=O.predicate(b,C,x)}catch(M){R=!1,kO(o,M,{raisedBy:"predicate"})}R&&d(O,b,g,S)}}}finally{x=DO}return _},startListening:c,stopListening:f,clearListeners:p}};function Ir(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var b8={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},kN=vr({name:"chartLayout",initialState:b8,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,a,i;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:x8,setLayout:w8,setChartSize:S8,setScale:E8}=kN.actions,_8=kN.reducer;function NN(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function Nt(e){return Number.isFinite(e)}function zo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function NO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NO(Object(n),!0).forEach(function(r){C8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function C8(e,t,n){return(t=A8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A8(e){var t=O8(e,"string");return typeof t=="symbol"?t:t+""}function O8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ln(e,t,n){return bn(e)||bn(t)?n:$a(t)?il(e,t,n):typeof t=="function"?t(e):n}var T8=(e,t,n)=>{if(t&&n){var{width:r,height:a}=n,{align:i,verticalAlign:o,layout:s}=t;if((s==="vertical"||s==="horizontal"&&o==="middle")&&i!=="center"&&Le(e[i]))return $s($s({},e),{},{[i]:e[i]+(r||0)});if((s==="horizontal"||s==="vertical"&&i==="center")&&o!=="middle"&&Le(e[o]))return $s($s({},e),{},{[o]:e[o]+(a||0)})}return e},zu=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",IO=1e-4,R8=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),a=Math.min(r[0],r[1])-IO,i=Math.max(r[0],r[1])+IO,o=e(t[0]),s=e(t[n-1]);(o<a||o>i||s<a||s>i)&&e.domain([t[0],t[n-1]])}},D8=(e,t)=>{if(!t||t.length!==2||!Le(t[0])||!Le(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Le(e[0])||e[0]<n)&&(a[0]=n),(!Le(e[1])||e[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<n&&(a[1]=n),a},M8=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var a=0;a<r;++a)for(var i=0,o=0,s=0;s<n;++s){var c=e[s],f=c?.[a];if(f!=null){var d=f[1],p=f[0],v=Ga(d)?p:d;v>=0?(f[0]=i,f[1]=i+v,i=d):(f[0]=o,f[1]=o+v,o=d)}}}},k8=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var a=0;a<r;++a)for(var i=0,o=0;o<n;++o){var s=e[o],c=s?.[a];if(c!=null){var f=Ga(c[1])?c[0]:c[1];f>=0?(c[0]=i,c[1]=i+f,i=c[1]):(c[0]=0,c[1]=0)}}}},N8={sign:M8,expand:a5,none:ku,silhouette:i5,wiggle:o5,positive:k8},I8=(e,t,n)=>{var r,a=(r=N8[n])!==null&&r!==void 0?r:ku,i=r5().keys(t).value((s,c)=>Number(Ln(s,c,0))).order(t1).offset(a),o=i(e);return o.forEach((s,c)=>{s.forEach((f,d)=>{var p=Ln(e[d],t[c],0);Array.isArray(p)&&p.length===2&&Le(p[0])&&Le(p[1])&&(f[0]=p[0],f[1]=p[1])})}),o};function P8(e){return e==null?void 0:String(e)}var PO=e=>{var{axis:t,ticks:n,offset:r,bandSize:a,entry:i,index:o}=e;if(t.type==="category")return n[o]?n[o].coordinate+r:null;var s=Ln(i,t.dataKey,t.scale.domain()[o]);return bn(s)?null:t.scale(s)-a/2+r},B8=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return r<=0&&a>=0?0:a<0?a:r}return n[0]},L8=e=>{var t=e.flat(2).filter(Le);return[Math.min(...t),Math.max(...t)]},F8=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],j8=(e,t,n)=>{if(e!=null)return F8(Object.keys(e).reduce((r,a)=>{var i=e[a];if(!i)return r;var{stackedData:o}=i,s=o.reduce((c,f)=>{var d=NN(f,t,n),p=L8(d);return!Nt(p[0])||!Nt(p[1])?c:[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]))},BO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mp=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var a=yv(t,d=>d.coordinate),i=1/0,o=1,s=a.length;o<s;o++){var c=a[o],f=a[o-1];i=Math.min((c?.coordinate||0)-(f?.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function FO(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:a,name:i}=e;return $s($s({},t),{},{dataKey:n,payload:r,value:a,name:i})}function IN(e,t){if(e)return String(e);if(typeof t=="string")return t}var z8=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},U8=(e,t)=>t==="centric"?e.angle:e.radius,Wi=e=>e.layout.width,Hi=e=>e.layout.height,W8=e=>e.layout.scale,PN=e=>e.layout.margin,Tv=le(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Rv=le(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),H8="data-recharts-item-index",q8="data-recharts-item-id",Cf=60;function jO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(n),!0).forEach(function(r){V8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V8(e,t,n){return(t=G8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G8(e){var t=$8(e,"string");return typeof t=="symbol"?t:t+""}function $8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K8=e=>e.brush.height;function X8(e){var t=Rv(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var a=typeof r.width=="number"?r.width:Cf;return n+a}return n},0)}function Y8(e){var t=Rv(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var a=typeof r.width=="number"?r.width:Cf;return n+a}return n},0)}function Z8(e){var t=Tv(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Q8(e){var t=Tv(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var wn=le([Wi,Hi,PN,K8,X8,Y8,Z8,Q8,rN,SW],(e,t,n,r,a,i,o,s,c,f)=>{var d={left:(n.left||0)+a,right:(n.right||0)+i},p={top:(n.top||0)+o,bottom:(n.bottom||0)+s},v=wh(wh({},p),d),g=v.bottom;v.bottom+=r,v=T8(v,c,f);var y=e-v.left-v.right,b=t-v.top-v.bottom;return wh(wh({brushBottom:g},v),{},{width:Math.max(y,0),height:Math.max(b,0)})}),J8=le(wn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),jx=le(Wi,Hi,(e,t)=>({x:0,y:0,width:e,height:t})),eH=T.createContext(null),Lr=()=>T.useContext(eH)!=null,Dv=e=>e.brush,Mv=le([Dv,wn,PN],(e,t,n)=>({height:e.height,x:Le(e.x)?e.x:t.left,y:Le(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Le(e.width)?e.width:t.width})),z0={},U0={},W0={},zO;function tH(){return zO||(zO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:a,edges:i}={}){let o,s=null;const c=i!=null&&i.includes("leading"),f=i==null||i.includes("trailing"),d=()=>{s!==null&&(n.apply(o,s),o=void 0,s=null)},p=()=>{f&&d(),b()};let v=null;const g=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,p()},r)},y=()=>{v!==null&&(clearTimeout(v),v=null)},b=()=>{y(),o=void 0,s=null},x=()=>{d()},S=function(..._){if(a?.aborted)return;o=this,s=_;const C=v==null;g(),c&&C&&d()};return S.schedule=g,S.cancel=b,S.flush=x,a?.addEventListener("abort",b,{once:!0}),S}e.debounce=t})(W0)),W0}var UO;function nH(){return UO||(UO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tH();function n(r,a=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:s=!0,maxWait:c}=i,f=Array(2);o&&(f[0]="leading"),s&&(f[1]="trailing");let d,p=null;const v=t.debounce(function(...b){d=r.apply(this,b),p=null},a,{edges:f}),g=function(...b){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(d=r.apply(this,b),p=Date.now(),v.cancel(),v.schedule(),d):(v.apply(this,b),d)},y=()=>(v.flush(),d);return g.cancel=v.cancel,g.flush=y,g}e.debounce=n})(U0)),U0}var WO;function rH(){return WO||(WO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nH();function n(r,a=0,i={}){const{leading:o=!0,trailing:s=!0}=i;return t.debounce(r,a,{leading:o,maxWait:a,trailing:s})}e.throttle=n})(z0)),z0}var H0,HO;function aH(){return HO||(HO=1,H0=rH().throttle),H0}var iH=aH();const oH=Ya(iH);var qO=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>a[o++]))}},BN=(e,t,n)=>{var{width:r="100%",height:a="100%",aspect:i,maxHeight:o}=n,s=ki(r)?e:Number(r),c=ki(a)?t:Number(a);return i&&i>0&&(s?c=s/i:c&&(s=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:s,calculatedHeight:c}},uH={width:0,height:0,overflow:"visible"},sH={width:0,overflowX:"visible"},lH={height:0,overflowY:"visible"},cH={},fH=e=>{var{width:t,height:n}=e,r=ki(t),a=ki(n);return r&&a?uH:r?sH:a?lH:cH};function dH(e){var{width:t,height:n,aspect:r}=e,a=t,i=n;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=r&&r>0?void 0:"100%":i===void 0&&(i=r&&r>0?void 0:"100%"),{width:a,height:i}}function h1(){return h1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h1.apply(null,arguments)}function VO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(n),!0).forEach(function(r){hH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hH(e,t,n){return(t=pH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pH(e){var t=vH(e,"string");return typeof t=="symbol"?t:t+""}function vH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LN=T.createContext({width:-1,height:-1});function mH(e){return zo(e.width)&&zo(e.height)}function FN(e){var{children:t,width:n,height:r}=e,a=T.useMemo(()=>({width:n,height:r}),[n,r]);return mH(a)?T.createElement(LN.Provider,{value:a},t):null}var zx=()=>T.useContext(LN),gH=T.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:a,height:i,minWidth:o=0,minHeight:s,maxHeight:c,children:f,debounce:d=0,id:p,className:v,onResize:g,style:y={}}=e,b=T.useRef(null),x=T.useRef();x.current=g,T.useImperativeHandle(t,()=>b.current);var[S,_]=T.useState({containerWidth:r.width,containerHeight:r.height}),C=T.useCallback((k,I)=>{_(P=>{var L=Math.round(k),F=Math.round(I);return P.containerWidth===L&&P.containerHeight===F?P:{containerWidth:L,containerHeight:F}})},[]);T.useEffect(()=>{if(b.current==null||typeof ResizeObserver>"u")return Sf;var k=F=>{var Y,{width:Z,height:J}=F[0].contentRect;C(Z,J),(Y=x.current)===null||Y===void 0||Y.call(x,Z,J)};d>0&&(k=oH(k,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(k),{width:P,height:L}=b.current.getBoundingClientRect();return C(P,L),I.observe(b.current),()=>{I.disconnect()}},[C,d]);var{containerWidth:A,containerHeight:O}=S;qO(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:R,calculatedHeight:M}=BN(A,O,{width:a,height:i,aspect:n,maxHeight:c});return qO(R!=null&&R>0||M!=null&&M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,M,a,i,o,s,n),T.createElement("div",{id:p?"".concat(p):void 0,className:At("recharts-responsive-container",v),style:GO(GO({},y),{},{width:a,height:i,minWidth:o,minHeight:s,maxHeight:c}),ref:b},T.createElement("div",{style:fH({width:a,height:i})},T.createElement(FN,{width:R,height:M},f)))}),yH=T.forwardRef((e,t)=>{var n=zx();if(zo(n.width)&&zo(n.height))return e.children;var{width:r,height:a}=dH({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=BN(void 0,void 0,{width:r,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Le(i)&&Le(o)?T.createElement(FN,{width:i,height:o},e.children):T.createElement(gH,h1({},e,{width:r,height:a,ref:t}))});function jN(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var kv=()=>{var e,t=Lr(),n=je(J8),r=je(Mv),a=(e=je(Dv))===null||e===void 0?void 0:e.padding;return!t||!r||!a?n:{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,x:a.left,y:a.top}},bH={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},xH=()=>{var e;return(e=je(wn))!==null&&e!==void 0?e:bH},wH=()=>je(Wi),SH=()=>je(Hi),ht=e=>e.layout.layoutType,Af=()=>je(ht),EH=()=>{var e=Af();return e!==void 0},Nv=e=>{var t=Ht(),n=Lr(),{width:r,height:a}=e,i=zx(),o=r,s=a;return i&&(o=i.width>0?i.width:r,s=i.height>0?i.height:a),T.useEffect(()=>{!n&&zo(o)&&zo(s)&&t(S8({width:o,height:s}))},[t,n,o,s]),null},zN=Symbol.for("immer-nothing"),$O=Symbol.for("immer-draftable"),Br=Symbol.for("immer-state");function ma(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zc=Object.getPrototypeOf;function ul(e){return!!e&&!!e[Br]}function Iu(e){return e?UN(e)||Array.isArray(e)||!!e[$O]||!!e.constructor?.[$O]||Of(e)||Pv(e):!1}var _H=Object.prototype.constructor.toString(),KO=new WeakMap;function UN(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=KO.get(n);return r===void 0&&(r=Function.toString.call(n),KO.set(n,r)),r===_H}function gp(e,t,n=!0){Iv(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((r,a)=>t(a,r,e))}function Iv(e){const t=e[Br];return t?t.type_:Array.isArray(e)?1:Of(e)?2:Pv(e)?3:0}function p1(e,t){return Iv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function WN(e,t,n){const r=Iv(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function CH(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Of(e){return e instanceof Map}function Pv(e){return e instanceof Set}function mu(e){return e.copy_||e.base_}function v1(e,t){if(Of(e))return new Map(e);if(Pv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=UN(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Br];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Zc(e),r)}else{const r=Zc(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function Ux(e,t=!1){return Bv(e)||ul(e)||!Iu(e)||(Iv(e)>1&&Object.defineProperties(e,{set:Sh,add:Sh,clear:Sh,delete:Sh}),Object.freeze(e),t&&Object.values(e).forEach(n=>Ux(n,!0))),e}function AH(){ma(2)}var Sh={value:AH};function Bv(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var OH={};function Pu(e){const t=OH[e];return t||ma(0,e),t}var Qc;function HN(){return Qc}function TH(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function XO(e,t){t&&(Pu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function m1(e){g1(e),e.drafts_.forEach(RH),e.drafts_=null}function g1(e){e===Qc&&(Qc=e.parent_)}function YO(e){return Qc=TH(Qc,e)}function RH(e){const t=e[Br];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ZO(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Br].modified_&&(m1(t),ma(4)),Iu(e)&&(e=yp(t,e),t.parent_||bp(t,e)),t.patches_&&Pu("Patches").generateReplacementPatches_(n[Br].base_,e,t.patches_,t.inversePatches_)):e=yp(t,n,[]),m1(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==zN?e:void 0}function yp(e,t,n){if(Bv(t))return t;const r=e.immer_.shouldUseStrictIteration(),a=t[Br];if(!a)return gp(t,(i,o)=>QO(e,a,t,i,o,n),r),t;if(a.scope_!==e)return t;if(!a.modified_)return bp(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let o=i,s=!1;a.type_===3&&(o=new Set(i),i.clear(),s=!0),gp(o,(c,f)=>QO(e,a,i,c,f,n,s),r),bp(e,i,!1),n&&e.patches_&&Pu("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function QO(e,t,n,r,a,i,o){if(a==null||typeof a!="object"&&!o)return;const s=Bv(a);if(!(s&&!o)){if(ul(a)){const c=i&&t&&t.type_!==3&&!p1(t.assigned_,r)?i.concat(r):void 0,f=yp(e,a,c);if(WN(n,r,f),ul(f))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(Iu(a)&&!s){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===a&&s)return;yp(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Of(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&bp(e,a)}}}function bp(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ux(t,n)}function DH(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:HN(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=Wx;n&&(a=[r],i=Jc);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var Wx={get(e,t){if(t===Br)return e;const n=mu(e);if(!p1(n,t))return MH(e,n,t);const r=n[t];return e.finalized_||!Iu(r)?r:r===q0(e.base_,t)?(V0(e),e.copy_[t]=b1(r,e)):r},has(e,t){return t in mu(e)},ownKeys(e){return Reflect.ownKeys(mu(e))},set(e,t,n){const r=qN(mu(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=q0(mu(e),t),i=a?.[Br];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(CH(n,a)&&(n!==void 0||p1(e.base_,t)))return!0;V0(e),y1(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return q0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,V0(e),y1(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=mu(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ma(11)},getPrototypeOf(e){return Zc(e.base_)},setPrototypeOf(){ma(12)}},Jc={};gp(Wx,(e,t)=>{Jc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Jc.deleteProperty=function(e,t){return Jc.set.call(this,e,t,void 0)};Jc.set=function(e,t,n){return Wx.set.call(this,e[0],t,n,e[0])};function q0(e,t){const n=e[Br];return(n?mu(n):e)[t]}function MH(e,t,n){const r=qN(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function qN(e,t){if(!(t in e))return;let n=Zc(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Zc(n)}}function y1(e){e.modified_||(e.modified_=!0,e.parent_&&y1(e.parent_))}function V0(e){e.copy_||(e.copy_=v1(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var kH=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(c=i,...f){return o.produce(c,d=>n.call(this,d,...f))}}typeof n!="function"&&ma(6),r!==void 0&&typeof r!="function"&&ma(7);let a;if(Iu(t)){const i=YO(this),o=b1(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?m1(i):g1(i)}return XO(i,r),ZO(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===zN&&(a=void 0),this.autoFreeze_&&Ux(a,!0),r){const i=[],o=[];Pu("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else ma(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,c=>t(c,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Iu(e)||ma(8),ul(e)&&(e=NH(e));const t=YO(this),n=b1(e,void 0);return n[Br].isManual_=!0,g1(t),n}finishDraft(e,t){const n=e&&e[Br];(!n||!n.isManual_)&&ma(9);const{scope_:r}=n;return XO(r,t),ZO(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=Pu("Patches").applyPatches_;return ul(e)?r(e,t):this.produce(e,a=>r(a,t))}};function b1(e,t){const n=Of(e)?Pu("MapSet").proxyMap_(e,t):Pv(e)?Pu("MapSet").proxySet_(e,t):DH(e,t);return(t?t.scope_:HN()).drafts_.push(n),n}function NH(e){return ul(e)||ma(10,e),VN(e)}function VN(e){if(!Iu(e)||Bv(e))return e;const t=e[Br];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=v1(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=v1(e,!0);return gp(n,(a,i)=>{WN(n,a,VN(i))},r),t&&(t.finalized_=!1),n}var IH=new kH;IH.produce;var PH={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},GN=vr({name:"legend",initialState:PH,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Tt()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,a=ba(e).payload.indexOf(n);a>-1&&(e.payload[a]=r)},prepare:Tt()},removeLegendPayload:{reducer(e,t){var n=ba(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:Tt()}}}),{setLegendSize:Ele,setLegendSettings:_le,addLegendPayload:BH,replaceLegendPayload:LH,removeLegendPayload:FH}=GN.actions,jH=GN.reducer;function x1(){return x1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x1.apply(null,arguments)}function JO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function G0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JO(Object(n),!0).forEach(function(r){zH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zH(e,t,n){return(t=UH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HH(e){return Array.isArray(e)&&$a(e[0])&&$a(e[1])?e.join(" ~ "):e}var qH=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:a={},payload:i,formatter:o,itemSorter:s,wrapperClassName:c,labelClassName:f,label:d,labelFormatter:p,accessibilityLayer:v=!1}=e,g=()=>{if(i&&i.length){var O={padding:0,margin:0},R=(s?yv(i,s):i).map((M,k)=>{if(M.type==="none")return null;var I=M.formatter||o||HH,{value:P,name:L}=M,F=P,Y=L;if(I){var Z=I(P,L,M,k,i);if(Array.isArray(Z))[F,Y]=Z;else if(Z!=null)F=Z;else return null}var J=G0({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},r);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:J},$a(Y)?T.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,$a(Y)?T.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,T.createElement("span",{className:"recharts-tooltip-item-value"},F),T.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:O},R)}return null},y=G0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),b=G0({margin:0},a),x=!bn(d),S=x?d:"",_=At("recharts-default-tooltip",c),C=At("recharts-tooltip-label",f);x&&p&&i!==void 0&&i!==null&&(S=p(d,i));var A=v?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",x1({className:_,style:y},A),T.createElement("p",{className:C,style:b},T.isValidElement(S)?S:"".concat(S)),g())},Ac="recharts-tooltip-wrapper",VH={visibility:"hidden"};function GH(e){var{coordinate:t,translateX:n,translateY:r}=e;return At(Ac,{["".concat(Ac,"-right")]:Le(n)&&t&&Le(t.x)&&n>=t.x,["".concat(Ac,"-left")]:Le(n)&&t&&Le(t.x)&&n<t.x,["".concat(Ac,"-bottom")]:Le(r)&&t&&Le(t.y)&&r>=t.y,["".concat(Ac,"-top")]:Le(r)&&t&&Le(t.y)&&r<t.y})}function eT(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:s,viewBox:c,viewBoxDimension:f}=e;if(i&&Le(i[r]))return i[r];var d=n[r]-s-(a>0?a:0),p=n[r]+a;if(t[r])return o[r]?d:p;var v=c[r];if(v==null)return 0;if(o[r]){var g=d,y=v;return g<y?Math.max(p,v):Math.max(d,v)}if(f==null)return 0;var b=p+s,x=v+f;return b>x?Math.max(d,v):Math.max(p,v)}function $H(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function KH(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:s,viewBox:c}=e,f,d,p;return o.height>0&&o.width>0&&n?(d=eT({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=eT({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),f=$H({translateX:d,translateY:p,useTranslate3d:s})):f=VH,{cssProperties:f,cssClasses:GH({translateX:d,translateY:p,coordinate:n})}}function tT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Eh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tT(Object(n),!0).forEach(function(r){w1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w1(e,t,n){return(t=XH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XH(e){var t=YH(e,"string");return typeof t=="symbol"?t:t+""}function YH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ZH extends T.PureComponent{constructor(){super(...arguments),w1(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),w1(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:a,children:i,coordinate:o,hasPayload:s,isAnimationActive:c,offset:f,position:d,reverseDirection:p,useTranslate3d:v,viewBox:g,wrapperStyle:y,lastBoundingBox:b,innerRef:x,hasPortalFromProps:S}=this.props,{cssClasses:_,cssProperties:C}=KH({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:f,position:d,reverseDirection:p,tooltipBox:{height:b.height,width:b.width},useTranslate3d:v,viewBox:g}),A=S?{}:Eh(Eh({transition:c&&t?"transform ".concat(r,"ms ").concat(a):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&s?"visible":"hidden",position:"absolute",top:0,left:0}),O=Eh(Eh({},A),{},{visibility:!this.state.dismissed&&t&&s?"visible":"hidden"},y);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:_,style:O,ref:x},i)}}var $N=()=>{var e;return(e=je(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function S1(){return S1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S1.apply(null,arguments)}function nT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function rT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nT(Object(n),!0).forEach(function(r){QH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QH(e,t,n){return(t=JH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JH(e){var t=eq(e,"string");return typeof t=="symbol"?t:t+""}function eq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aT={curveBasisClosed:G6,curveBasisOpen:$6,curveBasis:V6,curveBumpX:M6,curveBumpY:k6,curveLinearClosed:K6,curveLinear:mv,curveMonotoneX:X6,curveMonotoneY:Y6,curveNatural:Z6,curveStep:Q6,curveStepAfter:e5,curveStepBefore:J6},xp=e=>Nt(e.x)&&Nt(e.y),iT=e=>e.base!=null&&xp(e.base)&&xp(e),Oc=e=>e.x,Tc=e=>e.y,tq=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(wf(e));return(n==="curveMonotone"||n==="curveBump")&&t?aT["".concat(n).concat(t==="vertical"?"Y":"X")]:aT[n]||mv},nq=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:a,connectNulls:i=!1}=e,o=tq(t,a),s=i?n.filter(xp):n,c;if(Array.isArray(r)){var f=n.map((g,y)=>rT(rT({},g),{},{base:r[y]}));a==="vertical"?c=vh().y(Tc).x1(Oc).x0(g=>g.base.x):c=vh().x(Oc).y1(Tc).y0(g=>g.base.y);var d=c.defined(iT).curve(o),p=i?f.filter(iT):f;return d(p)}a==="vertical"&&Le(r)?c=vh().y(Tc).x1(Oc).x0(r):Le(r)?c=vh().x(Oc).y1(Tc).y0(r):c=Rk().x(Oc).y(Tc);var v=c.defined(xp).curve(o);return v(s)},KN=e=>{var{className:t,points:n,path:r,pathRef:a}=e,i=Af();if((!n||!n.length)&&!r)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},s=n&&n.length?nq(o):r;return T.createElement("path",S1({},jo(e),C5(e),{className:At("recharts-curve",t),d:s===null?void 0:s,ref:a}))},rq=["x","y","top","left","width","height","className"];function E1(){return E1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E1.apply(null,arguments)}function oT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function aq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(n),!0).forEach(function(r){iq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iq(e,t,n){return(t=oq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oq(e){var t=uq(e,"string");return typeof t=="symbol"?t:t+""}function uq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sq(e,t){if(e==null)return{};var n,r,a=lq(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function lq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var cq=(e,t,n,r,a,i)=>"M".concat(e,",").concat(a,"v").concat(r,"M").concat(i,",").concat(t,"h").concat(n),fq=e=>{var{x:t=0,y:n=0,top:r=0,left:a=0,width:i=0,height:o=0,className:s}=e,c=sq(e,rq),f=aq({x:t,y:n,top:r,left:a,width:i,height:o},c);return!Le(t)||!Le(n)||!Le(i)||!Le(o)||!Le(r)||!Le(a)?null:T.createElement("path",E1({},na(f),{className:At("recharts-cross",s),d:cq(t,n,i,o,r,a)}))};function dq(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(n),!0).forEach(function(r){hq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hq(e,t,n){return(t=pq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pq(e){var t=vq(e,"string");return typeof t=="symbol"?t:t+""}function vq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mq=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),XN=(e,t,n)=>e.map(r=>"".concat(mq(r)," ").concat(t,"ms ").concat(n)).join(","),gq=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(a=>r.includes(a))),ef=(e,t)=>Object.keys(t).reduce((n,r)=>sT(sT({},n),{},{[r]:e(r,t[r])}),{});function lT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lT(Object(n),!0).forEach(function(r){yq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yq(e,t,n){return(t=bq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bq(e){var t=xq(e,"string");return typeof t=="symbol"?t:t+""}function xq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wp=(e,t,n)=>e+(t-e)*n,_1=e=>{var{from:t,to:n}=e;return t!==n},YN=(e,t,n)=>{var r=ef((a,i)=>{if(_1(i)){var[o,s]=e(i.from,i.to,i.velocity);return tn(tn({},i),{},{from:o,velocity:s})}return i},t);return n<1?ef((a,i)=>_1(i)&&r[a]!=null?tn(tn({},i),{},{velocity:wp(i.velocity,r[a].velocity,n),from:wp(i.from,r[a].from,n)}):i,t):YN(e,r,n-1)};function wq(e,t,n,r,a,i){var o,s=r.reduce((v,g)=>tn(tn({},v),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),c=()=>ef((v,g)=>g.from,s),f=()=>!Object.values(s).filter(_1).length,d=null,p=v=>{o||(o=v);var g=v-o,y=g/n.dt;s=YN(n,s,y),a(tn(tn(tn({},e),t),c())),o=v,f()||(d=i.setTimeout(p))};return()=>(d=i.setTimeout(p),()=>{var v;(v=d)===null||v===void 0||v()})}function Sq(e,t,n,r,a,i,o){var s=null,c=a.reduce((p,v)=>{var g=e[v],y=t[v];return g==null||y==null?p:tn(tn({},p),{},{[v]:[g,y]})},{}),f,d=p=>{f||(f=p);var v=(p-f)/r,g=ef((b,x)=>wp(...x,n(v)),c);if(i(tn(tn(tn({},e),t),g)),v<1)s=o.setTimeout(d);else{var y=ef((b,x)=>wp(...x,n(1)),c);i(tn(tn(tn({},e),t),y))}};return()=>(s=o.setTimeout(d),()=>{var p;(p=s)===null||p===void 0||p()})}const Eq=(e,t,n,r,a,i)=>{var o=gq(e,t);return n==null?()=>(a(tn(tn({},e),t)),()=>{}):n.isStepper===!0?wq(e,t,n,o,a,i):Sq(e,t,n,r,o,a,i)};var Sp=1e-4,ZN=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],QN=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),cT=(e,t)=>n=>{var r=ZN(e,t);return QN(r,n)},_q=(e,t)=>n=>{var r=ZN(e,t),a=[...r.map((i,o)=>i*o).slice(1),0];return QN(a,n)},Cq=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(r==null||r.length!==4)return null;var a=r.map(i=>parseFloat(i));return[a[0],a[1],a[2],a[3]]},Aq=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=Cq(n[0]);if(a)return a}}return n.length===4?n:[0,0,1,1]},Oq=(e,t,n,r)=>{var a=cT(e,n),i=cT(t,r),o=_q(e,n),s=f=>f>1?1:f<0?0:f,c=f=>{for(var d=f>1?1:f,p=d,v=0;v<8;++v){var g=a(p)-d,y=o(p);if(Math.abs(g-d)<Sp||y<Sp)return i(p);p=s(p-g/y)}return i(p)};return c.isStepper=!1,c},fT=function(){return Oq(...Aq(...arguments))},Tq=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:a=17}=t,i=(o,s,c)=>{var f=-(o-s)*n,d=c*r,p=c+(f-d)*a/1e3,v=c*a/1e3+o;return Math.abs(v-s)<Sp&&Math.abs(p)<Sp?[s,0]:[v,p]};return i.isStepper=!0,i.dt=a,i},Rq=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return fT(e);case"spring":return Tq();default:if(e.split("(")[0]==="cubic-bezier")return fT(e)}return typeof e=="function"?e:null};function Dq(e){var t,n=()=>null,r=!1,a=null,i=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var s=o,[c,...f]=s;if(typeof c=="number"){a=e.setTimeout(i.bind(null,f),c);return}i(c),a=e.setTimeout(i.bind(null,f));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,a&&(a(),a=null),i(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class Mq{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),a=null,i=o=>{o-r>=n?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{a!=null&&cancelAnimationFrame(a)}}}function kq(){return Dq(new Mq)}var Nq=T.createContext(kq);function Iq(e,t){var n=T.useContext(Nq);return T.useMemo(()=>t??n(e),[e,t,n])}var Pq=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Lv={isSsr:Pq()},Bq={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},dT={t:0},$0={t:1};function Hx(e){var t=oa(e,Bq),{isActive:n,canBegin:r,duration:a,easing:i,begin:o,onAnimationEnd:s,onAnimationStart:c,children:f}=t,d=n==="auto"?!Lv.isSsr:n,p=Iq(t.animationId,t.animationManager),[v,g]=T.useState(d?dT:$0),y=T.useRef(null);return T.useEffect(()=>{d||g($0)},[d]),T.useEffect(()=>{if(!d||!r)return Sf;var b=Eq(dT,$0,Rq(i),a,g,p.getTimeoutController()),x=()=>{y.current=b()};return p.start([c,o,x,a,s]),()=>{p.stop(),y.current&&y.current(),s()}},[d,r,a,i,o,c,s,p]),f(v.t)}function qx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=T.useRef($c(t)),r=T.useRef(e);return r.current!==e&&(n.current=$c(t),r.current=e),n.current}var Lq=["radius"],Fq=["radius"],hT,pT,vT,mT,gT,yT,bT,xT,wT,ST;function ET(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _T(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ET(Object(n),!0).forEach(function(r){jq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ET(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jq(e,t,n){return(t=zq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zq(e){var t=Uq(e,"string");return typeof t=="symbol"?t:t+""}function Uq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ep(){return Ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ep.apply(null,arguments)}function CT(e,t){if(e==null)return{};var n,r,a=Wq(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Wq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ia(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var AT=(e,t,n,r,a)=>{var i=Mo(n),o=Mo(r),s=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,f=i>=0?1:-1,d=o>=0&&i>=0||o<0&&i<0?1:0,p;if(s>0&&a instanceof Array){for(var v=[0,0,0,0],g=0,y=4;g<y;g++)v[g]=a[g]>s?s:a[g];p=Ft(hT||(hT=Ia(["M",",",""])),e,t+c*v[0]),v[0]>0&&(p+=Ft(pT||(pT=Ia(["A ",",",",0,0,",",",",",""])),v[0],v[0],d,e+f*v[0],t)),p+=Ft(vT||(vT=Ia(["L ",",",""])),e+n-f*v[1],t),v[1]>0&&(p+=Ft(mT||(mT=Ia(["A ",",",",0,0,",`,
        `,",",""])),v[1],v[1],d,e+n,t+c*v[1])),p+=Ft(gT||(gT=Ia(["L ",",",""])),e+n,t+r-c*v[2]),v[2]>0&&(p+=Ft(yT||(yT=Ia(["A ",",",",0,0,",`,
        `,",",""])),v[2],v[2],d,e+n-f*v[2],t+r)),p+=Ft(bT||(bT=Ia(["L ",",",""])),e+f*v[3],t+r),v[3]>0&&(p+=Ft(xT||(xT=Ia(["A ",",",",0,0,",`,
        `,",",""])),v[3],v[3],d,e,t+r-c*v[3])),p+="Z"}else if(s>0&&a===+a&&a>0){var b=Math.min(s,a);p=Ft(wT||(wT=Ia(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*b,b,b,d,e+f*b,t,e+n-f*b,t,b,b,d,e+n,t+c*b,e+n,t+r-c*b,b,b,d,e+n-f*b,t+r,e+f*b,t+r,b,b,d,e,t+r-c*b)}else p=Ft(ST||(ST=Ia(["M ",","," h "," v "," h "," Z"])),e,t,n,r,-n);return p},OT={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JN=e=>{var t=oa(e,OT),n=T.useRef(null),[r,a]=T.useState(-1);T.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var H=n.current.getTotalLength();H&&a(H)}catch{}},[]);var{x:i,y:o,width:s,height:c,radius:f,className:d}=t,{animationEasing:p,animationDuration:v,animationBegin:g,isAnimationActive:y,isUpdateAnimationActive:b}=t,x=T.useRef(s),S=T.useRef(c),_=T.useRef(i),C=T.useRef(o),A=T.useMemo(()=>({x:i,y:o,width:s,height:c,radius:f}),[i,o,s,c,f]),O=qx(A,"rectangle-");if(i!==+i||o!==+o||s!==+s||c!==+c||s===0||c===0)return null;var R=At("recharts-rectangle",d);if(!b){var M=na(t),{radius:k}=M,I=CT(M,Lq);return T.createElement("path",Ep({},I,{x:Mo(i),y:Mo(o),width:Mo(s),height:Mo(c),radius:typeof f=="number"?f:void 0,className:R,d:AT(i,o,s,c,f)}))}var P=x.current,L=S.current,F=_.current,Y=C.current,Z="0px ".concat(r===-1?1:r,"px"),J="".concat(r,"px 0px"),U=XN(["strokeDasharray"],v,typeof p=="string"?p:OT.animationEasing);return T.createElement(Hx,{animationId:O,key:O,canBegin:r>0,duration:v,easing:p,isActive:b,begin:g},H=>{var G=Nn(P,s,H),Q=Nn(L,c,H),oe=Nn(F,i,H),j=Nn(Y,o,H);n.current&&(x.current=G,S.current=Q,_.current=oe,C.current=j);var K;y?H>0?K={transition:U,strokeDasharray:J}:K={strokeDasharray:Z}:K={strokeDasharray:J};var ce=na(t),{radius:ve}=ce,ye=CT(ce,Fq);return T.createElement("path",Ep({},ye,{radius:typeof f=="number"?f:void 0,className:R,d:AT(oe,j,G,Q,f),ref:n,style:_T(_T({},K),t.style)}))})};function TT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function RT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(n),!0).forEach(function(r){Hq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hq(e,t,n){return(t=qq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qq(e){var t=Vq(e,"string");return typeof t=="symbol"?t:t+""}function Vq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _p=Math.PI/180,Gq=e=>e*180/Math.PI,Bn=(e,t,n,r)=>({x:e+Math.cos(-_p*r)*n,y:t+Math.sin(-_p*r)*n}),$q=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Kq=(e,t)=>{var{x:n,y:r}=e,{x:a,y:i}=t;return Math.sqrt((n-a)**2+(r-i)**2)},Xq=(e,t)=>{var{x:n,y:r}=e,{cx:a,cy:i}=t,o=Kq({x:n,y:r},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var s=(n-a)/o,c=Math.acos(s);return r>i&&(c=2*Math.PI-c),{radius:o,angle:Gq(c),angleInRadian:c}},Yq=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),a=Math.floor(n/360),i=Math.min(r,a);return{startAngle:t-i*360,endAngle:n-i*360}},Zq=(e,t)=>{var{startAngle:n,endAngle:r}=t,a=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(a,i);return e+o*360},Qq=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:a,angle:i}=Xq({x:n,y:r},t),{innerRadius:o,outerRadius:s}=t;if(a<o||a>s||a===0)return null;var{startAngle:c,endAngle:f}=Yq(t),d=i,p;if(c<=f){for(;d>f;)d-=360;for(;d<c;)d+=360;p=d>=c&&d<=f}else{for(;d>c;)d-=360;for(;d<f;)d+=360;p=d>=f&&d<=c}return p?RT(RT({},t),{},{radius:a,angle:Zq(d,t)}):null};function eI(e){var{cx:t,cy:n,radius:r,startAngle:a,endAngle:i}=e,o=Bn(t,n,r,a),s=Bn(t,n,r,i);return{points:[o,s],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}var DT,MT,kT,NT,IT,PT,BT;function C1(){return C1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C1.apply(null,arguments)}function wu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Jq=(e,t)=>{var n=Rr(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},_h=e=>{var{cx:t,cy:n,radius:r,angle:a,sign:i,isExternal:o,cornerRadius:s,cornerIsExternal:c}=e,f=s*(o?1:-1)+r,d=Math.asin(s/f)/_p,p=c?a:a+i*d,v=Bn(t,n,f,p),g=Bn(t,n,r,p),y=c?a-i*d:a,b=Bn(t,n,f*Math.cos(d*_p),y);return{center:v,circleTangency:g,lineTangency:b,theta:d}},tI=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:i,endAngle:o}=e,s=Jq(i,o),c=i+s,f=Bn(t,n,a,i),d=Bn(t,n,a,c),p=Ft(DT||(DT=wu(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),f.x,f.y,a,a,+(Math.abs(s)>180),+(i>c),d.x,d.y);if(r>0){var v=Bn(t,n,r,i),g=Bn(t,n,r,c);p+=Ft(MT||(MT=wu(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),g.x,g.y,r,r,+(Math.abs(s)>180),+(i<=c),v.x,v.y)}else p+=Ft(kT||(kT=wu(["L ",","," Z"])),t,n);return p},eV=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:s,startAngle:c,endAngle:f}=e,d=Rr(f-c),{circleTangency:p,lineTangency:v,theta:g}=_h({cx:t,cy:n,radius:a,angle:c,sign:d,cornerRadius:i,cornerIsExternal:s}),{circleTangency:y,lineTangency:b,theta:x}=_h({cx:t,cy:n,radius:a,angle:f,sign:-d,cornerRadius:i,cornerIsExternal:s}),S=s?Math.abs(c-f):Math.abs(c-f)-g-x;if(S<0)return o?Ft(NT||(NT=wu(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),v.x,v.y,i,i,i*2,i,i,-i*2):tI({cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:c,endAngle:f});var _=Ft(IT||(IT=wu(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),v.x,v.y,i,i,+(d<0),p.x,p.y,a,a,+(S>180),+(d<0),y.x,y.y,i,i,+(d<0),b.x,b.y);if(r>0){var{circleTangency:C,lineTangency:A,theta:O}=_h({cx:t,cy:n,radius:r,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),{circleTangency:R,lineTangency:M,theta:k}=_h({cx:t,cy:n,radius:r,angle:f,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),I=s?Math.abs(c-f):Math.abs(c-f)-O-k;if(I<0&&i===0)return"".concat(_,"L").concat(t,",").concat(n,"Z");_+=Ft(PT||(PT=wu(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),M.x,M.y,i,i,+(d<0),R.x,R.y,r,r,+(I>180),+(d>0),C.x,C.y,i,i,+(d<0),A.x,A.y)}else _+=Ft(BT||(BT=wu(["L",",","Z"])),t,n);return _},tV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nI=e=>{var t=oa(e,tV),{cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:c,startAngle:f,endAngle:d,className:p}=t;if(i<a||f===d)return null;var v=At("recharts-sector",p),g=i-a,y=Sa(o,g,0,!0),b;return y>0&&Math.abs(f-d)<360?b=eV({cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:Math.min(y,g/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:f,endAngle:d}):b=tI({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:f,endAngle:d}),T.createElement("path",C1({},na(t),{className:v,d:b}))};function nV(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(qk(t)){if(e==="centric"){var{cx:r,cy:a,innerRadius:i,outerRadius:o,angle:s}=t,c=Bn(r,a,i,s),f=Bn(r,a,o,s);return[{x:c.x,y:c.y},{x:f.x,y:f.y}]}return eI(t)}}var K0={},X0={},Y0={},LT;function rV(){return LT||(LT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tN();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(Y0)),Y0}var FT;function aV(){return FT||(FT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rV();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(X0)),X0}var jT;function iV(){return jT||(jT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nN(),n=aV();function r(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=n.toFinite(a),i===void 0?(i=a,a=0):i=n.toFinite(i),o=o===void 0?a<i?1:-1:n.toFinite(o);const s=Math.max(Math.ceil((i-a)/(o||1)),0),c=new Array(s);for(let f=0;f<s;f++)c[f]=a,a+=o;return c}e.range=r})(K0)),K0}var Z0,zT;function oV(){return zT||(zT=1,Z0=iV().range),Z0}var uV=oV();const rI=Ya(uV);function Po(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sV(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vx(e){let t,n,r;e.length!==2?(t=Po,n=(s,c)=>Po(e(s),c),r=(s,c)=>e(s)-c):(t=e===Po||e===sV?e:lV,n=e,r=e);function a(s,c,f=0,d=s.length){if(f<d){if(t(c,c)!==0)return d;do{const p=f+d>>>1;n(s[p],c)<0?f=p+1:d=p}while(f<d)}return f}function i(s,c,f=0,d=s.length){if(f<d){if(t(c,c)!==0)return d;do{const p=f+d>>>1;n(s[p],c)<=0?f=p+1:d=p}while(f<d)}return f}function o(s,c,f=0,d=s.length){const p=a(s,c,f,d-1);return p>f&&r(s[p-1],c)>-r(s[p],c)?p-1:p}return{left:a,center:o,right:i}}function lV(){return 0}function aI(e){return e===null?NaN:+e}function*cV(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const fV=Vx(Po),Tf=fV.right;Vx(aI).center;class UT extends Map{constructor(t,n=pV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(WT(this,t))}has(t){return super.has(WT(this,t))}set(t,n){return super.set(dV(this,t),n)}delete(t){return super.delete(hV(this,t))}}function WT({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function dV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function hV({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function pV(e){return e!==null&&typeof e=="object"?e.valueOf():e}function vV(e=Po){if(e===Po)return iI;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function iI(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const mV=Math.sqrt(50),gV=Math.sqrt(10),yV=Math.sqrt(2);function Cp(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=mV?10:i>=gV?5:i>=yV?2:1;let s,c,f;return a<0?(f=Math.pow(10,-a)/o,s=Math.round(e*f),c=Math.round(t*f),s/f<e&&++s,c/f>t&&--c,f=-f):(f=Math.pow(10,a)*o,s=Math.round(e/f),c=Math.round(t/f),s*f<e&&++s,c*f>t&&--c),c<s&&.5<=n&&n<2?Cp(e,t,n*2):[s,c,f]}function A1(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?Cp(t,e,n):Cp(e,t,n);if(!(i>=a))return[];const s=i-a+1,c=new Array(s);if(r)if(o<0)for(let f=0;f<s;++f)c[f]=(i-f)/-o;else for(let f=0;f<s;++f)c[f]=(i-f)*o;else if(o<0)for(let f=0;f<s;++f)c[f]=(a+f)/-o;else for(let f=0;f<s;++f)c[f]=(a+f)*o;return c}function O1(e,t,n){return t=+t,e=+e,n=+n,Cp(e,t,n)[2]}function T1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?O1(t,e,n):O1(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function HT(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function qT(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function oI(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?iI:vV(a);r>n;){if(r-n>600){const c=r-n+1,f=t-n+1,d=Math.log(c),p=.5*Math.exp(2*d/3),v=.5*Math.sqrt(d*p*(c-p)/c)*(f-c/2<0?-1:1),g=Math.max(n,Math.floor(t-f*p/c+v)),y=Math.min(r,Math.floor(t+(c-f)*p/c+v));oI(e,t,g,y,a)}const i=e[t];let o=n,s=r;for(Rc(e,n,t),a(e[r],i)>0&&Rc(e,n,r);o<s;){for(Rc(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[n],i)===0?Rc(e,n,s):(++s,Rc(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Rc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function bV(e,t,n){if(e=Float64Array.from(cV(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return qT(e);if(t>=1)return HT(e);var r,a=(r-1)*t,i=Math.floor(a),o=HT(oI(e,i).subarray(0,i+1)),s=qT(e.subarray(i+1));return o+(s-o)*(a-i)}}function xV(e,t,n=aI){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),s=+n(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function wV(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function ua(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function qi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const R1=Symbol("implicit");function Gx(){var e=new UT,t=[],n=[],r=R1;function a(i){let o=e.get(i);if(o===void 0){if(r!==R1)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new UT;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Gx(t,n).unknown(r)},ua.apply(a,arguments),a}function $x(){var e=Gx().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,s=!1,c=0,f=0,d=.5;delete e.unknown;function p(){var v=t().length,g=a<r,y=g?a:r,b=g?r:a;i=(b-y)/Math.max(1,v-c+f*2),s&&(i=Math.floor(i)),y+=(b-y-i*(v-c))*d,o=i*(1-c),s&&(y=Math.round(y),o=Math.round(o));var x=wV(v).map(function(S){return y+i*S});return n(g?x.reverse():x)}return e.domain=function(v){return arguments.length?(t(v),p()):t()},e.range=function(v){return arguments.length?([r,a]=v,r=+r,a=+a,p()):[r,a]},e.rangeRound=function(v){return[r,a]=v,r=+r,a=+a,s=!0,p()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(v){return arguments.length?(s=!!v,p()):s},e.padding=function(v){return arguments.length?(c=Math.min(1,f=+v),p()):c},e.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),p()):c},e.paddingOuter=function(v){return arguments.length?(f=+v,p()):f},e.align=function(v){return arguments.length?(d=Math.max(0,Math.min(1,v)),p()):d},e.copy=function(){return $x(t(),[r,a]).round(s).paddingInner(c).paddingOuter(f).align(d)},ua.apply(p(),arguments)}function uI(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return uI(t())},e}function SV(){return uI($x.apply(null,arguments).paddingInner(1))}function Kx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function sI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Rf(){}var tf=.7,Ap=1/tf,Zs="\\s*([+-]?\\d+)\\s*",nf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",EV=/^#([0-9a-f]{3,8})$/,_V=new RegExp(`^rgb\\(${Zs},${Zs},${Zs}\\)$`),CV=new RegExp(`^rgb\\(${Wa},${Wa},${Wa}\\)$`),AV=new RegExp(`^rgba\\(${Zs},${Zs},${Zs},${nf}\\)$`),OV=new RegExp(`^rgba\\(${Wa},${Wa},${Wa},${nf}\\)$`),TV=new RegExp(`^hsl\\(${nf},${Wa},${Wa}\\)$`),RV=new RegExp(`^hsla\\(${nf},${Wa},${Wa},${nf}\\)$`),VT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kx(Rf,rf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:GT,formatHex:GT,formatHex8:DV,formatHsl:MV,formatRgb:$T,toString:$T});function GT(){return this.rgb().formatHex()}function DV(){return this.rgb().formatHex8()}function MV(){return lI(this).formatHsl()}function $T(){return this.rgb().formatRgb()}function rf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=EV.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?KT(t):n===3?new cr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ch(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ch(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_V.exec(e))?new cr(t[1],t[2],t[3],1):(t=CV.exec(e))?new cr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=AV.exec(e))?Ch(t[1],t[2],t[3],t[4]):(t=OV.exec(e))?Ch(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=TV.exec(e))?ZT(t[1],t[2]/100,t[3]/100,1):(t=RV.exec(e))?ZT(t[1],t[2]/100,t[3]/100,t[4]):VT.hasOwnProperty(e)?KT(VT[e]):e==="transparent"?new cr(NaN,NaN,NaN,0):null}function KT(e){return new cr(e>>16&255,e>>8&255,e&255,1)}function Ch(e,t,n,r){return r<=0&&(e=t=n=NaN),new cr(e,t,n,r)}function kV(e){return e instanceof Rf||(e=rf(e)),e?(e=e.rgb(),new cr(e.r,e.g,e.b,e.opacity)):new cr}function D1(e,t,n,r){return arguments.length===1?kV(e):new cr(e,t,n,r??1)}function cr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Kx(cr,D1,sI(Rf,{brighter(e){return e=e==null?Ap:Math.pow(Ap,e),new cr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tf:Math.pow(tf,e),new cr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cr(Ou(this.r),Ou(this.g),Ou(this.b),Op(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XT,formatHex:XT,formatHex8:NV,formatRgb:YT,toString:YT}));function XT(){return`#${Su(this.r)}${Su(this.g)}${Su(this.b)}`}function NV(){return`#${Su(this.r)}${Su(this.g)}${Su(this.b)}${Su((isNaN(this.opacity)?1:this.opacity)*255)}`}function YT(){const e=Op(this.opacity);return`${e===1?"rgb(":"rgba("}${Ou(this.r)}, ${Ou(this.g)}, ${Ou(this.b)}${e===1?")":`, ${e})`}`}function Op(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ou(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Su(e){return e=Ou(e),(e<16?"0":"")+e.toString(16)}function ZT(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ga(e,t,n,r)}function lI(e){if(e instanceof ga)return new ga(e.h,e.s,e.l,e.opacity);if(e instanceof Rf||(e=rf(e)),!e)return new ga;if(e instanceof ga)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,c=(i+a)/2;return s?(t===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-t)/s+2:o=(t-n)/s+4,s/=c<.5?i+a:2-i-a,o*=60):s=c>0&&c<1?0:o,new ga(o,s,c,e.opacity)}function IV(e,t,n,r){return arguments.length===1?lI(e):new ga(e,t,n,r??1)}function ga(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Kx(ga,IV,sI(Rf,{brighter(e){return e=e==null?Ap:Math.pow(Ap,e),new ga(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tf:Math.pow(tf,e),new ga(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new cr(Q0(e>=240?e-240:e+120,a,r),Q0(e,a,r),Q0(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new ga(QT(this.h),Ah(this.s),Ah(this.l),Op(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Op(this.opacity);return`${e===1?"hsl(":"hsla("}${QT(this.h)}, ${Ah(this.s)*100}%, ${Ah(this.l)*100}%${e===1?")":`, ${e})`}`}}));function QT(e){return e=(e||0)%360,e<0?e+360:e}function Ah(e){return Math.max(0,Math.min(1,e||0))}function Q0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xx=e=>()=>e;function PV(e,t){return function(n){return e+n*t}}function BV(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function LV(e){return(e=+e)==1?cI:function(t,n){return n-t?BV(t,n,e):Xx(isNaN(t)?n:t)}}function cI(e,t){var n=t-e;return n?PV(e,n):Xx(isNaN(e)?t:e)}const JT=(function e(t){var n=LV(t);function r(a,i){var o=n((a=D1(a)).r,(i=D1(i)).r),s=n(a.g,i.g),c=n(a.b,i.b),f=cI(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=s(d),a.b=c(d),a.opacity=f(d),a+""}}return r.gamma=e,r})(1);function FV(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function jV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function zV(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=wl(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function UV(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Tp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function WV(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=wl(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var M1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,J0=new RegExp(M1.source,"g");function HV(e){return function(){return e}}function qV(e){return function(t){return e(t)+""}}function VV(e,t){var n=M1.lastIndex=J0.lastIndex=0,r,a,i,o=-1,s=[],c=[];for(e=e+"",t=t+"";(r=M1.exec(e))&&(a=J0.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,c.push({i:o,x:Tp(r,a)})),n=J0.lastIndex;return n<t.length&&(i=t.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?qV(c[0].x):HV(t):(t=c.length,function(f){for(var d=0,p;d<t;++d)s[(p=c[d]).i]=p.x(f);return s.join("")})}function wl(e,t){var n=typeof t,r;return t==null||n==="boolean"?Xx(t):(n==="number"?Tp:n==="string"?(r=rf(t))?(t=r,JT):VV:t instanceof rf?JT:t instanceof Date?UV:jV(t)?FV:Array.isArray(t)?zV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?WV:Tp)(e,t)}function Yx(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function GV(e,t){t===void 0&&(t=e,e=wl);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[s](o-s)}}function $V(e){return function(){return e}}function Rp(e){return+e}var eR=[0,1];function Zn(e){return e}function k1(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:$V(isNaN(t)?NaN:.5)}function KV(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function XV(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=k1(a,r),i=n(o,i)):(r=k1(r,a),i=n(i,o)),function(s){return i(r(s))}}function YV(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=k1(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(s){var c=Tf(e,s,1,r)-1;return i[c](a[c](s))}}function Df(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Fv(){var e=eR,t=eR,n=wl,r,a,i,o=Zn,s,c,f;function d(){var v=Math.min(e.length,t.length);return o!==Zn&&(o=KV(e[0],e[v-1])),s=v>2?YV:XV,c=f=null,p}function p(v){return v==null||isNaN(v=+v)?i:(c||(c=s(e.map(r),t,n)))(r(o(v)))}return p.invert=function(v){return o(a((f||(f=s(t,e.map(r),Tp)))(v)))},p.domain=function(v){return arguments.length?(e=Array.from(v,Rp),d()):e.slice()},p.range=function(v){return arguments.length?(t=Array.from(v),d()):t.slice()},p.rangeRound=function(v){return t=Array.from(v),n=Yx,d()},p.clamp=function(v){return arguments.length?(o=v?!0:Zn,d()):o!==Zn},p.interpolate=function(v){return arguments.length?(n=v,d()):n},p.unknown=function(v){return arguments.length?(i=v,p):i},function(v,g){return r=v,a=g,d()}}function Zx(){return Fv()(Zn,Zn)}function ZV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Dp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function sl(e){return e=Dp(Math.abs(e)),e?e[1]:NaN}function QV(e,t){return function(n,r){for(var a=n.length,i=[],o=0,s=e[0],c=0;a>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),i.push(n.substring(a-=s,a+s)),!((c+=s+1)>r));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function JV(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var eG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function af(e){if(!(t=eG.exec(e)))throw new Error("invalid format: "+e);var t;return new Qx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}af.prototype=Qx.prototype;function Qx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Qx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tG(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var fI;function nG(e,t){var n=Dp(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(fI=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Dp(e,Math.max(0,t+i-1))[0]}function tR(e,t){var n=Dp(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const nR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ZV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>tR(e*100,t),r:tR,s:nG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rR(e){return e}var aR=Array.prototype.map,iR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function rG(e){var t=e.grouping===void 0||e.thousands===void 0?rR:QV(aR.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?rR:JV(aR.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(p){p=af(p);var v=p.fill,g=p.align,y=p.sign,b=p.symbol,x=p.zero,S=p.width,_=p.comma,C=p.precision,A=p.trim,O=p.type;O==="n"?(_=!0,O="g"):nR[O]||(C===void 0&&(C=12),A=!0,O="g"),(x||v==="0"&&g==="=")&&(x=!0,v="0",g="=");var R=b==="$"?n:b==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",M=b==="$"?r:/[%p]/.test(O)?o:"",k=nR[O],I=/[defgprs%]/.test(O);C=C===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function P(L){var F=R,Y=M,Z,J,U;if(O==="c")Y=k(L)+Y,L="";else{L=+L;var H=L<0||1/L<0;if(L=isNaN(L)?c:k(Math.abs(L),C),A&&(L=tG(L)),H&&+L==0&&y!=="+"&&(H=!1),F=(H?y==="("?y:s:y==="-"||y==="("?"":y)+F,Y=(O==="s"?iR[8+fI/3]:"")+Y+(H&&y==="("?")":""),I){for(Z=-1,J=L.length;++Z<J;)if(U=L.charCodeAt(Z),48>U||U>57){Y=(U===46?a+L.slice(Z+1):L.slice(Z))+Y,L=L.slice(0,Z);break}}}_&&!x&&(L=t(L,1/0));var G=F.length+L.length+Y.length,Q=G<S?new Array(S-G+1).join(v):"";switch(_&&x&&(L=t(Q+L,Q.length?S-Y.length:1/0),Q=""),g){case"<":L=F+L+Y+Q;break;case"=":L=F+Q+L+Y;break;case"^":L=Q.slice(0,G=Q.length>>1)+F+L+Y+Q.slice(G);break;default:L=Q+F+L+Y;break}return i(L)}return P.toString=function(){return p+""},P}function d(p,v){var g=f((p=af(p),p.type="f",p)),y=Math.max(-8,Math.min(8,Math.floor(sl(v)/3)))*3,b=Math.pow(10,-y),x=iR[8+y/3];return function(S){return g(b*S)+x}}return{format:f,formatPrefix:d}}var Oh,Jx,dI;aG({thousands:",",grouping:[3],currency:["$",""]});function aG(e){return Oh=rG(e),Jx=Oh.format,dI=Oh.formatPrefix,Oh}function iG(e){return Math.max(0,-sl(Math.abs(e)))}function oG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sl(t)/3)))*3-sl(Math.abs(e)))}function uG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,sl(t)-sl(e))+1}function hI(e,t,n,r){var a=T1(e,t,n),i;switch(r=af(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=oG(a,o))&&(r.precision=i),dI(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=uG(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=iG(a))&&(r.precision=i-(r.type==="%")*2);break}}return Jx(r)}function qo(e){var t=e.domain;return e.ticks=function(n){var r=t();return A1(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return hI(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],s=r[i],c,f,d=10;for(s<o&&(f=o,o=s,s=f,f=a,a=i,i=f);d-- >0;){if(f=O1(o,s,n),f===c)return r[a]=o,r[i]=s,t(r);if(f>0)o=Math.floor(o/f)*f,s=Math.ceil(s/f)*f;else if(f<0)o=Math.ceil(o*f)/f,s=Math.floor(s*f)/f;else break;c=f}return e},e}function pI(){var e=Zx();return e.copy=function(){return Df(e,pI())},ua.apply(e,arguments),qo(e)}function vI(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Rp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return vI(e).unknown(t)},e=arguments.length?Array.from(e,Rp):[0,1],qo(n)}function mI(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function oR(e){return Math.log(e)}function uR(e){return Math.exp(e)}function sG(e){return-Math.log(-e)}function lG(e){return-Math.exp(-e)}function cG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function fG(e){return e===10?cG:e===Math.E?Math.exp:t=>Math.pow(e,t)}function dG(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function sR(e){return(t,n)=>-e(-t,n)}function ew(e){const t=e(oR,uR),n=t.domain;let r=10,a,i;function o(){return a=dG(r),i=fG(r),n()[0]<0?(a=sR(a),i=sR(i),e(sG,lG)):e(oR,uR),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const c=n();let f=c[0],d=c[c.length-1];const p=d<f;p&&([f,d]=[d,f]);let v=a(f),g=a(d),y,b;const x=s==null?10:+s;let S=[];if(!(r%1)&&g-v<x){if(v=Math.floor(v),g=Math.ceil(g),f>0){for(;v<=g;++v)for(y=1;y<r;++y)if(b=v<0?y/i(-v):y*i(v),!(b<f)){if(b>d)break;S.push(b)}}else for(;v<=g;++v)for(y=r-1;y>=1;--y)if(b=v>0?y/i(-v):y*i(v),!(b<f)){if(b>d)break;S.push(b)}S.length*2<x&&(S=A1(f,d,x))}else S=A1(v,g,Math.min(g-v,x)).map(i);return p?S.reverse():S},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=af(c)).precision==null&&(c.trim=!0),c=Jx(c)),s===1/0)return c;const f=Math.max(1,r*s/t.ticks().length);return d=>{let p=d/i(Math.round(a(d)));return p*r<r-.5&&(p*=r),p<=f?c(d):""}},t.nice=()=>n(mI(n(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function gI(){const e=ew(Fv()).domain([1,10]);return e.copy=()=>Df(e,gI()).base(e.base()),ua.apply(e,arguments),e}function lR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function cR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function tw(e){var t=1,n=e(lR(t),cR(t));return n.constant=function(r){return arguments.length?e(lR(t=+r),cR(t)):t},qo(n)}function yI(){var e=tw(Fv());return e.copy=function(){return Df(e,yI()).constant(e.constant())},ua.apply(e,arguments)}function fR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function hG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pG(e){return e<0?-e*e:e*e}function nw(e){var t=e(Zn,Zn),n=1;function r(){return n===1?e(Zn,Zn):n===.5?e(hG,pG):e(fR(n),fR(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},qo(t)}function rw(){var e=nw(Fv());return e.copy=function(){return Df(e,rw()).exponent(e.exponent())},ua.apply(e,arguments),e}function vG(){return rw.apply(null,arguments).exponent(.5)}function dR(e){return Math.sign(e)*e*e}function mG(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function bI(){var e=Zx(),t=[0,1],n=!1,r;function a(i){var o=mG(e(i));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(i){return e.invert(dR(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Rp)).map(dR)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return bI(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},ua.apply(a,arguments),qo(a)}function xI(){var e=[],t=[],n=[],r;function a(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=xV(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?r:t[Tf(n,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Po),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return xI().domain(e).range(t).unknown(r)},ua.apply(i,arguments)}function wI(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Tf(r,c,0,n)]:i}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,s()):a.slice()},o.invertExtent=function(c){var f=a.indexOf(c);return f<0?[NaN,NaN]:f<1?[e,r[0]]:f>=n?[r[n-1],t]:[r[f-1],r[f]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return wI().domain([e,t]).range(a).unknown(i)},ua.apply(qo(o),arguments)}function SI(){var e=[.5],t=[0,1],n,r=1;function a(i){return i!=null&&i<=i?t[Tf(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return SI().domain(e).range(t).unknown(n)},ua.apply(a,arguments)}const eb=new Date,tb=new Date;function un(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const c=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return c;let f;do c.push(f=new Date(+i)),t(i,s),e(i);while(f<i&&i<o);return c},a.filter=i=>un(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(eb.setTime(+i),tb.setTime(+o),e(eb),e(tb),Math.floor(n(eb,tb))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Mp=un(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Mp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?un(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Mp);Mp.range;const Ai=1e3,ea=Ai*60,Oi=ea*60,Ii=Oi*24,aw=Ii*7,hR=Ii*30,nb=Ii*365,Eu=un(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ai)},(e,t)=>(t-e)/Ai,e=>e.getUTCSeconds());Eu.range;const iw=un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ai)},(e,t)=>{e.setTime(+e+t*ea)},(e,t)=>(t-e)/ea,e=>e.getMinutes());iw.range;const ow=un(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ea)},(e,t)=>(t-e)/ea,e=>e.getUTCMinutes());ow.range;const uw=un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ai-e.getMinutes()*ea)},(e,t)=>{e.setTime(+e+t*Oi)},(e,t)=>(t-e)/Oi,e=>e.getHours());uw.range;const sw=un(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Oi)},(e,t)=>(t-e)/Oi,e=>e.getUTCHours());sw.range;const Mf=un(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ea)/Ii,e=>e.getDate()-1);Mf.range;const jv=un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ii,e=>e.getUTCDate()-1);jv.range;const EI=un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ii,e=>Math.floor(e/Ii));EI.range;function Uu(e){return un(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ea)/aw)}const zv=Uu(0),kp=Uu(1),gG=Uu(2),yG=Uu(3),ll=Uu(4),bG=Uu(5),xG=Uu(6);zv.range;kp.range;gG.range;yG.range;ll.range;bG.range;xG.range;function Wu(e){return un(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/aw)}const Uv=Wu(0),Np=Wu(1),wG=Wu(2),SG=Wu(3),cl=Wu(4),EG=Wu(5),_G=Wu(6);Uv.range;Np.range;wG.range;SG.range;cl.range;EG.range;_G.range;const lw=un(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());lw.range;const cw=un(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());cw.range;const Pi=un(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Pi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:un(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Pi.range;const Bi=un(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Bi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:un(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Bi.range;function _I(e,t,n,r,a,i){const o=[[Eu,1,Ai],[Eu,5,5*Ai],[Eu,15,15*Ai],[Eu,30,30*Ai],[i,1,ea],[i,5,5*ea],[i,15,15*ea],[i,30,30*ea],[a,1,Oi],[a,3,3*Oi],[a,6,6*Oi],[a,12,12*Oi],[r,1,Ii],[r,2,2*Ii],[n,1,aw],[t,1,hR],[t,3,3*hR],[e,1,nb]];function s(f,d,p){const v=d<f;v&&([f,d]=[d,f]);const g=p&&typeof p.range=="function"?p:c(f,d,p),y=g?g.range(f,+d+1):[];return v?y.reverse():y}function c(f,d,p){const v=Math.abs(d-f)/p,g=Vx(([,,x])=>x).right(o,v);if(g===o.length)return e.every(T1(f/nb,d/nb,p));if(g===0)return Mp.every(Math.max(T1(f,d,p),1));const[y,b]=o[v/o[g-1][2]<o[g][2]/v?g-1:g];return y.every(b)}return[s,c]}const[CG,AG]=_I(Bi,cw,Uv,EI,sw,ow),[OG,TG]=_I(Pi,lw,zv,Mf,uw,iw);function rb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ab(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Dc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function RG(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,c=e.shortMonths,f=Mc(a),d=kc(a),p=Mc(i),v=kc(i),g=Mc(o),y=kc(o),b=Mc(s),x=kc(s),S=Mc(c),_=kc(c),C={a:H,A:G,b:Q,B:oe,c:null,d:bR,e:bR,f:QG,g:s7,G:c7,H:XG,I:YG,j:ZG,L:CI,m:JG,M:e7,p:j,q:K,Q:SR,s:ER,S:t7,u:n7,U:r7,V:a7,w:i7,W:o7,x:null,X:null,y:u7,Y:l7,Z:f7,"%":wR},A={a:ce,A:ve,b:ye,B:be,c:null,d:xR,e:xR,f:v7,g:C7,G:O7,H:d7,I:h7,j:p7,L:OI,m:m7,M:g7,p:xe,q:Pe,Q:SR,s:ER,S:y7,u:b7,U:x7,V:w7,w:S7,W:E7,x:null,X:null,y:_7,Y:A7,Z:T7,"%":wR},O={a:P,A:L,b:F,B:Y,c:Z,d:gR,e:gR,f:VG,g:mR,G:vR,H:yR,I:yR,j:UG,L:qG,m:zG,M:WG,p:I,q:jG,Q:$G,s:KG,S:HG,u:IG,U:PG,V:BG,w:NG,W:LG,x:J,X:U,y:mR,Y:vR,Z:FG,"%":GG};C.x=R(n,C),C.X=R(r,C),C.c=R(t,C),A.x=R(n,A),A.X=R(r,A),A.c=R(t,A);function R(ne,Ae){return function(Se){var he=[],ze=-1,Ie=0,Ge=ne.length,$e,qt,Fn;for(Se instanceof Date||(Se=new Date(+Se));++ze<Ge;)ne.charCodeAt(ze)===37&&(he.push(ne.slice(Ie,ze)),(qt=pR[$e=ne.charAt(++ze)])!=null?$e=ne.charAt(++ze):qt=$e==="e"?" ":"0",(Fn=Ae[$e])&&($e=Fn(Se,qt)),he.push($e),Ie=ze+1);return he.push(ne.slice(Ie,ze)),he.join("")}}function M(ne,Ae){return function(Se){var he=Dc(1900,void 0,1),ze=k(he,ne,Se+="",0),Ie,Ge;if(ze!=Se.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(Ae&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Ie=ab(Dc(he.y,0,1)),Ge=Ie.getUTCDay(),Ie=Ge>4||Ge===0?Np.ceil(Ie):Np(Ie),Ie=jv.offset(Ie,(he.V-1)*7),he.y=Ie.getUTCFullYear(),he.m=Ie.getUTCMonth(),he.d=Ie.getUTCDate()+(he.w+6)%7):(Ie=rb(Dc(he.y,0,1)),Ge=Ie.getDay(),Ie=Ge>4||Ge===0?kp.ceil(Ie):kp(Ie),Ie=Mf.offset(Ie,(he.V-1)*7),he.y=Ie.getFullYear(),he.m=Ie.getMonth(),he.d=Ie.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),Ge="Z"in he?ab(Dc(he.y,0,1)).getUTCDay():rb(Dc(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(Ge+5)%7:he.w+he.U*7-(Ge+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,ab(he)):rb(he)}}function k(ne,Ae,Se,he){for(var ze=0,Ie=Ae.length,Ge=Se.length,$e,qt;ze<Ie;){if(he>=Ge)return-1;if($e=Ae.charCodeAt(ze++),$e===37){if($e=Ae.charAt(ze++),qt=O[$e in pR?Ae.charAt(ze++):$e],!qt||(he=qt(ne,Se,he))<0)return-1}else if($e!=Se.charCodeAt(he++))return-1}return he}function I(ne,Ae,Se){var he=f.exec(Ae.slice(Se));return he?(ne.p=d.get(he[0].toLowerCase()),Se+he[0].length):-1}function P(ne,Ae,Se){var he=g.exec(Ae.slice(Se));return he?(ne.w=y.get(he[0].toLowerCase()),Se+he[0].length):-1}function L(ne,Ae,Se){var he=p.exec(Ae.slice(Se));return he?(ne.w=v.get(he[0].toLowerCase()),Se+he[0].length):-1}function F(ne,Ae,Se){var he=S.exec(Ae.slice(Se));return he?(ne.m=_.get(he[0].toLowerCase()),Se+he[0].length):-1}function Y(ne,Ae,Se){var he=b.exec(Ae.slice(Se));return he?(ne.m=x.get(he[0].toLowerCase()),Se+he[0].length):-1}function Z(ne,Ae,Se){return k(ne,t,Ae,Se)}function J(ne,Ae,Se){return k(ne,n,Ae,Se)}function U(ne,Ae,Se){return k(ne,r,Ae,Se)}function H(ne){return o[ne.getDay()]}function G(ne){return i[ne.getDay()]}function Q(ne){return c[ne.getMonth()]}function oe(ne){return s[ne.getMonth()]}function j(ne){return a[+(ne.getHours()>=12)]}function K(ne){return 1+~~(ne.getMonth()/3)}function ce(ne){return o[ne.getUTCDay()]}function ve(ne){return i[ne.getUTCDay()]}function ye(ne){return c[ne.getUTCMonth()]}function be(ne){return s[ne.getUTCMonth()]}function xe(ne){return a[+(ne.getUTCHours()>=12)]}function Pe(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var Ae=R(ne+="",C);return Ae.toString=function(){return ne},Ae},parse:function(ne){var Ae=M(ne+="",!1);return Ae.toString=function(){return ne},Ae},utcFormat:function(ne){var Ae=R(ne+="",A);return Ae.toString=function(){return ne},Ae},utcParse:function(ne){var Ae=M(ne+="",!0);return Ae.toString=function(){return ne},Ae}}}var pR={"-":"",_:" ",0:"0"},Sn=/^\s*\d+/,DG=/^%/,MG=/[\\^$*+?|[\]().{}]/g;function ot(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function kG(e){return e.replace(MG,"\\$&")}function Mc(e){return new RegExp("^(?:"+e.map(kG).join("|")+")","i")}function kc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function NG(e,t,n){var r=Sn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function IG(e,t,n){var r=Sn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function PG(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function BG(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function LG(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function vR(e,t,n){var r=Sn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function mR(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function FG(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jG(e,t,n){var r=Sn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function zG(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function gR(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function UG(e,t,n){var r=Sn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function yR(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function WG(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function HG(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function qG(e,t,n){var r=Sn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function VG(e,t,n){var r=Sn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function GG(e,t,n){var r=DG.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $G(e,t,n){var r=Sn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function KG(e,t,n){var r=Sn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function bR(e,t){return ot(e.getDate(),t,2)}function XG(e,t){return ot(e.getHours(),t,2)}function YG(e,t){return ot(e.getHours()%12||12,t,2)}function ZG(e,t){return ot(1+Mf.count(Pi(e),e),t,3)}function CI(e,t){return ot(e.getMilliseconds(),t,3)}function QG(e,t){return CI(e,t)+"000"}function JG(e,t){return ot(e.getMonth()+1,t,2)}function e7(e,t){return ot(e.getMinutes(),t,2)}function t7(e,t){return ot(e.getSeconds(),t,2)}function n7(e){var t=e.getDay();return t===0?7:t}function r7(e,t){return ot(zv.count(Pi(e)-1,e),t,2)}function AI(e){var t=e.getDay();return t>=4||t===0?ll(e):ll.ceil(e)}function a7(e,t){return e=AI(e),ot(ll.count(Pi(e),e)+(Pi(e).getDay()===4),t,2)}function i7(e){return e.getDay()}function o7(e,t){return ot(kp.count(Pi(e)-1,e),t,2)}function u7(e,t){return ot(e.getFullYear()%100,t,2)}function s7(e,t){return e=AI(e),ot(e.getFullYear()%100,t,2)}function l7(e,t){return ot(e.getFullYear()%1e4,t,4)}function c7(e,t){var n=e.getDay();return e=n>=4||n===0?ll(e):ll.ceil(e),ot(e.getFullYear()%1e4,t,4)}function f7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ot(t/60|0,"0",2)+ot(t%60,"0",2)}function xR(e,t){return ot(e.getUTCDate(),t,2)}function d7(e,t){return ot(e.getUTCHours(),t,2)}function h7(e,t){return ot(e.getUTCHours()%12||12,t,2)}function p7(e,t){return ot(1+jv.count(Bi(e),e),t,3)}function OI(e,t){return ot(e.getUTCMilliseconds(),t,3)}function v7(e,t){return OI(e,t)+"000"}function m7(e,t){return ot(e.getUTCMonth()+1,t,2)}function g7(e,t){return ot(e.getUTCMinutes(),t,2)}function y7(e,t){return ot(e.getUTCSeconds(),t,2)}function b7(e){var t=e.getUTCDay();return t===0?7:t}function x7(e,t){return ot(Uv.count(Bi(e)-1,e),t,2)}function TI(e){var t=e.getUTCDay();return t>=4||t===0?cl(e):cl.ceil(e)}function w7(e,t){return e=TI(e),ot(cl.count(Bi(e),e)+(Bi(e).getUTCDay()===4),t,2)}function S7(e){return e.getUTCDay()}function E7(e,t){return ot(Np.count(Bi(e)-1,e),t,2)}function _7(e,t){return ot(e.getUTCFullYear()%100,t,2)}function C7(e,t){return e=TI(e),ot(e.getUTCFullYear()%100,t,2)}function A7(e,t){return ot(e.getUTCFullYear()%1e4,t,4)}function O7(e,t){var n=e.getUTCDay();return e=n>=4||n===0?cl(e):cl.ceil(e),ot(e.getUTCFullYear()%1e4,t,4)}function T7(){return"+0000"}function wR(){return"%"}function SR(e){return+e}function ER(e){return Math.floor(+e/1e3)}var Ps,RI,DI;R7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function R7(e){return Ps=RG(e),RI=Ps.format,Ps.parse,DI=Ps.utcFormat,Ps.utcParse,Ps}function D7(e){return new Date(e)}function M7(e){return e instanceof Date?+e:+new Date(+e)}function fw(e,t,n,r,a,i,o,s,c,f){var d=Zx(),p=d.invert,v=d.domain,g=f(".%L"),y=f(":%S"),b=f("%I:%M"),x=f("%I %p"),S=f("%a %d"),_=f("%b %d"),C=f("%B"),A=f("%Y");function O(R){return(c(R)<R?g:s(R)<R?y:o(R)<R?b:i(R)<R?x:r(R)<R?a(R)<R?S:_:n(R)<R?C:A)(R)}return d.invert=function(R){return new Date(p(R))},d.domain=function(R){return arguments.length?v(Array.from(R,M7)):v().map(D7)},d.ticks=function(R){var M=v();return e(M[0],M[M.length-1],R??10)},d.tickFormat=function(R,M){return M==null?O:f(M)},d.nice=function(R){var M=v();return(!R||typeof R.range!="function")&&(R=t(M[0],M[M.length-1],R??10)),R?v(mI(M,R)):d},d.copy=function(){return Df(d,fw(e,t,n,r,a,i,o,s,c,f))},d}function k7(){return ua.apply(fw(OG,TG,Pi,lw,zv,Mf,uw,iw,Eu,RI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function N7(){return ua.apply(fw(CG,AG,Bi,cw,Uv,jv,sw,ow,Eu,DI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wv(){var e=0,t=1,n,r,a,i,o=Zn,s=!1,c;function f(p){return p==null||isNaN(p=+p)?c:o(a===0?.5:(p=(i(p)-n)*a,s?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([e,t]=p,n=i(e=+e),r=i(t=+t),a=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(p){return arguments.length?(s=!!p,f):s},f.interpolator=function(p){return arguments.length?(o=p,f):o};function d(p){return function(v){var g,y;return arguments.length?([g,y]=v,o=p(g,y),f):[o(0),o(1)]}}return f.range=d(wl),f.rangeRound=d(Yx),f.unknown=function(p){return arguments.length?(c=p,f):c},function(p){return i=p,n=p(e),r=p(t),a=n===r?0:1/(r-n),f}}function Vo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function MI(){var e=qo(Wv()(Zn));return e.copy=function(){return Vo(e,MI())},qi.apply(e,arguments)}function kI(){var e=ew(Wv()).domain([1,10]);return e.copy=function(){return Vo(e,kI()).base(e.base())},qi.apply(e,arguments)}function NI(){var e=tw(Wv());return e.copy=function(){return Vo(e,NI()).constant(e.constant())},qi.apply(e,arguments)}function dw(){var e=nw(Wv());return e.copy=function(){return Vo(e,dw()).exponent(e.exponent())},qi.apply(e,arguments)}function I7(){return dw.apply(null,arguments).exponent(.5)}function II(){var e=[],t=Zn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Tf(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Po),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>bV(e,i/r))},n.copy=function(){return II(t).domain(e)},qi.apply(n,arguments)}function Hv(){var e=0,t=.5,n=1,r=1,a,i,o,s,c,f=Zn,d,p=!1,v;function g(b){return isNaN(b=+b)?v:(b=.5+((b=+d(b))-i)*(r*b<r*i?s:c),f(p?Math.max(0,Math.min(1,b)):b))}g.domain=function(b){return arguments.length?([e,t,n]=b,a=d(e=+e),i=d(t=+t),o=d(n=+n),s=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,g):[e,t,n]},g.clamp=function(b){return arguments.length?(p=!!b,g):p},g.interpolator=function(b){return arguments.length?(f=b,g):f};function y(b){return function(x){var S,_,C;return arguments.length?([S,_,C]=x,f=GV(b,[S,_,C]),g):[f(0),f(.5),f(1)]}}return g.range=y(wl),g.rangeRound=y(Yx),g.unknown=function(b){return arguments.length?(v=b,g):v},function(b){return d=b,a=b(e),i=b(t),o=b(n),s=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,g}}function PI(){var e=qo(Hv()(Zn));return e.copy=function(){return Vo(e,PI())},qi.apply(e,arguments)}function BI(){var e=ew(Hv()).domain([.1,1,10]);return e.copy=function(){return Vo(e,BI()).base(e.base())},qi.apply(e,arguments)}function LI(){var e=tw(Hv());return e.copy=function(){return Vo(e,LI()).constant(e.constant())},qi.apply(e,arguments)}function hw(){var e=nw(Hv());return e.copy=function(){return Vo(e,hw()).exponent(e.exponent())},qi.apply(e,arguments)}function P7(){return hw.apply(null,arguments).exponent(.5)}const jc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:$x,scaleDiverging:PI,scaleDivergingLog:BI,scaleDivergingPow:hw,scaleDivergingSqrt:P7,scaleDivergingSymlog:LI,scaleIdentity:vI,scaleImplicit:R1,scaleLinear:pI,scaleLog:gI,scaleOrdinal:Gx,scalePoint:SV,scalePow:rw,scaleQuantile:xI,scaleQuantize:wI,scaleRadial:bI,scaleSequential:MI,scaleSequentialLog:kI,scaleSequentialPow:dw,scaleSequentialQuantile:II,scaleSequentialSqrt:I7,scaleSequentialSymlog:NI,scaleSqrt:vG,scaleSymlog:yI,scaleThreshold:SI,scaleTime:k7,scaleUtc:N7,tickFormat:hI},Symbol.toStringTag,{value:"Module"}));var Vi=e=>e.chartData,FI=le([Vi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),jI=(e,t,n,r)=>r?FI(e):Vi(e),B7=(e,t,n)=>n?FI(e):Vi(e);function Uo(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Nt(t)&&Nt(n))return!0}return!1}function _R(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function zI(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,a,i;if(Nt(n))a=n;else if(typeof n=="function")return;if(Nt(r))i=r;else if(typeof r=="function")return;var o=[a,i];if(Uo(o))return o}}function L7(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Uo(r))return _R(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,s;if(a==="auto")t!=null&&(o=Math.min(...t));else if(Le(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[0]))}catch{}else if(typeof a=="string"&&BO.test(a)){var c=BO.exec(a);if(c==null||c[1]==null||t==null)o=void 0;else{var f=+c[1];o=t[0]-f}}else o=t?.[0];if(i==="auto")t!=null&&(s=Math.max(...t));else if(Le(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t?.[1]))}catch{}else if(typeof i=="string"&&LO.test(i)){var d=LO.exec(i);if(d==null||d[1]==null||t==null)s=void 0;else{var p=+d[1];s=t[1]+p}}else s=t?.[1];var v=[o,s];if(Uo(v))return t==null?v:_R(v,t,n)}}}var Sl=1e9,F7={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vw,Rt=!0,aa="[DecimalError] ",Tu=aa+"Invalid argument: ",pw=aa+"Exponent out of range: ",El=Math.floor,gu=Math.pow,j7=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Tr,gn=1e7,Ct=7,UI=9007199254740991,Ip=El(UI/Ct),_e={};_e.absoluteValue=_e.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};_e.comparedTo=_e.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};_e.decimalPlaces=_e.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ct;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};_e.dividedBy=_e.div=function(e){return Ri(this,new this.constructor(e))};_e.dividedToIntegerBy=_e.idiv=function(e){var t=this,n=t.constructor;return bt(Ri(t,new n(e),0,1),n.precision)};_e.equals=_e.eq=function(e){return!this.cmp(e)};_e.exponent=function(){return Qt(this)};_e.greaterThan=_e.gt=function(e){return this.cmp(e)>0};_e.greaterThanOrEqualTo=_e.gte=function(e){return this.cmp(e)>=0};_e.isInteger=_e.isint=function(){return this.e>this.d.length-2};_e.isNegative=_e.isneg=function(){return this.s<0};_e.isPositive=_e.ispos=function(){return this.s>0};_e.isZero=function(){return this.s===0};_e.lessThan=_e.lt=function(e){return this.cmp(e)<0};_e.lessThanOrEqualTo=_e.lte=function(e){return this.cmp(e)<1};_e.logarithm=_e.log=function(e){var t,n=this,r=n.constructor,a=r.precision,i=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Tr))throw Error(aa+"NaN");if(n.s<1)throw Error(aa+(n.s?"NaN":"-Infinity"));return n.eq(Tr)?new r(0):(Rt=!1,t=Ri(of(n,i),of(e,i),i),Rt=!0,bt(t,a))};_e.minus=_e.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?qI(t,e):WI(t,(e.s=-e.s,e))};_e.modulo=_e.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(aa+"NaN");return n.s?(Rt=!1,t=Ri(n,e,0,1).times(e),Rt=!0,n.minus(t)):bt(new r(n),a)};_e.naturalExponential=_e.exp=function(){return HI(this)};_e.naturalLogarithm=_e.ln=function(){return of(this)};_e.negated=_e.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};_e.plus=_e.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WI(t,e):qI(t,(e.s=-e.s,e))};_e.precision=_e.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Tu+e);if(t=Qt(a)+1,r=a.d.length-1,n=r*Ct+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};_e.squareRoot=_e.sqrt=function(){var e,t,n,r,a,i,o,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(aa+"NaN")}for(e=Qt(s),Rt=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=za(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=El((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(i=r,r=i.plus(Ri(s,i,o+2)).times(.5),za(i.d).slice(0,o)===(t=za(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(bt(i,n+1,0),i.times(i).eq(s)){r=i;break}}else if(t!="9999")break;o+=4}return Rt=!0,bt(r,n)};_e.times=_e.mul=function(e){var t,n,r,a,i,o,s,c,f,d=this,p=d.constructor,v=d.d,g=(e=new p(e)).d;if(!d.s||!e.s)return new p(0);for(e.s*=d.s,n=d.e+e.e,c=v.length,f=g.length,c<f&&(i=v,v=g,g=i,o=c,c=f,f=o),i=[],o=c+f,r=o;r--;)i.push(0);for(r=f;--r>=0;){for(t=0,a=c+r;a>r;)s=i[a]+g[r]*v[a-r-1]+t,i[a--]=s%gn|0,t=s/gn|0;i[a]=(i[a]+t)%gn|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Rt?bt(e,p.precision):e};_e.toDecimalPlaces=_e.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ka(e,0,Sl),t===void 0?t=r.rounding:Ka(t,0,8),bt(n,e+Qt(n)+1,t))};_e.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Bu(r,!0):(Ka(e,0,Sl),t===void 0?t=a.rounding:Ka(t,0,8),r=bt(new a(r),e+1,t),n=Bu(r,!0,e+1)),n};_e.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?Bu(a):(Ka(e,0,Sl),t===void 0?t=i.rounding:Ka(t,0,8),r=bt(new i(a),e+Qt(a)+1,t),n=Bu(r.abs(),!1,e+Qt(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};_e.toInteger=_e.toint=function(){var e=this,t=e.constructor;return bt(new t(e),Qt(e)+1,t.rounding)};_e.toNumber=function(){return+this};_e.toPower=_e.pow=function(e){var t,n,r,a,i,o,s=this,c=s.constructor,f=12,d=+(e=new c(e));if(!e.s)return new c(Tr);if(s=new c(s),!s.s){if(e.s<1)throw Error(aa+"Infinity");return s}if(s.eq(Tr))return s;if(r=c.precision,e.eq(Tr))return bt(s,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=s.s,o){if((n=d<0?-d:d)<=UI){for(a=new c(Tr),t=Math.ceil(r/Ct+4),Rt=!1;n%2&&(a=a.times(s),AR(a.d,t)),n=El(n/2),n!==0;)s=s.times(s),AR(s.d,t);return Rt=!0,e.s<0?new c(Tr).div(a):bt(a,r)}}else if(i<0)throw Error(aa+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,Rt=!1,a=e.times(of(s,r+f)),Rt=!0,a=HI(a),a.s=i,a};_e.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?(n=Qt(a),r=Bu(a,n<=i.toExpNeg||n>=i.toExpPos)):(Ka(e,1,Sl),t===void 0?t=i.rounding:Ka(t,0,8),a=bt(new i(a),e,t),n=Qt(a),r=Bu(a,e<=n||n<=i.toExpNeg,e)),r};_e.toSignificantDigits=_e.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ka(e,1,Sl),t===void 0?t=r.rounding:Ka(t,0,8)),bt(new r(n),e,t)};_e.toString=_e.valueOf=_e.val=_e.toJSON=_e[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Qt(e),n=e.constructor;return Bu(e,t<=n.toExpNeg||t>=n.toExpPos)};function WI(e,t){var n,r,a,i,o,s,c,f,d=e.constructor,p=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Rt?bt(t,p):t;if(c=e.d,f=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(r=c,i=-i,s=f.length):(r=f,a=o,s=c.length),o=Math.ceil(p/Ct),s=o>s?o+1:s+1,i>s&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(s=c.length,i=f.length,s-i<0&&(i=s,r=f,f=c,c=r),n=0;i;)n=(c[--i]=c[i]+f[i]+n)/gn|0,c[i]%=gn;for(n&&(c.unshift(n),++a),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=a,Rt?bt(t,p):t}function Ka(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Tu+e)}function za(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)r=e[t]+"",n=Ct-r.length,n&&(i+=To(n)),i+=r;o=e[t],r=o+"",n=Ct-r.length,n&&(i+=To(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ri=(function(){function e(r,a){var i,o=0,s=r.length;for(r=r.slice();s--;)i=r[s]*a+o,r[s]=i%gn|0,o=i/gn|0;return o&&r.unshift(o),r}function t(r,a,i,o){var s,c;if(i!=o)c=i>o?1:-1;else for(s=c=0;s<i;s++)if(r[s]!=a[s]){c=r[s]>a[s]?1:-1;break}return c}function n(r,a,i){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*gn+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,o){var s,c,f,d,p,v,g,y,b,x,S,_,C,A,O,R,M,k,I=r.constructor,P=r.s==a.s?1:-1,L=r.d,F=a.d;if(!r.s)return new I(r);if(!a.s)throw Error(aa+"Division by zero");for(c=r.e-a.e,M=F.length,O=L.length,g=new I(P),y=g.d=[],f=0;F[f]==(L[f]||0);)++f;if(F[f]>(L[f]||0)&&--c,i==null?_=i=I.precision:o?_=i+(Qt(r)-Qt(a))+1:_=i,_<0)return new I(0);if(_=_/Ct+2|0,f=0,M==1)for(d=0,F=F[0],_++;(f<O||d)&&_--;f++)C=d*gn+(L[f]||0),y[f]=C/F|0,d=C%F|0;else{for(d=gn/(F[0]+1)|0,d>1&&(F=e(F,d),L=e(L,d),M=F.length,O=L.length),A=M,b=L.slice(0,M),x=b.length;x<M;)b[x++]=0;k=F.slice(),k.unshift(0),R=F[0],F[1]>=gn/2&&++R;do d=0,s=t(F,b,M,x),s<0?(S=b[0],M!=x&&(S=S*gn+(b[1]||0)),d=S/R|0,d>1?(d>=gn&&(d=gn-1),p=e(F,d),v=p.length,x=b.length,s=t(p,b,v,x),s==1&&(d--,n(p,M<v?k:F,v))):(d==0&&(s=d=1),p=F.slice()),v=p.length,v<x&&p.unshift(0),n(b,p,x),s==-1&&(x=b.length,s=t(F,b,M,x),s<1&&(d++,n(b,M<x?k:F,x))),x=b.length):s===0&&(d++,b=[0]),y[f++]=d,s&&b[0]?b[x++]=L[A]||0:(b=[L[A]],x=1);while((A++<O||b[0]!==void 0)&&_--)}return y[0]||y.shift(),g.e=c,bt(g,o?i+Qt(g)+1:i)}})();function HI(e,t){var n,r,a,i,o,s,c=0,f=0,d=e.constructor,p=d.precision;if(Qt(e)>16)throw Error(pw+Qt(e));if(!e.s)return new d(Tr);for(Rt=!1,s=p,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),f+=5;for(r=Math.log(gu(2,f))/Math.LN10*2+5|0,s+=r,n=a=i=new d(Tr),d.precision=s;;){if(a=bt(a.times(e),s),n=n.times(++c),o=i.plus(Ri(a,n,s)),za(o.d).slice(0,s)===za(i.d).slice(0,s)){for(;f--;)i=bt(i.times(i),s);return d.precision=p,t==null?(Rt=!0,bt(i,p)):i}i=o}}function Qt(e){for(var t=e.e*Ct,n=e.d[0];n>=10;n/=10)t++;return t}function ib(e,t,n){if(t>e.LN10.sd())throw Rt=!0,n&&(e.precision=n),Error(aa+"LN10 precision limit exceeded");return bt(new e(e.LN10),t)}function To(e){for(var t="";e--;)t+="0";return t}function of(e,t){var n,r,a,i,o,s,c,f,d,p=1,v=10,g=e,y=g.d,b=g.constructor,x=b.precision;if(g.s<1)throw Error(aa+(g.s?"NaN":"-Infinity"));if(g.eq(Tr))return new b(0);if(t==null?(Rt=!1,f=x):f=t,g.eq(10))return t==null&&(Rt=!0),ib(b,f);if(f+=v,b.precision=f,n=za(y),r=n.charAt(0),i=Qt(g),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(e),n=za(g.d),r=n.charAt(0),p++;i=Qt(g),r>1?(g=new b("0."+n),i++):g=new b(r+"."+n.slice(1))}else return c=ib(b,f+2,x).times(i+""),g=of(new b(r+"."+n.slice(1)),f-v).plus(c),b.precision=x,t==null?(Rt=!0,bt(g,x)):g;for(s=o=g=Ri(g.minus(Tr),g.plus(Tr),f),d=bt(g.times(g),f),a=3;;){if(o=bt(o.times(d),f),c=s.plus(Ri(o,new b(a),f)),za(c.d).slice(0,f)===za(s.d).slice(0,f))return s=s.times(2),i!==0&&(s=s.plus(ib(b,f+2,x).times(i+""))),s=Ri(s,new b(p),f),b.precision=x,t==null?(Rt=!0,bt(s,x)):s;s=c,a+=2}}function CR(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=El(n/Ct),e.d=[],r=(n+1)%Ct,n<0&&(r+=Ct),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=Ct;r<a;)e.d.push(+t.slice(r,r+=Ct));t=t.slice(r),r=Ct-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),Rt&&(e.e>Ip||e.e<-Ip))throw Error(pw+n)}else e.s=0,e.e=0,e.d=[0];return e}function bt(e,t,n){var r,a,i,o,s,c,f,d,p=e.d;for(o=1,i=p[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=Ct,a=t,f=p[d=0];else{if(d=Math.ceil((r+1)/Ct),i=p.length,d>=i)return e;for(f=i=p[d],o=1;i>=10;i/=10)o++;r%=Ct,a=r-Ct+o}if(n!==void 0&&(i=gu(10,o-a-1),s=f/i%10|0,c=t<0||p[d+1]!==void 0||f%i,c=n<4?(s||c)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||c||n==6&&(r>0?a>0?f/gu(10,o-a):0:p[d-1])%10&1||n==(e.s<0?8:7))),t<1||!p[0])return c?(i=Qt(e),p.length=1,t=t-i-1,p[0]=gu(10,(Ct-t%Ct)%Ct),e.e=El(-t/Ct)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(r==0?(p.length=d,i=1,d--):(p.length=d+1,i=gu(10,Ct-r),p[d]=a>0?(f/gu(10,o-a)%gu(10,a)|0)*i:0),c)for(;;)if(d==0){(p[0]+=i)==gn&&(p[0]=1,++e.e);break}else{if(p[d]+=i,p[d]!=gn)break;p[d--]=0,i=1}for(r=p.length;p[--r]===0;)p.pop();if(Rt&&(e.e>Ip||e.e<-Ip))throw Error(pw+Qt(e));return e}function qI(e,t){var n,r,a,i,o,s,c,f,d,p,v=e.constructor,g=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),Rt?bt(t,g):t;if(c=e.d,p=t.d,r=t.e,f=e.e,c=c.slice(),o=f-r,o){for(d=o<0,d?(n=c,o=-o,s=p.length):(n=p,r=f,s=c.length),a=Math.max(Math.ceil(g/Ct),s)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,s=p.length,d=a<s,d&&(s=a),a=0;a<s;a++)if(c[a]!=p[a]){d=c[a]<p[a];break}o=0}for(d&&(n=c,c=p,p=n,t.s=-t.s),s=c.length,a=p.length-s;a>0;--a)c[s++]=0;for(a=p.length;a>o;){if(c[--a]<p[a]){for(i=a;i&&c[--i]===0;)c[i]=gn-1;--c[i],c[a]+=gn}c[a]-=p[a]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Rt?bt(t,g):t):new v(0)}function Bu(e,t,n){var r,a=Qt(e),i=za(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+To(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+To(-a-1)+i,n&&(r=n-o)>0&&(i+=To(r))):a>=o?(i+=To(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+To(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=To(r))),e.s<0?"-"+i:i}function AR(e,t){if(e.length>t)return e.length=t,!0}function VI(e){var t,n,r;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Tu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return CR(o,i.toString())}else if(typeof i!="string")throw Error(Tu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,j7.test(i))CR(o,i);else throw Error(Tu+i)}if(a.prototype=_e,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=VI,a.config=a.set=z7,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function z7(e){if(!e||typeof e!="object")throw Error(aa+"Object expected");var t,n,r,a=["precision",1,Sl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(El(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(Tu+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Tu+n+": "+r);return this}var vw=VI(F7);Tr=new vw(1);const dt=vw;var U7=e=>e,GI={},$I=e=>e===GI,OR=e=>function t(){return arguments.length===0||arguments.length===1&&$I(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},KI=(e,t)=>e===1?t:OR(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.filter(o=>o!==GI).length;return i>=e?t(...r):KI(e-i,OR(function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];var f=r.map(d=>$I(d)?s.shift():d);return t(...f,...s)}))}),W7=e=>KI(e.length,e),N1=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},H7=W7((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),q7=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return U7;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((s,c)=>c(s),i(...arguments))}};function XI(e){var t;return e===0?t=1:t=Math.floor(new dt(e).abs().log(10).toNumber())+1,t}function YI(e,t,n){for(var r=new dt(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var ZI=e=>{var[t,n]=e,[r,a]=[t,n];return t>n&&([r,a]=[n,t]),[r,a]},QI=(e,t,n)=>{if(e.lte(0))return new dt(0);var r=XI(e.toNumber()),a=new dt(10).pow(r),i=e.div(a),o=r!==1?.05:.1,s=new dt(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=s.mul(a);return t?new dt(c.toNumber()):new dt(Math.ceil(c.toNumber()))},V7=(e,t,n)=>{var r=new dt(1),a=new dt(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new dt(10).pow(XI(e)-1),a=new dt(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new dt(Math.floor(e)))}else e===0?a=new dt(Math.floor((t-1)/2)):n||(a=new dt(Math.floor(e)));var o=Math.floor((t-1)/2),s=q7(H7(c=>a.add(new dt(c-o).mul(r)).toNumber()),N1);return s(0,t)},JI=function(t,n,r,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new dt(0),tickMin:new dt(0),tickMax:new dt(0)};var o=QI(new dt(n).sub(t).div(r-1),a,i),s;t<=0&&n>=0?s=new dt(0):(s=new dt(t).add(n).div(2),s=s.sub(new dt(s).mod(o)));var c=Math.ceil(s.sub(t).div(o).toNumber()),f=Math.ceil(new dt(n).sub(s).div(o).toNumber()),d=c+f+1;return d>r?JI(t,n,r,a,i+1):(d<r&&(f=n>0?f+(r-d):f,c=n>0?c:c+(r-d)),{step:o,tickMin:s.sub(new dt(c).mul(o)),tickMax:s.add(new dt(f).mul(o))})},G7=function(t){var[n,r]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[s,c]=ZI([n,r]);if(s===-1/0||c===1/0){var f=c===1/0?[s,...N1(0,a-1).map(()=>1/0)]:[...N1(0,a-1).map(()=>-1/0),c];return n>r?f.reverse():f}if(s===c)return V7(s,a,i);var{step:d,tickMin:p,tickMax:v}=JI(s,c,o,i,0),g=YI(p,v.add(new dt(.1).mul(d)),d);return n>r?g.reverse():g},$7=function(t,n){var[r,a]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,s]=ZI([r,a]);if(o===-1/0||s===1/0)return[r,a];if(o===s)return[o];var c=Math.max(n,2),f=QI(new dt(s).sub(o).div(c-1),i,0),d=[...YI(new dt(o),new dt(s),f),s];return i===!1&&(d=d.map(p=>Math.round(p))),r>a?d.reverse():d},e3=e=>e.rootProps.maxBarSize,K7=e=>e.rootProps.barGap,t3=e=>e.rootProps.barCategoryGap,X7=e=>e.rootProps.barSize,qv=e=>e.rootProps.stackOffset,n3=e=>e.rootProps.reverseStackOrder,mw=e=>e.options.chartName,gw=e=>e.rootProps.syncId,r3=e=>e.rootProps.syncMethod,yw=e=>e.options.eventEmitter,fr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ei={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Cr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Vv=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Y7={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ei.angleAxisId,includeHidden:!1,name:void 0,reversed:Ei.reversed,scale:Ei.scale,tick:Ei.tick,tickCount:void 0,ticks:void 0,type:Ei.type,unit:void 0},Z7={allowDataOverflow:Cr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Cr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cr.scale,tick:Cr.tick,tickCount:Cr.tickCount,ticks:void 0,type:Cr.type,unit:void 0},Q7={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ei.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ei.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ei.scale,tick:Ei.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},J7={allowDataOverflow:Cr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Cr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cr.scale,tick:Cr.tick,tickCount:Cr.tickCount,ticks:void 0,type:"category",unit:void 0},bw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Q7:Y7,xw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?J7:Z7,Gv=e=>e.polarOptions,ww=le([Wi,Hi,wn],$q),a3=le([Gv,ww],(e,t)=>{if(e!=null)return Sa(e.innerRadius,t,0)}),i3=le([Gv,ww],(e,t)=>{if(e!=null)return Sa(e.outerRadius,t,t*.8)}),e9=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},o3=le([Gv],e9);le([bw,o3],Vv);var u3=le([ww,a3,i3],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});le([xw,u3],Vv);var s3=le([ht,Gv,a3,i3,Wi,Hi],(e,t,n,r,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:o,cy:s,startAngle:c,endAngle:f}=t;return{cx:Sa(o,a,a/2),cy:Sa(s,i,i/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:f,clockWise:!1}}}),sn=(e,t)=>t,$v=(e,t,n)=>n;function Sw(e){return e?.id}function l3(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=n,o=new Map;return e.forEach(s=>{var c,f=(c=s.data)!==null&&c!==void 0?c:r;if(!(f==null||f.length===0)){var d=Sw(s);f.forEach((p,v)=>{var g=i==null||a?v:String(Ln(p,i,null)),y=Ln(p,s.dataKey,0),b;o.has(g)?b=o.get(g):b={},Object.assign(b,{[d]:y}),o.set(g,b)})}}),Array.from(o.values())}function Kv(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Xv=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Yv(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function t9(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var ln=e=>{var t=ht(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},_l=e=>e.tooltip.settings.axisId;function TR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Pp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TR(Object(n),!0).forEach(function(r){n9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n9(e,t,n){return(t=r9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r9(e){var t=a9(e,"string");return typeof t=="symbol"?t:t+""}function a9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I1=[0,"auto"],pn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},c3=(e,t)=>e.cartesianAxis.xAxis[t],Gi=(e,t)=>{var n=c3(e,t);return n??pn},vn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:I1,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Cf},f3=(e,t)=>e.cartesianAxis.yAxis[t],$i=(e,t)=>{var n=f3(e,t);return n??vn},i9={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Ew=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??i9},er=(e,t,n)=>{switch(t){case"xAxis":return Gi(e,n);case"yAxis":return $i(e,n);case"zAxis":return Ew(e,n);case"angleAxis":return bw(e,n);case"radiusAxis":return xw(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},o9=(e,t,n)=>{switch(t){case"xAxis":return Gi(e,n);case"yAxis":return $i(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},kf=(e,t,n)=>{switch(t){case"xAxis":return Gi(e,n);case"yAxis":return $i(e,n);case"angleAxis":return bw(e,n);case"radiusAxis":return xw(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},d3=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function h3(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var _w=e=>e.graphicalItems.cartesianItems,u9=le([sn,$v],h3),p3=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Nf=le([_w,er,u9],p3,{memoizeOptions:{resultEqualityCheck:Yv}}),v3=le([Nf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Kv)),m3=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),s9=le([Nf],m3),g3=e=>e.map(t=>t.data).filter(Boolean).flat(1),l9=le([Nf],g3,{memoizeOptions:{resultEqualityCheck:Yv}}),y3=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:a}=t;return e.length>0?e:n.slice(r,a+1)},Cw=le([l9,jI],y3),b3=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Ln(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(a=>({value:Ln(a,r)}))):e.map(r=>({value:r})),Zv=le([Cw,er,Nf],b3);function x3(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Zh(e){if($a(e)||e instanceof Date){var t=Number(e);if(Nt(t))return t}}function RR(e){if(Array.isArray(e)){var t=[Zh(e[0]),Zh(e[1])];return Uo(t)?t:void 0}var n=Zh(e);if(n!=null)return[n,n]}function Li(e){return e.map(Zh).filter(p5)}function c9(e,t,n){return!n||typeof t!="number"||Ga(t)?[]:n.length?Li(n.flatMap(r=>{var a=Ln(e,r.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!Nt(i)||!Nt(o)))return[t-i,t+o]})):[]}var cn=e=>{var t=ln(e),n=_l(e);return kf(e,t,n)},If=le([cn],e=>e?.dataKey),f9=le([v3,jI,cn],l3),w3=(e,t,n,r)=>{var a={},i=t.reduce((o,s)=>{if(s.stackId==null)return o;var c=o[s.stackId];return c==null&&(c=[]),c.push(s),o[s.stackId]=c,o},a);return Object.fromEntries(Object.entries(i).map(o=>{var[s,c]=o,f=r?[...c].reverse():c,d=f.map(Sw);return[s,{stackedData:I8(e,d,n),graphicalItems:f}]}))},P1=le([f9,v3,qv,n3],w3),S3=(e,t,n,r)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(r==null&&n!=="zAxis"){var o=j8(e,a,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},d9=le([er],e=>e.allowDataOverflow),Aw=e=>{var t;if(e==null||!("domain"in e))return I1;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=Li(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:I1},E3=le([er],Aw),_3=le([E3,d9],zI),h9=le([P1,Vi,sn,_3],S3,{memoizeOptions:{resultEqualityCheck:Xv}}),Ow=e=>e.errorBars,p9=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>x3(n,r)),Bp=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),s=Math.max(...i);return[o,s]}},C3=(e,t,n,r,a)=>{var i,o;if(n.length>0&&e.forEach(s=>{n.forEach(c=>{var f,d,p=(f=r[c.id])===null||f===void 0?void 0:f.filter(S=>x3(a,S)),v=Ln(s,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),g=c9(s,v,p);if(g.length>=2){var y=Math.min(...g),b=Math.max(...g);(i==null||y<i)&&(i=y),(o==null||b>o)&&(o=b)}var x=RR(v);x!=null&&(i=i==null?x[0]:Math.min(i,x[0]),o=o==null?x[1]:Math.max(o,x[1]))})}),t?.dataKey!=null&&e.forEach(s=>{var c=RR(Ln(s,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),Nt(i)&&Nt(o))return[i,o]},v9=le([Cw,er,s9,Ow,sn],C3,{memoizeOptions:{resultEqualityCheck:Xv}});function m9(e){var{value:t}=e;if($a(t)||t instanceof Date)return t}var g9=(e,t,n)=>{var r=e.map(m9).filter(a=>a!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&Uk(r))?rI(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},A3=e=>e.referenceElements.dots,Cl=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),y9=le([A3,sn,$v],Cl),O3=e=>e.referenceElements.areas,b9=le([O3,sn,$v],Cl),T3=e=>e.referenceElements.lines,x9=le([T3,sn,$v],Cl),R3=(e,t)=>{if(e!=null){var n=Li(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},w9=le(y9,sn,R3),D3=(e,t)=>{if(e!=null){var n=Li(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},S9=le([b9,sn],D3);function E9(e){var t;if(e.x!=null)return Li([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:Li(n)}function _9(e){var t;if(e.y!=null)return Li([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:Li(n)}var M3=(e,t)=>{if(e!=null){var n=e.flatMap(r=>t==="xAxis"?E9(r):_9(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},C9=le([x9,sn],M3),A9=le(w9,C9,S9,(e,t,n)=>Bp(e,n,t)),k3=(e,t,n,r,a,i,o,s)=>{if(n!=null)return n;var c=o==="vertical"&&s==="xAxis"||o==="horizontal"&&s==="yAxis",f=c?Bp(r,i,a):Bp(i,a);return L7(t,f,e.allowDataOverflow)},O9=le([er,E3,_3,h9,v9,A9,ht,sn],k3,{memoizeOptions:{resultEqualityCheck:Xv}}),T9=[0,1],N3=(e,t,n,r,a,i,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:s,type:c}=e,f=zu(t,i);if(f&&s==null){var d;return rI(0,(d=n?.length)!==null&&d!==void 0?d:0)}return c==="category"?g9(r,e,f):a==="expand"?T9:o}},Tw=le([er,ht,Cw,Zv,qv,sn,O9],N3),I3=(e,t,n,r,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var s="scale".concat(wf(i));return s in jc?s:"point"}}},Pf=le([er,ht,d3,mw,sn],I3);function R9(e){if(e!=null){if(e in jc)return jc[e]();var t="scale".concat(wf(e));if(t in jc)return jc[t]()}}function Rw(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var a=R9(t);if(a!=null){var i=a.domain(n).range(r);return R8(i),i}}}var P3=(e,t,n)=>{var r=Aw(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Uo(e))return G7(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Uo(e))return $7(e,t.tickCount,t.allowDecimals)}},Dw=le([Tw,kf,Pf],P3),B3=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Uo(t)&&Array.isArray(n)&&n.length>0){var a=t[0],i=n[0],o=t[1],s=n[n.length-1];return[Math.min(a,i),Math.max(o,s)]}return t},D9=le([er,Tw,Dw,sn],B3),M9=le(Zv,er,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Li(e.map(p=>p.value))).sort((p,v)=>p-v),a=r[0],i=r[r.length-1];if(a==null||i==null)return 1/0;var o=i-a;if(o===0)return 1/0;for(var s=0;s<r.length-1;s++){var c=r[s],f=r[s+1];if(!(c==null||f==null)){var d=f-c;n=Math.min(n,d)}}return n/o}}),L3=le(M9,ht,t3,wn,(e,t,n,r,a)=>a,(e,t,n,r,a)=>{if(!Nt(e))return 0;var i=t==="vertical"?r.height:r.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=Sa(n,e*i),s=e*i/2;return s-o-(s-o)/i*o}return 0}),k9=(e,t,n)=>{var r=Gi(e,t);return r==null||typeof r.padding!="string"?0:L3(e,"xAxis",t,n,r.padding)},N9=(e,t,n)=>{var r=$i(e,t);return r==null||typeof r.padding!="string"?0:L3(e,"yAxis",t,n,r.padding)},I9=le(Gi,k9,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((n=a.left)!==null&&n!==void 0?n:0)+t,right:((r=a.right)!==null&&r!==void 0?r:0)+t}}),P9=le($i,N9,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((n=a.top)!==null&&n!==void 0?n:0)+t,bottom:((r=a.bottom)!==null&&r!==void 0?r:0)+t}}),B9=le([wn,I9,Mv,Dv,(e,t,n)=>n],(e,t,n,r,a)=>{var{padding:i}=r;return a?[i.left,n.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),L9=le([wn,ht,P9,Mv,Dv,(e,t,n)=>n],(e,t,n,r,a,i)=>{var{padding:o}=a;return i?[r.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Bf=(e,t,n,r)=>{var a;switch(t){case"xAxis":return B9(e,n,r);case"yAxis":return L9(e,n,r);case"zAxis":return(a=Ew(e,n))===null||a===void 0?void 0:a.range;case"angleAxis":return o3(e);case"radiusAxis":return u3(e,n);default:return}},F3=le([er,Bf],Vv),Qv=le([er,Pf,D9,F3],Rw);le([Nf,Ow,sn],p9);function j3(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Jv=(e,t)=>t,em=(e,t,n)=>n,F9=le(Tv,Jv,em,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(j3)),j9=le(Rv,Jv,em,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(j3)),z3=(e,t)=>({width:e.width,height:t.height}),z9=(e,t)=>{var n=typeof t.width=="number"?t.width:Cf;return{width:n,height:e.height}},U3=le(wn,Gi,z3),U9=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},W9=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},H9=le(Hi,wn,F9,Jv,em,(e,t,n,r,a)=>{var i={},o;return n.forEach(s=>{var c=z3(t,s);o==null&&(o=U9(t,r,e));var f=r==="top"&&!a||r==="bottom"&&a;i[s.id]=o-Number(f)*c.height,o+=(f?-1:1)*c.height}),i}),q9=le(Wi,wn,j9,Jv,em,(e,t,n,r,a)=>{var i={},o;return n.forEach(s=>{var c=z9(t,s);o==null&&(o=W9(t,r,e));var f=r==="left"&&!a||r==="right"&&a;i[s.id]=o-Number(f)*c.width,o+=(f?-1:1)*c.width}),i}),V9=(e,t)=>{var n=Gi(e,t);if(n!=null)return H9(e,n.orientation,n.mirror)},G9=le([wn,Gi,V9,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var a=n?.[r];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),$9=(e,t)=>{var n=$i(e,t);if(n!=null)return q9(e,n.orientation,n.mirror)},K9=le([wn,$i,$9,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var a=n?.[r];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),W3=le(wn,$i,(e,t)=>{var n=typeof t.width=="number"?t.width:Cf;return{width:n,height:e.height}}),DR=(e,t,n)=>{switch(t){case"xAxis":return U3(e,n).width;case"yAxis":return W3(e,n).height;default:return}},H3=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=n,s=zu(e,r),c=t.map(f=>f.value);if(o&&s&&i==="category"&&a&&Uk(c))return c}},Mw=le([ht,Zv,er,sn],H3),q3=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:a,scale:i}=n,o=zu(e,r);if(o&&(a==="number"||i!=="auto"))return t.map(s=>s.value)}},kw=le([ht,Zv,kf,sn],q3);le([ht,o9,Pf,Qv,Mw,kw,Bf,Dw,sn],(e,t,n,r,a,i,o,s,c)=>{if(t!=null){var f=zu(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:a,isCategorical:f,niceTicks:s,range:o,realScaleType:n,scale:r}}});var X9=(e,t,n,r,a,i,o,s,c)=>{if(!(t==null||r==null)){var f=zu(e,c),{type:d,ticks:p,tickCount:v}=t,g=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,y=d==="category"&&r.bandwidth?r.bandwidth()/g:0;y=c==="angleAxis"&&i!=null&&i.length>=2?Rr(i[0]-i[1])*2*y:y;var b=p||a;if(b){var x=b.map((S,_)=>{var C=o?o.indexOf(S):S;return{index:_,coordinate:r(C)+y,value:S,offset:y}});return x.filter(S=>Nt(S.coordinate))}return f&&s?s.map((S,_)=>({coordinate:r(S)+y,value:S,index:_,offset:y})).filter(S=>Nt(S.coordinate)):r.ticks?r.ticks(v).map(S=>({coordinate:r(S)+y,value:S,offset:y})):r.domain().map((S,_)=>({coordinate:r(S)+y,value:o?o[S]:S,index:_,offset:y}))}},V3=le([ht,kf,Pf,Qv,Dw,Bf,Mw,kw,sn],X9),Y9=(e,t,n,r,a,i,o)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var s=zu(e,o),{tickCount:c}=t,f=0;return f=o==="angleAxis"&&r?.length>=2?Rr(r[0]-r[1])*2*f:f,s&&i?i.map((d,p)=>({coordinate:n(d)+f,value:d,index:p,offset:f})):n.ticks?n.ticks(c).map(d=>({coordinate:n(d)+f,value:d,offset:f})):n.domain().map((d,p)=>({coordinate:n(d)+f,value:a?a[d]:d,index:p,offset:f}))}},fl=le([ht,kf,Qv,Bf,Mw,kw,sn],Y9),dl=le(er,Qv,(e,t)=>{if(!(e==null||t==null))return Pp(Pp({},e),{},{scale:t})}),Z9=le([er,Pf,Tw,F3],Rw);le((e,t,n)=>Ew(e,n),Z9,(e,t)=>{if(!(e==null||t==null))return Pp(Pp({},e),{},{scale:t})});var Q9=le([ht,Tv,Rv],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),G3=e=>e.options.defaultTooltipEventType,$3=e=>e.options.validateTooltipEventTypes;function K3(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Nw(e,t){var n=G3(e),r=$3(e);return K3(t,n,r)}function J9(e){return je(t=>Nw(t,e))}var X3=(e,t)=>{var n,r=Number(t);if(!(Ga(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},e$=e=>e.tooltip.settings,Do={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},t$={itemInteraction:{click:Do,hover:Do},axisInteraction:{click:Do,hover:Do},keyboardInteraction:Do,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Y3=vr({name:"tooltip",initialState:t$,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Tt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,a=ba(e).tooltipItemPayloads.indexOf(n);a>-1&&(e.tooltipItemPayloads[a]=r)},prepare:Tt()},removeTooltipEntrySettings:{reducer(e,t){var n=ba(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Tt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:n$,replaceTooltipEntrySettings:r$,removeTooltipEntrySettings:a$,setTooltipSettingsState:i$,setActiveMouseOverItemIndex:Z3,mouseLeaveItem:o$,mouseLeaveChart:Q3,setActiveClickItemIndex:u$,setMouseOverAxisIndex:J3,setMouseClickAxisIndex:s$,setSyncInteraction:B1,setKeyboardInteraction:L1}=Y3.actions,l$=Y3.reducer;function MR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Th(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MR(Object(n),!0).forEach(function(r){c$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c$(e,t,n){return(t=f$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f$(e){var t=d$(e,"string");return typeof t=="symbol"?t:t+""}function d$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h$(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function p$(e){return e.index!=null}var eP=(e,t,n,r)=>{if(t==null)return Do;var a=h$(e,t,n);if(a==null)return Do;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(p$(a)){if(i)return Th(Th({},a),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Th(Th({},Do),{},{coordinate:a.coordinate})};function v$(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function m$(e,t){var n=v$(e),r=t[0],a=t[1];if(n===void 0)return!1;var i=Math.min(r,a),o=Math.max(r,a);return n>=i&&n<=o}function g$(e,t,n){if(n==null||t==null)return!0;var r=Ln(e,t);return r==null||!Uo(n)?!0:m$(r,n)}var Iw=(e,t,n,r)=>{var a=e?.index;if(a==null)return null;var i=Number(a);if(!Nt(i))return a;var o=0,s=1/0;t.length>0&&(s=t.length-1);var c=Math.max(o,Math.min(i,s)),f=t[c];return f==null||g$(f,n,r)?String(c):null},tP=(e,t,n,r,a,i,o,s)=>{if(!(i==null||s==null)){var c=o[0],f=c==null?void 0:s(c.positions,i);if(f!=null)return f;var d=a?.[Number(i)];if(d)return n==="horizontal"?{x:d.coordinate,y:(r.top+t)/2}:{x:(r.left+e)/2,y:d.coordinate}}},nP=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;if(n==="hover"?a=e.itemInteraction.hover.graphicalItemId:a=e.itemInteraction.click.graphicalItemId,a==null&&r!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.graphicalItemId)===a})},Lf=e=>e.options.tooltipPayloadSearcher,Al=e=>e.tooltip;function kR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function NR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(n),!0).forEach(function(r){y$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y$(e,t,n){return(t=b$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b$(e){var t=x$(e,"string");return typeof t=="symbol"?t:t+""}function x$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w$(e,t){return e??t}var rP=(e,t,n,r,a,i,o)=>{if(!(t==null||i==null)){var{chartData:s,computedData:c,dataStartIndex:f,dataEndIndex:d}=n,p=[];return e.reduce((v,g)=>{var y,{dataDefinedOnItem:b,settings:x}=g,S=w$(b,s),_=Array.isArray(S)?NN(S,f,d):S,C=(y=x?.dataKey)!==null&&y!==void 0?y:r,A=x?.nameKey,O;if(r&&Array.isArray(_)&&!Array.isArray(_[0])&&o==="axis"?O=h5(_,r,a):O=i(_,t,c,A),Array.isArray(O))O.forEach(M=>{var k=NR(NR({},x),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});v.push(FO({tooltipEntrySettings:k,dataKey:M.dataKey,payload:M.payload,value:Ln(M.payload,M.dataKey),name:M.name}))});else{var R;v.push(FO({tooltipEntrySettings:x,dataKey:C,payload:O,value:Ln(O,C),name:(R=Ln(O,A))!==null&&R!==void 0?R:x?.name}))}return v},p)}},Pw=le([cn,ht,d3,mw,ln],I3),S$=le([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),E$=le([ln,_l],h3),Ol=le([S$,cn,E$],p3,{memoizeOptions:{resultEqualityCheck:Yv}}),_$=le([Ol],e=>e.filter(Kv)),C$=le([Ol],g3,{memoizeOptions:{resultEqualityCheck:Yv}}),Tl=le([C$,Vi],y3),A$=le([_$,Vi,cn],l3),Bw=le([Tl,cn,Ol],b3),aP=le([cn],Aw),O$=le([cn],e=>e.allowDataOverflow),iP=le([aP,O$],zI),T$=le([Ol],e=>e.filter(Kv)),R$=le([A$,T$,qv,n3],w3),D$=le([R$,Vi,ln,iP],S3),M$=le([Ol],m3),k$=le([Tl,cn,M$,Ow,ln],C3,{memoizeOptions:{resultEqualityCheck:Xv}}),N$=le([A3,ln,_l],Cl),I$=le([N$,ln],R3),P$=le([O3,ln,_l],Cl),B$=le([P$,ln],D3),L$=le([T3,ln,_l],Cl),F$=le([L$,ln],M3),j$=le([I$,F$,B$],Bp),z$=le([cn,aP,iP,D$,k$,j$,ht,ln],k3),Ff=le([cn,ht,Tl,Bw,qv,ln,z$],N3),U$=le([Ff,cn,Pw],P3),W$=le([cn,Ff,U$,ln],B3),oP=e=>{var t=ln(e),n=_l(e),r=!1;return Bf(e,t,n,r)},uP=le([cn,oP],Vv),sP=le([cn,Pw,W$,uP],Rw),H$=le([ht,Bw,cn,ln],H3),q$=le([ht,Bw,cn,ln],q3),V$=(e,t,n,r,a,i,o,s)=>{if(t){var{type:c}=t,f=zu(e,s);if(r){var d=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=c==="category"&&r.bandwidth?r.bandwidth()/d:0;return p=s==="angleAxis"&&a!=null&&a?.length>=2?Rr(a[0]-a[1])*2*p:p,f&&o?o.map((v,g)=>({coordinate:r(v)+p,value:v,index:g,offset:p})):r.domain().map((v,g)=>({coordinate:r(v)+p,value:i?i[v]:v,index:g,offset:p}))}}},Ki=le([ht,cn,Pw,sP,oP,H$,q$,ln],V$),Lw=le([G3,$3,e$],(e,t,n)=>K3(n.shared,e,t)),lP=e=>e.tooltip.settings.trigger,Fw=e=>e.tooltip.settings.defaultIndex,jf=le([Al,Lw,lP,Fw],eP),hl=le([jf,Tl,If,Ff],Iw),cP=le([Ki,hl],X3),fP=le([jf],e=>{if(e)return e.dataKey});le([jf],e=>{if(e)return e.graphicalItemId});var dP=le([Al,Lw,lP,Fw],nP),G$=le([Wi,Hi,ht,wn,Ki,Fw,dP,Lf],tP),$$=le([jf,G$],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),K$=le([jf],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),X$=le([dP,hl,Vi,If,cP,Lf,Lw],rP);le([X$],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function IR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function PR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(n),!0).forEach(function(r){Y$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Y$(e,t,n){return(t=Z$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z$(e){var t=Q$(e,"string");return typeof t=="symbol"?t:t+""}function Q$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J$=()=>je(cn),eK=()=>{var e=J$(),t=je(Ki),n=je(sP);return mp(!e||!n?void 0:PR(PR({},e),{},{scale:n}),t)};function BR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Bs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(n),!0).forEach(function(r){tK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tK(e,t,n){return(t=nK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nK(e){var t=rK(e,"string");return typeof t=="symbol"?t:t+""}function rK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aK=(e,t,n,r)=>{var a=t.find(i=>i&&i.index===n);if(a){if(e==="horizontal")return{x:a.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:a.coordinate}}return{x:0,y:0}},iK=(e,t,n,r)=>{var a=t.find(f=>f&&f.index===n);if(a){if(e==="centric"){var i=a.coordinate,{radius:o}=r;return Bs(Bs(Bs({},r),Bn(r.cx,r.cy,o,i)),{},{angle:i,radius:o})}var s=a.coordinate,{angle:c}=r;return Bs(Bs(Bs({},r),Bn(r.cx,r.cy,s,c)),{},{angle:c,radius:s})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function oK(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var hP=(e,t,n,r,a)=>{var i,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(r==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var s=0;s<o;s++){var c,f,d,p,v,g=s>0?(c=n[s-1])===null||c===void 0?void 0:c.coordinate:(f=n[o-1])===null||f===void 0?void 0:f.coordinate,y=(d=n[s])===null||d===void 0?void 0:d.coordinate,b=s>=o-1?(p=n[0])===null||p===void 0?void 0:p.coordinate:(v=n[s+1])===null||v===void 0?void 0:v.coordinate,x=void 0;if(!(g==null||y==null||b==null))if(Rr(y-g)!==Rr(b-y)){var S=[];if(Rr(b-y)===Rr(a[1]-a[0])){x=b;var _=y+a[1]-a[0];S[0]=Math.min(_,(_+g)/2),S[1]=Math.max(_,(_+g)/2)}else{x=g;var C=b+a[1]-a[0];S[0]=Math.min(y,(C+y)/2),S[1]=Math.max(y,(C+y)/2)}var A=[Math.min(y,(x+y)/2),Math.max(y,(x+y)/2)];if(e>A[0]&&e<=A[1]||e>=S[0]&&e<=S[1]){var O;return(O=n[s])===null||O===void 0?void 0:O.index}}else{var R=Math.min(g,b),M=Math.max(g,b);if(e>(R+y)/2&&e<=(M+y)/2){var k;return(k=n[s])===null||k===void 0?void 0:k.index}}}else if(t)for(var I=0;I<o;I++){var P=t[I];if(P!=null){var L=t[I+1],F=t[I-1];if(I===0&&L!=null&&e<=(P.coordinate+L.coordinate)/2||I===o-1&&F!=null&&e>(P.coordinate+F.coordinate)/2||I>0&&I<o-1&&F!=null&&L!=null&&e>(P.coordinate+F.coordinate)/2&&e<=(P.coordinate+L.coordinate)/2)return P.index}}return-1},uK=()=>je(mw),jw=(e,t)=>t,pP=(e,t,n)=>n,zw=(e,t,n,r)=>r,sK=le(Ki,e=>yv(e,t=>t.coordinate)),Uw=le([Al,jw,pP,zw],eP),Ww=le([Uw,Tl,If,Ff],Iw),lK=(e,t,n)=>{if(t!=null){var r=Al(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},vP=le([Al,jw,pP,zw],nP),Lp=le([Wi,Hi,ht,wn,Ki,zw,vP,Lf],tP),cK=le([Uw,Lp],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),mP=le([Ki,Ww],X3),fK=le([vP,Ww,Vi,If,mP,Lf,jw],rP),dK=le([Uw,Ww],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),hK=(e,t,n,r,a,i,o)=>{if(!(!e||!n||!r||!a)&&oK(e,o)){var s=z8(e,t),c=hP(s,i,a,n,r),f=aK(t,a,c,e);return{activeIndex:String(c),activeCoordinate:f}}},pK=(e,t,n,r,a,i,o)=>{if(!(!e||!r||!a||!i||!n)){var s=Qq(e,n);if(s){var c=U8(s,t),f=hP(c,o,i,r,a),d=iK(t,i,f,s);return{activeIndex:String(f),activeCoordinate:d}}}},vK=(e,t,n,r,a,i,o,s)=>{if(!(!e||!t||!r||!a||!i))return t==="horizontal"||t==="vertical"?hK(e,t,r,a,i,o,s):pK(e,t,n,r,a,i,o)},mK=le(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElement:r.element}}),gK=le(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(fr)),n=Array.from(new Set(t));return n.sort((r,a)=>r-a)},{memoizeOptions:{resultEqualityCheck:t9}});function LR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function FR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LR(Object(n),!0).forEach(function(r){yK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yK(e,t,n){return(t=bK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bK(e){var t=xK(e,"string");return typeof t=="symbol"?t:t+""}function xK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wK={},SK={zIndexMap:Object.values(fr).reduce((e,t)=>FR(FR({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),wK)},EK=new Set(Object.values(fr));function _K(e){return EK.has(e)}var gP=vr({name:"zIndex",initialState:SK,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Tt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!_K(n)&&delete e.zIndexMap[n])},prepare:Tt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:r,isPanorama:a}=t.payload;e.zIndexMap[n]?a?e.zIndexMap[n].panoramaElement=r:e.zIndexMap[n].element=r:e.zIndexMap[n]={consumers:0,element:a?void 0:r,panoramaElement:a?r:void 0}},prepare:Tt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:Tt()}}}),{registerZIndexPortal:CK,unregisterZIndexPortal:AK,registerZIndexPortalElement:OK,unregisterZIndexPortalElement:TK}=gP.actions,RK=gP.reducer;function Go(e){var{zIndex:t,children:n}=e,r=EH(),a=r&&t!==void 0&&t!==0,i=Lr(),o=Ht();T.useLayoutEffect(()=>a?(o(CK({zIndex:t})),()=>{o(AK({zIndex:t}))}):Sf,[o,t,a]);var s=je(c=>mK(c,t,i));return a?s?vk.createPortal(n,s):null:n}function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F1.apply(null,arguments)}function jR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Rh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jR(Object(n),!0).forEach(function(r){DK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DK(e,t,n){return(t=MK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MK(e){var t=kK(e,"string");return typeof t=="symbol"?t:t+""}function kK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NK(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return T.isValidElement(t)?T.cloneElement(t,r):T.createElement(n,r)}function IK(e){var t,{coordinate:n,payload:r,index:a,offset:i,tooltipAxisBandSize:o,layout:s,cursor:c,tooltipEventType:f,chartName:d}=e,p=n,v=r,g=a;if(!c||!p||d!=="ScatterChart"&&f!=="axis")return null;var y,b,x;if(d==="ScatterChart")y=p,b=fq,x=fr.cursorLine;else if(d==="BarChart")y=dq(s,p,i,o),b=JN,x=fr.cursorRectangle;else if(s==="radial"&&qk(p)){var{cx:S,cy:_,radius:C,startAngle:A,endAngle:O}=eI(p);y={cx:S,cy:_,startAngle:A,endAngle:O,innerRadius:C,outerRadius:C},b=nI,x=fr.cursorLine}else y={points:nV(s,p,i)},b=KN,x=fr.cursorLine;var R=typeof c=="object"&&"className"in c?c.className:void 0,M=Rh(Rh(Rh(Rh({stroke:"#ccc",pointerEvents:"none"},i),y),Ex(c)),{},{payload:v,payloadIndex:g,className:At("recharts-tooltip-cursor",R)});return T.createElement(Go,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:x},T.createElement(NK,{cursor:c,cursorComp:b,cursorProps:M}))}function PK(e){var t=eK(),n=xH(),r=Af(),a=uK();return t==null||n==null||r==null||a==null?null:T.createElement(IK,F1({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:a}))}var yP=T.createContext(null),BK=()=>T.useContext(yP),ob={exports:{}},zR;function LK(){return zR||(zR=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,f,d){this.fn=c,this.context=f,this.once=d||!1}function i(c,f,d,p,v){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new a(d,p||c,v),y=n?n+f:f;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],g]:c._events[y].push(g):(c._events[y]=g,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new r:delete c._events[f]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var f=[],d,p;if(this._eventsCount===0)return f;for(p in d=this._events)t.call(d,p)&&f.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},s.prototype.listeners=function(f){var d=n?n+f:f,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,g=p.length,y=new Array(g);v<g;v++)y[v]=p[v].fn;return y},s.prototype.listenerCount=function(f){var d=n?n+f:f,p=this._events[d];return p?p.fn?1:p.length:0},s.prototype.emit=function(f,d,p,v,g,y){var b=n?n+f:f;if(!this._events[b])return!1;var x=this._events[b],S=arguments.length,_,C;if(x.fn){switch(x.once&&this.removeListener(f,x.fn,void 0,!0),S){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,p),!0;case 4:return x.fn.call(x.context,d,p,v),!0;case 5:return x.fn.call(x.context,d,p,v,g),!0;case 6:return x.fn.call(x.context,d,p,v,g,y),!0}for(C=1,_=new Array(S-1);C<S;C++)_[C-1]=arguments[C];x.fn.apply(x.context,_)}else{var A=x.length,O;for(C=0;C<A;C++)switch(x[C].once&&this.removeListener(f,x[C].fn,void 0,!0),S){case 1:x[C].fn.call(x[C].context);break;case 2:x[C].fn.call(x[C].context,d);break;case 3:x[C].fn.call(x[C].context,d,p);break;case 4:x[C].fn.call(x[C].context,d,p,v);break;default:if(!_)for(O=1,_=new Array(S-1);O<S;O++)_[O-1]=arguments[O];x[C].fn.apply(x[C].context,_)}}return!0},s.prototype.on=function(f,d,p){return i(this,f,d,p,!1)},s.prototype.once=function(f,d,p){return i(this,f,d,p,!0)},s.prototype.removeListener=function(f,d,p,v){var g=n?n+f:f;if(!this._events[g])return this;if(!d)return o(this,g),this;var y=this._events[g];if(y.fn)y.fn===d&&(!v||y.once)&&(!p||y.context===p)&&o(this,g);else{for(var b=0,x=[],S=y.length;b<S;b++)(y[b].fn!==d||v&&!y[b].once||p&&y[b].context!==p)&&x.push(y[b]);x.length?this._events[g]=x.length===1?x[0]:x:o(this,g)}return this},s.prototype.removeAllListeners=function(f){var d;return f?(d=n?n+f:f,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})(ob)),ob.exports}var FK=LK();const jK=Ya(FK);var uf=new jK,j1="recharts.syncEvent.tooltip",UR="recharts.syncEvent.brush";function zK(e,t){if(t){var n=Number.parseInt(t,10);if(!Ga(n))return e?.[n]}}var UK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},bP=vr({name:"options",initialState:UK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),WK=bP.reducer,{createEventEmitter:HK}=bP.actions;function qK(e){return e.tooltip.syncInteraction}var VK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},xP=vr({name:"chartData",initialState:VK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:WR,setDataStartEndIndexes:GK,setComputedData:Cle}=xP.actions,$K=xP.reducer,KK=["x","y"];function HR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(n),!0).forEach(function(r){XK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XK(e,t,n){return(t=YK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YK(e){var t=ZK(e,"string");return typeof t=="symbol"?t:t+""}function ZK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QK(e,t){if(e==null)return{};var n,r,a=JK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function JK(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function eX(){var e=je(gw),t=je(yw),n=Ht(),r=je(r3),a=je(Ki),i=Af(),o=kv(),s=je(c=>c.rootProps.className);T.useEffect(()=>{if(e==null)return Sf;var c=(f,d,p)=>{if(t!==p&&e===f){if(r==="index"){var v;if(o&&d!==null&&d!==void 0&&(v=d.payload)!==null&&v!==void 0&&v.coordinate&&d.payload.sourceViewBox){var g=d.payload.coordinate,{x:y,y:b}=g,x=QK(g,KK),{x:S,y:_,width:C,height:A}=d.payload.sourceViewBox,O=Ls(Ls({},x),{},{x:o.x+(C?(y-S)/C:0)*o.width,y:o.y+(A?(b-_)/A:0)*o.height});n(Ls(Ls({},d),{},{payload:Ls(Ls({},d.payload),{},{coordinate:O})}))}else n(d);return}if(a!=null){var R;if(typeof r=="function"){var M={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},k=r(a,M);R=a[k]}else r==="value"&&(R=a.find(U=>String(U.value)===d.payload.label));var{coordinate:I}=d.payload;if(R==null||d.payload.active===!1||I==null||o==null){n(B1({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:P,y:L}=I,F=Math.min(P,o.x+o.width),Y=Math.min(L,o.y+o.height),Z={x:i==="horizontal"?R.coordinate:F,y:i==="horizontal"?Y:R.coordinate},J=B1({active:d.payload.active,coordinate:Z,dataKey:d.payload.dataKey,index:String(R.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});n(J)}}};return uf.on(j1,c),()=>{uf.off(j1,c)}},[s,n,t,e,r,a,i,o])}function tX(){var e=je(gw),t=je(yw),n=Ht();T.useEffect(()=>{if(e==null)return Sf;var r=(a,i,o)=>{t!==o&&e===a&&n(GK(i))};return uf.on(UR,r),()=>{uf.off(UR,r)}},[n,t,e])}function nX(){var e=Ht();T.useEffect(()=>{e(HK())},[e]),eX(),tX()}function rX(e,t,n,r,a,i){var o=je(g=>lK(g,e,t)),s=je(yw),c=je(gw),f=je(r3),d=je(qK),p=d?.active,v=kv();T.useEffect(()=>{if(!p&&c!=null&&s!=null){var g=B1({active:i,coordinate:n,dataKey:o,index:a,label:typeof r=="number"?String(r):r,sourceViewBox:v,graphicalItemId:void 0});uf.emit(j1,c,g,s)}},[p,n,o,a,r,s,c,f,i,v])}function qR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function VR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(n),!0).forEach(function(r){aX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aX(e,t,n){return(t=iX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iX(e){var t=oX(e,"string");return typeof t=="symbol"?t:t+""}function oX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uX(e){return e.dataKey}function sX(e,t){return T.isValidElement(e)?T.cloneElement(e,t):typeof e=="function"?T.createElement(e,t):T.createElement(qH,t)}var GR=[],lX={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function cX(e){var t,n,r=oa(e,lX),{active:a,allowEscapeViewBox:i,animationDuration:o,animationEasing:s,content:c,filterNull:f,isAnimationActive:d,offset:p,payloadUniqBy:v,position:g,reverseDirection:y,useTranslate3d:b,wrapperStyle:x,cursor:S,shared:_,trigger:C,defaultIndex:A,portal:O,axisId:R}=r,M=Ht(),k=typeof A=="number"?String(A):A;T.useEffect(()=>{M(i$({shared:_,trigger:C,axisId:R,active:a,defaultIndex:k}))},[M,_,C,R,a,k]);var I=kv(),P=$N(),L=J9(_),{activeIndex:F,isActive:Y}=(t=je(xe=>dK(xe,L,C,k)))!==null&&t!==void 0?t:{},Z=je(xe=>fK(xe,L,C,k)),J=je(xe=>mP(xe,L,C,k)),U=je(xe=>cK(xe,L,C,k)),H=Z,G=BK(),Q=(n=a??Y)!==null&&n!==void 0?n:!1,[oe,j]=_W([H,Q]),K=L==="axis"?J:void 0;rX(L,C,U,K,F,Q);var ce=O??G;if(ce==null||I==null||L==null)return null;var ve=H??GR;Q||(ve=GR),f&&ve.length&&(ve=Y5(ve.filter(xe=>xe.value!=null&&(xe.hide!==!0||r.includeHidden)),v,uX));var ye=ve.length>0,be=T.createElement(ZH,{allowEscapeViewBox:i,animationDuration:o,animationEasing:s,isAnimationActive:d,active:Q,coordinate:U,hasPayload:ye,offset:p,position:g,reverseDirection:y,useTranslate3d:b,viewBox:I,wrapperStyle:x,lastBoundingBox:oe,innerRef:j,hasPortalFromProps:!!O},sX(c,VR(VR({},r),{},{payload:ve,label:K,active:Q,activeIndex:F,coordinate:U,accessibilityLayer:P})));return T.createElement(T.Fragment,null,vk.createPortal(be,ce),Q&&T.createElement(PK,{cursor:S,tooltipEventType:L,coordinate:U,payload:ve,index:F}))}var Hw=e=>null;Hw.displayName="Cell";function fX(e,t,n){return(t=dX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dX(e){var t=hX(e,"string");return typeof t=="symbol"?t:t+""}function hX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pX{constructor(t){fX(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function $R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$R(Object(n),!0).forEach(function(r){mX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$R(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mX(e,t,n){return(t=gX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gX(e){var t=yX(e,"string");return typeof t=="symbol"?t:t+""}function yX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bX={cacheSize:2e3,enableCache:!0},wP=vX({},bX),KR=new pX(wP.cacheSize),xX={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XR="recharts_measurement_span";function wX(e,t){var n=t.fontSize||"",r=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",s=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(a,"|").concat(i,"|").concat(o,"|").concat(s)}var YR=(e,t)=>{try{var n=document.getElementById(XR);n||(n=document.createElement("span"),n.setAttribute("id",XR),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,xX,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Uc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Lv.isSsr)return{width:0,height:0};if(!wP.enableCache)return YR(t,n);var r=wX(t,n),a=KR.get(r);if(a)return a;var i=YR(t,n);return KR.set(r,i),i},SP;function SX(e,t,n){return(t=EX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EX(e){var t=_X(e,"string");return typeof t=="symbol"?t:t+""}function _X(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,QR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,AX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,OX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},TX=["cm","mm","pt","pc","in","Q","px"];function RX(e){return TX.includes(e)}var Ks="NaN";function DX(e,t){return e*OX[t]}class Mn{static parse(t){var n,[,r,a]=(n=AX.exec(t))!==null&&n!==void 0?n:[];return r==null?Mn.NaN:new Mn(parseFloat(r),a??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Ga(t)&&(this.unit=""),n!==""&&!CX.test(n)&&(this.num=NaN,this.unit=""),RX(n)&&(this.num=DX(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Mn(NaN,""):new Mn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Mn(NaN,""):new Mn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Mn(NaN,""):new Mn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Mn(NaN,""):new Mn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ga(this.num)}}SP=Mn;SX(Mn,"NaN",new SP(NaN,""));function EP(e){if(e==null||e.includes(Ks))return Ks;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,a,i]=(n=ZR.exec(t))!==null&&n!==void 0?n:[],o=Mn.parse(r??""),s=Mn.parse(i??""),c=a==="*"?o.multiply(s):o.divide(s);if(c.isNaN())return Ks;t=t.replace(ZR,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,d,p,v]=(f=QR.exec(t))!==null&&f!==void 0?f:[],g=Mn.parse(d??""),y=Mn.parse(v??""),b=p==="+"?g.add(y):g.subtract(y);if(b.isNaN())return Ks;t=t.replace(QR,b.toString())}return t}var JR=/\(([^()]*)\)/;function MX(e){for(var t=e,n;(n=JR.exec(t))!=null;){var[,r]=n;t=t.replace(JR,EP(r))}return t}function kX(e){var t=e.replace(/\s+/g,"");return t=MX(t),t=EP(t),t}function NX(e){try{return kX(e)}catch{return Ks}}function ub(e){var t=NX(e.slice(5,-1));return t===Ks?"":t}var IX=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],PX=["dx","dy","angle","className","breakAll"];function z1(){return z1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z1.apply(null,arguments)}function eD(e,t){if(e==null)return{};var n,r,a=BX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function BX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var _P=/[ \f\n\r\t\v\u2028\u2029]+/,CP=e=>{var{children:t,breakAll:n,style:r}=e;try{var a=[];bn(t)||(n?a=t.toString().split(""):a=t.toString().split(_P));var i=a.map(s=>({word:s,width:Uc(s,r).width})),o=n?0:Uc("",r).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function LX(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var AP=(e,t,n,r)=>e.reduce((a,i)=>{var{word:o,width:s}=i,c=a[a.length-1];if(c&&s!=null&&(t==null||r||c.width+s+n<Number(t)))c.words.push(o),c.width+=s+n;else{var f={words:[o],width:s};a.push(f)}return a},[]),OP=e=>e.reduce((t,n)=>t.width>n.width?t:n),FX="",tD=(e,t,n,r,a,i,o,s)=>{var c=e.slice(0,t),f=CP({breakAll:n,style:r,children:c+FX});if(!f)return[!1,[]];var d=AP(f.wordsWithComputedWidth,i,o,s),p=d.length>a||OP(d).width>Number(i);return[p,d]},jX=(e,t,n,r,a)=>{var{maxLines:i,children:o,style:s,breakAll:c}=e,f=Le(i),d=String(o),p=AP(t,r,n,a);if(!f||a)return p;var v=p.length>i||OP(p).width>Number(r);if(!v)return p;for(var g=0,y=d.length-1,b=0,x;g<=y&&b<=d.length-1;){var S=Math.floor((g+y)/2),_=S-1,[C,A]=tD(d,_,c,s,i,r,n,a),[O]=tD(d,S,c,s,i,r,n,a);if(!C&&!O&&(g=S+1),C&&O&&(y=S-1),!C&&O){x=A;break}b++}return x||p},nD=e=>{var t=bn(e)?[]:e.toString().split(_P);return[{words:t,width:void 0}]},zX=e=>{var{width:t,scaleToFit:n,children:r,style:a,breakAll:i,maxLines:o}=e;if((t||n)&&!Lv.isSsr){var s,c,f=CP({breakAll:i,children:r,style:a});if(f){var{wordsWithComputedWidth:d,spaceWidth:p}=f;s=d,c=p}else return nD(r);return jX({breakAll:i,children:r,maxLines:o,style:a},s,c,t,!!n)}return nD(r)},TP="#808080",UX={angle:0,breakAll:!1,capHeight:"0.71em",fill:TP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},qw=T.forwardRef((e,t)=>{var n=oa(e,UX),{x:r,y:a,lineHeight:i,capHeight:o,fill:s,scaleToFit:c,textAnchor:f,verticalAnchor:d}=n,p=eD(n,IX),v=T.useMemo(()=>zX({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:c,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,c,p.style,p.width]),{dx:g,dy:y,angle:b,className:x,breakAll:S}=p,_=eD(p,PX);if(!$a(r)||!$a(a)||v.length===0)return null;var C=Number(r)+(Le(g)?g:0),A=Number(a)+(Le(y)?y:0);if(!Nt(C)||!Nt(A))return null;var O;switch(d){case"start":O=ub("calc(".concat(o,")"));break;case"middle":O=ub("calc(".concat((v.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:O=ub("calc(".concat(v.length-1," * -").concat(i,")"));break}var R=[];if(c){var M=v[0].width,{width:k}=p;R.push("scale(".concat(Le(k)&&Le(M)?k/M:1,")"))}return b&&R.push("rotate(".concat(b,", ").concat(C,", ").concat(A,")")),R.length&&(_.transform=R.join(" ")),T.createElement("text",z1({},na(_),{ref:t,x:C,y:A,className:At("recharts-text",x),textAnchor:f,fill:s.includes("url")?TP:s}),v.map((I,P)=>{var L=I.words.join(S?"":" ");return T.createElement("tspan",{x:C,dy:P===0?O:i,key:"".concat(L,"-").concat(P)},L)}))});qw.displayName="Text";var WX=["labelRef"],HX=["content"];function rD(e,t){if(e==null)return{};var n,r,a=qX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function qX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aD(Object(n),!0).forEach(function(r){VX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VX(e,t,n){return(t=GX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GX(e){var t=$X(e,"string");return typeof t=="symbol"?t:t+""}function $X(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _i(){return _i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_i.apply(null,arguments)}var RP=T.createContext(null),KX=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:a,width:i,height:o,children:s}=e,c=T.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:a,width:i,height:o}),[t,n,r,a,i,o]);return T.createElement(RP.Provider,{value:c},s)},DP=()=>{var e=T.useContext(RP),t=kv();return e||jN(t)},XX=T.createContext(null),YX=()=>{var e=T.useContext(XX),t=je(s3);return e||t},ZX=e=>{var{value:t,formatter:n}=e,r=bn(e.children)?t:e.children;return typeof n=="function"?n(r):r},Vw=e=>e!=null&&typeof e=="function",QX=(e,t)=>{var n=Rr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},JX=(e,t,n,r,a)=>{var{offset:i,className:o}=e,{cx:s,cy:c,innerRadius:f,outerRadius:d,startAngle:p,endAngle:v,clockWise:g}=a,y=(f+d)/2,b=QX(p,v),x=b>=0?1:-1,S,_;switch(t){case"insideStart":S=p+x*i,_=g;break;case"insideEnd":S=v-x*i,_=!g;break;case"end":S=v+x*i,_=g;break;default:throw new Error("Unsupported position ".concat(t))}_=b<=0?_:!_;var C=Bn(s,c,y,S),A=Bn(s,c,y,S+(_?1:-1)*359),O="M".concat(C.x,",").concat(C.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(_?0:1,`,
    `).concat(A.x,",").concat(A.y),R=bn(e.id)?$c("recharts-radial-line-"):e.id;return T.createElement("text",_i({},r,{dominantBaseline:"central",className:At("recharts-radial-bar-label",o)}),T.createElement("defs",null,T.createElement("path",{id:R,d:O})),T.createElement("textPath",{xlinkHref:"#".concat(R)},n))},eY=(e,t,n)=>{var{cx:r,cy:a,innerRadius:i,outerRadius:o,startAngle:s,endAngle:c}=e,f=(s+c)/2;if(n==="outside"){var{x:d,y:p}=Bn(r,a,o+t,f);return{x:d,y:p,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"end"};var v=(i+o)/2,{x:g,y}=Bn(r,a,v,f);return{x:g,y,textAnchor:"middle",verticalAnchor:"middle"}},U1=e=>"cx"in e&&Le(e.cx),tY=(e,t)=>{var{parentViewBox:n,offset:r,position:a}=e,i;n!=null&&!U1(n)&&(i=n);var{x:o,y:s,upperWidth:c,lowerWidth:f,height:d}=t,p=o,v=o+(c-f)/2,g=(p+v)/2,y=(c+f)/2,b=p+c/2,x=d>=0?1:-1,S=x*r,_=x>0?"end":"start",C=x>0?"start":"end",A=c>=0?1:-1,O=A*r,R=A>0?"end":"start",M=A>0?"start":"end";if(a==="top"){var k={x:p+c/2,y:s-S,textAnchor:"middle",verticalAnchor:_};return Ut(Ut({},k),i?{height:Math.max(s-i.y,0),width:c}:{})}if(a==="bottom"){var I={x:v+f/2,y:s+d+S,textAnchor:"middle",verticalAnchor:C};return Ut(Ut({},I),i?{height:Math.max(i.y+i.height-(s+d),0),width:f}:{})}if(a==="left"){var P={x:g-O,y:s+d/2,textAnchor:R,verticalAnchor:"middle"};return Ut(Ut({},P),i?{width:Math.max(P.x-i.x,0),height:d}:{})}if(a==="right"){var L={x:g+y+O,y:s+d/2,textAnchor:M,verticalAnchor:"middle"};return Ut(Ut({},L),i?{width:Math.max(i.x+i.width-L.x,0),height:d}:{})}var F=i?{width:y,height:d}:{};return a==="insideLeft"?Ut({x:g+O,y:s+d/2,textAnchor:M,verticalAnchor:"middle"},F):a==="insideRight"?Ut({x:g+y-O,y:s+d/2,textAnchor:R,verticalAnchor:"middle"},F):a==="insideTop"?Ut({x:p+c/2,y:s+S,textAnchor:"middle",verticalAnchor:C},F):a==="insideBottom"?Ut({x:v+f/2,y:s+d-S,textAnchor:"middle",verticalAnchor:_},F):a==="insideTopLeft"?Ut({x:p+O,y:s+S,textAnchor:M,verticalAnchor:C},F):a==="insideTopRight"?Ut({x:p+c-O,y:s+S,textAnchor:R,verticalAnchor:C},F):a==="insideBottomLeft"?Ut({x:v+O,y:s+d-S,textAnchor:M,verticalAnchor:_},F):a==="insideBottomRight"?Ut({x:v+f-O,y:s+d-S,textAnchor:R,verticalAnchor:_},F):a&&typeof a=="object"&&(Le(a.x)||ki(a.x))&&(Le(a.y)||ki(a.y))?Ut({x:o+Sa(a.x,y),y:s+Sa(a.y,d),textAnchor:"end",verticalAnchor:"end"},F):Ut({x:b,y:s+d/2,textAnchor:"middle",verticalAnchor:"middle"},F)},nY={angle:0,offset:5,zIndex:fr.label,position:"middle",textBreakAll:!1};function Ro(e){var t=oa(e,nY),{viewBox:n,position:r,value:a,children:i,content:o,className:s="",textBreakAll:c,labelRef:f}=t,d=YX(),p=DP(),v=r==="center"?p:d??p,g,y,b;if(n==null?g=v:U1(n)?g=n:g=jN(n),!g||bn(a)&&bn(i)&&!T.isValidElement(o)&&typeof o!="function")return null;var x=Ut(Ut({},t),{},{viewBox:g});if(T.isValidElement(o)){var{labelRef:S}=x,_=rD(x,WX);return T.cloneElement(o,_)}if(typeof o=="function"){var{content:C}=x,A=rD(x,HX);if(y=T.createElement(o,A),T.isValidElement(y))return y}else y=ZX(t);var O=na(t);if(U1(g)){if(r==="insideStart"||r==="insideEnd"||r==="end")return JX(t,r,y,O,g);b=eY(g,t.offset,t.position)}else b=tY(t,g);return T.createElement(Go,{zIndex:t.zIndex},T.createElement(qw,_i({ref:f,className:At("recharts-label",s)},O,b,{textAnchor:LX(O.textAnchor)?O.textAnchor:b.textAnchor,breakAll:c}),y))}Ro.displayName="Label";var rY=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?T.createElement(Ro,_i({key:"label-implicit"},r)):$a(e)?T.createElement(Ro,_i({key:"label-implicit",value:e},r)):T.isValidElement(e)?e.type===Ro?T.cloneElement(e,Ut({key:"label-implicit"},r)):T.createElement(Ro,_i({key:"label-implicit",content:e},r)):Vw(e)?T.createElement(Ro,_i({key:"label-implicit",content:e},r)):e&&typeof e=="object"?T.createElement(Ro,_i({},e,{key:"label-implicit"},r)):null};function aY(e){var{label:t,labelRef:n}=e,r=DP();return rY(t,r,n)||null}var sb={},lb={},iD;function iY(){return iD||(iD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(lb)),lb}var cb={},oD;function oY(){return oD||(oD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(cb)),cb}var uD;function uY(){return uD||(uD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iY(),n=oY(),r=Mx();function a(i){if(r.isArrayLike(i))return t.last(n.toArray(i))}e.last=a})(sb)),sb}var fb,sD;function sY(){return sD||(sD=1,fb=uY().last),fb}var lY=sY();const cY=Ya(lY);var fY=["valueAccessor"],dY=["dataKey","clockWise","id","textBreakAll","zIndex"];function Fp(){return Fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fp.apply(null,arguments)}function lD(e,t){if(e==null)return{};var n,r,a=hY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function hY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var pY=e=>Array.isArray(e.value)?cY(e.value):e.value,MP=T.createContext(void 0),vY=MP.Provider,kP=T.createContext(void 0);kP.Provider;function mY(){return T.useContext(MP)}function gY(){return T.useContext(kP)}function Qh(e){var{valueAccessor:t=pY}=e,n=lD(e,fY),{dataKey:r,clockWise:a,id:i,textBreakAll:o,zIndex:s}=n,c=lD(n,dY),f=mY(),d=gY(),p=f||d;return!p||!p.length?null:T.createElement(Go,{zIndex:s??fr.label},T.createElement(Mi,{className:"recharts-label-list"},p.map((v,g)=>{var y,b=bn(r)?t(v,g):Ln(v&&v.payload,r),x=bn(i)?{}:{id:"".concat(i,"-").concat(g)};return T.createElement(Ro,Fp({key:"label-".concat(g)},na(v),c,x,{fill:(y=n.fill)!==null&&y!==void 0?y:v.fill,parentViewBox:v.parentViewBox,value:b,textBreakAll:o,viewBox:v.viewBox,index:g,zIndex:0}))})))}Qh.displayName="LabelList";function yY(e){var{label:t}=e;return t?t===!0?T.createElement(Qh,{key:"labelList-implicit"}):T.isValidElement(t)||Vw(t)?T.createElement(Qh,{key:"labelList-implicit",content:t}):typeof t=="object"?T.createElement(Qh,Fp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var bY={radiusAxis:{},angleAxis:{}},NP=vr({name:"polarAxis",initialState:bY,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Ale,removeRadiusAxis:Ole,addAngleAxis:Tle,removeAngleAxis:Rle}=NP.actions,xY=NP.reducer,db={exports:{}},gt={};var cD;function wY(){if(cD)return gt;cD=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function y(b){if(typeof b=="object"&&b!==null){var x=b.$$typeof;switch(x){case e:switch(b=b.type,b){case n:case a:case r:case c:case f:case v:return b;default:switch(b=b&&b.$$typeof,b){case o:case s:case p:case d:return b;case i:return b;default:return x}}case t:return x}}}return gt.ContextConsumer=i,gt.ContextProvider=o,gt.Element=e,gt.ForwardRef=s,gt.Fragment=n,gt.Lazy=p,gt.Memo=d,gt.Portal=t,gt.Profiler=a,gt.StrictMode=r,gt.Suspense=c,gt.SuspenseList=f,gt.isContextConsumer=function(b){return y(b)===i},gt.isContextProvider=function(b){return y(b)===o},gt.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},gt.isForwardRef=function(b){return y(b)===s},gt.isFragment=function(b){return y(b)===n},gt.isLazy=function(b){return y(b)===p},gt.isMemo=function(b){return y(b)===d},gt.isPortal=function(b){return y(b)===t},gt.isProfiler=function(b){return y(b)===a},gt.isStrictMode=function(b){return y(b)===r},gt.isSuspense=function(b){return y(b)===c},gt.isSuspenseList=function(b){return y(b)===f},gt.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===a||b===r||b===c||b===f||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===d||b.$$typeof===o||b.$$typeof===i||b.$$typeof===s||b.$$typeof===g||b.getModuleId!==void 0)},gt.typeOf=y,gt}var fD;function SY(){return fD||(fD=1,db.exports=wY()),db.exports}var EY=SY(),dD=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",hD=null,hb=null,IP=e=>{if(e===hD&&Array.isArray(hb))return hb;var t=[];return T.Children.forEach(e,n=>{bn(n)||(EY.isFragment(n)?t=t.concat(IP(n.props.children)):t.push(n))}),hb=t,hD=e,t};function _Y(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(a=>dD(a)):r=[dD(t)],IP(e).forEach(a=>{var i=il(a,"type.displayName")||il(a,"type.name");i&&r.indexOf(i)!==-1&&n.push(a)}),n}var pb={},pD;function CY(){return pD||(pD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${a}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(pb)),pb}var vb,vD;function AY(){return vD||(vD=1,vb=CY().isPlainObject),vb}var OY=AY();const TY=Ya(OY);var mD,gD,yD,bD,xD;function wD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function SD(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wD(Object(n),!0).forEach(function(r){RY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RY(e,t,n){return(t=DY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DY(e){var t=MY(e,"string");return typeof t=="symbol"?t:t+""}function MY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jp(){return jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jp.apply(null,arguments)}function Nc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ED=(e,t,n,r,a)=>{var i=n-r,o;return o=Ft(mD||(mD=Nc(["M ",",",""])),e,t),o+=Ft(gD||(gD=Nc(["L ",",",""])),e+n,t),o+=Ft(yD||(yD=Nc(["L ",",",""])),e+n-i/2,t+a),o+=Ft(bD||(bD=Nc(["L ",",",""])),e+n-i/2-r,t+a),o+=Ft(xD||(xD=Nc(["L ",","," Z"])),e,t),o},kY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},NY=e=>{var t=oa(e,kY),{x:n,y:r,upperWidth:a,lowerWidth:i,height:o,className:s}=t,{animationEasing:c,animationDuration:f,animationBegin:d,isUpdateAnimationActive:p}=t,v=T.useRef(null),[g,y]=T.useState(-1),b=T.useRef(a),x=T.useRef(i),S=T.useRef(o),_=T.useRef(n),C=T.useRef(r),A=qx(e,"trapezoid-");if(T.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var Z=v.current.getTotalLength();Z&&y(Z)}catch{}},[]),n!==+n||r!==+r||a!==+a||i!==+i||o!==+o||a===0&&i===0||o===0)return null;var O=At("recharts-trapezoid",s);if(!p)return T.createElement("g",null,T.createElement("path",jp({},na(t),{className:O,d:ED(n,r,a,i,o)})));var R=b.current,M=x.current,k=S.current,I=_.current,P=C.current,L="0px ".concat(g===-1?1:g,"px"),F="".concat(g,"px 0px"),Y=XN(["strokeDasharray"],f,c);return T.createElement(Hx,{animationId:A,key:A,canBegin:g>0,duration:f,easing:c,isActive:p,begin:d},Z=>{var J=Nn(R,a,Z),U=Nn(M,i,Z),H=Nn(k,o,Z),G=Nn(I,n,Z),Q=Nn(P,r,Z);v.current&&(b.current=J,x.current=U,S.current=H,_.current=G,C.current=Q);var oe=Z>0?{transition:Y,strokeDasharray:F}:{strokeDasharray:L};return T.createElement("path",jp({},na(t),{className:O,d:ED(G,Q,J,U,H),ref:v,style:SD(SD({},oe),t.style)}))})},IY=["option","shapeType","activeClassName"];function PY(e,t){if(e==null)return{};var n,r,a=BY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function BY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function _D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_D(Object(n),!0).forEach(function(r){LY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LY(e,t,n){return(t=FY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FY(e){var t=jY(e,"string");return typeof t=="symbol"?t:t+""}function jY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zY(e,t){return zp(zp({},t),e)}function UY(e,t){return e==="symbols"}function CD(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return T.createElement(JN,n);case"trapezoid":return T.createElement(NY,n);case"sector":return T.createElement(nI,n);case"symbols":if(UY(t))return T.createElement(Hk,n);break;case"curve":return T.createElement(KN,n);default:return null}}function WY(e){return T.isValidElement(e)?e.props:e}function HY(e){var{option:t,shapeType:n,activeClassName:r="recharts-active-shape"}=e,a=PY(e,IY),i;if(T.isValidElement(t))i=T.cloneElement(t,zp(zp({},a),WY(t)));else if(typeof t=="function")i=t(a,a.index);else if(TY(t)&&typeof t!="boolean"){var o=zY(t,a);i=T.createElement(CD,{shapeType:n,elementProps:o})}else{var s=a;i=T.createElement(CD,{shapeType:n,elementProps:s})}return a.isActive?T.createElement(Mi,{className:r},i):i}var PP=(e,t,n)=>{var r=Ht();return(a,i)=>o=>{e?.(a,i,o),r(Z3({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:n}))}},BP=e=>{var t=Ht();return(n,r)=>a=>{e?.(n,r,a),t(o$())}},LP=(e,t,n)=>{var r=Ht();return(a,i)=>o=>{e?.(a,i,o),r(u$({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:n}))}};function qY(e){var{tooltipEntrySettings:t}=e,n=Ht(),r=Lr(),a=T.useRef(null);return T.useLayoutEffect(()=>{r||(a.current===null?n(n$(t)):a.current!==t&&n(r$({prev:a.current,next:t})),a.current=t)},[t,n,r]),T.useLayoutEffect(()=>()=>{a.current&&(n(a$(a.current)),a.current=null)},[n]),null}function VY(e){var{legendPayload:t}=e,n=Ht(),r=Lr(),a=T.useRef(null);return T.useLayoutEffect(()=>{r||(a.current===null?n(BH(t)):a.current!==t&&n(LH({prev:a.current,next:t})),a.current=t)},[n,r,t]),T.useLayoutEffect(()=>()=>{a.current&&(n(FH(a.current)),a.current=null)},[n]),null}var mb,GY=()=>{var[e]=T.useState(()=>$c("uid-"));return e},$Y=(mb=tz.useId)!==null&&mb!==void 0?mb:GY;function KY(e,t){var n=$Y();return t||(e?"".concat(e,"-").concat(n):n)}var XY=T.createContext(void 0),YY=e=>{var{id:t,type:n,children:r}=e,a=KY("recharts-".concat(n),t);return T.createElement(XY.Provider,{value:a},r(a))},ZY={cartesianItems:[],polarItems:[]},FP=vr({name:"graphicalItems",initialState:ZY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Tt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,a=ba(e).cartesianItems.indexOf(n);a>-1&&(e.cartesianItems[a]=r)},prepare:Tt()},removeCartesianGraphicalItem:{reducer(e,t){var n=ba(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Tt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Tt()},removePolarGraphicalItem:{reducer(e,t){var n=ba(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Tt()}}}),{addCartesianGraphicalItem:QY,replaceCartesianGraphicalItem:JY,removeCartesianGraphicalItem:eZ,addPolarGraphicalItem:Dle,removePolarGraphicalItem:Mle}=FP.actions,tZ=FP.reducer,nZ=e=>{var t=Ht(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?t(QY(e)):n.current!==e&&t(JY({prev:n.current,next:e})),n.current=e},[t,e]),T.useLayoutEffect(()=>()=>{n.current&&(t(eZ(n.current)),n.current=null)},[t]),null},rZ=T.memo(nZ);function AD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function OD(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AD(Object(n),!0).forEach(function(r){aZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aZ(e,t,n){return(t=iZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iZ(e){var t=oZ(e,"string");return typeof t=="symbol"?t:t+""}function oZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jP=0,uZ={xAxis:{},yAxis:{},zAxis:{}},zP=vr({name:"cartesianAxis",initialState:uZ,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Tt()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:Tt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Tt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Tt()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:Tt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Tt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Tt()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:Tt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Tt()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,a=e.yAxis[n];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&r===i[1]&&r!==a.width&&Math.abs(r-i[0])<=1)return;var o=[...i,r].slice(-3);e.yAxis[n]=OD(OD({},e.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:sZ,replaceXAxis:lZ,removeXAxis:cZ,addYAxis:fZ,replaceYAxis:dZ,removeYAxis:hZ,addZAxis:kle,replaceZAxis:Nle,removeZAxis:Ile,updateYAxisWidth:pZ}=zP.actions,vZ=zP.reducer,mZ=le([wn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),gZ=le([mZ,Wi,Hi],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),UP=()=>je(gZ),TD=(e,t,n)=>{var r=n??e;if(!bn(r))return Sa(r,t,0)},yZ=(e,t,n)=>{var r={},a=e.filter(Kv),i=e.filter(f=>f.stackId==null),o=a.reduce((f,d)=>(f[d.stackId]||(f[d.stackId]=[]),f[d.stackId].push(d),f),r),s=Object.entries(o).map(f=>{var[d,p]=f,v=p.map(y=>y.dataKey),g=TD(t,n,p[0].barSize);return{stackId:d,dataKeys:v,barSize:g}}),c=i.map(f=>{var d=[f.dataKey].filter(v=>v!=null),p=TD(t,n,f.barSize);return{stackId:void 0,dataKeys:d,barSize:p}});return[...s,...c]};function RD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Dh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RD(Object(n),!0).forEach(function(r){bZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bZ(e,t,n){return(t=xZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xZ(e){var t=wZ(e,"string");return typeof t=="symbol"?t:t+""}function wZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SZ(e,t,n,r,a){var i=r.length;if(!(i<1)){var o=Sa(e,n,0,!0),s,c=[];if(Nt(r[0].barSize)){var f=!1,d=n/i,p=r.reduce((S,_)=>S+(_.barSize||0),0);p+=(i-1)*o,p>=n&&(p-=(i-1)*o,o=0),p>=n&&d>0&&(f=!0,d*=.9,p=i*d);var v=(n-p)/2>>0,g={offset:v-o,size:0};s=r.reduce((S,_)=>{var C,A={stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:g.offset+g.size+o,size:f?d:(C=_.barSize)!==null&&C!==void 0?C:0}},O=[...S,A];return g=O[O.length-1].position,O},c)}else{var y=Sa(t,n,0,!0);n-2*y-(i-1)*o<=0&&(o=0);var b=(n-2*y-(i-1)*o)/i;b>1&&(b>>=0);var x=Nt(a)?Math.min(b,a):b;s=r.reduce((S,_,C)=>[...S,{stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:y+(b+o)*C+(b-x)/2,size:x}}],c)}return s}}var EZ=(e,t,n,r,a,i,o)=>{var s=bn(o)?t:o,c=SZ(n,r,a!==i?a:i,e,s);return a!==i&&c!=null&&(c=c.map(f=>Dh(Dh({},f),{},{position:Dh(Dh({},f.position),{},{offset:f.position.offset-a/2})}))),c},_Z=(e,t)=>{var n=Sw(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var a=e[r];if(a){var{stackedData:i}=a;if(i)return i.find(o=>o.key===n)}}}};function CZ(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Nt(e.zIndex)?e.zIndex:t}var AZ=e=>{var{chartData:t}=e,n=Ht(),r=Lr();return T.useEffect(()=>r?()=>{}:(n(WR(t)),()=>{n(WR(void 0))}),[t,n,r]),null},DD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},WP=vr({name:"brush",initialState:DD,reducers:{setBrushSettings(e,t){return t.payload==null?DD:t.payload}}}),{setBrushSettings:Ple}=WP.actions,OZ=WP.reducer;function TZ(e,t,n){return(t=RZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RZ(e){var t=DZ(e,"string");return typeof t=="symbol"?t:t+""}function DZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Gw{static create(t){return new Gw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],a=n[n.length-1];return r<=a?t>=r&&t<=a:t>=a&&t<=r}}TZ(Gw,"EPS",1e-4);function MZ(e){return(e%180+180)%180}var kZ=function(t){var{width:n,height:r}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=MZ(a),o=i*Math.PI/180,s=Math.atan(r/n),c=o>s&&o<Math.PI-s?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},NZ={dots:[],areas:[],lines:[]},HP=vr({name:"referenceElements",initialState:NZ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ba(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ba(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ba(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:Ble,removeDot:Lle,addArea:Fle,removeArea:jle,addLine:zle,removeLine:Ule}=HP.actions,IZ=HP.reducer,PZ=T.createContext(void 0),BZ=e=>{var{children:t}=e,[n]=T.useState("".concat($c("recharts"),"-clip")),r=UP();if(r==null)return null;var{x:a,y:i,width:o,height:s}=r;return T.createElement(PZ.Provider,{value:n},T.createElement("defs",null,T.createElement("clipPath",{id:n},T.createElement("rect",{x:a,y:i,height:s,width:o}))),t)};function qP(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t){var a=e[r];a!==void 0&&n.push(a)}return n}function LZ(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return kZ(r,n)}function FZ(e,t,n){var r=n==="width",{x:a,y:i,width:o,height:s}=e;return t===1?{start:r?a:i,end:r?a+o:i+s}:{start:r?a+o:i+s,end:r?a:i}}function sf(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function jZ(e,t){return qP(e,t+1)}function zZ(e,t,n,r,a){for(var i=(r||[]).slice(),{start:o,end:s}=t,c=0,f=1,d=o,p=function(){var y=r?.[c];if(y===void 0)return{v:qP(r,f)};var b=c,x,S=()=>(x===void 0&&(x=n(y,b)),x),_=y.coordinate,C=c===0||sf(e,_,S,d,s);C||(c=0,d=o,f+=1),C&&(d=_+e*(S()/2+a),c+=f)},v;f<=i.length;)if(v=p(),v)return v.v;return[]}function UZ(e,t,n,r,a){var i=(r||[]).slice(),o=i.length;if(o===0)return[];for(var{start:s,end:c}=t,f=1;f<=o;f++){for(var d=(o-1)%f,p=s,v=!0,g=function(){var _=r[y],C=y,A,O=()=>(A===void 0&&(A=n(_,C)),A),R=_.coordinate,M=y===d||sf(e,R,O,p,c);if(!M)return v=!1,1;M&&(p=R+e*(O()/2+a))},y=d;y<o&&!g();y+=f);if(v){for(var b=[],x=d;x<o;x+=f)b.push(r[x]);return b}}return[]}function MD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MD(Object(n),!0).forEach(function(r){WZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WZ(e,t,n){return(t=HZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HZ(e){var t=qZ(e,"string");return typeof t=="symbol"?t:t+""}function qZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VZ(e,t,n,r,a){for(var i=(r||[]).slice(),o=i.length,{start:s}=t,{end:c}=t,f=function(v){var g=i[v],y,b=()=>(y===void 0&&(y=n(g,v)),y);if(v===o-1){var x=e*(g.coordinate+e*b()/2-c);i[v]=g=zn(zn({},g),{},{tickCoord:x>0?g.coordinate-x*e:g.coordinate})}else i[v]=g=zn(zn({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var S=sf(e,g.tickCoord,b,s,c);S&&(c=g.tickCoord-e*(b()/2+a),i[v]=zn(zn({},g),{},{isShow:!0}))}},d=o-1;d>=0;d--)f(d);return i}function GZ(e,t,n,r,a,i){var o=(r||[]).slice(),s=o.length,{start:c,end:f}=t;if(i){var d=r[s-1],p=n(d,s-1),v=e*(d.coordinate+e*p/2-f);if(o[s-1]=d=zn(zn({},d),{},{tickCoord:v>0?d.coordinate-v*e:d.coordinate}),d.tickCoord!=null){var g=sf(e,d.tickCoord,()=>p,c,f);g&&(f=d.tickCoord-e*(p/2+a),o[s-1]=zn(zn({},d),{},{isShow:!0}))}}for(var y=i?s-1:s,b=function(_){var C=o[_],A,O=()=>(A===void 0&&(A=n(C,_)),A);if(_===0){var R=e*(C.coordinate-e*O()/2-c);o[_]=C=zn(zn({},C),{},{tickCoord:R<0?C.coordinate-R*e:C.coordinate})}else o[_]=C=zn(zn({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var M=sf(e,C.tickCoord,O,c,f);M&&(c=C.tickCoord+e*(O()/2+a),o[_]=zn(zn({},C),{},{isShow:!0}))}},x=0;x<y;x++)b(x);return o}function $Z(e,t,n){var{tick:r,ticks:a,viewBox:i,minTickGap:o,orientation:s,interval:c,tickFormatter:f,unit:d,angle:p}=e;if(!a||!a.length||!r)return[];if(Le(c)||Lv.isSsr){var v;return(v=jZ(a,Le(c)?c:0))!==null&&v!==void 0?v:[]}var g=[],y=s==="top"||s==="bottom"?"width":"height",b=d&&y==="width"?Uc(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},x=(C,A)=>{var O=typeof f=="function"?f(C.value,A):C.value;return y==="width"?LZ(Uc(O,{fontSize:t,letterSpacing:n}),b,p):Uc(O,{fontSize:t,letterSpacing:n})[y]},S=a.length>=2?Rr(a[1].coordinate-a[0].coordinate):1,_=FZ(i,S,y);return c==="equidistantPreserveStart"?zZ(S,_,x,a,o):c==="equidistantPreserveEnd"?UZ(S,_,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?g=GZ(S,_,x,a,o,c==="preserveStartEnd"):g=VZ(S,_,x,a,o),g.filter(C=>C.isShow))}var KZ=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(d=>{if(d){var p=d.getBoundingClientRect();p.width>o&&(o=p.width)}});var s=n?n.getBoundingClientRect().width:0,c=a+i,f=o+c+s+(n?r:0);return Math.round(f)}return 0},XZ=["axisLine","width","height","className","hide","ticks","axisType"];function YZ(e,t){if(e==null)return{};var n,r,a=ZZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ZZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Lu(){return Lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lu.apply(null,arguments)}function kD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kD(Object(n),!0).forEach(function(r){QZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QZ(e,t,n){return(t=JZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JZ(e){var t=eQ(e,"string");return typeof t=="symbol"?t:t+""}function eQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ru={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:fr.axis};function tQ(e){var{x:t,y:n,width:r,height:a,orientation:i,mirror:o,axisLine:s,otherSvgProps:c}=e;if(!s)return null;var f=Yt(Yt(Yt({},c),jo(s)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);f=Yt(Yt({},f),{},{x1:t,y1:n+d*a,x2:t+r,y2:n+d*a})}else{var p=+(i==="left"&&!o||i==="right"&&o);f=Yt(Yt({},f),{},{x1:t+p*r,y1:n,x2:t+p*r,y2:n+a})}return T.createElement("line",Lu({},f,{className:At("recharts-cartesian-axis-line",il(s,"className"))}))}function nQ(e,t,n,r,a,i,o,s,c){var f,d,p,v,g,y,b=s?-1:1,x=e.tickSize||o,S=Le(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":f=d=e.coordinate,v=n+ +!s*a,p=v-b*x,y=p-b*c,g=S;break;case"left":p=v=e.coordinate,d=t+ +!s*r,f=d-b*x,g=f-b*c,y=S;break;case"right":p=v=e.coordinate,d=t+ +s*r,f=d+b*x,g=f+b*c,y=S;break;default:f=d=e.coordinate,v=n+ +s*a,p=v+b*x,y=p+b*c,g=S;break}return{line:{x1:f,y1:p,x2:d,y2:v},tick:{x:g,y}}}function rQ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function aQ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function iQ(e){var{option:t,tickProps:n,value:r}=e,a,i=At(n.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(t))a=T.cloneElement(t,Yt(Yt({},n),{},{className:i}));else if(typeof t=="function")a=t(Yt(Yt({},n),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=At(o,t?.className)),a=T.createElement(qw,Lu({},n,{className:o}),r)}return a}var oQ=T.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:a,stroke:i,tickFormatter:o,unit:s,padding:c,tickTextProps:f,orientation:d,mirror:p,x:v,y:g,width:y,height:b,tickSize:x,tickMargin:S,fontSize:_,letterSpacing:C,getTicksConfig:A,events:O,axisType:R}=e,M=$Z(Yt(Yt({},A),{},{ticks:n}),_,C),k=rQ(d,p),I=aQ(d,p),P=jo(A),L=Ex(r),F={};typeof a=="object"&&(F=a);var Y=Yt(Yt({},P),{},{fill:"none"},F),Z=M.map(H=>Yt({entry:H},nQ(H,v,g,y,b,d,x,p,S))),J=Z.map(H=>{var{entry:G,line:Q}=H;return T.createElement(Mi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},a&&T.createElement("line",Lu({},Y,Q,{className:At("recharts-cartesian-axis-tick-line",il(a,"className"))})))}),U=Z.map((H,G)=>{var{entry:Q,tick:oe}=H,j=Yt(Yt(Yt(Yt({textAnchor:k,verticalAnchor:I},P),{},{stroke:"none",fill:i},L),oe),{},{index:G,payload:Q,visibleTicksCount:M.length,tickFormatter:o,padding:c},f);return T.createElement(Mi,Lu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},Dx(O,Q,G)),r&&T.createElement(iQ,{option:r,tickProps:j,value:"".concat(typeof o=="function"?o(Q.value,G):Q.value).concat(s||"")}))});return T.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(R,"-ticks")},U.length>0&&T.createElement(Go,{zIndex:fr.label},T.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(R,"-tick-labels"),ref:t},U)),J.length>0&&T.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(R,"-tick-lines")},J))}),uQ=T.forwardRef((e,t)=>{var{axisLine:n,width:r,height:a,className:i,hide:o,ticks:s,axisType:c}=e,f=YZ(e,XZ),[d,p]=T.useState(""),[v,g]=T.useState(""),y=T.useRef(null);T.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var x;return KZ({ticks:y.current,label:(x=e.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var b=T.useCallback(x=>{if(x){var S=x.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=S;var _=S[0];if(_){var C=window.getComputedStyle(_),A=C.fontSize,O=C.letterSpacing;(A!==d||O!==v)&&(p(A),g(O))}}},[d,v]);return o||r!=null&&r<=0||a!=null&&a<=0?null:T.createElement(Go,{zIndex:e.zIndex},T.createElement(Mi,{className:At("recharts-cartesian-axis",i)},T.createElement(tQ,{x:e.x,y:e.y,width:r,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:jo(e)}),T.createElement(oQ,{ref:b,axisType:c,events:f,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:v,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:s,unit:e.unit,width:e.width,x:e.x,y:e.y}),T.createElement(KX,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},T.createElement(aY,{label:e.label,labelRef:e.labelRef}),e.children)))}),$w=T.forwardRef((e,t)=>{var n=oa(e,Ru);return T.createElement(uQ,Lu({},n,{ref:t}))});$w.displayName="CartesianAxis";var sQ={},VP=vr({name:"errorBars",initialState:sQ,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:a}=t.payload;e[n]&&(e[n]=e[n].map(i=>i.dataKey===r.dataKey&&i.direction===r.direction?a:i))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(a=>a.dataKey!==r.dataKey||a.direction!==r.direction))}}}),{addErrorBar:Wle,replaceErrorBar:Hle,removeErrorBar:qle}=VP.actions,lQ=VP.reducer,cQ=["children"];function fQ(e,t){if(e==null)return{};var n,r,a=dQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function dQ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var hQ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pQ=T.createContext(hQ);function vQ(e){var{children:t}=e,n=fQ(e,cQ);return T.createElement(pQ.Provider,{value:n},t)}function GP(e,t){var n,r,a=je(f=>Gi(f,e)),i=je(f=>$i(f,t)),o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:pn.allowDataOverflow,s=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:vn.allowDataOverflow,c=o||s;return{needClip:c,needClipX:o,needClipY:s}}function mQ(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,a=UP(),{needClipX:i,needClipY:o,needClip:s}=GP(t,n);if(!s||!a)return null;var{x:c,y:f,width:d,height:p}=a;return T.createElement("clipPath",{id:"clipPath-".concat(r)},T.createElement("rect",{x:i?c:c-d/2,y:o?f:f-p/2,width:i?d:d*2,height:o?p:p*2}))}var gb={exports:{}},yb={};var ND;function gQ(){if(ND)return yb;ND=1;var e=yl();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,s=e.useDebugValue;return yb.useSyncExternalStoreWithSelector=function(c,f,d,p,v){var g=a(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=o(function(){function x(O){if(!S){if(S=!0,_=O,O=p(O),v!==void 0&&y.hasValue){var R=y.value;if(v(R,O))return C=R}return C=O}if(R=C,n(_,O))return R;var M=p(O);return v!==void 0&&v(R,M)?(_=O,R):(_=O,C=M)}var S=!1,_,C,A=d===void 0?null:d;return[function(){return x(f())},A===null?void 0:function(){return x(A())}]},[f,d,p,v]);var b=r(c,g[0],g[1]);return i(function(){y.hasValue=!0,y.value=b},[b]),s(b),b},yb}var ID;function yQ(){return ID||(ID=1,gb.exports=gQ()),gb.exports}yQ();function bQ(e){e()}function xQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){bQ(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!r||e===null||(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var PD={notify(){},get:()=>[]};function wQ(e,t){let n,r=PD,a=0,i=!1;function o(b){d();const x=r.subscribe(b);let S=!1;return()=>{S||(S=!0,x(),p())}}function s(){r.notify()}function c(){y.onStateChange&&y.onStateChange()}function f(){return i}function d(){a++,n||(n=e.subscribe(c),r=xQ())}function p(){a--,n&&a===0&&(n(),n=void 0,r.clear(),r=PD)}function v(){i||(i=!0,d())}function g(){i&&(i=!1,p())}const y={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:f,trySubscribe:v,tryUnsubscribe:g,getListeners:()=>r};return y}var SQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EQ=SQ(),_Q=()=>typeof navigator<"u"&&navigator.product==="ReactNative",CQ=_Q(),AQ=()=>EQ||CQ?T.useLayoutEffect:T.useEffect,OQ=AQ();function BD(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function TQ(e,t){if(BD(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!BD(e[n[a]],t[n[a]]))return!1;return!0}var RQ=Symbol.for("react-redux-context"),DQ=typeof globalThis<"u"?globalThis:{};function MQ(){if(!T.createContext)return{};const e=DQ[RQ]??=new Map;let t=e.get(T.createContext);return t||(t=T.createContext(null),e.set(T.createContext,t)),t}var kQ=MQ();function NQ(e){const{children:t,context:n,serverState:r,store:a}=e,i=T.useMemo(()=>{const c=wQ(a);return{store:a,subscription:c,getServerState:r?()=>r:void 0}},[a,r]),o=T.useMemo(()=>a.getState(),[a]);OQ(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const s=n||kQ;return T.createElement(s.Provider,{value:i},t)}var IQ=NQ,PQ=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function BQ(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Kw(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(PQ.has(r)){if(e[r]==null&&t[r]==null)continue;if(!TQ(e[r],t[r]))return!1}else if(!BQ(e[r],t[r]))return!1;return!0}function Hu(e,t){var n,r;return(n=(r=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:jP}function qu(e,t){var n,r;return(n=(r=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:jP}var LQ="Invariant failed";function FQ(e,t){throw new Error(LQ)}function W1(){return W1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W1.apply(null,arguments)}function Up(e){return T.createElement(HY,W1({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var jQ=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,a)=>{if(Le(t))return t;var i=Le(r)||bn(r);return i?t(r,a):(i||FQ(),n)}},zQ=(e,t,n)=>n,UQ=(e,t)=>t,zf=le([_w,UQ],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),WQ=le([zf],e=>e?.maxBarSize),HQ=(e,t,n,r)=>r,qQ=le([ht,_w,Hu,qu,zQ],(e,t,n,r,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===n:i.yAxisId===r).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),VQ=(e,t,n)=>{var r=ht(e),a=Hu(e,t),i=qu(e,t);if(!(a==null||i==null))return r==="horizontal"?P1(e,"yAxis",i,n):P1(e,"xAxis",a,n)},GQ=(e,t)=>{var n=ht(e),r=Hu(e,t),a=qu(e,t);if(!(r==null||a==null))return n==="horizontal"?DR(e,"xAxis",r):DR(e,"yAxis",a)},$Q=le([qQ,X7,GQ],yZ),KQ=(e,t,n)=>{var r,a,i=zf(e,t);if(i!=null){var o=Hu(e,t),s=qu(e,t);if(!(o==null||s==null)){var c=ht(e),f=e3(e),{maxBarSize:d}=i,p=bn(d)?f:d,v,g;return c==="horizontal"?(v=dl(e,"xAxis",o,n),g=fl(e,"xAxis",o,n)):(v=dl(e,"yAxis",s,n),g=fl(e,"yAxis",s,n)),(r=(a=mp(v,g,!0))!==null&&a!==void 0?a:p)!==null&&r!==void 0?r:0}}},$P=(e,t,n)=>{var r=ht(e),a=Hu(e,t),i=qu(e,t);if(!(a==null||i==null)){var o,s;return r==="horizontal"?(o=dl(e,"xAxis",a,n),s=fl(e,"xAxis",a,n)):(o=dl(e,"yAxis",i,n),s=fl(e,"yAxis",i,n)),mp(o,s)}},XQ=le([$Q,e3,K7,t3,KQ,$P,WQ],EZ),YQ=(e,t,n)=>{var r=Hu(e,t);if(r!=null)return dl(e,"xAxis",r,n)},ZQ=(e,t,n)=>{var r=qu(e,t);if(r!=null)return dl(e,"yAxis",r,n)},QQ=(e,t,n)=>{var r=Hu(e,t);if(r!=null)return fl(e,"xAxis",r,n)},JQ=(e,t,n)=>{var r=qu(e,t);if(r!=null)return fl(e,"yAxis",r,n)},eJ=le([XQ,zf],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),tJ=le([VQ,zf],_Z),nJ=le([wn,jx,YQ,ZQ,QQ,JQ,eJ,ht,B7,$P,tJ,zf,HQ],(e,t,n,r,a,i,o,s,c,f,d,p,v)=>{var{chartData:g,dataStartIndex:y,dataEndIndex:b}=c;if(!(p==null||o==null||t==null||s!=="horizontal"&&s!=="vertical"||n==null||r==null||a==null||i==null||f==null)){var{data:x}=p,S;if(x!=null&&x.length>0?S=x:S=g?.slice(y,b+1),S!=null)return MJ({layout:s,barSettings:p,pos:o,parentViewBox:t,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:a,yAxisTicks:i,stackedData:d,displayedData:S,offset:e,cells:v,dataStartIndex:y})}}),rJ=["index"];function H1(){return H1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H1.apply(null,arguments)}function aJ(e,t){if(e==null)return{};var n,r,a=iJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function iJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var KP=T.createContext(void 0),oJ=e=>{var t=T.useContext(KP);if(t!=null)return t.stackId;if(e!=null)return P8(e)},uJ=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),sJ=e=>{var t=T.useContext(KP);if(t!=null){var{stackId:n}=t;return"url(#".concat(uJ(n,e),")")}},lJ=e=>{var{index:t}=e,n=aJ(e,rJ),r=sJ(t);return T.createElement(Mi,H1({className:"recharts-bar-stack-layer",clipPath:r},n))},cJ=["onMouseEnter","onMouseLeave","onClick"],fJ=["value","background","tooltipPosition"],dJ=["id"],hJ=["onMouseEnter","onClick","onMouseLeave"];function Fi(){return Fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fi.apply(null,arguments)}function LD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LD(Object(n),!0).forEach(function(r){pJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pJ(e,t,n){return(t=vJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vJ(e){var t=mJ(e,"string");return typeof t=="symbol"?t:t+""}function mJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wp(e,t){if(e==null)return{};var n,r,a=gJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function gJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var yJ=e=>{var{dataKey:t,name:n,fill:r,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:r,value:IN(n,t),payload:e}]},bJ=T.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:r,fill:a,name:i,hide:o,unit:s,tooltipType:c,id:f}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:a,dataKey:t,nameKey:void 0,name:IN(i,t),hide:o,type:c,color:a,unit:s,graphicalItemId:f}};return T.createElement(qY,{tooltipEntrySettings:d})});function xJ(e){var t=je(hl),{data:n,dataKey:r,background:a,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:s,onClick:c}=i,f=Wp(i,cJ),d=PP(o,r,i.id),p=BP(s),v=LP(c,r,i.id);if(!a||n==null)return null;var g=Ex(a);return T.createElement(Go,{zIndex:CZ(a,fr.barBackground)},n.map((y,b)=>{var{value:x,background:S,tooltipPosition:_}=y,C=Wp(y,fJ);if(!S)return null;var A=d(y,b),O=p(y,b),R=v(y,b),M=Yn(Yn(Yn(Yn(Yn({option:a,isActive:String(b)===t},C),{},{fill:"#eee"},S),g),Dx(f,y,b)),{},{onMouseEnter:A,onMouseLeave:O,onClick:R,dataKey:r,index:b,className:"recharts-bar-background-rectangle"});return T.createElement(Up,Fi({key:"background-bar-".concat(b)},M))}))}function wJ(e){var{showLabels:t,children:n,rects:r}=e,a=r?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Yn(Yn({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return T.createElement(vY,{value:t?a:void 0},n)}function SJ(e){var{shape:t,activeBar:n,baseProps:r,entry:a,index:i,dataKey:o}=e,s=je(hl),c=je(fP),f=n&&String(i)===s&&(c==null||o===c),d=f?n:t;return f?T.createElement(Go,{zIndex:fr.activeBar},T.createElement(Up,Fi({},r,{name:String(r.name)},a,{isActive:f,option:d,index:i,dataKey:o}))):T.createElement(Up,Fi({},r,{name:String(r.name)},a,{isActive:f,option:d,index:i,dataKey:o}))}function EJ(e){var{shape:t,baseProps:n,entry:r,index:a,dataKey:i}=e;return T.createElement(Up,Fi({},n,{name:String(n.name)},r,{isActive:!1,option:t,index:a,dataKey:i}))}function _J(e){var t,{data:n,props:r}=e,a=(t=jo(r))!==null&&t!==void 0?t:{},{id:i}=a,o=Wp(a,dJ),{shape:s,dataKey:c,activeBar:f}=r,{onMouseEnter:d,onClick:p,onMouseLeave:v}=r,g=Wp(r,hJ),y=PP(d,c,i),b=BP(v),x=LP(p,c,i);return n?T.createElement(T.Fragment,null,n.map((S,_)=>T.createElement(lJ,Fi({index:_,key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(_),className:"recharts-bar-rectangle"},Dx(g,S,_),{onMouseEnter:y(S,_),onMouseLeave:b(S,_),onClick:x(S,_)}),f?T.createElement(SJ,{shape:s,activeBar:f,baseProps:o,entry:S,index:_,dataKey:c}):T.createElement(EJ,{shape:s,baseProps:o,entry:S,index:_,dataKey:c})))):null}function CJ(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:a,isAnimationActive:i,animationBegin:o,animationDuration:s,animationEasing:c,onAnimationEnd:f,onAnimationStart:d}=t,p=n.current,v=qx(t,"recharts-bar-"),[g,y]=T.useState(!1),b=!g,x=T.useCallback(()=>{typeof f=="function"&&f(),y(!1)},[f]),S=T.useCallback(()=>{typeof d=="function"&&d(),y(!0)},[d]);return T.createElement(wJ,{showLabels:b,rects:r},T.createElement(Hx,{animationId:v,begin:o,duration:s,isActive:i,easing:c,onAnimationEnd:x,onAnimationStart:S,key:v},_=>{var C=_===1?r:r?.map((A,O)=>{var R=p&&p[O];if(R)return Yn(Yn({},A),{},{x:Nn(R.x,A.x,_),y:Nn(R.y,A.y,_),width:Nn(R.width,A.width,_),height:Nn(R.height,A.height,_)});if(a==="horizontal"){var M=Nn(0,A.height,_),k=Nn(A.stackedBarStart,A.y,_);return Yn(Yn({},A),{},{y:k,height:M})}var I=Nn(0,A.width,_),P=Nn(A.stackedBarStart,A.x,_);return Yn(Yn({},A),{},{width:I,x:P})});return _>0&&(n.current=C??null),C==null?null:T.createElement(Mi,null,T.createElement(_J,{props:t,data:C}))}),T.createElement(yY,{label:t.label}),t.children)}function AJ(e){var t=T.useRef(null);return T.createElement(CJ,{previousRectanglesRef:t,props:e})}var XP=0,OJ=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Ln(e,t)}};class TJ extends T.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:a,xAxisId:i,yAxisId:o,needClip:s,background:c,id:f}=this.props;if(t||n==null)return null;var d=At("recharts-bar",a),p=f;return T.createElement(Mi,{className:d,id:f},s&&T.createElement("defs",null,T.createElement(mQ,{clipPathId:p,xAxisId:i,yAxisId:o})),T.createElement(Mi,{className:"recharts-bar-rectangles",clipPath:s?"url(#clipPath-".concat(p,")"):void 0},T.createElement(xJ,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),T.createElement(AJ,this.props)))}}var RJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:XP,xAxisId:0,yAxisId:0,zIndex:fr.bar};function DJ(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:a,minPointSize:i,activeBar:o,animationBegin:s,animationDuration:c,animationEasing:f,isAnimationActive:d}=e,{needClip:p}=GP(t,n),v=Af(),g=Lr(),y=_Y(e.children,Hw),b=je(_=>nJ(_,e.id,g,y));if(v!=="vertical"&&v!=="horizontal")return null;var x,S=b?.[0];return S==null||S.height==null||S.width==null?x=0:x=v==="vertical"?S.height/2:S.width/2,T.createElement(vQ,{xAxisId:t,yAxisId:n,data:b,dataPointFormatter:OJ,errorBarOffset:x},T.createElement(TJ,Fi({},e,{layout:v,needClip:p,data:b,xAxisId:t,yAxisId:n,hide:r,legendType:a,minPointSize:i,activeBar:o,animationBegin:s,animationDuration:c,animationEasing:f,isAnimationActive:d})))}function MJ(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:a,bandSize:i,xAxis:o,yAxis:s,xAxisTicks:c,yAxisTicks:f,stackedData:d,displayedData:p,offset:v,cells:g,parentViewBox:y,dataStartIndex:b}=e,x=t==="horizontal"?s:o,S=d?x.scale.domain():null,_=B8({numericAxis:x}),C=x.scale(_);return p.map((A,O)=>{var R,M,k,I,P,L;if(d){var F=d[O+b];if(F==null)return null;R=D8(F,S)}else R=Ln(A,n),Array.isArray(R)||(R=[_,R]);var Y=jQ(r,XP)(R[1],O);if(t==="horizontal"){var Z,[J,U]=[s.scale(R[0]),s.scale(R[1])];M=PO({axis:o,ticks:c,bandSize:i,offset:a.offset,entry:A,index:O}),k=(Z=U??J)!==null&&Z!==void 0?Z:void 0,I=a.size;var H=J-U;if(P=Ga(H)?0:H,L={x:M,y:v.top,width:I,height:v.height},Math.abs(Y)>0&&Math.abs(P)<Math.abs(Y)){var G=Rr(P||Y)*(Math.abs(Y)-Math.abs(P));k-=G,P+=G}}else{var[Q,oe]=[o.scale(R[0]),o.scale(R[1])];if(M=Q,k=PO({axis:s,ticks:f,bandSize:i,offset:a.offset,entry:A,index:O}),I=oe-Q,P=a.size,L={x:v.left,y:k,width:v.width,height:P},Math.abs(Y)>0&&Math.abs(I)<Math.abs(Y)){var j=Rr(I||Y)*(Math.abs(Y)-Math.abs(I));I+=j}}if(M==null||k==null||I==null||P==null)return null;var K=Yn(Yn({},A),{},{stackedBarStart:C,x:M,y:k,width:I,height:P,value:d?R:R[1],payload:A,background:L,tooltipPosition:{x:M+I/2,y:k+P/2},parentViewBox:y},g&&g[O]&&g[O].props);return K}).filter(Boolean)}function kJ(e){var t=oa(e,RJ),n=oJ(t.stackId),r=Lr();return T.createElement(YY,{id:t.id,type:"bar"},a=>T.createElement(T.Fragment,null,T.createElement(VY,{legendPayload:yJ(t)}),T.createElement(bJ,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),T.createElement(rZ,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),T.createElement(Go,{zIndex:t.zIndex},T.createElement(DJ,Fi({},t,{id:a})))))}var YP=T.memo(kJ,Kw);YP.displayName="Bar";var NJ=["domain","range"],IJ=["domain","range"];function FD(e,t){if(e==null)return{};var n,r,a=PJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function PJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function jD(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function ZP(e,t){if(e===t)return!0;var{domain:n,range:r}=e,a=FD(e,NJ),{domain:i,range:o}=t,s=FD(t,IJ);return!jD(n,i)||!jD(r,o)?!1:Kw(a,s)}var BJ=["dangerouslySetInnerHTML","ticks","scale"],LJ=["id","scale"];function q1(){return q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q1.apply(null,arguments)}function zD(e,t){if(e==null)return{};var n,r,a=FJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function FJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function jJ(e){var t=Ht(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?t(sZ(e)):n.current!==e&&t(lZ({prev:n.current,next:e})),n.current=e},[e,t]),T.useLayoutEffect(()=>()=>{n.current&&(t(cZ(n.current)),n.current=null)},[t]),null}var zJ=e=>{var{xAxisId:t,className:n}=e,r=je(jx),a=Lr(),i="xAxis",o=je(S=>V3(S,i,t,a)),s=je(S=>U3(S,t)),c=je(S=>G9(S,t)),f=je(S=>c3(S,t));if(s==null||c==null||f==null)return null;var{dangerouslySetInnerHTML:d,ticks:p,scale:v}=e,g=zD(e,BJ),{id:y,scale:b}=f,x=zD(f,LJ);return T.createElement($w,q1({},g,x,{x:c.x,y:c.y,width:s.width,height:s.height,className:At("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:o,axisType:i}))},UJ={allowDataOverflow:pn.allowDataOverflow,allowDecimals:pn.allowDecimals,allowDuplicatedCategory:pn.allowDuplicatedCategory,angle:pn.angle,axisLine:Ru.axisLine,height:pn.height,hide:!1,includeHidden:pn.includeHidden,interval:pn.interval,minTickGap:pn.minTickGap,mirror:pn.mirror,orientation:pn.orientation,padding:pn.padding,reversed:pn.reversed,scale:pn.scale,tick:pn.tick,tickCount:pn.tickCount,tickLine:Ru.tickLine,tickSize:Ru.tickSize,type:pn.type,xAxisId:0},WJ=e=>{var t=oa(e,UJ);return T.createElement(T.Fragment,null,T.createElement(jJ,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),T.createElement(zJ,t))},QP=T.memo(WJ,ZP);QP.displayName="XAxis";var HJ=["dangerouslySetInnerHTML","ticks","scale"],qJ=["id","scale"];function V1(){return V1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V1.apply(null,arguments)}function UD(e,t){if(e==null)return{};var n,r,a=VJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function VJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function GJ(e){var t=Ht(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?t(fZ(e)):n.current!==e&&t(dZ({prev:n.current,next:e})),n.current=e},[e,t]),T.useLayoutEffect(()=>()=>{n.current&&(t(hZ(n.current)),n.current=null)},[t]),null}var $J=e=>{var{yAxisId:t,className:n,width:r,label:a}=e,i=T.useRef(null),o=T.useRef(null),s=je(jx),c=Lr(),f=Ht(),d="yAxis",p=je(R=>W3(R,t)),v=je(R=>K9(R,t)),g=je(R=>V3(R,d,t,c)),y=je(R=>f3(R,t));if(T.useLayoutEffect(()=>{if(!(r!=="auto"||!p||Vw(a)||T.isValidElement(a)||y==null)){var R=i.current;if(R){var M=R.getCalculatedWidth();Math.round(p.width)!==Math.round(M)&&f(pZ({id:t,width:M}))}}},[g,p,f,a,t,r,y]),p==null||v==null||y==null)return null;var{dangerouslySetInnerHTML:b,ticks:x,scale:S}=e,_=UD(e,HJ),{id:C,scale:A}=y,O=UD(y,qJ);return T.createElement($w,V1({},_,O,{ref:i,labelRef:o,x:v.x,y:v.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:p.width,height:p.height,className:At("recharts-".concat(d," ").concat(d),n),viewBox:s,ticks:g,axisType:d}))},KJ={allowDataOverflow:vn.allowDataOverflow,allowDecimals:vn.allowDecimals,allowDuplicatedCategory:vn.allowDuplicatedCategory,angle:vn.angle,axisLine:Ru.axisLine,hide:!1,includeHidden:vn.includeHidden,interval:vn.interval,minTickGap:vn.minTickGap,mirror:vn.mirror,orientation:vn.orientation,padding:vn.padding,reversed:vn.reversed,scale:vn.scale,tick:vn.tick,tickCount:vn.tickCount,tickLine:Ru.tickLine,tickSize:Ru.tickSize,type:vn.type,width:vn.width,yAxisId:0},XJ=e=>{var t=oa(e,KJ);return T.createElement(T.Fragment,null,T.createElement(GJ,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),T.createElement($J,t))},JP=T.memo(XJ,ZP);JP.displayName="YAxis";var YJ=(e,t)=>t,Xw=le([YJ,ht,s3,ln,uP,Ki,sK,wn],vK),Yw=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},e4=ra("mouseClick"),t4=_f();t4.startListening({actionCreator:e4,effect:(e,t)=>{var n=e.payload,r=Xw(t.getState(),Yw(n));r?.activeIndex!=null&&t.dispatch(s$({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var G1=ra("mouseMove"),n4=_f(),Mh=null;n4.startListening({actionCreator:G1,effect:(e,t)=>{var n=e.payload;Mh!==null&&cancelAnimationFrame(Mh);var r=Yw(n);Mh=requestAnimationFrame(()=>{var a=t.getState(),i=Nw(a,a.tooltip.settings.shared);if(i==="axis"){var o=Xw(a,r);o?.activeIndex!=null?t.dispatch(J3({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(Q3())}Mh=null})}});function ZJ(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var WD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},r4=vr({name:"rootProps",initialState:WD,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:WD.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),QJ=r4.reducer,{updateOptions:JJ}=r4.actions,a4=vr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Vle}=a4.actions,eee=a4.reducer,i4=ra("keyDown"),o4=ra("focus"),Zw=_f();Zw.startListening({actionCreator:i4,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:a}=n.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Iw(a,Tl(n),If(n),Ff(n)),s=o==null?-1:Number(o);if(!(!Number.isFinite(s)||s<0)){var c=Ki(n);if(i==="Enter"){var f=Lp(n,"axis","hover",String(a.index));t.dispatch(L1({active:!a.active,activeIndex:a.index,activeCoordinate:f}));return}var d=Q9(n),p=d==="left-to-right"?1:-1,v=i==="ArrowRight"?1:-1,g=s+v*p;if(!(c==null||g>=c.length||g<0)){var y=Lp(n,"axis","hover",String(g));t.dispatch(L1({active:!0,activeIndex:g.toString(),activeCoordinate:y}))}}}}}});Zw.startListening({actionCreator:o4,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:a}=n.tooltip;if(!a.active&&a.index==null){var i="0",o=Lp(n,"axis","hover",String(i));t.dispatch(L1({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Zr=ra("externalEvent"),u4=_f(),bb=new Map;u4.startListening({actionCreator:Zr,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var a=r.type,i=bb.get(a);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var s=t.getState(),c={activeCoordinate:$$(s),activeDataKey:fP(s),activeIndex:hl(s),activeLabel:cP(s),activeTooltipIndex:hl(s),isTooltipActive:K$(s)};n(c,r)}finally{bb.delete(a)}});bb.set(a,o)}}});var tee=le([Al],e=>e.tooltipItemPayloads),nee=le([tee,Lf,(e,t)=>t,(e,t,n)=>n],(e,t,n,r)=>{var a=e.find(s=>s.settings.graphicalItemId===r);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,n);return o}}}),s4=ra("touchMove"),l4=_f();l4.startListening({actionCreator:s4,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),a=Nw(r,r.tooltip.settings.shared);if(a==="axis"){var i=n.touches[0];if(i==null)return;var o=Xw(r,Yw({clientX:i.clientX,clientY:i.clientY,currentTarget:n.currentTarget}));o?.activeIndex!=null&&t.dispatch(J3({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(a==="item"){var s,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var f=document.elementFromPoint(c.clientX,c.clientY);if(!f||!f.getAttribute)return;var d=f.getAttribute(H8),p=(s=f.getAttribute(q8))!==null&&s!==void 0?s:void 0,v=Ol(r).find(b=>b.id===p);if(d==null||v==null||p==null)return;var{dataKey:g}=v,y=nee(r,d,p);t.dispatch(Z3({activeDataKey:g,activeIndex:d,activeCoordinate:y,activeGraphicalItemId:p}))}}}});var ree=iN({brush:OZ,cartesianAxis:vZ,chartData:$K,errorBars:lQ,graphicalItems:tZ,layout:_8,legend:jH,options:WK,polarAxis:xY,polarOptions:eee,referenceElements:IZ,rootProps:QJ,tooltip:l$,zIndex:RK}),aee=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return XW({reducer:ree,preloadedState:t,middleware:r=>{var a;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([t4.middleware,n4.middleware,Zw.middleware,u4.middleware,l4.middleware])},enhancers:r=>{var a=r;return typeof r=="function"&&(a=r()),a.concat(xN({type:"raf"}))},devTools:{serialize:{replacer:ZJ},name:"recharts-".concat(n)}})};function iee(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,a=Lr(),i=T.useRef(null);if(a)return n;i.current==null&&(i.current=aee(t,r));var o=kx;return T.createElement(IQ,{context:o,store:i.current},n)}function oee(e){var{layout:t,margin:n}=e,r=Ht(),a=Lr();return T.useEffect(()=>{a||(r(w8(t)),r(x8(n)))},[r,a,t,n]),null}var uee=T.memo(oee,Kw);function see(e){var t=Ht();return T.useEffect(()=>{t(JJ(e))},[t,e]),null}function HD(e){var{zIndex:t,isPanorama:n}=e,r=T.useRef(null),a=Ht();return T.useLayoutEffect(()=>(r.current&&a(OK({zIndex:t,element:r.current,isPanorama:n})),()=>{a(TK({zIndex:t,isPanorama:n}))}),[a,t,n]),T.createElement("g",{tabIndex:-1,ref:r})}function qD(e){var{children:t,isPanorama:n}=e,r=je(gK);if(!r||r.length===0)return t;var a=r.filter(o=>o<0),i=r.filter(o=>o>0);return T.createElement(T.Fragment,null,a.map(o=>T.createElement(HD,{key:o,zIndex:o,isPanorama:n})),t,i.map(o=>T.createElement(HD,{key:o,zIndex:o,isPanorama:n})))}var lee=["children"];function cee(e,t){if(e==null)return{};var n,r,a=fee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function fee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hp.apply(null,arguments)}var dee={width:"100%",height:"100%",display:"block"},hee=T.forwardRef((e,t)=>{var n=wH(),r=SH(),a=$N();if(!zo(n)||!zo(r))return null;var{children:i,otherAttributes:o,title:s,desc:c}=e,f,d;return o!=null&&(typeof o.tabIndex=="number"?f=o.tabIndex:f=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0),T.createElement(Ek,Hp({},o,{title:s,desc:c,role:d,tabIndex:f,width:n,height:r,style:dee,ref:t}),i)}),pee=e=>{var{children:t}=e,n=je(Mv);if(!n)return null;var{width:r,height:a,y:i,x:o}=n;return T.createElement(Ek,{width:r,height:a,x:o,y:i},t)},VD=T.forwardRef((e,t)=>{var{children:n}=e,r=cee(e,lee),a=Lr();return a?T.createElement(pee,null,T.createElement(qD,{isPanorama:!0},n)):T.createElement(hee,Hp({ref:t},r),T.createElement(qD,{isPanorama:!1},n))});function vee(){var e=Ht(),[t,n]=T.useState(null),r=je(W8);return T.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Nt(i)&&i!==r&&e(E8(i))}},[t,e,r]),n}function GD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function mee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GD(Object(n),!0).forEach(function(r){gee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gee(e,t,n){return(t=yee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yee(e){var t=bee(e,"string");return typeof t=="symbol"?t:t+""}function bee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fu(){return Fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fu.apply(null,arguments)}var xee=()=>(nX(),null);function qp(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var wee=T.forwardRef((e,t)=>{var n,r,a=T.useRef(null),[i,o]=T.useState({containerWidth:qp((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:qp((r=e.style)===null||r===void 0?void 0:r.height)}),s=T.useCallback((f,d)=>{o(p=>{var v=Math.round(f),g=Math.round(d);return p.containerWidth===v&&p.containerHeight===g?p:{containerWidth:v,containerHeight:g}})},[]),c=T.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null&&typeof ResizeObserver<"u"){var{width:d,height:p}=f.getBoundingClientRect();s(d,p);var v=y=>{var{width:b,height:x}=y[0].contentRect;s(b,x)},g=new ResizeObserver(v);g.observe(f),a.current=g}},[t,s]);return T.useEffect(()=>()=>{var f=a.current;f?.disconnect()},[s]),T.createElement(T.Fragment,null,T.createElement(Nv,{width:i.containerWidth,height:i.containerHeight}),T.createElement("div",Fu({ref:c},e)))}),See=T.forwardRef((e,t)=>{var{width:n,height:r}=e,[a,i]=T.useState({containerWidth:qp(n),containerHeight:qp(r)}),o=T.useCallback((c,f)=>{i(d=>{var p=Math.round(c),v=Math.round(f);return d.containerWidth===p&&d.containerHeight===v?d:{containerWidth:p,containerHeight:v}})},[]),s=T.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:f,height:d}=c.getBoundingClientRect();o(f,d)}},[t,o]);return T.createElement(T.Fragment,null,T.createElement(Nv,{width:a.containerWidth,height:a.containerHeight}),T.createElement("div",Fu({ref:s},e)))}),Eee=T.forwardRef((e,t)=>{var{width:n,height:r}=e;return T.createElement(T.Fragment,null,T.createElement(Nv,{width:n,height:r}),T.createElement("div",Fu({ref:t},e)))}),_ee=T.forwardRef((e,t)=>{var{width:n,height:r}=e;return ki(n)||ki(r)?T.createElement(See,Fu({},e,{ref:t})):T.createElement(Eee,Fu({},e,{ref:t}))});function Cee(e){return e===!0?wee:_ee}var Aee=T.forwardRef((e,t)=>{var{children:n,className:r,height:a,onClick:i,onContextMenu:o,onDoubleClick:s,onMouseDown:c,onMouseEnter:f,onMouseLeave:d,onMouseMove:p,onMouseUp:v,onTouchEnd:g,onTouchMove:y,onTouchStart:b,style:x,width:S,responsive:_,dispatchTouchEvents:C=!0}=e,A=T.useRef(null),O=Ht(),[R,M]=T.useState(null),[k,I]=T.useState(null),P=vee(),L=zx(),F=L?.width>0?L.width:S,Y=L?.height>0?L.height:a,Z=T.useCallback(ne=>{P(ne),typeof t=="function"&&t(ne),M(ne),I(ne),ne!=null&&(A.current=ne)},[P,t,M,I]),J=T.useCallback(ne=>{O(e4(ne)),O(Zr({handler:i,reactEvent:ne}))},[O,i]),U=T.useCallback(ne=>{O(G1(ne)),O(Zr({handler:f,reactEvent:ne}))},[O,f]),H=T.useCallback(ne=>{O(Q3()),O(Zr({handler:d,reactEvent:ne}))},[O,d]),G=T.useCallback(ne=>{O(G1(ne)),O(Zr({handler:p,reactEvent:ne}))},[O,p]),Q=T.useCallback(()=>{O(o4())},[O]),oe=T.useCallback(ne=>{O(i4(ne.key))},[O]),j=T.useCallback(ne=>{O(Zr({handler:o,reactEvent:ne}))},[O,o]),K=T.useCallback(ne=>{O(Zr({handler:s,reactEvent:ne}))},[O,s]),ce=T.useCallback(ne=>{O(Zr({handler:c,reactEvent:ne}))},[O,c]),ve=T.useCallback(ne=>{O(Zr({handler:v,reactEvent:ne}))},[O,v]),ye=T.useCallback(ne=>{O(Zr({handler:b,reactEvent:ne}))},[O,b]),be=T.useCallback(ne=>{C&&O(s4(ne)),O(Zr({handler:y,reactEvent:ne}))},[O,C,y]),xe=T.useCallback(ne=>{O(Zr({handler:g,reactEvent:ne}))},[O,g]),Pe=Cee(_);return T.createElement(yP.Provider,{value:R},T.createElement(O6.Provider,{value:k},T.createElement(Pe,{width:F??x?.width,height:Y??x?.height,className:At("recharts-wrapper",r),style:mee({position:"relative",cursor:"default",width:F,height:Y},x),onClick:J,onContextMenu:j,onDoubleClick:K,onFocus:Q,onKeyDown:oe,onMouseDown:ce,onMouseEnter:U,onMouseLeave:H,onMouseMove:G,onMouseUp:ve,onTouchEnd:xe,onTouchMove:be,onTouchStart:ye,ref:Z},T.createElement(xee,null),n)))}),Oee=["width","height","responsive","children","className","style","compact","title","desc"];function Tee(e,t){if(e==null)return{};var n,r,a=Ree(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ree(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Dee=T.forwardRef((e,t)=>{var{width:n,height:r,responsive:a,children:i,className:o,style:s,compact:c,title:f,desc:d}=e,p=Tee(e,Oee),v=jo(p);return c?T.createElement(T.Fragment,null,T.createElement(Nv,{width:n,height:r}),T.createElement(VD,{otherAttributes:v,title:f,desc:d},i)):T.createElement(Aee,{className:o,style:s,width:n,height:r,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},T.createElement(VD,{otherAttributes:v,title:f,desc:d,ref:t},T.createElement(BZ,null,i)))});function $1(){return $1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$1.apply(null,arguments)}var Mee={top:5,right:5,bottom:5,left:5},kee={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Mee,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Nee=T.forwardRef(function(t,n){var r,a=oa(t.categoricalChartProps,kee),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:s,tooltipPayloadSearcher:c,categoricalChartProps:f}=t,d={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:s,tooltipPayloadSearcher:c,eventEmitter:void 0};return T.createElement(iee,{preloadedState:{options:d},reduxStoreName:(r=f.id)!==null&&r!==void 0?r:i},T.createElement(AZ,{chartData:f.data}),T.createElement(uee,{layout:a.layout,margin:a.margin}),T.createElement(see,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),T.createElement(Dee,$1({},a,{ref:n})))}),Iee=["axis","item"],Pee=T.forwardRef((e,t)=>T.createElement(Nee,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Iee,tooltipPayloadSearcher:zK,categoricalChartProps:e,ref:t}));var c4=function(e,t){return(c4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])})(e,t)};function Ca(e,t){function n(){this.constructor=e}c4(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Oe(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(f){try{c(r.next(f))}catch(d){i(d)}}function s(f){try{c(r.throw(f))}catch(d){i(d)}}function c(f){f.done?a(f.value):new n((function(d){d(f.value)})).then(o,s)}c((r=r.apply(e,[])).next())}))}function Te(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(f){return(function(d){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&d[0]?r.return:d[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,d[1])).done)return a;switch(r=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,r=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){o=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){o.label=d[1];break}if(d[0]===6&&o.label<a[1]){o.label=a[1],a=d;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(d);break}a[2]&&o.ops.pop(),o.trys.pop();continue}d=t.call(e,o)}catch(p){d=[6,p],r=0}finally{n=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([c,f])}}}var Bee=(function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var a=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+a+"."),this.set(t,a)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,a=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return Lee(r,o[0],o[1]),o.join("=")})),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach((function(i){var o=i.split(":"),s=o[0],c=o[1];t.urlFlags[s]=(function(f,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+f+".")})(s,c)}))}},e})();function Lee(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function de(){return f4}var f4=null,Vp=new Map,K1=new Map;function d4(e,t){var n=p4(e,t);return Vp.get(n)}function Fee(e){return K1.get(e)}function $D(e){for(var t=Vp.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=i[0],s=i[1];o.split("_")[0]===e&&n.push(s)}return n}function h4(e){var t=e.kernelName,n=e.backendName,r=p4(t,n);if(Vp.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");Vp.set(r,e)}function jee(e){var t=e.kernelName;K1.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),K1.set(t,e)}function p4(e,t){return t+"_"+e}function X1(e,t,n){return Math.max(e,Math.min(t,n))}function v4(e){return e%2==0?e:e+1}function zee(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function z(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function lt(e,t,n){n===void 0&&(n=""),z(yn(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function Rl(e){z(e!=null,(function(){return"The input to the tensor constructor must be a non-null value."}))}function pl(e,t,n){if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),Array.isArray(e)||Ha(e)&&!n)for(var r=0;r<e.length;++r)pl(e[r],t,n);else t.push(e);return t}function De(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function yn(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Wt(e){return e%1==0}function Uee(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Y1(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Qs(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function KD(e,t,n){return t===void 0&&(t=function(r){return 0}),new Promise((function(r,a){var i=0,o=function(){if(e())r();else{i++;var s=t(i);n!=null&&i>=n?a():setTimeout(o,s)}};o()}))}function Wee(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(e[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(r===-1){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(n===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function fn(e,t){var n=t.length;return z((e=e==null?t.map((function(r,a){return a})):[].concat(e)).every((function(r){return r>=-n&&r<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),z(e.every((function(r){return Wt(r)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(r){return r<0?n+r:r}))}function xu(e,t){for(var n=[],r=[],a=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||a?null:fn(t,e).sort(),o=0,s=0;s<e.length;++s){if(i!=null){if(i[o]===s&&e[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(i[o]==null||i[o]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function lf(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Gp(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);n=new Array(t)}return n}function Hee(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function qee(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function Vee(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function Ha(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function m4(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function Gee(e){if(e==null)return 0;var t=0;return e.forEach((function(n){return t+=n.length})),t}function Qw(e){return typeof e=="string"||e instanceof String}function $ee(e){return typeof e=="boolean"}function Kee(e){return typeof e=="number"}function Uf(e){return Array.isArray(e)?Uf(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":Kee(e)?"float32":Qw(e)?"string":$ee(e)?"bool":"float32"}function Z1(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Q1(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function qa(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function g4(e,t,n){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=pl(e)),n&&Hee(e,t),(function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"})(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)Math.round(e[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function XD(e,t){if(e.length===0)return t[0];var n=e.reduce((function(r,a){return r*a}));if(n===0)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return(function r(a,i,o){var s=new Array;if(i.length===1)for(var c=i[0],f=0;f<c;f++)s[f]=o[a+f];else{c=i[0];var d=i.slice(1),p=d.reduce((function(v,g){return v*g}));for(f=0;f<c;f++)s[f]=r(a+f*p,d,o)}return s})(0,e,t)}function y4(e,t){for(var n=Wf(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Wf(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function La(){return de().platform.now()}function b4(e){e.forEach((function(t){z(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function Xee(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",de().platform.encode(e,t)}function $p(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",de().platform.decode(e,t)}function YD(e,t,n){if(t===0)return 0;if(t===1)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Yee(e,t,n){if(t===0)return[];if(t===1)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}var Zee=(function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new Qee)}return e.prototype.profileKernel=function(t,n,r){var a,i=this,o=this.backendTimer.time((function(){a=r()}));return a.forEach((function(s){s.data().then((function(c){(function(f,d,p){if(d!=="float32")return!1;for(var v=0;v<f.length;v++){var g=f[v];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+p+"'"),!0}})(c,s.dtype,t),o.then((function(f){var d="";f.getExtraProfileInfo!=null&&(d=f.getExtraProfileInfo()),i.logger.logKernelProfile(t,s,c,f.kernelMs,n,d)}))}))})),a},e})(),Qee=(function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,a,i,o){var s=typeof a=="number"?Qs(a+"ms",9):a.error,c=Qs(t,25),f=n.rank,d=n.size,p=Qs(n.shape.toString(),14),v="";for(var g in i){var y=i[g].shape||n.shape,b=y.length;v+=g+": "+b+"D "+(b>0?y:"")+" "}console.log("%c"+c+"	%c"+s+"	%c"+f+"D "+p+"	%c"+d+"	%c"+v+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e})(),ZD=20,Ic=3,xb=7;function Jee(e,t,n,r){var a=qa(t),i=(function(f,d,p,v){var g=De(d),y=v[v.length-1],b=new Array(y).fill(0),x=d.length,S=p==="complex64"?Bc(f):f;if(x>1)for(var _=0;_<g/y;_++)for(var C=_*y,A=0;A<y;A++)b[A]=Math.max(b[A],Pc(S[C+A],0,p).length);return b})(e,t,n,a),o=t.length,s=(function f(d,p,v,g,y,b){b===void 0&&(b=!0);var x=v==="complex64"?2:1,S=p[0],_=p.length;if(_===0)return v==="complex64"?[Pc(Bc(d)[0],0,v)]:v==="bool"?[x4(d[0])]:[d[0].toString()];if(_===1){if(S>ZD){var C=Ic*x,A=Array.from(d.slice(0,C)),O=Array.from(d.slice((S-Ic)*x,S*x));return v==="complex64"&&(A=Bc(A),O=Bc(O)),["["+A.map((function(J,U){return Pc(J,y[U],v)})).join(", ")+", ..., "+O.map((function(J,U){return Pc(J,y[S-Ic+U],v)})).join(", ")+"]"]}return["["+(v==="complex64"?Bc(d):Array.from(d)).map((function(J,U){return Pc(J,y[U],v)})).join(", ")+"]"]}var R=p.slice(1),M=g.slice(1),k=g[0]*x,I=[];if(S>ZD){for(var P=0;P<Ic;P++){var L=(F=P*k)+k;I.push.apply(I,f(d.slice(F,L),R,v,M,y,!1))}for(I.push("..."),P=S-Ic;P<S;P++)L=(F=P*k)+k,I.push.apply(I,f(d.slice(F,L),R,v,M,y,P===S-1))}else for(P=0;P<S;P++){var F;L=(F=P*k)+k,I.push.apply(I,f(d.slice(F,L),R,v,M,y,P===S-1))}var Y=_===2?",":"";for(I[0]="["+I[0]+Y,P=1;P<I.length-1;P++)I[P]=" "+I[P]+Y;var Z=`,
`;for(P=2;P<_;P++)Z+=`
`;return I[I.length-1]=" "+I[I.length-1]+"]"+(b?"":Z),I})(e,t,n,a,i),c=["Tensor"];return r&&(c.push("  dtype: "+n),c.push("  rank: "+o),c.push("  shape: ["+t+"]"),c.push("  values:")),c.push(s.map((function(f){return"    "+f})).join(`
`)),c.join(`
`)}function Pc(e,t,n){return Qs(Array.isArray(e)?parseFloat(e[0].toFixed(xb))+" + "+parseFloat(e[1].toFixed(xb))+"j":Qw(e)?"'"+e+"'":n==="bool"?x4(e):parseFloat(e.toFixed(xb)).toString(),t)}function x4(e){return e===0?"false":"true"}function Bc(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var cf=(function(){function e(t,n,r){var a=this;if(this.dtype=n,this.shape=t.slice(),this.size=De(t),r!=null){var i=r.length;z(i===this.size,(function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+a.size+"'."}))}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Gp(n,this.size),this.strides=qa(t)}return e.prototype.set=function(t){for(var n=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),z(r.length===this.rank,(function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"}));var i=this.locToIndex(r);this.values[i]=t},e.prototype.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.length===0&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var c=t[t.length-1],f=0;f<t.length-1;++f)c+=this.strides[f]*t[f];return this.values[c]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Fa().makeTensor(this.values,this.shape,this.dtype)},e})(),Fa=null,se=null,w4=null,Dt=(function(){function e(t,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=De(t),this.strides=qa(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),z(this.size===1,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,n){return this.throwIfDisposed(),this.reshape([t,n])},e.prototype.as3D=function(t,n,r){return this.throwIfDisposed(),this.reshape([t,n,r])},e.prototype.as4D=function(t,n,r,a){return this.throwIfDisposed(),this.reshape([t,n,r,a])},e.prototype.as5D=function(t,n,r,a,i){return this.throwIfDisposed(),this.reshape([t,n,r,a,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),se.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Oe(this,void 0,void 0,(function(){var t;return Te(this,(function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,se.buffer(this.shape,this.dtype,t)]}}))}))},e.prototype.bufferSync=function(){return se.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Oe(this,void 0,void 0,(function(){var t;return Te(this,(function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,XD(this.shape,t)]}}))}))},e.prototype.arraySync=function(){return XD(this.shape,this.dataSync())},e.prototype.data=function(){return Oe(this,void 0,void 0,(function(){var t,n;return Te(this,(function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=Fa().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map((function(a){return $p(a)}))]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Fa().readSync(this.dataId);if(this.dtype==="string")try{return t.map((function(n){return $p(n)}))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return Oe(this,void 0,void 0,(function(){var t;return Te(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Fa().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(Fa().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),se.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),se.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),se.expandDims(this,t)},e.prototype.cumsum=function(t,n,r){return t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1),se.cumsum(this,t,n,r)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),se.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),se.clone(this)},e.prototype.oneHot=function(t,n,r){return this.throwIfDisposed(),se.oneHot(this,t,n,r)},e.prototype.toString=function(t){return t===void 0&&(t=!1),Jee(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),se.tile(this,t)},e.prototype.gather=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),se.gather(this,t,n)},e.prototype.matMul=function(t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),se.matMul(this,t,n,r)},e.prototype.dot=function(t){return this.throwIfDisposed(),se.dot(this,t)},e.prototype.norm=function(t,n,r){return t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),se.norm(this,t,n,r)},e.prototype.slice=function(t,n){return this.throwIfDisposed(),se.slice(this,t,n)},e.prototype.reverse=function(t){return this.throwIfDisposed(),se.reverse(this,t)},e.prototype.concat=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),se.concat([this].concat(t),n)},e.prototype.split=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),se.split(this,t,n)},e.prototype.stack=function(t,n){return n===void 0&&(n=0),se.stack([this,t],n)},e.prototype.unstack=function(t){return t===void 0&&(t=0),se.unstack(this,t)},e.prototype.pad=function(t,n){return n===void 0&&(n=0),se.pad(this,t,n)},e.prototype.batchNormalization=function(t,n,r,a,i){return r===void 0&&(r=.001),w4("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,n,i,a,r)},e.prototype.batchNorm=function(t,n,r,a,i){return i===void 0&&(i=.001),this.throwIfDisposed(),se.batchNorm(this,t,n,r,a,i)},e.prototype.all=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.all(this,t,n)},e.prototype.any=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.any(this,t,n)},e.prototype.logSumExp=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.logSumExp(this,t,n)},e.prototype.sum=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.sum(this,t,n)},e.prototype.prod=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.prod(this,t,n)},e.prototype.mean=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.mean(this,t,n)},e.prototype.min=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.min(this,t,n)},e.prototype.max=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.max(this,t,n)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),se.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),se.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),se.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),se.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),se.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),se.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),se.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),se.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),se.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),se.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),se.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),se.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),se.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),se.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),se.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),se.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),se.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),se.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),se.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),se.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),se.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),se.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),se.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),se.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),se.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),se.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),se.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),se.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),se.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),se.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),se.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),se.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),se.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),se.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),se.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),se.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),se.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),se.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),se.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),se.logicalXor(this,t)},e.prototype.where=function(t,n){return this.throwIfDisposed(),se.where(t,this,n)},e.prototype.neg=function(){return this.throwIfDisposed(),se.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),se.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),se.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),se.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),se.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),se.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),se.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),se.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),se.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),se.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),se.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),se.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),se.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),se.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),se.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),se.abs(this)},e.prototype.clipByValue=function(t,n){return this.throwIfDisposed(),se.clipByValue(this,t,n)},e.prototype.relu=function(){return this.throwIfDisposed(),se.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),se.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),se.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),se.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),se.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),se.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),se.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),se.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),se.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),se.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),se.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),se.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),se.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),se.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),se.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),se.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),se.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),se.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),se.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),se.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),se.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),se.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),se.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),se.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),se.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),se.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),se.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),se.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),se.image.resizeBilinear(this,t,n)},e.prototype.resizeNearestNeighbor=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),se.image.resizeNearestNeighbor(this,t,n)},e.prototype.conv1d=function(t,n,r,a,i,o){return a===void 0&&(a="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),se.conv1d(this,t,n,r,a,i,o)},e.prototype.conv2d=function(t,n,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),se.conv2d(this,t,n,r,a,i,o)},e.prototype.conv2dTranspose=function(t,n,r,a,i){return this.throwIfDisposed(),se.conv2dTranspose(this,t,n,r,a,i)},e.prototype.depthwiseConv2D=function(t,n,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),se.depthwiseConv2d(this,t,n,r,a,i,o)},e.prototype.separableConv2d=function(t,n,r,a,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),se.separableConv2d(this,t,n,r,a,i,o)},e.prototype.avgPool=function(t,n,r,a){return this.throwIfDisposed(),se.avgPool(this,t,n,r,a)},e.prototype.maxPool=function(t,n,r,a){return this.throwIfDisposed(),se.maxPool(this,t,n,r,a)},e.prototype.localResponseNormalization=function(t,n,r,a){return t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),a===void 0&&(a=.5),se.localResponseNormalization(this,t,n,r,a)},e.prototype.pool=function(t,n,r,a,i){return this.throwIfDisposed(),se.pool(this,t,n,r,a,i)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),Fa().makeVariable(this,t,n,r)},e.prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),se.unsortedSegmentSum(this,t,n)},e.prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),se.batchToSpaceND(this,t,n)},e.prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),se.spaceToBatchND(this,t,n)},e.prototype.topk=function(t,n){return t===void 0&&(t=1),n===void 0&&(n=!0),this.throwIfDisposed(),se.topk(this,t,n)},e.prototype.stridedSlice=function(t,n,r,a,i,o,s,c){return a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),c===void 0&&(c=0),this.throwIfDisposed(),se.stridedSlice(this,t,n,r,a,i,o,s,c)},e.prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),se.depthToSpace(this,t,n)},e.prototype.fft=function(){return this.throwIfDisposed(),se.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),se.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),se.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),se.spectral.irfft(this)},e})();Object.defineProperty(Dt,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var QD,J1,ex,tx,nx,vl=(function(e){function t(n,r,a,i){var o=e.call(this,n.shape,n.dtype,n.dataId,i)||this;return o.trainable=r,o.name=a,o}return Ca(t,e),t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!yn(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Fa().disposeTensor(this),this.dataId=n.dataId,Fa().incRef(this,null)},t.prototype.dispose=function(){Fa().disposeVariable(this),this.isDisposedInternal=!0},t})(Dt);Object.defineProperty(vl,Symbol.hasInstance,{value:function(e){return e instanceof Dt&&e.assign!=null&&e.assign instanceof Function}}),(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(QD||(QD={})),(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(J1||(J1={})),(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(ex||(ex={})),(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(tx||(tx={})),(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(nx||(nx={}));var ete={float32:tx,int32:J1,bool:ex,complex64:nx};function In(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return ete[e][t]}function wb(e){return In(e,"int32")}function It(e,t){if(e.dtype===t.dtype)return[e,t];var n=In(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function tte(e,t){z(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function S4(e){var t=[];return(function n(r,a,i){if(r!=null){if(r instanceof Dt)return void a.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,s=r;for(var c in s){var f=s[c];i.has(f)||(i.add(f),n(f,a,i))}}}})(e,t,new Set),t}var Sb,JD=(function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e})(),nte=(function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new JD}return e.prototype.ready=function(){return Oe(this,void 0,void 0,(function(){var t,n,r;return Te(this,(function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then((function(){}))];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,a.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return Oe(this,void 0,void 0,(function(){var n,r,a;return Te(this,(function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return a=i.sent(),[3,3];case 2:a=r,i.label=3;case 3:if(!a)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Zee(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var t=this;$D(this.backendName).forEach((function(n){n.setupFunc!=null&&n.setupFunc(t.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(t){var n=this;$D(t).forEach((function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[t])}))},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var i=++this.pendingBackendInitId,o=a.then((function(s){return!(i<n.pendingBackendInitId)&&(n.registry[t]=s,n.pendingBackendInit=null,!0)})).catch((function(s){return!(i<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),!1)}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[t]=a,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],a=this.initializeBackend(r),i=a.success,o=a.asyncInit;if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n);a.disposeData(n),r.backend=t,t.move(n,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r,a=this,i=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun((function(){return a.startScope(i)}),(function(){return a.endScope(r)}),(function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r}))},e.prototype.scopedRun=function(t,n,r){t();try{var a=r();return n(),a}catch(i){throw n(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[n],(function(a){return{x:function(){return a.toFloat()}}}),[]),n},e.prototype.runKernel=function(t,n,r,a,i){return this.runKernelFunc(null,n,null,t,r,a,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var a=this.backend.numDataIds(),i=0;r.forEach((function(c){i+=c.dtype==="complex64"?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,n,r,a,i,o,s){var c,f=this;o===void 0&&(o=[]),s===void 0&&(s=[]);var d=[],p=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var v,g=function(_){p&&(d=_.map((function(C){return f.keep(f.clone(C))})))},y=this.state.numBytes,b=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var x,S=d4(a,this.backendName);return v=S!=null?function(){var _=f.backend.numDataIds();x=S.kernelFunc({inputs:n,attrs:i,backend:f.backend});var C=Array.isArray(x)?x:[x];f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,_,C);var A=C.map((function(R){var M=R.dataId,k=R.shape,I=R.dtype;return f.makeTensorFromDataId(M,k,I)})),O=A.filter((function(R,M){return s[M]}));return g((o||[]).slice().concat(O)),A}:function(){var _=f.backend.numDataIds();x=f.tidy((function(){return t(f.backend,g)}));var C=Array.isArray(x)?x:[x];return f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,_,C),C},this.scopedRun((function(){return f.state.kernelDepth++}),(function(){return f.state.kernelDepth--}),(function(){c=f.ENV.getBool("DEBUG")?f.profiler.profileKernel(a,n,(function(){return v()})):v()})),p&&this.addTapeNode(a,n,c,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-y,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-b,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map((function(_){return n[_].shape})),outputShapes:c.map((function(_){return _.shape}))}),Array.isArray(x)?c:c[0]},e.prototype.makeTensor=function(t,n,r,a){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=t;r==="string"&&Qw(t[0])&&(i=t.map((function(d){return Xee(d)})));var o=a.write(i,n,r),s=new Dt(n,r,o,this.nextTensorId());if(this.incRef(s,a),r==="string"){var c=this.state.tensorInfo.get(o),f=Gee(i);this.state.numBytes+=f-c.bytes,c.bytes=f}return s},e.prototype.makeTensorFromDataId=function(t,n,r,a){var i=new Dt(n,r=r||"float32",t,this.nextTensorId());return this.incRef(i,a),i},e.prototype.makeVariable=function(t,n,r,a){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==t.dtype&&(t=t.asType(a));var i=new vl(t,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,n){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(a=t.size*m4(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof vl||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(t.dataId);n.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return Oe(this,void 0,void 0,(function(){var n,r;return Te(this,(function(a){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(i){return i.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:i},c=Fee(t);c!=null&&(a=c.gradFunc),a!=null&&(s.gradient=function(f){return f=f.map((function(d,p){if(d==null){var v=r[p],g=Wf(v.size,v.dtype);return o.makeTensor(g,v.shape,v.dtype)}return d})),a(f.length>1?f:f[0],i)}),this.state.activeTape.push(s)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=S4(t),a=new Set(r.map((function(c){return c.id}))),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||a.has(o.id)||o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach((function(c){c.kept||c.scopeId!==s.id||n.track(c)}))},e.prototype.gradients=function(t,n,r,a){var i=this;if(a===void 0&&(a=!1),z(n.length>0,(function(){return"gradients() received an empty list of xs."})),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun((function(){return i.startTape()}),(function(){return i.endTape()}),(function(){return i.tidy("forward",t)}));z(o instanceof Dt,(function(){return"The result y returned by f() must be a tensor."}));var s=(function(c,f,d){for(var p={},v={},g=0;g<f.length;g++)p[f[g].id]=!0;for(g=0;g<c.length;g++){var y=(R=c[g]).inputs;for(var b in y){for(var x=y[b],S=!1,_=0;_<f.length;_++)if(p[x.id]){R.outputs.forEach((function(P){return p[P.id]=!0})),S=!0,v[R.id]=!0;break}if(S)break}}var C={};C[d.id]=!0;var A={};for(g=c.length-1;g>=0;g--)for(y=(R=c[g]).inputs,_=0;_<R.outputs.length;_++)if(C[R.outputs[_].id]){for(var b in y)C[y[b].id]=!0,A[R.id]=!0;break}var O=[];for(g=0;g<c.length;g++){var R;if(v[(R=c[g]).id]&&A[R.id]){var M={};for(var b in R.inputs){var k=R.inputs[b];p[k.id]&&(M[b]=k)}var I=Object.assign({},R);I.inputs=M,I.outputs=R.outputs,O.push(I)}}return O})(this.state.activeTape,n,o);if(!a&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var c,f,d={};d[o.id]=r??(c=o.shape,f=y4(De(c),"float32"),$.makeTensor(f,c,"float32")),(function(v,g,y){for(var b=function(S){var _=g[S],C=[];if(_.outputs.forEach((function(M){var k=v[M.id];k!=null?C.push(k):C.push(null)})),_.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+_.kernelName+".");var A=_.gradient(C),O=function(M){if(!(M in A))throw new Error("Cannot backprop through input "+M+". Available gradients found: "+Object.keys(A)+".");var k=y((function(){return A[M]()}));if(k.dtype!=="float32")throw new Error("Error in gradient for op "+_.kernelName+". The gradient of input "+M+" must have 'float32' dtype, but has '"+k.dtype+"'");var I=_.inputs[M];if(!yn(k.shape,I.shape))throw new Error("Error in gradient for op "+_.kernelName+". The gradient of input '"+M+"' has shape '"+k.shape+"', which does not match the shape of the input '"+I.shape+"'");if(v[I.id]==null)v[I.id]=k;else{var P=v[I.id];v[I.id]=P.add(k),P.dispose()}};for(var R in _.inputs)O(R)},x=g.length-1;x>=0;x--)b(x)})(d,s,(function(v){return i.tidy(v)}));var p=n.map((function(v){return d[v.id]}));return i.state.gradientDepth===0&&(i.state.activeTape.forEach((function(v){for(var g=0,y=v.saved;g<y.length;g++)y[g].dispose()})),i.state.activeTape=null),{value:o,grads:p}}))},e.prototype.customGrad=function(t){var n=this;return z(Z1(t),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];z(a.every((function(s){return s instanceof Dt})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};return a.forEach((function(s,c){o[c]=s})),n.runKernelFunc((function(s,c){return z((r=t.apply(void 0,a.concat([c]))).value instanceof Dt,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),z(Z1(r.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),r.value}),o,(function(s,c){var f=r.gradFunc(s,c),d=Array.isArray(f)?f:[f];z(d.length===a.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),z(d.every((function(v){return v instanceof Dt})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var p={};return d.forEach((function(v,g){p[g]=function(){return v}})),p}))}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return Oe(this,void 0,void 0,(function(){var n,r;return Te(this,(function(a){switch(a.label){case 0:return n=La(),[4,this.backend.time(t)];case 1:return(r=a.sent()).wallMs=La()-n,[2,r]}}))}))},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new JD,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e})(),$=(function(){var e=(function(){if(Sb==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}Sb=n}return Sb})();if(e._tfengine==null){var t=new Bee(e);e._tfengine=new nte(t)}return(function(n){f4=n})(e._tfengine.ENV),Fa=function(){return e._tfengine},e._tfengine})();function E4(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var xi=de();xi.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),xi.registerFlag("IS_BROWSER",(function(){return E4()})),xi.registerFlag("IS_NODE",(function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0})),xi.registerFlag("IS_CHROME",(function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),xi.registerFlag("PROD",(function(){return!1})),xi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return xi.getBool("DEBUG")})),xi.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),xi.registerFlag("IS_TEST",(function(){return!1}));var ff,Mr,Or,yu={},Eb={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function rte(e,t){yu[e]=t}function Za(e){e in yu||(yu[e]=(function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=(function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")})(n);return r.addEventListener("webglcontextlost",(function(a){a.preventDefault(),delete yu[n]}),!1),n===1?r.getContext("webgl",Eb)||r.getContext("experimental-webgl",Eb):r.getContext("webgl2",Eb)})(e));var t=yu[e];return t.isContextLost()?(delete yu[e],Za(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),yu[e])}function tm(e,t){return[t,e]}function Wc(e){var t=De(e);return Y1(Math.ceil(t/4))}function Hf(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Jw(e,t){var n,r,a,i,o,s,c,f,d,p=e;return de().getNumber("WEBGL_VERSION")===2?(n=p.R32F,r=p.R16F,a=p.RGBA16F,i=p.RGBA32F,o=p.RED,s=4,c=1,f=p.HALF_FLOAT,d=p.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=p.RGBA,o=e.RGBA,s=4,c=4,f=t!=null?t.HALF_FLOAT_OES:null,d=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}function Me(e,t,n){var r=n();return t&&(function(a){var i=a.getError();if(i!==a.NO_ERROR)throw new Error("WebGL Error: "+ute(a,i))})(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(ff||(ff={})),(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(Mr||(Mr={})),(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Or||(Or={}));var ate=596e-10,ite=65504;function ote(e){return!!(de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||ate<Math.abs(e)&&Math.abs(e)<ite)}function ute(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function kh(e,t,n){return Xi(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function ste(e,t,n){var r=Xi(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(Me(e,t,(function(){return e.shaderSource(r,n)})),Me(e,t,(function(){return e.compileShader(r)})),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function lte(e,t,n){var r=Xi(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(Me(e,t,(function(){return e.shaderSource(r,n)})),Me(e,t,(function(){return e.compileShader(r)})),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw(function(a,i){var o=cte.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(a);for(var s=+o[1],c=a.split(`
`),f=c.length.toString().length+2,d=c.map((function(x,S){return Qs((S+1).toString(),f)+x})),p=0,v=0;v<d.length;v++)p=Math.max(d[v].length,p);var g=d.slice(0,s-1),y=d.slice(s-1,s),b=d.slice(s);console.log(g.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+Qs(y[0],p),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(b.join(`
`))})(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var _b,Cb,cte=/ERROR: [0-9]+:([0-9]+):/g;function fte(e,t){return Xi(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function dte(e,t,n){if(Me(e,t,(function(){return e.linkProgram(n)})),e.getProgramParameter(n,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Ab(e,t,n){if(Me(e,t,(function(){return e.validateProgram(n)})),e.getProgramParameter(n,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function hte(e,t,n){var r=Xi(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Me(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Me(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function pte(e,t,n){var r=Xi(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Me(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),Me(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function vte(e,t){return Xi(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function mte(e,t){var n=de().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function gte(e,t){return Xi(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function eM(e,t,n,r,a,i,o,s){var c=e.getAttribLocation(n,r);return c!==-1&&(Me(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,a)})),Me(e,t,(function(){return e.vertexAttribPointer(c,i,e.FLOAT,!1,o,s)})),Me(e,t,(function(){return e.enableVertexAttribArray(c)})),!0)}function yte(e,t,n,r){Ete(e,r),Me(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),Me(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function bte(e,t,n,r){return Xi(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function xte(e,t,n){return e.getUniformLocation(t,n)}function wte(e,t,n,r,a,i){Me(e,t,(function(){return yte(e,t,r,i)})),Me(e,t,(function(){return e.uniform1i(a,i)}))}function Ob(e,t,n,r){Me(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),Me(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function tM(e,t,n){Me(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),Me(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Nh(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Ste(e,t))}function Ste(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Xi(e,t,n,r){var a=Me(e,t,(function(){return n()}));if(a==null)throw new Error(r);return a}function Ete(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function Kp(e,t){return t===void 0&&(t=2),De(e.slice(0,e.length-t))}function Xp(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Tb(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Kp(e)].concat(Xp(e))),t}function _te(e,t){var n;t===void 0&&(t=!1);var r=de().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(e=e.map((function(f,d){return d>=e.length-2?v4(e[d]):e[d]}))).length===1&&(e=[2,e[0]])),e.length!==2){var a=xu(e);e=a.newShape}var i=De(e);if(e.length<=1&&i<=r)return[1,i];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var o=Kp(e),s=2,c=2;return e.length&&(s=(n=Xp(e))[0],c=n[1]),Y1(i=o*(s/2)*(c/2)).map((function(f){return 2*f}))}return Y1(i)}function Ih(e){return e%2==0}function Ph(e,t){if(yn(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||Ih(n)&&Ih(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Ih(e[0])&&Ih(t[0])}function Cte(e){if(_b==null){var t=Za(e);_b=t.getParameter(t.MAX_TEXTURE_SIZE)}return _b}function Ate(e){if(Cb==null){var t=Za(e);Cb=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Cb)}function Ote(e){if(e===0)return 0;var t=Za(e);return ta(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:ta(t,"EXT_disjoint_timer_query")?1:0}function ta(e,t){return e.getExtension(t)!=null}function nM(e){try{if(Za(e)!=null)return!0}catch{return!1}return!1}function Tte(e){if(e===0)return!1;var t=Za(e);if(e===1){if(!ta(t,"OES_texture_float"))return!1}else if(!ta(t,"EXT_color_buffer_float"))return!1;return rx(t)}function Rte(e){if(e===0)return!1;var t=Za(e);if(e!==1){if(ta(t,"EXT_color_buffer_float"))return rx(t);if(ta(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return(function(r,a){var i=Jw(r,a),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var c=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(s),c})(t,n)}return!1}return!!ta(t,"OES_texture_float")&&!!ta(t,"WEBGL_color_buffer_float")&&rx(t)}function rx(e){var t=Jw(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Dte(e){return e===2&&Za(e).fenceSync!=null}var Ue=de();function _4(e){de().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ee(e,t){return $.tidy(e,t)}function dr(e){S4(e).forEach((function(t){return t.dispose()}))}function Mte(e){return $.keep(e)}function Yp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];de().getBool("IS_TEST")||console.warn.apply(console,e)}function $o(e,t){var n=e;if(Ha(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Ha(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&de().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&(function a(i,o,s){if(s=s||[],!Array.isArray(i)&&!Ha(i))return void z(o.length===0,(function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"}));z(o.length>0,(function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"})),z(i.length===o[0],(function(){return"Element arr["+s.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"}));for(var c=o.slice(1),f=0;f<i.length;++f)a(i[f],c,s.concat(f))})(e,r,[]),r}function rM(e,t,n,r){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function B(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof Dt)return rM(r,e.dtype,t,n),e;var a=Uf(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),rM(r,a,t,n),e==null||!Ha(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=$o(e,a);Ha(e)||Array.isArray(e)||(e=[e]);var s=a!=="string"?g4(e,a,de().getBool("DEBUG")):pl(e,[],!0);return $.makeTensor(s,o,a)}function Zp(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(a,i){return B(a,t+"["+i+"]",n)}),r)}function C4(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function kte(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)n.indexOf(s)===-1?a.push(e[i++]):a.push(t[o++]);return a}function Un(e,t){for(var n=[],r=e.length,a=0;a<r;a++)t.indexOf(a)===-1&&n.push(e[a]);return[n,t.map((function(i){return e[i]}))]}function hr(e,t){return kte(e,t.map((function(n){return 1})),t)}function Ar(e,t,n){z(C4(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function Qa(e,t){if(C4(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach((function(a){return n.push(a)})),n}function e2(e){return e.map((function(t,n){return[n,t]})).sort((function(t,n){return t[1]-n[1]})).map((function(t){return t[0]}))}function Ja(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Nte(e,t){var n=e[0].length;e.forEach((function(a,i){z(a.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+n+")"}))})),z(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(a,i){for(var o=0;o<n;o++)z(o===t||a[o]===r[o],(function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."}))}))}function ml(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function q(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];$.startScope(n);try{var s=r.apply(void 0,i);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),$.endScope(s),s}catch(c){throw $.endScope(null),c}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}Ue.registerFlag("HAS_WEBGL",(function(){return Ue.getNumber("WEBGL_VERSION")>0})),Ue.registerFlag("WEBGL_VERSION",(function(){return nM(2)?2:nM(1)?1:0})),Ue.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return Ue.get("WEBGL_VERSION")===2})),Ue.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Ue.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Ue.registerFlag("WEBGL_PACK",(function(){return Ue.getBool("HAS_WEBGL")})),Ue.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Ue.getBool("WEBGL_PACK")})),Ue.registerFlag("WEBGL_PACK_CLIP",(function(){return Ue.getBool("WEBGL_PACK")})),Ue.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),Ue.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Ue.getBool("WEBGL_PACK")})),Ue.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Ue.getBool("WEBGL_PACK")})),Ue.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Ue.getBool("WEBGL_PACK")})),Ue.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Ue.getBool("WEBGL_PACK")})),Ue.registerFlag("WEBGL_PACK_REDUCE",(function(){return Ue.getBool("WEBGL_PACK")})),Ue.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Ue.getBool("WEBGL_PACK")})),Ue.registerFlag("WEBGL_CONV_IM2COL",(function(){return Ue.getBool("WEBGL_PACK")})),Ue.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Cte(Ue.getNumber("WEBGL_VERSION"))})),Ue.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Ate(Ue.getNumber("WEBGL_VERSION"))})),Ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Ue.getNumber("WEBGL_VERSION");return e===0?0:Ote(e)})),Ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Ue.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),Ue.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return Tte(Ue.getNumber("WEBGL_VERSION"))})),Ue.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Ue.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ue.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Ue.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Rte(Ue.getNumber("WEBGL_VERSION"))})),Ue.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return Dte(Ue.getNumber("WEBGL_VERSION"))})),Ue.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Ue.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),w4=_4;var kn=q({complex_:function(e,t){var n=B(e,"real","complex"),r=B(t,"imag","complex");return lt(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),$.runKernelFunc((function(a){return a.complex(n,r)}),{$real:n,$imag:r})}}),Jr=q({real_:function(e){var t=B(e,"input","real");return $.runKernelFunc((function(n){return n.real(t)}),{$input:t})}}),ja=q({imag_:function(e){var t=B(e,"input","imag");return $.runKernelFunc((function(n){return n.imag(t)}),{$input:t})}});function Pn(e,t,n){return Ko(e,t,$o(e,n),n)}function Ko(e,t,n,r){if(r==null&&(r=Uf(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ha(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){b4(t);var a=De(t),i=De(n);z(a===i,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+i}));for(var o=0;o<n.length;++o){var s=n[o],c=o!==n.length-1||s!==De(t.slice(o));z(n[o]===t[o]||!c,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return Ha(e)||Array.isArray(e)||(e=[e]),t=t||n,e=r!=="string"?g4(e,r,de().getBool("DEBUG")):pl(e,[],!0),$.makeTensor(e,t,r)}function we(e,t){if((Ha(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Ha(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ko(e,[],[],t)}function Zt(e,t){Rl(e);var n=$o(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ko(e,null,n,t)}function Bo(e,t,n){if(Rl(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=$o(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ko(e,t,r,n)}function t2(e,t,n){if(Rl(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=$o(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ko(e,t,r,n)}function sr(e,t,n){if(Rl(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=$o(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ko(e,t,r,n)}function Ite(e,t,n){if(Rl(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=$o(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ko(e,t,r,n)}function Pte(e,t,n){if(Rl(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=$o(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ko(e,t=t||r,r,n)}function Bte(e,t,n,r){return t===void 0&&(t=!0),$.makeVariable(e,t,n,r)}function Dl(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Dl(e,"float32"),r=_t(e,"float32");return kn(n,r)}var a=y4(De(e),t);return $.makeTensor(a,e,t)}function _t(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=_t(e,"float32"),r=_t(e,"float32");return kn(n,r)}var a=Wf(De(e),t);return $.makeTensor(a,e,t)}function Va(e,t,n){return $.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function Lte(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return $.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})}function Qp(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return _t([0],r);var a=Wf(Math.abs(Math.ceil((t-e)/n)),r);t<e&&n===1&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return Zt(a,r)}var A4=q({onesLike_:function(e){var t=B(e,"x","onesLike");if(t.dtype==="complex64"){var n=A4(Jr(t)),r=rt(ja(t));return kn(n,r)}return $.runKernelFunc((function(a){return a.onesLike(t)}),{$x:t},(function(a,i){return{$x:function(){return rt(a)}}}))}}),rt=q({zerosLike_:function(e){var t=B(e,"x","zerosLike");return $.runKernelFunc((function(n){return n.zerosLike(t)}),{$x:t},(function(n,r){return{$x:function(){return rt(n)}}}))}}),nn=q({concat_:function(e,t){t===void 0&&(t=0),z(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Zp(e,"tensors","concat");n[0].dtype==="complex64"&&n.forEach((function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")})),t=fn(t,n[0].shape)[0];var r=ml(n.map((function(s){return s.shape})),t);if(De(r)===0)return Pn([],r);if((n=n.filter((function(s){return s.size>0}))).length===1)return n[0];var a=n.map((function(s){return s.shape}));Nte(a,t);var i=n,o={axis:t};return $.runKernelFunc((function(s){return s.concat(n,t)}),i,(function(s){var c=a.map((function(f){return f[t]}));return n2(s,c,t).map((function(f){return function(){return f}}))}),"Concat",o)}}),Fte=q({concat1d_:function(e){return nn(e,0)}}),jte=q({concat2d_:function(e,t){return nn(e,t)}}),zte=q({concat3d_:function(e,t){return nn(e,t)}}),Ute=q({concat4d_:function(e,t){return nn(e,t)}}),n2=q({split_:function(e,t,n){n===void 0&&(n=0);var r,a=B(e,"x","split");return n=fn(n,a.shape)[0],typeof t=="number"?(z(a.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(a.shape[n]/t)):(z(a.shape[n]===t.reduce((function(i,o){return i+o})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),$.runKernelFunc((function(i){return i.split(a,r,n)}),{$x:a},(function(i){return{$x:function(){return nn(i,n)}}}))}});function Vu(e,t){return e(t={exports:{}},t.exports),t.exports}var Wte=Vu((function(e){(function(t,n,r){function a(s){var c,f=this,d=(c=4022871197,function(p){p=p.toString();for(var v=0;v<p.length;v++){var g=.02519603282416938*(c+=p.charCodeAt(v));g-=c=g>>>0,c=(g*=c)>>>0,c+=4294967296*(g-=c)}return 23283064365386963e-26*(c>>>0)});f.next=function(){var p=2091639*f.s0+23283064365386963e-26*f.c;return f.s0=f.s1,f.s1=f.s2,f.s2=p-(f.c=0|p)},f.c=1,f.s0=d(" "),f.s1=d(" "),f.s2=d(" "),f.s0-=d(s),f.s0<0&&(f.s0+=1),f.s1-=d(s),f.s1<0&&(f.s1+=1),f.s2-=d(s),f.s2<0&&(f.s2+=1),d=null}function i(s,c){return c.c=s.c,c.s0=s.s0,c.s1=s.s1,c.s2=s.s2,c}function o(s,c){var f=new a(s),d=c&&c.state,p=f.next;return p.int32=function(){return 4294967296*f.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}n&&n.exports?n.exports=o:this.alea=o})(0,e)})),Hte=Vu((function(e){(function(t,n,r){function a(s){var c=this,f="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var p=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^p^p>>>8},s===(0|s)?c.x=s:f+=s;for(var d=0;d<f.length+64;d++)c.x^=0|f.charCodeAt(d),c.next()}function i(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c}function o(s,c){var f=new a(s),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}n&&n.exports?n.exports=o:this.xor128=o})(0,e)})),qte=Vu((function(e){(function(t,n,r){function a(s){var c=this,f="";c.next=function(){var p=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^p^p<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,s===(0|s)?c.x=s:f+=s;for(var d=0;d<f.length+64;d++)c.x^=0|f.charCodeAt(d),d==f.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c.v=s.v,c.d=s.d,c}function o(s,c){var f=new a(s),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}n&&n.exports?n.exports=o:this.xorwow=o})(0,e)})),Vte=Vu((function(e){(function(t,n,r){function a(s){var c=this;c.next=function(){var f,d,p=c.x,v=c.i;return f=p[v],d=(f^=f>>>7)^f<<24,d^=(f=p[v+1&7])^f>>>10,d^=(f=p[v+3&7])^f>>>3,d^=(f=p[v+4&7])^f<<7,f=p[v+7&7],d^=(f^=f<<13)^f<<9,p[v]=d,c.i=v+1&7,d},(function(f,d){var p,v=[];if(d===(0|d))v[0]=d;else for(d=""+d,p=0;p<d.length;++p)v[7&p]=v[7&p]<<15^d.charCodeAt(p)+v[p+1&7]<<13;for(;v.length<8;)v.push(0);for(p=0;p<8&&v[p]===0;++p);for(p==8?v[7]=-1:v[p],f.x=v,f.i=0,p=256;p>0;--p)f.next()})(c,s)}function i(s,c){return c.x=s.x.slice(),c.i=s.i,c}function o(s,c){s==null&&(s=+new Date);var f=new a(s),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(d.x&&i(d,f),p.state=function(){return i(f,{})}),p}n&&n.exports?n.exports=o:this.xorshift7=o})(0,e)})),Gte=Vu((function(e){(function(t,n,r){function a(s){var c=this;c.next=function(){var f,d,p=c.w,v=c.X,g=c.i;return c.w=p=p+1640531527|0,d=v[g+34&127],f=v[g=g+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,d=v[g]=d^f,c.i=g,d+(p^p>>>16)|0},(function(f,d){var p,v,g,y,b,x=[],S=128;for(d===(0|d)?(v=d,d=null):(d+="\0",v=0,S=Math.max(S,d.length)),g=0,y=-32;y<S;++y)d&&(v^=d.charCodeAt((y+32)%d.length)),y===0&&(b=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,y>=0&&(b=b+1640531527|0,g=(p=x[127&y]^=v+b)==0?g+1:0);for(g>=128&&(x[127&(d&&d.length||0)]=-1),g=127,y=512;y>0;--y)v=x[g+34&127],p=x[g=g+1&127],v^=v<<13,p^=p<<17,v^=v>>>15,p^=p>>>12,x[g]=v^p;f.w=b,f.X=x,f.i=g})(c,s)}function i(s,c){return c.i=s.i,c.w=s.w,c.X=s.X.slice(),c}function o(s,c){s==null&&(s=+new Date);var f=new a(s),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(d.X&&i(d,f),p.state=function(){return i(f,{})}),p}n&&n.exports?n.exports=o:this.xor4096=o})(0,e)})),$te=Vu((function(e){(function(t,n,r){function a(s){var c=this,f="";c.next=function(){var p=c.b,v=c.c,g=c.d,y=c.a;return p=p<<25^p>>>7^v,v=v-g|0,g=g<<24^g>>>8^y,y=y-p|0,c.b=p=p<<20^p>>>12^v,c.c=v=v-g|0,c.d=g<<16^v>>>16^y,c.a=y-p|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,s===Math.floor(s)?(c.a=s/4294967296|0,c.b=0|s):f+=s;for(var d=0;d<f.length+20;d++)c.b^=0|f.charCodeAt(d),c.next()}function i(s,c){return c.a=s.a,c.b=s.b,c.c=s.c,c.d=s.d,c}function o(s,c){var f=new a(s),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}n&&n.exports?n.exports=o:this.tychei=o})(0,e)})),bu=Vu((function(e){(function(t,n){var r,a=this,i=256,o=6,s="random",c=n.pow(i,o),f=n.pow(2,52),d=2*f,p=i-1;function v(S,_,C){var A=[],O=b((function k(I,P){var L,F=[],Y=typeof I;if(P&&Y=="object")for(L in I)try{F.push(k(I[L],P-1))}catch{}return F.length?F:Y=="string"?I:I+"\0"})((_=_==1?{entropy:!0}:_||{}).entropy?[S,x(t)]:S??(function(){try{var k;return r&&(k=r.randomBytes)?k=k(i):(k=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(k)),x(k)}catch{var I=a.navigator,P=I&&I.plugins;return[+new Date,a,P,a.screen,x(t)]}})(),3),A),R=new g(A),M=function(){for(var k=R.g(o),I=c,P=0;k<f;)k=(k+P)*i,I*=i,P=R.g(1);for(;k>=d;)k/=2,I/=2,P>>>=1;return(k+P)/I};return M.int32=function(){return 0|R.g(4)},M.quick=function(){return R.g(4)/4294967296},M.double=M,b(x(R.S),t),(_.pass||C||function(k,I,P,L){return L&&(L.S&&y(L,R),k.state=function(){return y(R,{})}),P?(n[s]=k,I):k})(M,O,"global"in _?_.global:this==n,_.state)}function g(S){var _,C=S.length,A=this,O=0,R=A.i=A.j=0,M=A.S=[];for(C||(S=[C++]);O<i;)M[O]=O++;for(O=0;O<i;O++)M[O]=M[R=p&R+S[O%C]+(_=M[O])],M[R]=_;(A.g=function(k){for(var I,P=0,L=A.i,F=A.j,Y=A.S;k--;)I=Y[L=p&L+1],P=P*i+Y[p&(Y[L]=Y[F=p&F+I])+(Y[F]=I)];return A.i=L,A.j=F,P})(i)}function y(S,_){return _.i=S.i,_.j=S.j,_.S=S.S.slice(),_}function b(S,_){for(var C,A=S+"",O=0;O<A.length;)_[p&O]=p&(C^=19*_[p&O])+A.charCodeAt(O++);return x(_)}function x(S){return String.fromCharCode.apply(0,S)}if(n["seed"+s]=v,b(n.random(),t),e.exports){e.exports=v;try{r=require("crypto")}catch{}}})([],Math)}));bu.alea=Wte,bu.xor128=Hte,bu.xorwow=qte,bu.xorshift7=Vte,bu.xor4096=Gte,bu.tychei=$te;var nm=bu.alea,r2=(function(){function e(t,n,r,a,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=nm(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,a=!1;!a;){var i=void 0,o=void 0,s=void 0;do s=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(s>=1||s===0);var c=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*i*c,r=this.mean+this.stdDev*o*c,this.truncated&&!this.isValidTruncated(n)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e})(),Kte=(function(){function e(t,n,r,a){this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=nm(i.toString()),this.randn=new r2(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,a,i,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,n=1-.331*(t=a*a)*t,r=.5*t+this.d*(1-o+Math.log(o)),(i=this.randu())<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e})(),Xte=(function(){function e(t,n,r,a){var i=this;if(t===void 0&&(t=0),n===void 0&&(n=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+n+" <= 1 and dtype is not float");this.random=nm(a)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e})();function qe(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",b4(e),new cf(e,t,n)}function Yte(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var O4=q({batchToSpaceND_:function(e,t,n){var r=B(e,"x","batchToSpaceND"),a=t.reduce((function(i,o){return i*o}));return z(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),z(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),z(r.shape[0]%a==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a})),$.runKernelFunc((function(i){return i.batchToSpaceND(r,t,n)}),{$x:r},(function(i){return{$x:function(){return i.spaceToBatchND(t,n)}}}))}}),Zte=q({broadcastTo_:function(e,t){var n=B(e,"broadcastTo","x"),r=n.shape;if(t.some((function(c){return!(c>0)||c%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=n.reshape(a)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(n.shape[o]===t[o])i[o]=1;else if(n.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=i.map((function(c,f){return c>1?f:-1})).filter((function(c){return c>=0}));return s.length===0?n.clone():$.runKernelFunc((function(c){return c.tile(n,i)}),{input:n},(function(c){return{input:function(){return c.sum(s,!0)}}}))}}),Qte=q({cast_:function(e,t){var n=B(e,"x","cast");if(!qee(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return $.runKernelFunc((function(a){return a.cast(n,t)}),{x:n},(function(a){return{x:function(){return a.clone()}}}),"Cast",r)}}),Jte=q({clone_:function(e){var t=B(e,"x","clone",null);return $.runKernelFunc((function(){return $.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(n){return{$x:function(){return n.toFloat()}}}))}}),ene=q({cumsum_:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var a=B(e,"x","cumsum"),i=Qa([t|=0],a.rank),o=a;i!=null&&(o=a.transpose(i));var s=Ja(1,a.rank)[0],c=$.runKernelFunc((function(f){return f.cumsum(o,s,n,r)}),{permutedX:o},(function(f){return{permutedX:function(){return f.cumsum(t,n,!r)}}}));return i!=null&&(c=c.transpose(i)),c}}),tne=q({depthToSpace_:function(e,t,n){n===void 0&&(n="NHWC");var r=B(e,"x","depthToSpace"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];return z(a*t>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+t+`  for depthToSpace with input shape
      `+r.shape})),z(i*t>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+r.shape})),z(o%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape})),$.runKernelFunc((function(s){return s.depthToSpace(r,t,n)}),{$x:r})}}),Qr=q({expandDims_:function(e,t){t===void 0&&(t=0);var n=B(e,"x","expandDims",null);z(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(z(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),ya(n,r)}}),T4=q({eye_:function(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var a=qe([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=a.toTensor().as2D(e,t);if(n==null)return s;if(n.length===1)return Js(Qr(s,0),[n[0],1,1]);if(n.length===2)return Js(Qr(Qr(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Js(Qr(Qr(Qr(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),nne=q({multinomial_:function(e,t,n,r){r===void 0&&(r=!1);var a=B(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=o===1?a.as2D(1,-1):a,c=$.runKernelFunc((function(f){return f.multinomial(s,r,t,n)}),{logits2D:s});return o===1?c.as1D():c}}),ax=q({oneHot_:function(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a=B(e,"indices","oneHot","int32"),i=a.shape.concat([t]);return a=a.flatten(),$.runKernelFunc((function(o){return o.oneHot(a,t,n,r)}),{$indices:a},(function(o){return{$indices:function(){return _t(a.shape,"float32")}}})).reshape(i)}}),Gu=q({pad_:function(e,t,n){n===void 0&&(n=0);var r=B(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n};return $.runKernelFunc((function(i){return i.pad(r,t,n)}),{x:r},(function(i){var o=t.map((function(s){return s[0]}));return{x:function(){return i.slice(o,r.shape)}}}),"PadV2",a)}}),rne=q({pad1d_:function(e,t,n){return n===void 0&&(n=0),z(t.length===2,(function(){return"Invalid number of paddings. Must be length of 2."})),Gu(e,[t],n)}}),ane=q({pad2d_:function(e,t,n){return n===void 0&&(n=0),z(t.length===2&&t[0].length===2&&t[1].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Gu(e,t,n)}}),ine=q({pad3d_:function(e,t,n){return n===void 0&&(n=0),z(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Gu(e,t,n)}}),one=q({pad4d_:function(e,t,n){return n===void 0&&(n=0),z(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Gu(e,t,n)}}),une=q({rand_:function(e,t,n){var r=De(e),a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return $.makeTensor(a,e,n)}}),sne=q({randomNormal_:function(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new r2(t,n,r,!1,a),o=qe(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),lne=q({randomGamma_:function(e,t,n,r,a){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new Kte(t,n,r,a),o=qe(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),R4=q({randomUniform_:function(e,t,n,r,a){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var i=qe(e,r),o=new Xte(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),ya=q({reshape_:function(e,t){var n=B(e,"x","reshape",null);t=Wee(t,n.size),z(n.size===De(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return $.runKernelFunc((function(a){return a.reshape(n,t)}),{x:n},(function(a){return{x:function(){return a.reshape(n.shape)}}}),"Reshape",r)}}),D4=q({spaceToBatchND_:function(e,t,n){var r=B(e,"x","spaceToBatchND");return z(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),z(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),z(r.shape.reduce((function(a,i,o){return o>0&&o<=t.length?a&&(i+n[o-1][0]+n[o-1][1])%t[o-1]==0:a}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),$.runKernelFunc((function(a){return a.spaceToBatchND(r,t,n)}),{$x:r},(function(a){return{$x:function(){return a.batchToSpaceND(t,n)}}}))}}),M4=q({squeeze_:function(e,t){var n=B(e,"x","squeeze");return ya(n,xu(n.shape,t).newShape)}}),Pr=q({stack_:function(e,t){t===void 0&&(t=0);var n=Zp(e,"tensors","stack");if(z(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length===1)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,i=n[0].dtype;z(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(s){lt(a,s.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(s){z(i===s.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=n.map((function(s){return s.expandDims(t)}));return nn(o,t)}}),Js=q({tile_:function(e,t){var n=B(e,"x","tile",null);z(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],a={reps:t};return $.runKernelFunc((function(i,o){var s=i.tile(n,t);return o([n]),s}),{x:n},(function(i,o){var s=o[0];return{x:function(){var c=rt(s);if(s.rank===1)for(var f=0;f<t[0];++f)c=c.add(i.slice([f*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(f=0;f<t[0];++f)for(var d=0;d<t[1];++d)c=c.add(i.slice([f*s.shape[0],d*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(f=0;f<t[0];++f)for(d=0;d<t[1];++d)for(var p=0;p<t[2];++p)c=c.add(i.slice([f*s.shape[0],d*s.shape[1],p*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(f=0;f<t[0];++f)for(d=0;d<t[1];++d)for(p=0;p<t[2];++p)for(var v=0;v<t[3];++v)c=c.add(i.slice([f*s.shape[0],d*s.shape[1],p*s.shape[2],v*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return c}}}),"Tile",a,r)}}),cne=q({truncatedNormal_:function(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new r2(t,n,r,!0,a),o=qe(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),rn=q({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var n=B(e,"x","unstack");z(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return $.runKernelFunc((function(a){return a.unstack(n,t)}),{x:n},(function(a){return{x:function(){return Pr(a,t)}}}),"Unpack",r)}}),fne=function(e,t){return Oe(this,void 0,void 0,(function(){var n,r,a,i,o,s,c,f,d,p;return Te(this,(function(v){switch(v.label){case 0:return n=B(e,"x","setdiff1d"),r=B(t,"y","setdiff1d"),z(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),z(n.rank===1,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),z(r.rank===1,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return a=v.sent(),[4,r.data()];case 2:for(i=v.sent(),o=new Set(i),s=0,d=0;d<a.length;d++)o.has(a[d])||s++;for(c=new cf([s],n.dtype),f=new cf([s],"int32"),d=0,p=0;d<a.length;d++)o.has(a[d])||(c.values[p]=a[d],f.values[p]=d,p++);return[2,[c.toTensor(),f.toTensor()]]}}))}))};function Jp(e,t,n,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function ev(e,t,n){n===void 0&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function tv(e,t,n,r){r===void 0&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function k4(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function N4(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function I4(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],a=1,i=0;i<n.length-1;++i)a*=n[i];var o=e.shape,s=n.slice();s.pop();var c=1;for(i=r;i<e.rank;++i)c*=o[i],s.push(o[i]);var f=qa(e.shape).map((function(d){return d/c})).concat([1]).slice(0,r);return[s,a,c,f]}var P4=30;function Rb(e){return e<=P4?e:Q1(e,Math.floor(Math.sqrt(e)))}function dne(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(i+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != "+(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape["+(o+a)+"] ("+n.shape[o+a]+") != shape["+(o+a)+"] ("+e[o+a]+")")}function hne(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}dne(n,t,e)}function nv(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var c=a<1?1:a;return{sliceRank:a,numUpdates:De(t.shape)/c,sliceSize:o,strides:qa(n.slice(0,a)).concat([1]),outputSize:De(n)}}function pne(e,t,n){z(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),z(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(i){z(t[i]+n[i]<=e.shape[i],(function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+n[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"}))},a=0;a<e.rank;++a)r(a)}function aM(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function a2(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function vne(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),i=X1(0,i,s-1)}function mne(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),i=o>0?X1(0,i,s):X1(-1,i,s-1)}function B4(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function L4(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function gne(e,t){z(Z1(e),(function(){return"The f passed in variableGrads(f) must be a function"})),z(t==null||Array.isArray(t)&&t.every((function(d){return d instanceof vl})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=t!=null;if(!n)for(var r in t=[],$.registeredVariables)t.push($.registeredVariables[r]);var a=n?t.filter((function(d){return!d.trainable})):null,i=t.length;z((t=t.filter((function(d){return d.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."}));var o=$.gradients(e,t,null,!0),s=o.value,c=o.grads;z(c.some((function(d){return d!=null})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),z(s.rank===0,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var f={};return t.forEach((function(d,p){c[p]!=null&&(f[d.name]=c[p])})),a?.forEach((function(d){return f[d.name]=null})),{value:s,grads:f}}function rm(e){return $.customGrad(e)}var Yi=q({softmax_:function(e,t){t===void 0&&(t=-1);var n=B(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return $.runKernelFunc((function(r,a){var i=r.softmax(n,t);return a([i]),i}),{logits:n},(function(r,a){var i=a[0],o=r.mul(i);return{logits:function(){return o.sub(o.sum([t],!0).mul(i))}}}),"Softmax",{dim:t},[],[!0])}}),yne=q({logSoftmax_:function(e,t){t===void 0&&(t=-1);var n=B(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return rm((function(r,a){var i=r.max(t,!0),o=r.sub(i),s=o.toFloat().sub(o.exp().sum(t,!0).log());return a([s]),{value:s,gradFunc:function(c,f){var d=f[0].exp();return c.sub(c.sum(t,!0).mul(d))}}}))(n)}}),F4=(function(){function e(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,n){this.dataIdsCount++,this.data.set(t,n)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e})(),j4=(function(){function e(){}return e.prototype.time=function(t){return ae("time")},e.prototype.read=function(t){return ae("read")},e.prototype.readSync=function(t){return ae("readSync")},e.prototype.numDataIds=function(){return ae("numDataIds")},e.prototype.disposeData=function(t){return ae("disposeData")},e.prototype.write=function(t,n,r){return ae("write")},e.prototype.move=function(t,n,r,a){return ae("move")},e.prototype.memory=function(){return ae("memory")},e.prototype.floatPrecision=function(){return ae("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,n,r,a){return ae("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,ae("fusedBatchMatMul")},e.prototype.slice=function(t,n,r){return ae("slice")},e.prototype.stridedSlice=function(t,n,r,a){return ae("stridedSlice")},e.prototype.unstack=function(t,n){return ae("unstack")},e.prototype.reverse=function(t,n){return ae("reverse")},e.prototype.concat=function(t,n){return ae("concat")},e.prototype.neg=function(t){return ae("neg")},e.prototype.add=function(t,n){return ae("add")},e.prototype.addN=function(t){return ae("addN")},e.prototype.subtract=function(t,n){return ae("subtract")},e.prototype.multiply=function(t,n){return ae("multiply")},e.prototype.realDivide=function(t,n){return ae("realDivide")},e.prototype.floorDiv=function(t,n){return ae("floorDiv")},e.prototype.sum=function(t,n){return ae("sum")},e.prototype.prod=function(t,n){return ae("prod")},e.prototype.unsortedSegmentSum=function(t,n,r){return ae("unsortedSegmentSum")},e.prototype.argMin=function(t,n){return ae("argMin")},e.prototype.argMax=function(t,n){return ae("argMax")},e.prototype.equal=function(t,n){return ae("equal")},e.prototype.notEqual=function(t,n){return ae("notEqual")},e.prototype.less=function(t,n){return ae("less")},e.prototype.lessEqual=function(t,n){return ae("lessEqual")},e.prototype.greater=function(t,n){return ae("greater")},e.prototype.greaterEqual=function(t,n){return ae("greaterEqual")},e.prototype.logicalNot=function(t){return ae("logicalNot")},e.prototype.logicalAnd=function(t,n){return ae("logicalAnd")},e.prototype.logicalOr=function(t,n){return ae("logicalOr")},e.prototype.where=function(t){return ae("where")},e.prototype.select=function(t,n,r){return ae("select")},e.prototype.topk=function(t,n,r){return ae("topk")},e.prototype.min=function(t,n){return ae("min")},e.prototype.minimum=function(t,n){return ae("minimum")},e.prototype.mod=function(t,n){return ae("mod")},e.prototype.max=function(t,n){return ae("max")},e.prototype.maximum=function(t,n){return ae("maximum")},e.prototype.all=function(t,n){return ae("all")},e.prototype.any=function(t,n){return ae("any")},e.prototype.squaredDifference=function(t,n){return ae("squaredDifference")},e.prototype.ceil=function(t){return ae("ceil")},e.prototype.floor=function(t){return ae("floor")},e.prototype.round=function(t){return ae("round")},e.prototype.sign=function(t){return ae("sign")},e.prototype.isNaN=function(t){return ae("isNaN")},e.prototype.isInf=function(t){return ae("isInf")},e.prototype.isFinite=function(t){return ae("isFinite")},e.prototype.pow=function(t,n){return ae("pow")},e.prototype.exp=function(t){return ae("exp")},e.prototype.expm1=function(t){return ae("expm1")},e.prototype.softmax=function(t,n){return ae("softmax")},e.prototype.log=function(t){return ae("log")},e.prototype.log1p=function(t){return ae("log1p")},e.prototype.sqrt=function(t){return ae("sqrt")},e.prototype.rsqrt=function(t){return ae("rsqrt")},e.prototype.square=function(t){return ae("square")},e.prototype.reciprocal=function(t){return ae("reciprocal")},e.prototype.relu=function(t){return ae("relu")},e.prototype.relu6=function(t){return ae("relu6")},e.prototype.prelu=function(t,n){return ae("prelu")},e.prototype.elu=function(t){return ae("elu")},e.prototype.eluDer=function(t,n){return ae("eluDer")},e.prototype.selu=function(t){return ae("selu")},e.prototype.int=function(t){return ae("int")},e.prototype.clip=function(t,n,r){return ae("clip")},e.prototype.abs=function(t){return ae("abs")},e.prototype.complexAbs=function(t){return ae("complexAbs")},e.prototype.sigmoid=function(t){return ae("sigmoid")},e.prototype.softplus=function(t){return ae("softplus")},e.prototype.sin=function(t){return ae("sin")},e.prototype.cos=function(t){return ae("cos")},e.prototype.tan=function(t){return ae("tan")},e.prototype.asin=function(t){return ae("asin")},e.prototype.acos=function(t){return ae("acos")},e.prototype.atan=function(t){return ae("atan")},e.prototype.atan2=function(t,n){return ae("atan2")},e.prototype.sinh=function(t){return ae("sinh")},e.prototype.cosh=function(t){return ae("cosh")},e.prototype.tanh=function(t){return ae("tanh")},e.prototype.asinh=function(t){return ae("asinh")},e.prototype.acosh=function(t){return ae("acosh")},e.prototype.atanh=function(t){return ae("atanh")},e.prototype.erf=function(t){return ae("erf")},e.prototype.step=function(t,n){return ae("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,ae("fusedConv2d")},e.prototype.conv2d=function(t,n,r){return ae("conv2d")},e.prototype.conv2dDerInput=function(t,n,r){return ae("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,n,r){return ae("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,ae("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,n,r){return ae("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,n,r){return ae("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){return ae("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,n,r){return ae("conv3d")},e.prototype.conv3dDerInput=function(t,n,r){return ae("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,n,r){return ae("conv3dDerFilter")},e.prototype.maxPool=function(t,n){return ae("maxPool")},e.prototype.maxPoolBackprop=function(t,n,r,a){return ae("maxPoolBackprop")},e.prototype.avgPool=function(t,n){return ae("avgPool")},e.prototype.avgPoolBackprop=function(t,n,r){return ae("avgPoolBackprop")},e.prototype.avgPool3d=function(t,n){return ae("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,n,r){return ae("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,n){return ae("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,n,r,a){return ae("maxPool3dBackprop")},e.prototype.reshape=function(t,n){return ae("reshape")},e.prototype.cast=function(t,n){return ae("cast")},e.prototype.tile=function(t,n){return ae("tile")},e.prototype.pad=function(t,n,r){return ae("pad")},e.prototype.transpose=function(t,n){return ae("transpose")},e.prototype.gather=function(t,n,r){return ae("gather")},e.prototype.gatherND=function(t,n){return ae("gatherND")},e.prototype.scatterND=function(t,n,r){return ae("scatterND")},e.prototype.batchToSpaceND=function(t,n,r){return ae("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,n,r){return ae("spaceToBatchND")},e.prototype.resizeBilinear=function(t,n,r,a){return ae("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,n,r){return ae("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,n,r,a){return ae("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){return ae("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,n,r,a,i,o){return ae("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,n,r,a,i){return ae("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,n,r,a,i,o,s){return ae("LRNGrad")},e.prototype.multinomial=function(t,n,r,a){return ae("multinomial")},e.prototype.oneHot=function(t,n,r,a){return ae("oneHot")},e.prototype.cumsum=function(t,n,r,a){return ae("cumsum")},e.prototype.nonMaxSuppression=function(t,n,r,a,i){return ae("nonMaxSuppression")},e.prototype.fft=function(t){return ae("fft")},e.prototype.ifft=function(t){return ae("ifft")},e.prototype.complex=function(t,n){return ae("complex")},e.prototype.real=function(t){return ae("real")},e.prototype.imag=function(t){return ae("imag")},e.prototype.cropAndResize=function(t,n,r,a,i,o){return ae("cropAndResize")},e.prototype.depthToSpace=function(t,n,r){return ae("depthToSpace")},e.prototype.split=function(t,n,r){return ae("split")},e.prototype.sparseToDense=function(t,n,r,a){return ae("sparseToDense")},e.prototype.diag=function(t){return ae("diag")},e.prototype.fill=function(t,n,r){return ae("fill")},e.prototype.onesLike=function(t){return ae("onesLike")},e.prototype.zerosLike=function(t){return ae("zerosLike")},e.prototype.linspace=function(t,n,r){return ae("linspace")},e.prototype.dispose=function(){return ae("dispose")},e})();function ae(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function ko(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function an(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function Je(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];i==null&&(i=1);var o=t[t.length-a-1];if(o==null&&(o=1),i===1)n.unshift(o);else if(o===1)n.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function df(e,t,n,r,a,i,o){o===void 0&&(o="channelsLast");var s,c=iv(t),f=c[0],d=c[1];if(o==="channelsLast")s=[f,d,e[3],e[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);s=[f,d,e[1],e[1]]}return $u(e,s,n,r,a,i,!1,o)}function rv(e,t,n,r,a,i,o){o===void 0&&(o="NDHWC");var s,c,f=ix(t),d=f[0],p=f[1],v=f[2];if(o==="NDHWC")c="channelsLast",s=[d,p,v,e[4],e[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);c="channelsFirst",s=[d,p,v,e[1],e[1]]}return av(e,s,n,r,a,!1,c,i)}function $u(e,t,n,r,a,i,o,s){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var c=[-1,-1,-1,-1],f=c[0],d=c[1],p=c[2],v=c[3];if(s==="channelsLast")f=e[0],d=e[1],p=e[2],v=e[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);f=e[0],v=e[1],d=e[2],p=e[3]}var g,y=t[0],b=t[1],x=t[3],S=iv(n),_=S[0],C=S[1],A=iv(r),O=A[0],R=A[1],M=el(y,O),k=el(b,R),I=(function(Z,J,U,H,G,Q,oe,j){var K,ce,ve;if(typeof Z=="number"){K={top:Z,bottom:Z,left:Z,right:Z,type:Z===0?"VALID":"NUMBER"};var ye=(function(Se,he,ze,Ie,Ge){Ie==null&&(Ie=z4(Se,he,ze));var $e=Se[0],qt=Se[1],Fn=Hc(($e-he+2*Ie)/ze+1,Ge);z(Wt(Fn),(function(){return"The output # of rows ("+Fn+") must be an integer. Change the stride and/or zero pad parameters"}));var En=Hc((qt-he+2*Ie)/ze+1,Ge);return z(Wt(En),(function(){return"The output # of columns ("+En+") must be an integer. Change the stride and/or zero pad parameters"})),[Fn,En]})([J,U],Q,H,Z,j);ce=ye[0],ve=ye[1]}else if(Z==="same"){ce=Math.ceil(J/H),ve=Math.ceil(U/G);var be=Math.max(0,(ce-1)*H+Q-J),xe=Math.max(0,(ve-1)*G+oe-U),Pe=Math.floor(be/2),ne=be-Pe,Ae=Math.floor(xe/2);K={top:Pe,bottom:ne,left:Ae,right:xe-Ae,type:"SAME"}}else{if(Z!=="valid")throw Error("Unknown padding parameter: "+Z);K={top:0,bottom:0,left:0,right:0,type:"VALID"},ce=Math.ceil((J-Q+1)/H),ve=Math.ceil((U-oe+1)/G)}return{padInfo:K,outHeight:ce,outWidth:ve}})(a,d,p,_,C,M,k,i),P=I.padInfo,L=I.outHeight,F=I.outWidth,Y=o?x*v:x;return s==="channelsFirst"?g=[f,Y,L,F]:s==="channelsLast"&&(g=[f,L,F,Y]),{batchSize:f,dataFormat:s,inHeight:d,inWidth:p,inChannels:v,outHeight:L,outWidth:F,outChannels:Y,padInfo:P,strideHeight:_,strideWidth:C,filterHeight:y,filterWidth:b,effectiveFilterHeight:M,effectiveFilterWidth:k,dilationHeight:O,dilationWidth:R,inShape:e,outShape:g,filterShape:t}}function av(e,t,n,r,a,i,o,s){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],f=c[0],d=c[1],p=c[2],v=c[3],g=c[4];if(o==="channelsLast")f=e[0],d=e[1],p=e[2],v=e[3],g=e[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);f=e[0],g=e[1],d=e[2],p=e[3],v=e[4]}var y,b=t[0],x=t[1],S=t[2],_=t[4],C=ix(n),A=C[0],O=C[1],R=C[2],M=ix(r),k=M[0],I=M[1],P=M[2],L=el(b,k),F=el(x,I),Y=el(S,P),Z=(function(oe,j,K,ce,ve,ye,be,xe,Pe,ne,Ae){var Se,he,ze,Ie;if(typeof oe=="number"){Se={top:oe,bottom:oe,left:oe,right:oe,front:oe,back:oe,type:oe===0?"VALID":"NUMBER"};var Ge=(function(Vt,ca,Yu,ei,Kn,Ml){Kn==null&&(Kn=z4(Vt,ca,ei));var Zf=Vt[0],bm=Vt[1],xm=Vt[2],ti=Hc((Zf-ca+2*Kn)/ei+1,Ml);z(Wt(ti),(function(){return"The output # of depths ("+ti+") must be an integer. Change the stride and/or zero pad parameters"}));var _n=Hc((bm-ca+2*Kn)/ei+1,Ml);z(Wt(_n),(function(){return"The output # of rows ("+_n+") must be an integer. Change the stride and/or zero pad parameters"}));var Fr=Hc((xm-ca+2*Kn)/ei+1,Ml);return z(Wt(Fr),(function(){return"The output # of columns ("+Fr+") must be an integer. Change the stride and/or zero pad parameters"})),[ti,_n,Fr,Yu]})([j,K,ce,1],xe,1,ve,oe,Ae);he=Ge[0],ze=Ge[1],Ie=Ge[2]}else if(oe==="same"){he=Math.ceil(j/ve),ze=Math.ceil(K/ye),Ie=Math.ceil(ce/be);var $e=(he-1)*ve+xe-j,qt=(ze-1)*ye+Pe-K,Fn=(Ie-1)*be+ne-ce,En=Math.floor($e/2),Ta=$e-En,mr=Math.floor(qt/2),Ra=qt-mr,la=Math.floor(Fn/2);Se={top:mr,bottom:Ra,left:la,right:Fn-la,front:En,back:Ta,type:"SAME"}}else{if(oe!=="valid")throw Error("Unknown padding parameter: "+oe);Se={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},he=Math.ceil((j-xe+1)/ve),ze=Math.ceil((K-Pe+1)/ye),Ie=Math.ceil((ce-ne+1)/be)}return{padInfo:Se,outDepth:he,outHeight:ze,outWidth:Ie}})(a,d,p,v,A,O,R,L,F,Y,s),J=Z.padInfo,U=Z.outDepth,H=Z.outHeight,G=Z.outWidth,Q=i?_*g:_;return o==="channelsFirst"?y=[f,Q,U,H,G]:o==="channelsLast"&&(y=[f,U,H,G,Q]),{batchSize:f,dataFormat:o,inDepth:d,inHeight:p,inWidth:v,inChannels:g,outDepth:U,outHeight:H,outWidth:G,outChannels:Q,padInfo:J,strideDepth:A,strideHeight:O,strideWidth:R,filterDepth:b,filterHeight:x,filterWidth:S,effectiveFilterDepth:L,effectiveFilterHeight:F,effectiveFilterWidth:Y,dilationDepth:k,dilationHeight:I,dilationWidth:P,inShape:e,outShape:y,filterShape:t}}function z4(e,t,n,r){r===void 0&&(r=1);var a=el(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function iv(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function ix(e){return typeof e=="number"?[e,e,e]:e}function el(e,t){return t<=1?e:e+(e-1)*(t-1)}function Hc(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function gl(e){var t=iv(e),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function pr(e,t){return gl(e)||gl(t)}function i2(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function U4(e,t,n){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var r=_t(e.shape),a=e.toFloat(),i=n.complex(a,r);return r.dispose(),a.dispose(),i}if(!Vee(e.dtype,t))return $.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var o=n.real(e);return i=o.cast(t),o.dispose(),i}if(t==="int32")return n.int(e);if(t==="bool"){var s=we(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function ox(e,t){return $.makeTensorFromDataId(e.dataId,t,e.dtype)}function W4(e,t,n){var r=(t-e)/(n-1),a=Wf(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return Zt(a,"float32")}function ux(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function iM(e,t){return{real:e[2*t],imag:e[2*t+1]}}function bne(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function xne(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function wne(e,t,n){var r=(function(i,o,s){return(function(c,f,d){for(var p=0,v=c.length,g=0,y=!1;p<v;){var b=d(f,c[g=p+(v-p>>>1)]);b>0?p=g+1:(v=g,y=!b)}return y?p:-p-1})(i,o,s||Sne)})(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Sne(e,t){return e>t?1:e<t?-1:0}function o2(e,t,n,r,a){return H4(e,t,n,r,a,0).selectedIndices}function u2(e,t,n,r,a,i){var o=H4(e,t,n,r,a,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function H4(e,t,n,r,a,i,o,s){s===void 0&&(s=!1);for(var c=Array.from(t).map((function(A,O){return{score:A,boxIndex:O,suppressBeginIndex:0}})).filter((function(A){return A.score>a})).sort(oM),f=i>0?-.5/i:0,d=[],p=[];d.length<n&&c.length>0;){var v=c.pop(),g=v.score,y=v.boxIndex,b=v.suppressBeginIndex;if(g<a)break;for(var x=!1,S=d.length-1;S>=b;--S){var _=Ene(e,y,d[S]);if(_>=r){x=!0;break}if(v.score=v.score*_ne(r,f,_),v.score<=a)break}v.suppressBeginIndex=d.length,x||(v.score===g?(d.push(y),p.push(v.score)):v.score>a&&wne(c,v,oM))}var C=d.length;return s&&(d.fill(0,C),p.fill(0,C)),{selectedIndices:Zt(d,"int32"),selectedScores:Zt(p,"float32"),numValidOutputs:we(C,"int32")}}function Ene(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),f=Math.min(a[0],a[2]),d=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),v=Math.max(a[1],a[3]),g=(s-i)*(c-o),y=(p-f)*(v-d);if(g<=0||y<=0)return 0;var b=Math.max(i,f),x=Math.max(o,d),S=Math.min(s,p),_=Math.min(c,v),C=Math.max(S-b,0)*Math.max(_-x,0);return C/(g+y-C)}function _ne(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function oM(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function q4(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map((function(i){a[n]=i;var o=e.slice(r,a);return r[n]+=i,o}))}function V4(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=qe(n,e.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=i[s]%e.shape[s];var c=e.locToIndex(o);a.values[r]=e.values[c]}return a.toTensor()}function G4(e,t,n,r,a){for(var i=t[t.length-1],o=[e.length/i,i],s=o[0],c=o[1],f=lf(n,s*r),d=lf("int32",s*r),p=0;p<s;p++){for(var v=p*c,g=e.subarray(v,v+c),y=[],b=0;b<g.length;b++)y.push({value:g[b],index:b});y.sort((function(A,O){return O.value-A.value}));var x=p*r,S=f.subarray(x,x+r),_=d.subarray(x,x+r);for(b=0;b<r;b++)S[b]=y[b].value,_[b]=y[b].index}var C=t.slice();return C[C.length-1]=r,[Pn(f,C,n),Pn(d,C,"int32")]}function s2(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=qe(e,"int32"),i=qe([n.length,e.length],"int32");for(r=0;r<n.length;r++){var o=a.indexToLoc(n[r]),s=r*e.length;i.values.set(o,s)}return i.toTensor()}var Cne=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(a,i){return"T"+i}));var n=[];this.variableNames.forEach((function(a){n.push("float v"+a+" = get"+a+"AtOutCoords();")}));var r=this.variableNames.map((function(a){return"v"+a})).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},Ane=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(a,i){return"T"+i}));var n=[];this.variableNames.forEach((function(a){n.push("vec4 v"+a+" = get"+a+"AtOutCoords();")}));var r=this.variableNames.map((function(a){return"v"+a})).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},One=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,i=e.inSize,o=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var s=t==="max"?">":"<",c=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function $4(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(n){return e+"."+n}))}function lr(e,t){return t===1?[e]:$4(e,t)}function Hn(){var e,t,n,r,a,i,o,s,c,f;return de().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",f=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,f=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:c,defineRound:f}}function _u(e,t,n){n===void 0&&(n="index");var r=qa(t);return r.map((function(a,i){return"int "+e[i]+" = "+n+" / "+a+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+a:"index -= "+e[i]+" * "+a)+";"})).join("")}function l2(e){var t=qa(e).map((function(n){return n.toString()}));return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var K4=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function Tne(e,t,n,r){var a=[];e.forEach((function(g){var y=De(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?a.push("uniform float "+g.name+(y>1?"["+y+"]":"")+";"):(a.push("uniform sampler2D "+g.name+";"),a.push("uniform int offset"+g.name+";"))}));var i,o,s=a.join(`
`),c=e.map((function(g){return(function(y,b,x){x===void 0&&(x=!1);var S="";S+=x?X4(y):Hs(y);var _=y.shapeInfo.logicalShape,C=b.logicalShape;return _.length<=C.length&&(S+=x?(function(A,O){var R,M=A.name,k=M.charAt(0).toUpperCase()+M.slice(1),I="get"+k+"AtOutCoords",P=A.shapeInfo.logicalShape.length,L=O.logicalShape.length,F=ko(A.shapeInfo.logicalShape,O.logicalShape),Y=wt(L),Z=L-P,J=["x","y","z","w","u","v"];R=P===0?"":L<2&&F.length>=1?"coords = 0;":F.map((function(K){return"coords."+J[K+Z]+" = 0;"})).join(`
`);var U="";U=L<2&&P>0?"coords":A.shapeInfo.logicalShape.map((function(K,ce){return"coords."+J[ce+Z]})).join(", ");var H="return outputValue;",G=De(A.shapeInfo.logicalShape)===1,Q=De(O.logicalShape)===1;if(P!==1||G||Q){if(G&&!Q)H=L===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(F.length){var oe=P-2,j=P-1;F.indexOf(oe)>-1&&F.indexOf(j)>-1?H="return vec4(outputValue.x);":F.indexOf(oe)>-1?H="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":F.indexOf(j)>-1&&(H="return vec4(outputValue.xx, outputValue.zz);")}}else H=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+I+`() {
      `+Y+` coords = getOutputCoords();
      `+R+`
      vec4 outputValue = get`+k+"("+U+`);
      `+H+`
    }
  `})(y,b):(function(A,O){var R=A.name,M=R.charAt(0).toUpperCase()+R.slice(1),k="get"+M+"AtOutCoords",I=O.texShape,P=A.shapeInfo.texShape,L=A.shapeInfo.logicalShape.length,F=O.logicalShape.length;if(!A.shapeInfo.isUniform&&L===F&&A.shapeInfo.flatOffset==null&&yn(P,I))return`
      float `+k+`() {
        return sampleTexture(`+R+`, resultUV);
      }
    `;var Y,Z=wt(F),J=ko(A.shapeInfo.logicalShape,O.logicalShape),U=F-L,H=["x","y","z","w","u","v"];Y=L===0?"":F<2&&J.length>=1?"coords = 0;":J.map((function(Q){return"coords."+H[Q+U]+" = 0;"})).join(`
`);var G="";return G=F<2&&L>0?"coords":A.shapeInfo.logicalShape.map((function(Q,oe){return"coords."+H[oe+U]})).join(", "),`
    float `+k+`() {
      `+Z+` coords = getOutputCoords();
      `+Y+`
      return get`+M+"("+G+`);
    }
  `})(y,b)),S})(g,t,r)})).join(`
`),f=t.texShape,d=Hn(),p=(function(g){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+g.texture2D+`(textureSampler, uv).r;
    }
  `})(d),v=(function(g){return g.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+g.varyingFs+` vec2 resultUV;
    `+g.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+g.defineSpecialNaN+`
    `+g.defineSpecialInf+`
    `+g.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Rne+`
    `+Dne+`
    `+Mne+`
  `})(d);return t.isPacked?(i=(function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(A,O){var R=[Math.ceil(O[0]/2),Math.ceil(O[1]/2)];return R[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+R[1]+`.0);
      }
    `:R[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+R[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+R[0]+", "+R[1]+`));
      return 2 * (resTexRC.x * `+R[1]+` + resTexRC.y);
    }
  `})(0,y);case 2:return(function(A,O){var R=[Math.ceil(O[0]/2),Math.ceil(O[1]/2)];if(yn(A,O))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+R[0]+", "+R[1]+`));
      }
    `;var M=Math.ceil(A[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+R[0]+", "+R[1]+`));

      int index = resTexRC.x * `+R[1]+` + resTexRC.y;
      int r = 2 * (index / `+M+`);
      int c = imod(index, `+M+`) * 2;

      return ivec2(r, c);
    }
  `})(g,y);case 3:return b=g,x=y,S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)],_=Math.ceil(b[2]/2),C=_*Math.ceil(b[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      int b = index / `+C+`;
      index -= b * `+C+`;

      int r = 2 * (index / `+_+`);
      int c = imod(index, `+_+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return(function(A,O){for(var R=[Math.ceil(O[0]/2),Math.ceil(O[1]/2)],M=Math.ceil(A[A.length-1]/2),k=M*Math.ceil(A[A.length-2]/2),I=k,P="",L="b, r, c",F=2;F<A.length-1;F++)I*=A[A.length-F-1],P=`
      int b`+F+" = index / "+I+`;
      index -= b`+F+" * "+I+`;
    `+P,L="b"+F+", "+L;return`
    ivec`+A.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+R[0]+", "+R[1]+`));
      int index = resTexRC.x * `+R[1]+` + resTexRC.y;

      `+P+`

      int b = index / `+k+`;
      index -= b * `+k+`;

      int r = 2 * (index / `+M+`);
      int c = imod(index, `+M+`) * 2;

      return ivec`+A.length+"("+L+`);
    }
  `})(g,y)}var b,x,S,_,C})(t.logicalShape,f),o=(function(g){return`
    void setOutput(vec4 val) {
      `+g.output+` = val;
    }
  `})(d)):(i=(function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(S,_){return _[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+_[1]+`.0);
      }
    `:_[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+_[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      return resTexRC.x * `+_[1]+` + resTexRC.y;
    }
  `})(0,y);case 2:return(function(S,_){return yn(S,_)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+_[0]+", "+_[1]+`));
      }
    `:S[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+_[0]+", "+_[1]+`));
        int index = resTexRC.x * `+_[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:S[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+_[0]+", "+_[1]+`));
        int index = resTexRC.x * `+_[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      int r = index / `+S[1]+`;
      int c = index - r * `+S[1]+`;
      return ivec2(r, c);
    }
  `})(g,y);case 3:return b=y,x=_u(["r","c","d"],g),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;
      `+x+`
      return ivec3(r, c, d);
    }
  `;case 4:return(function(S,_){var C=_u(["r","c","d","d2"],S);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      `+C+`
      return ivec4(r, c, d, d2);
    }
  `})(g,y);case 5:return(function(S,_){var C=_u(["r","c","d","d2","d3"],S);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+_[0]+`,
                             `+_[1]+`));

      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+C+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `})(g,y);case 6:return(function(S,_){var C=_u(["r","c","d","d2","d3","d4"],S);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+C+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `})(g,y);default:throw new Error(g.length+"-D output sampling is not yet supported")}var b,x})(t.logicalShape,f),o=(function(g){return`
    void setOutput(float val) {
      `+g.output+` = vec4(val, 0, 0, 0);
    }
  `})(d)),r&&(v+=kne),[v,p,o,s,i,c,n].join(`
`)}function Hs(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return(function(n){var r=n.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var i=n.shapeInfo.texShape,o=i[0],s=i[1];if(o===1&&s===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=n.shapeInfo.texShape,f=c[0],d=c[1],p=pu(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+f+", "+d+", "+p+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(e);case 1:return(function(n){var r=n.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Fs(n)+`
      }
    `;var i=n.shapeInfo.texShape,o=i[0],s=i[1];if(s===1&&o===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=pu(r);return s===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+s+", index + "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(e);case 2:return(function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n.shapeInfo.texShape;if(o!=null&&yn(r,o)){var s=o[0],c=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+s+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var f=xu(r),d=f.newShape,p=f.keptDims,v=d;if(v.length<r.length){var g=qs(n,v);return`
      `+Hs(g)+`
      float `+i+`(int row, int col) {
        return `+i+"("+Vs(["row","col"],p)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Fs(n)+`
      }
    `;var y=o[0],b=o[1],x=pu(a);return b===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+x+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:y===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+x+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+b+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+x+`;
    vec2 uv = uvFromFlat(`+y+", "+b+`, index);
    return sampleTexture(`+a+`, uv);
  }
`})(e);case 3:return(function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[1]*r[2],s=r[2],c=xu(r),f=c.newShape,d=c.keptDims,p=f;if(p.length<r.length){var v=qs(n,p);return`
        `+Hs(v)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+Vs(["row","col","depth"],d)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+s+`, 1)));
        `+Fs(n)+`
      }
    `;var g=n.shapeInfo.texShape,y=g[0],b=g[1],x=n.shapeInfo.flatOffset;if(b===o&&x==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+b+".0, "+y+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(b===s&&x==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+b+".0, "+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var S=pu(a);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+s+" + depth + "+S+`;
        vec2 uv = uvFromFlat(`+y+", "+b+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `})(e);case 4:return(function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[3],s=r[2]*o,c=r[1]*s,f=xu(r),d=f.newShape,p=f.keptDims;if(d.length<r.length){var v=qs(n,d);return`
      `+Hs(v)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+Vs(["row","col","depth","depth2"],p)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+s+", "+o+`, 1)));
        `+Fs(n)+`
      }
    `;var g=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,b=y[0],x=y[1];if(x===c&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+x+".0, "+b+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(x===o&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+x+".0, "+b+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var S=pu(a);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+s+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+b+", "+x+", index + "+S+`);
      return sampleTexture(`+a+`, uv);
    }
  `})(e);case 5:return(function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[4],s=r[3]*o,c=r[2]*s,f=r[1]*c,d=xu(r),p=d.newShape,v=d.keptDims;if(p.length<r.length){var g=qs(n,p);return`
      `+Hs(g)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+Vs(["row","col","depth","depth2","depth3"],v)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+c+", "+s+", "+o+`)) +
          depth3;
        `+Fs(n)+`
      }
    `;var y=n.shapeInfo.flatOffset,b=n.shapeInfo.texShape,x=b[0],S=b[1];if(S===f&&y==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(S===o&&y==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var _=pu(a);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+c+" + depth * "+s+` +
          depth2 * `+o+" + depth3 + "+_+`;
      vec2 uv = uvFromFlat(`+x+", "+S+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `})(e);case 6:return(function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=xu(r),s=o.newShape,c=o.keptDims;if(s.length<r.length){var f=qs(n,s);return`
      `+Hs(f)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+Vs(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var d=r[5],p=r[4]*d,v=r[3]*p,g=r[2]*v,y=r[1]*g;if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+y+", "+g+", "+v+", "+p+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+Fs(n)+`
      }
    `;var b=n.shapeInfo.flatOffset,x=n.shapeInfo.texShape,S=x[0],_=x[1];if(_===y&&b==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+g+", "+v+", "+p+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+S+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(_===d&&b==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+S+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var C=pu(a);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+y+" + col * "+g+" + depth * "+v+` +
          depth2 * `+p+" + depth3 * "+d+" + depth4 + "+C+`;
      vec2 uv = uvFromFlat(`+S+", "+_+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `})(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function X4(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Hn(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return(function(a){var i=a.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=a.shapeInfo.texShape,c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],f=Hn();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+f.texture2D+"("+i+`, uv);
    }
  `})(e);case 2:return(function(a){var i=a.shapeInfo.logicalShape,o=a.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),c=a.shapeInfo.texShape,f=c[0],d=c[1],p=Hn();if(c!=null&&yn(i,c))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+f+`.0);

        return `+p.texture2D+"("+o+`, uv);
      }
    `;var v=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],g=Math.ceil(i[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+g+", "+v[0]+", "+v[1]+`, row, col);
      return `+p.texture2D+"("+o+`, uv);
    }
  `})(e);case 3:return(function(a){var i=a.shapeInfo.logicalShape,o=a.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),c=a.shapeInfo.texShape,f=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var d=i.slice(1),p=qs(a,d);return`
        `+X4(p)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+Vs(["b","row","col"],[1,2])+`);
        }
      `}var v=f[0],g=f[1],y=Math.ceil(i[2]/2),b=y*Math.ceil(i[1]/2),x=Hn();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+v+", "+g+", "+b+", "+y+`, b, row, col);
      return `+x.texture2D+"("+o+`, uv);
    }
  `})(e);default:return(function(a){for(var i=a.shapeInfo.logicalShape,o=i.length,s=a.name,c="get"+s.charAt(0).toUpperCase()+s.slice(1),f=a.shapeInfo.texShape,d=[Math.ceil(f[0]/2),Math.ceil(f[1]/2)],p=d[0],v=d[1],g=Math.ceil(i[o-1]/2),y=g*Math.ceil(i[o-2]/2),b="int b, int row, int col",x="b * "+y+" + (row / 2) * "+g+" + (col / 2)",S=2;S<o-1;S++)b="int b"+S+", "+b,y*=i[o-S-1],x="b"+S+" * "+y+" + "+x;var _=Hn();return`
    vec4 `+c+"("+b+`) {
      int index = `+x+`;
      int texR = index / `+v+`;
      int texC = index - texR * `+v+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+", "+p+`);
      return `+_.texture2D+"("+s+`, uv);
    }
  `})(e)}}var Rne=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Dne=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Mne=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,kne=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function pu(e){return"offset"+e}function Fs(e){var t=e.name,n=De(e.shapeInfo.logicalShape);return n<2?"return "+t+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function wt(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function qs(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Vs(e,t){return t.map((function(n){return e[n]})).join(", ")}var Nne=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,z(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,s,c=this.outputShape,f=c.length,d=wt(f),p=lr("coords",f);if(i===1){var v=wt(s=f+1);o=`
        `+v+" sourceLocR = "+v+"("+p.join()+`, 0);
        ++`+p[f-1]+`;
        `+v+" sourceLocG = "+v+"("+p.join()+`, 0);
        ++`+p[f-2]+`;
        `+v+" sourceLocA = "+v+"("+p.join()+`, 0);
        --`+p[f-1]+`;
        `+v+" sourceLocB = "+v+"("+p.join()+`, 0);
        --`+p[f-2]+";"}else s=f,o=`
        `+d+` sourceLocR = coords;
        ++`+p[f-1]+`;
        `+d+` sourceLocG = coords;
        ++`+p[f-2]+`;
        `+d+` sourceLocA = coords;
        --`+p[f-1]+`;
        `+d+` sourceLocB = coords;
        --`+p[f-2]+";";var g=["x","y","z","w","u","v"].slice(0,s),y="."+g[s-1],b=g.map((function(k){return"int "+k})),x=lr("sourceLocR",s-1).concat("inIdx.r"),S=lr("sourceLocG",s-1).concat("inIdx.g"),_=lr("sourceLocB",s-1).concat("inIdx.b"),C=lr("sourceLocA",s-1).concat("inIdx.a"),A=n==="max"?"greaterThan":"lessThan",O=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+x.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+C.join()+")));",R=`vec4(
            getAChannel(`+x.join()+`),
            hasNextCol ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+C.join()+") : 0.)",M=r?"":`
      float getBestIndicesAChannel(`+b.join()+`) {
        return getChannel(getBestIndicesA(`+g.join()+`),
                                          vec2(`+g.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+b.join()+`) {
        return getChannel(getA(`+g.join()+`),
                               vec2(`+g.slice(-2).join()+`));
      }
      `+M+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+p[f-1]+" < "+(c[f-1]-1)+`;
        bool hasNextRow = `+p[f-2]+" < "+(c[f-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+y+", sourceLocG"+y+`,
          sourceLocB`+y+", sourceLocA"+y+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+R+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+O+`
          vec4 candidate = `+R+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+A+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},Ine=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=s-1-e.padInfo.top,d=c-1-e.padInfo.left,p=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(`+f+", "+d+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},Pne=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,v=e.effectiveFilterWidth,g=d-1-e.padInfo.front,y=p-1-e.padInfo.top,b=v-1-e.padInfo.left,x=1/(t*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+g+", "+y+", "+b+`);
      const float avgMultiplier = float(`+x+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+p+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+v+`;
                wC += `+f+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Bne=function(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Je(e,t),Je(e,n);var o="0.0";r!=null&&(Je(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";a!=null&&(Je(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},Lne=function(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Je(e,t),Je(e,n);var o="vec4(0.0)";r!=null&&(Je(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";a!=null&&(Je(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},Fne="return areal * breal - aimag * bimag;",jne="return areal * bimag + aimag * breal;",uM=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Je(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Db="return a + b;",Mb="return a - b;",sM="return a * b;",Y4="return (a < 0.) ? b * a : a;",Lt=function(e,t,n){this.variableNames=["A","B"],this.outputShape=Je(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},Z4=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,wi=function(e,t,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Je(t,n);var a=this.outputShape.length,i="";if(r)if(a===0||De(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+wt(a)+` coords = getOutputCoords();
        `,a===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=lr("coords",a);i+=`
            bool nextRowOutOfBounds =
              (`+o[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+o[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},zne=(function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,t),a.gl.uniform1f(r.maxLoc,n)}},e})(),Une=(function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,t),a.gl.uniform1f(r.maxLoc,n)}},e})(),Wne=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},Hne=function(e){this.outputShape=[],this.outputShape=ml(e,1),this.variableNames=e.map((function(s,c){return"T"+c}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var a=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+a+"));")}var i=t.length,o=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},qne=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ml(e,t);var n=this.outputShape,r=n.length,a=wt(r),i=lr("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(x,S){return"T"+S}));var s=new Array(e.length-1);s[0]=e[0][t];for(var c=1;c<s.length;c++)s[c]=s[c-1]+e[c][t];var f=o[t],d=o.slice(-2),p=o.join(),v="if ("+f+" < "+s[0]+`) {
        return getChannel(
            getT0(`+p+"), vec2("+d.join()+`));
        }`;for(c=1;c<s.length;c++){var g=s[c-1];v+=`
        if (`+f+" < "+s[c]+"  && "+f+" >= "+s[c-1]+`) {
          return getChannel(
            getT`+c+"("+Bh(o,f,g)+`),
            vec2(`+Bh(d,f,g)+`));
        }`}var y=s.length,b=s[s.length-1];v+=`
        return getChannel(
          getT`+y+"("+Bh(o,f,b)+`),
          vec2(`+Bh(d,f,b)+"));",this.userCode=`
      float getValue(`+o.map((function(x){return"int "+x}))+`) {
        `+v+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+n[r-2]+` &&
            `+i[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function Bh(e,t,n){var r=e.indexOf(t);return e.map((function(a,i){return i===r?a+" - "+n:a})).join()}var Vne=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+a+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Gne=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,c=i?1:2,f=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+f+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},$ne=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+a+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Kne=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,c=n-1-e.padInfo.top,f=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+c+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Xne=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+a+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},Yne=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},lM=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,s=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,v=4*Math.floor(e.inChannels/4),g=e.inChannels%4,y=e.dataFormat==="channelsLast",b=y?1:2,x=y?2:3,S=y?3:1,_="",C="";n&&(_=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,C="result = activation(result);");var A=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+_+`

      const ivec2 strides = ivec2(`+o+", "+s+`);
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+S+`];

        ivec2 xRCCorner =
            ivec2(coords[`+b+"], coords["+x+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+v+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+y+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(g===1)+`) {

              if (`+y+`) {
                dotProd +=
                    getX(batch, xR, xC, `+v+`) *
                    getW(wR, wC, `+v+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+v+`, xR, xC) *
                    getW(wR, wC, `+v+`, d2);
              }

            } else if (`+(g===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2)
              );

              if (`+y+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(g===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2),
                getW(wR, wC, `+v+` + 2, d2)
              );

              if (`+y+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1),
                  getX(batch, xR, xC, `+v+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC),
                  getX(batch, `+v+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+A+`
        `+C+`
        setOutput(result);
      }
    `},Zne=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterDepth,p=e.filterHeight,v=e.filterWidth,g=4*Math.floor(e.inChannels/4),y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+t+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+v+`; wC++) {
              int xC = xCCorner + wC * `+f+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+g+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(y===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+g+`) *
                  getW(wF, wR, wC, `+g+`, d2);
              } else if (`+(y===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(y===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1),
                  getX(batch, xF, xR, xC, `+g+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2),
                  getW(wF, wR, wC, `+g+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},cM=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,c=e.strideHeight,f=e.strideWidth,d=e.dilationHeight,p=e.dilationWidth,v=e.filterHeight,g=e.filterWidth,y=e.outChannels/e.inChannels,b="",x="";n&&(b=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,x="result = activation(result);");var S=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+y+`;
        int q = d2 - d1 * `+y+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+v+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC++) {
            int xC = xCCorner + wC * `+p+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+S+`
        `+x+`
        setOutput(result);
      }
    `},fM=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,c=e.strideHeight,f=e.strideWidth,d=e.dilationHeight,p=e.dilationWidth,v=e.filterHeight,g=e.filterWidth,y=g,b="int xR; int xC; int xCOffset;",x=0;x<v;x++)for(var S=0;S<g;S++)b+=`
          vec4 xTexelR`+x+"C"+2*S+` = vec4(0.);
          vec4 wR`+x+"C"+S+` = vec4(0.);
          vec4 xR`+x+"C"+S+" = vec4(0.);";for(x=0;x<v;x++)for(var _=0;_<y;_++){if(b+=`
          xR = xRCorner + `+x*d+`;
          xC = xCCorner + `+(S=2*_)*p+`;
        `,f===1){if(S<g&&(b+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+x+"C"+S+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+x+"C"+S+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+x+"C"+S+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+x+"C"+S+" = vec4(previous.zw, xTexelR"+x+"C"+S+`.xy);
                } else {
                  xR`+x+"C"+S+" = vec4(0, 0, xTexelR"+x+"C"+S+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+x+"C"+S+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+x+"C"+S+` = vec4(0.);
                }

                xR`+x+"C"+S+" = xTexelR"+x+"C"+S+`;
              `,S+1<g)){var C=s%2==0?v4(p):p;p%2==0&&s%2==1||p%2!=0&&s%2!=1?(b+=`
                  xCOffset = xC + `+s%2+" + "+C+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+x+"C"+(S+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,p>1&&(b+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+x+"C"+S+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+x+"C"+S+` = vec4(0.);
                    }
                  `),b+=`
                  xR`+x+"C"+(S+1)+` = vec4(
                    xTexelR`+x+"C"+S+".zw, xTexelR"+x+"C"+(S+2)+`.xy);
                `):b+=`
                  xCOffset = xC + `+C+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+x+"C"+(S+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+x+"C"+(S+1)+" = xTexelR"+x+"C"+(S+2)+`;
                `}}else S<g&&(b+=`
              if(xR >= 0 && xR < `+a+`) {
            `,s%2==1?(b+=`
                xCOffset = xC + 1 - `+f+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+x+"C"+S+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+x+"C"+S+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+x+"C"+(S+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+x+"C"+(S+2)+` = vec4(0.);
                }

                xR`+x+"C"+S+` = vec4(
                  xTexelR`+x+"C"+S+".zw, xTexelR"+x+"C"+(S+2)+`.zw);
              `,S+1<g&&(b+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+f+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+x+"C"+(S+1)+" = vec4(xTexelR"+x+"C"+(S+2)+`.xy, final.xy);
                `)):(b+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+x+"C"+S+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+x+"C"+S+` = vec4(0.);
                }

                xCOffset = xC + `+f+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+x+"C"+(S+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+x+"C"+(S+2)+` = vec4(0.);
                }

                xR`+x+"C"+S+` = vec4(
                  xTexelR`+x+"C"+S+".xy, xTexelR"+x+"C"+(S+2)+`.xy);
              `,S+1<g&&(b+=`
                  xR`+x+"C"+(S+1)+` = vec4(
                    xTexelR`+x+"C"+S+".zw, xTexelR"+x+"C"+(S+2)+`.zw);
                `)),b+="}");S<g&&(b+=`
            vec4 wTexelR`+x+"C"+S+" = getW("+x+", "+S+`, d1, q);
            wR`+x+"C"+S+" = vec4(wTexelR"+x+"C"+S+".xz, wTexelR"+x+"C"+S+`.xz);
          `,S+1<g&&(b+=`
              vec4 wTexelR`+x+"C"+(S+1)+" = getW("+x+", "+(S+1)+`, d1, q);
              wR`+x+"C"+(S+1)+` =
                vec4(wTexelR`+x+"C"+(S+1)+".xz, wTexelR"+x+"C"+(S+1)+".xz);"))}for(x=0;x<v;x++)for(S=0;S<g;S++)b+="dotProd += xR"+x+"C"+S+" * wR"+x+"C"+S+";";var A="",O="";n&&(A=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,O="result = activation(result);");var R=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+A+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+b+`

        vec4 result = dotProd;
        `+R+`
        `+O+`
        setOutput(result);
      }
    `},Qne=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],s=e[2],c=e[3],f=t[0],d=n[0],p=n[1];this.outputShape=[f,d,p,c];var v=r==="bilinear"?1:0,g=[o-1+".0",s-1+".0"],y=g[0],b=g[1],x=d>1?[""+(o-1)/(d-1),"(y2-y1) * height_ratio","y1*"+y+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+y],S=x[0],_=x[1],C=x[2],A=p>1?[""+(s-1)/(p-1),"(x2-x1) * width_ratio","x1*"+b+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+b],O=A[0],R=A[1],M=A[2];this.userCode=`
      const float height_ratio = float(`+S+`);
      const float width_ratio = float(`+O+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+_+`;
        float width_scale = `+R+`;

        float in_y = `+C+`;
        if( in_y < 0.0 || in_y > `+y+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+M+`;
        if( in_x < 0.0 || in_x > `+b+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+v+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},Jne=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],i=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+wt(r)+` coords = getOutputCoords();
        int end = `+dM(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+dM(r,"coords")+` = idx;
          val += getX(`+(function(o,s){if(o===1)return""+s;if(o===2)return s+".x, "+s+".y";if(o===3)return s+".x, "+s+".y, "+s+".z";if(o===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")})(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function dM(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var ere=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ff.DENSE;var t=Wc(e),n=Hn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+_u(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},tre=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ff.DENSE;var t=Wc(e),n=Hn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+_u(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},nre=(function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e})(),rre=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},are=function(e){this.variableNames=["A"],this.outTexUsage=Mr.DOWNLOAD;var t=Hn();this.outputShape=e,this.userCode=`
      `+K4+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},ire=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Mr.DOWNLOAD;var t=Hn();this.outputShape=e,this.userCode=`
      `+K4+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},ore=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=Hn(),a=t[0],i=t[1];this.outputShape=e;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+l2(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},ure=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Hn(),a=t[0],i=t[1];this.outputShape=e;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var f=0;f<=1;f++){var d=2*c+f;o+=`
          localCoords = coords;
          if(localCoords[2] + `+f+" < "+e[2]+`) {
            localCoords[2] += `+f+`;
            if(localCoords[1] + `+c+" < "+e[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+l2(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+s+`;
      }
    `},sre="return real * expR - imag * expI;",lre="return real * expI + imag * expR;",hM=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},cre=(function(){function e(t,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,a){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(n.valueLoc,t)}},e})(),fre=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=wt(this.rank),i=(function(o,s){var c=o.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var f=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],p=0;p<o.length;p++)p===s?d.push("int(getIndices("+f[p]+"))"):d.push(""+f[p]);return d.join()})(e,n);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},dre=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=wt(t.length),a=wt(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function hre(e,t){var n=Hn();return ste(e,t,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function pre(e,t){return hte(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function vre(e,t){return pte(e,t,new Uint16Array([0,1,2,2,1,3]))}function qf(e,t,n,r,a,i,o){mte(n,r);var s=vte(e,t),c=e.TEXTURE_2D;return Me(e,t,(function(){return e.bindTexture(c,s)})),Me(e,t,(function(){return e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),Me(e,t,(function(){return e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),Me(e,t,(function(){return e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)})),Me(e,t,(function(){return e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)})),Me(e,t,(function(){return e.texImage2D(c,0,a,n,r,0,i,o,null)})),Me(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function mre(e,t,n,r,a){var i=tm(n,r);return qf(e,t,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function gre(e,t,n,r,a){var i=tm(n,r);return qf(e,t,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function yre(e,t,n,r,a){var i=tm(n,r);return qf(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function bre(e,t,n,r,a){var i=Hf(n,r);return qf(e,t,i[0],i[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function xre(e,t,n,r,a){var i=Hf(n,r);return qf(e,t,i[0],i[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function wre(e,t,n,r){return Me(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),eM(e,t,n,"clipSpacePos",r,3,20,0)&&eM(e,t,n,"uv",r,2,20,12)}function Sre(e,t,n,r,a,i,o){var s,c,f;Me(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),i instanceof Uint8Array?(s=new Uint8Array(r*a*4),c=e.UNSIGNED_BYTE,f=e.RGBA):(s=new Float32Array(r*a*4),c=e.FLOAT,f=o.internalFormatPackedFloat),s.set(i),Me(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,f,r,a,0,e.RGBA,c,s)})),Me(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function Ere(e,t,n,r){Me(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?Me(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):Me(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),Me(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function _re(e,t,n,r,a){var i=e.createBuffer();Me(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)}));var o=16*n*r;return Me(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),Me(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),Me(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),i}function Cre(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function Are(e,t,n,r,a){var i=tm(n,r),o=i[0],s=i[1],c=new Uint8Array(n*r*4);return Me(e,t,(function(){return e.readPixels(0,0,o,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}function Ore(e,t,n,r,a,i,o,s){var c=e,f=new Float32Array((function(d,p){var v=Hf(d,p);return v[0]*v[1]*4})(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,f),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),f}function Tre(e,t,n,r){var a=new Float32Array(n*r*4);return Me(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)})),a}var Rre=(function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=de().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,rte(n,t)):this.gl=Za(n);var r="WEBGL_color_buffer_float";if(de().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=kh(this.gl,this.debug,"OES_texture_float"),ta(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=kh(this.gl,this.debug,"OES_texture_half_float");else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ta(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=kh(this.gl,this.debug,"EXT_color_buffer_half_float");else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ta(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!ta(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=pre(this.gl,this.debug),this.indexBuffer=vre(this.gl,this.debug),this.framebuffer=gte(this.gl,this.debug),this.textureConfig=Jw(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return de().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;Me(n,this.debug,(function(){return n.finish()})),Me(n,this.debug,(function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)})),Me(n,this.debug,(function(){return n.deleteFramebuffer(t.framebuffer)})),Me(n,this.debug,(function(){return n.bindBuffer(n.ARRAY_BUFFER,null)})),Me(n,this.debug,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)})),Me(n,this.debug,(function(){return n.deleteBuffer(t.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,n){return this.throwIfDisposed(),mre(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,n){return this.throwIfDisposed(),gre(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,n){return this.throwIfDisposed(),yre(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,n){this.throwIfDisposed(),Ere(this.gl,this.debug,t,n)},e.prototype.uploadDenseMatrixToTexture=function(t,n,r,a){this.throwIfDisposed(),Sre(this.gl,this.debug,t,n,r,a,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,n){return this.throwIfDisposed(),xre(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,n){return this.throwIfDisposed(),bre(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var n=this;this.throwIfDisposed(),this.outputTexture===t&&(tM(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Me(this.gl,this.debug,(function(){return n.gl.deleteTexture(t)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,n,r){var a=this;return this.downloadMatrixDriver(t,(function(){return Are(a.gl,a.debug,n,r,a.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(t,n,r,a,i,o){return Ore(this.gl,t,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,n){return Cre(this.gl,t,n)},e.prototype.createBufferFromTexture=function(t,n,r){this.bindTextureToFrameBuffer(t);var a=_re(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var n,r,a=this;if(de().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var s=i.clientWaitSync(o,0,0);return s===i.ALREADY_SIGNALED||s===i.CONDITION_SATISFIED},n=o}else de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(n,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(t,n,r){var a=this;return this.downloadMatrixDriver(t,(function(){return Tre(a.gl,a.debug,n,r)}))},e.prototype.createProgram=function(t){this.throwIfDisposed();var n=this.gl,r=lte(n,this.debug,t),a=hre(n,this.debug),i=fte(n,this.debug);return Me(n,this.debug,(function(){return n.attachShader(i,a)})),Me(n,this.debug,(function(){return n.attachShader(i,r)})),dte(n,this.debug,i),this.debug&&Ab(n,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=wre(n,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var n=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Me(this.gl,this.debug,(function(){return n.gl.deleteProgram(t)}))},e.prototype.setProgram=function(t){var n=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&Ab(this.gl,this.debug,this.program),Me(this.gl,this.debug,(function(){return n.gl.useProgram(t)}))},e.prototype.getUniformLocation=function(t,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?bte(this.gl,this.debug,t,n):xte(this.gl,t,n)},e.prototype.getAttributeLocation=function(t,n){var r=this;return this.throwIfDisposed(),Me(this.gl,this.debug,(function(){return r.gl.getAttribLocation(t,n)}))},e.prototype.getUniformLocationNoThrow=function(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)},e.prototype.setInputMatrixTexture=function(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),wte(this.gl,this.debug,this.program,t,n,r)},e.prototype.setOutputMatrixTexture=function(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)},e.prototype.setOutputPackedMatrixTexture=function(t,n,r){this.throwIfDisposed();var a=Hf(n,r),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(t,i,o)},e.prototype.setOutputMatrixWriteRegion=function(t,n,r,a){this.setOutputMatrixWriteRegionDriver(r,t,a,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&Ab(this.gl,this.debug,this.program),Nh(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Me(t,this.debug,(function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Me(this.gl,this.debug,(function(){return t.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=kh(this.gl,this.debug,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),i=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return Oe(this,void 0,void 0,(function(){var n=this;return Te(this,(function(r){switch(r.label){case 0:return[4,KD((function(){return n.disposed||n.isQueryAvailable(t,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return r.sent(),[2,this.getQueryTime(t,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(t,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(t,a.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,n){if(n===0)return!0;if(n===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var n=this;return new Promise((function(r){n.addItemToPoll((function(){return t.isFencePassed()}),(function(){return r()}))}))},e.prototype.pollItems=function(){for(var t=(function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1})(this.itemsToPoll.map((function(r){return r.isDoneFn}))),n=0;n<=t;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,n){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1||KD((function(){return r.pollItems(),r.itemsToPoll.length===0}))},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Ob(this.gl,this.debug,t,this.framebuffer),this.debug&&Nh(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Ob(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Nh(this.gl)):tM(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,n){this.bindTextureToFrameBuffer(t);var r=n();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(t,n,r){this.throwIfDisposed();var a=this.gl;Ob(a,this.debug,t,this.framebuffer),this.debug&&Nh(a),this.outputTexture=t,Me(a,this.debug,(function(){return a.viewport(0,0,n,r)})),Me(a,this.debug,(function(){return a.scissor(0,0,n,r)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(t,n,r,a){var i=this;this.throwIfDisposed(),Me(this.gl,this.debug,(function(){return i.gl.scissor(t,n,r,a)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e})();function pM(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(n,r){var a=n.logicalShape,i=t[r],o=i.shape;if(!yn(a,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+o+" must match");if(!n.isUniform||!i.isUniform){var s=n.texShape,c=i.isUniform?null:i.texData.texShape;if(!yn(s,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+c+" must match")}}))}var Dre=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,a=n.inChannels,i=n.strideWidth,o=n.strideHeight,s=n.padInfo,c=n.outWidth,f=n.dilationWidth,d=n.dilationHeight,p=n.dataFormat,v=s.left,g=s.top,y=a*r,b=Hn(),x=p==="channelsLast",S=x?0:1,_=x?1:2,C="",A=0;A<=1;A++)for(var O=0;O<=1;O++)C+=`
          blockIndex = rc.y + `+O+`;
          pos = rc.x + `+A+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+o+" - "+g+`;
            d0 = offsetY + `+d+" * (pos / "+y+`);

            if(d0 < `+t[S]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+v+`.);
              d1 = offsetX + `+f+" * (int(mod(float(pos), "+y+".) / "+a+`.));

              if(d1 < `+t[_]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+x+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*A+O)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*A+O)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+C+`

        `+b.output+` = result;
      }
    `},Mre=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=t,s=e[3]-1;this.outputShape=e;var c="float("+n+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},kre=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},Nre=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,s=e[3]-1;this.outputShape=e;var c="float("+n+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},Ire=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,s=i-1-e.padInfo.left,c=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},Pre=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=s-1-e.padInfo.front,p=c-1-e.padInfo.top,v=f-1-e.padInfo.left,g=s*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+p+", "+v+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+g+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+f+` +
                  wR * `+f+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},kb=function(e,t,n,r,a,i,o){n===void 0&&(n=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],c=Math.ceil(s/2),f=n?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",p=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";i&&(g=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,y="result = activation(result);");var b=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+f+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+p[0]+" * "+v[0]+`);
          result += (`+p[1]+" * "+v[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+b+`

        `+y+`

        setOutput(result);
      }
    `},Bre=(function(){function e(t,n,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,a){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(n.seedLoc,t)}},e})(),Lre=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},Fre=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=lr("rc",t),r=wt(t),a=(function(s,c,f){if(s===1)return"rc > "+c[0];for(var d="",p=s-2;p<s;p++)d+=f[p]+" >= "+c[p],p<s-1&&(d+="||");return d})(t,e,n),i=(function(s,c,f,d){if(s===1)return"";var p=d.slice(-2);return`
    int r = `+p[0]+`;
    int c = `+p[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+f+`;
  `})(t,e[e.length-1],e[e.length-2],n),o=(function(s,c){var f=s.length,d=(function(p,v){for(var g=[],y=0;y<=1;y++)for(var b=0;b<=1;b++){for(var x=(y===0?"r":"rp1")+", "+(b===0?"c":"cp1"),S=2;S<p;S++)x=v[v.length-1-S]+","+x;g.push(x)}return g})(f,c);return f===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"})(e,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},jre=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(c,f){return c[0]+e[f]+c[1]}));var r=e.length,a=wt(r),i=t.map((function(c){return c[0]})).join(","),o=t.map((function(c,f){return c[0]+e[f]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+i+`);
      `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},zre=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(x,S){return x[0]+e[S]+x[1]}));for(var r=e.length,a=wt(r),i=t.map((function(x){return x[0]})).join(","),o=t.map((function(x,S){return x[0]+e[S]})).join(","),s=lr("rc",r),c=lr("source",r),f=s[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+c.slice(-2).join()+")",p=[a+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+f+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+f+") {"],v=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",y=0,b=r===1?2:4;y<b;y++)g+=`
        `+p[y]+`
        if (`+v+`) {
          result[`+y+"] = float("+n+`);
        } else {
          `+a+` source = rc - start;
          result[`+y+"] = getChannel(getX("+c.join()+"), "+d+`);
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+i+`);
      const `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+g+`
        setOutput(result);
      }
    `},Nb=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;var v=t==="avg",g="0.0";if(v||(g="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+i+`);
        const ivec2 pads = ivec2(`+d+", "+p+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+f+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(y="avgValue / count");var b=4*Math.floor(r/4),x=r%4,S=`
      if (`+v+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+d+", "+p+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+b+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+S+`
          }

          int xC = xCCorner + `+b+`;
          if (`+(x===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+S+`
          } else if (`+(x===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+S+`
          } else if (`+(x===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+S+`
          }
        }
        setOutput(`+y+`);
      }
    `}},Ib=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,v=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;var x=t==="avg",S="0.0";if(x||(S="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+g+", "+y+", "+b+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+d+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+p+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+v+`;
                  wC += `+f+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+p+" * "+v+` +
                      wR * `+v+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var _=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(_="avgValue / count");var C=4*Math.floor(r/4),A=r%4,O=`
      if (`+x+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+g+", "+y+", "+b+`);
      const float initializationValue = `+S+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+S+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+C+`; wC += 4) {
              int xC = xCCorner + wC * `+f+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+f+`, ch)
              );

              `+O+`
            }

            int xC = xCCorner + `+C+`;
            if (`+(A===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+O+`
            } else if (`+(A===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                initializationValue,
                initializationValue
              );

              `+O+`
            } else if (`+(A===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                initializationValue
              );

              `+O+`
            }
          }
          setOutput(`+_+`);
        }
      }
    `}},Ure=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=Math.ceil(a/n);this.outputShape=[r,i];var o="0.0",s="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",s="min"):t==="max"&&(o="-1.0 / 1e-20",s="max");var c=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?c="sumValue":t==="prod"?c="prodValue":t==="all"?c="allValue":t==="any"&&(c="anyValue");var f=4*Math.floor(n/4),d=n%4,p=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,v="vec4";t==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,v="bvec4"):t==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,v="bvec4");var g="";a%n>0&&(g=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+g+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+f+`; i += 4) {
          int inIdx = inOffset + i;
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+p+`
        }

        int inIdx = inOffset + `+f+`;
        if (`+(d===1)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(d===2)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(d===3)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+p+`
        }
        setOutput(`+c+`);
      }
    `},Wre=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+_u(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+l2(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+n+`

        setOutput(result);
      }
    `},Hre=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],c=o[2],f=[n&&s>1?a-1:a,n&&c>1?i-1:i],d=[n&&s>1?s-1:s,n&&c>1?c-1:c],p=f[0]/d[0],v=f[1]/d[1],g=1/p,y=1/v,b=2*Math.ceil(g)+2,x=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+b+`);
        const int winWidth = int(`+x+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},qre=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var c=[r&&t>1?i-1:i,r&&n>1?o-1:o],f=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},Vre=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var c=[r&&t>1?i-1:i,r&&n>1?o-1:o],f=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`,
          `+c[1]/f[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},Gre=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],c=o[2],f=[n&&s>1?a-1:a,n&&c>1?i-1:i],d=[n&&s>1?s-1:s,n&&c>1?c-1:c],p=f[0]/d[0],v=f[1]/d[1],g=1/p,y=1/v,b=2*Math.ceil(g)+2,x=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+b+`);
        const int winWidth = int(`+x+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+f[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+f[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},$re=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var c=[r&&t>1?i-1:i,r&&n>1?o-1:o],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},Kre=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,n!==1){var r=e.map((function(i,o){return(function(s){return t.indexOf(s)!==-1&&e[s]!==1?e[s]+" - coords["+s+"] - 1":"coords["+s+"]"})(o)})).join(","),a=wt(n);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},Xre=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=lr("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],o=wt(n);function s(c){var f=e.map((function(d,p){return(function(v,g){return t.indexOf(v)!==-1&&e[v]!==1?e[v]+" - "+g[v]+" - 1":""+g[v]})(p,c)}));return"getChannel(getX("+f.join(",")+"), vec2("+f.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+(function(c){return s(c)})(r.slice())+`;
          if(`+a+`){
            result.g = `+(function(c){return c[n-1]="("+c[n-1]+" + 1)",s(c)})(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+(function(c){return c[n-2]="("+c[n-2]+" + 1)",s(c)})(r.slice())+`;
            if(`+a+`) {
              result.a = `+(function(c){return c[n-1]="("+c[n-1]+" + 1)",c[n-2]="("+c[n-2]+" + 1)",s(c)})(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},vM=function(e,t,n,r,a,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=wt(a.length),c=wt(i.length),f="";n===1?f="i":n===2&&(f="i, j");var d="getIndices("+f+")",p="";r===1?p="i":r===2&&(p="i, coords[1]");var v="getUpdates("+p+")",g=t>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+a+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+g+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+v+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},Yre=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),c=n%4,f=`
        sumValue += dot(values, segFilter);
    `,d="";a%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var p="";a%n>0&&(p=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+p+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+f+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+f+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+f+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+f+`
        }
        setOutput(sumValue);
      }
    `},Zre=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],c=0;c<t.length;c++)s.push(""+i[c]),c<e&&o.push(""+i[c]);r=o.join(),a=s.join()}var f=wt(n);this.userCode=`
      void main() {
        `+f+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},Qre=(function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=wt(this.rank),a="uniform int start["+this.rank+"];",i=(function(o){if(o===1)return"sourceLoc";if(o<=6)return Pb.slice(0,o).map((function(s){return"sourceLoc."+s})).join(",");throw Error("Slicing for rank "+o+" is not yet supported")})(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map((function(o,s){return"sourceLoc."+Pb[s]+" = start["+s+"] + coords."+Pb[s]+";"})).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+n+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,a){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(a,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e})(),Pb=["x","y","z","w","u","v"],Jre=(function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=wt(this.rank),r=lr("coords",this.rank),a=lr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",o="getChannel(getSource("+a.join()+"), "+i+")",s=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+o+`;
        --`+a[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,f=this.rank<=4?`sourceLoc = coords +
            `+n+"("+t.map((function(d,p){return"start["+p+"]"})).join()+");":t.map((function(d,p){return a[p]+" = "+r[p]+" + start["+p+"];"})).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+f+`
        vec4 result = vec4(0.);
        `+s+`
        `+c+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,a){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(a,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e})(),eae=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=wt(n.length),i=wt(n.length),o="";if(r===1)o="coords * strides + begin";else{var s=0;o=n.map((function(c,f){return s++,n.length===1?"coords * strides["+f+"] + begin["+f+"]":"coords["+(s-1)+"] * strides["+f+"] + begin["+f+"]"})).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+e+`);
      `+a+" strides = "+a+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},tae=(function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,n,r){var a,i=mM(n,r),o=gM(t,i,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[o].shift();return this.usedTextures[o].push(s),s}return this.numUsedTextures++,this.log(),i===Or.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===Or.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===Or.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===Or.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===Or.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(a),a},e.prototype.releaseTexture=function(t,n,r,a){if(this.freeTextures!=null){var i=gM(n,mM(r,a),a);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],s=o.indexOf(t);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach((function(r){t.gpgpu.deleteMatrixTexture(r)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(a){t.gpgpu.deleteMatrixTexture(a)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e})();function mM(e,t){if(e===Mr.UPLOAD)return Or.PACKED_2X2_FLOAT32;if(e===Mr.RENDER||e==null)return(function(n){return de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Or.PACKED_2X2_FLOAT32:Or.UNPACKED_FLOAT32:n?Or.PACKED_2X2_FLOAT16:Or.UNPACKED_FLOAT16})(t);if(e===Mr.DOWNLOAD||e===Mr.PIXELS)return Or.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function gM(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var nae=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=wt(this.rank),i=(function(o){var s=o.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+o[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],f=[],d=0;d<o.length;d++)f.push("imod("+c[d]+", "+o[d]+")");return f.join()})(e);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},rae=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=wt(this.rank),i=(function(o){var s=o.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],f=new Array(s),d=0;d<o.length;d++)f[o[d]]=c[d];return f.join()})(t);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},aae=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=wt(this.rank),i=$4("rc",this.rank),o=new Array(this.rank);for(r=0;r<t.length;r++)o[t[r]]=i[r];var s="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+n[this.rank-1],f="getChannel(getA("+o.join()+"), "+s+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+f+`;
      if(`+c+`) {
        result[1] = `+f+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+f+`;
        if(`+c+`) {
          result[3] = `+f+`;
        }
      }
      setOutput(result);
    }
    `},c2=1.7580993408473768,f2=1.0507009873554805,Xe=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Aa="if (isnan(x)) return x;",iae="return x;",yM="return abs(x);",Q4=Aa+`
  return (x < 0.0) ? 0.0 : x;
`,J4=Aa+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,eB="return (x >= 0.0) ? x : (exp(x) - 1.0);",oae=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+c2+`;
  float scale = `+f2+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,bM="return -x;",xM="return ceil(x);",wM="return floor(x);",SM="return exp(x);",EM="return exp(x) - 1.0;",uae=Aa+`
  return sin(x);
`,sae=Aa+`
  return cos(x);
`,lae=Aa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,cae=Aa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,fae=Aa+`
  return atan(x);
`,dae=Aa+"return log(x + sqrt(x * x + 1.0));",hae=Aa+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,pae=Aa+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Lh="return x;",vae="return x;",tB=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,nB=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,rB=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Lc=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},mae=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=lr("rc",t),r=wt(t),a=(function(s,c){if(s===1)return"rc";for(var f="",d=0;d<s;d++)f+=c[d],d<s-1&&(f+=",");return f})(t,n),i=n.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},Fh={};function jh(e,t){if(t===void 0&&(t=!1),e==="linear")return t?vae:iae;if(e==="relu")return t?tB:Q4;if(e==="elu")return t?rB:eB;if(e==="relu6")return t?nB:J4;if(e==="prelu")return t?Z4:Y4;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var gae=600,yae=(function(e){function t(n){var r,a=e.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!de().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var i=Za(de().getNumber("WEBGL_VERSION"));a.binaryCache=((r=de().getNumber("WEBGL_VERSION"))in Fh||(Fh[r]={}),Fh[r]),a.gpgpu=new Rre(i),a.canvas=i.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=n,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=n.gl.canvas;return a.textureManager=new tae(a.gpgpu),a.numMBBeforeWarning=de().global.screen==null?1024:de().global.screen.height*de().global.screen.width*window.devicePixelRatio*gae/1024/1024,a.texData=new F4(a,$),a}return Ca(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(n,r,a){if(de().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:a,values:n,usage:Mr.UPLOAD}),i},t.prototype.move=function(n,r,a,i){if(de().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:a,dtype:i,values:r,usage:Mr.UPLOAD})},t.prototype.readSync=function(n){var r=this.texData.get(n),a=r.values,i=r.dtype,o=r.complexTensors,s=r.slice,c=r.shape,f=r.isPacked;if(s!=null){var d=void 0;d=f?new Lc(c,Lh):new Xe(c,Lh);var p=this.runWebGLProgram(d,[{dataId:n,shape:c,dtype:i}],i),v=this.readSync(p.dataId);return this.disposeData(p.dataId),v}if(a!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return a;var g,y,b=this.activeTimers!=null;return b&&(g=La()),i==="complex64"?y=ux(o.real.dataSync(),o.imag.dataSync()):y=this.getValuesFromTexture(n),b&&(this.downloadWaitMs+=La()-g),this.convertAndCacheOnCPU(n,y)},t.prototype.read=function(n){return Oe(this,void 0,void 0,(function(){var r,a,i,o,s,c,f,d,p,v,g,y,b,x,S,_,C,A,O,R,M,k;return Te(this,(function(I){switch(I.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise((function(P){return r.push(P)}))];if(a=this.texData.get(n),i=a.values,o=a.shape,s=a.slice,c=a.dtype,f=a.complexTensors,d=a.isPacked,s!=null)return p=void 0,p=d?new Lc(o,Lh):new Xe(o,Lh),v=this.runWebGLProgram(p,[{dataId:n,shape:o,dtype:c}],c),g=this.read(v.dataId),this.disposeData(v.dataId),[2,g];if(i!=null)return[2,this.convertAndCacheOnCPU(n)];if(!de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&de().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return y=null,c!=="complex64"&&de().get("WEBGL_BUFFER_SUPPORTED")&&(b=this.decode(n),x=this.texData.get(b.dataId),y=(k=this.gpgpu).createBufferFromTexture.apply(k,[x.texture].concat(Wc(o)))),this.pendingRead.set(n,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:I.sent(),I.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([f.real.data(),f.imag.data()])];case 3:return _=I.sent(),C=_[0],A=_[1],S=ux(C,A),[3,5];case 4:y==null?S=this.getValuesFromTexture(n):(O=De(o),S=this.gpgpu.downloadFloat32MatrixFromBuffer(y,O)),I.label=5;case 5:return b!=null&&this.disposeData(b.dataId),R=this.convertAndCacheOnCPU(n,S),M=this.pendingRead.get(n),this.pendingRead.delete(n),M.forEach((function(P){return P(R)})),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,R]}}))}))},t.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var a=n[r];if(!ote(a))throw de().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(n){var r,a=this.texData.get(n),i=a.shape,o=a.dtype,s=a.isPacked,c=De(i);if(de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var f=this.decode(n),d=this.texData.get(f.dataId),p=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[d.texture].concat(Wc(i))).subarray(0,c);return this.disposeData(f.dataId),p}var v=de().getBool("WEBGL_PACK")&&s===!0,g=v?Tb(i):i,y=v?new ire(g):new are(g),b=this.runWebGLProgram(y,[{shape:g,dtype:o,dataId:n}],"float32"),x=this.texData.get(b.dataId),S=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(x.texture,x.texShape[0],x.texShape[1]).subarray(0,c);return this.disposeData(b.dataId),S},t.prototype.time=function(n){return Oe(this,void 0,void 0,(function(){var r,a,i,o,s,c,f;return Te(this,(function(d){switch(d.label){case 0:return r=this.activeTimers,a=[],i=!1,this.programTimersStack==null?(this.programTimersStack=a,i=!0):this.activeTimers.push(a),this.activeTimers=a,n(),o=pl(this.activeTimers.map((function(p){return p.query}))).filter((function(p){return p!=null})),s=pl(this.activeTimers.map((function(p){return p.name}))).filter((function(p){return p!=null})),this.activeTimers=r,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return f=d.sent(),c.kernelMs=zee(f),c.getExtraProfileInfo=function(){return f.map((function(p,v){return{name:s[v],ms:p}})).map((function(p){return p.name+": "+p.ms})).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:La(),endMs:null}},t.prototype.endTimer=function(n){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=La(),n)},t.prototype.getQueryTime=function(n){return Oe(this,void 0,void 0,(function(){var r;return Te(this,(function(a){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]}))}))},t.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},t.prototype.releaseGPUData=function(n){var r=this.texData.get(n),a=r.texture,i=r.dtype,o=r.texShape,s=r.usage,c=r.isPacked,f=r.slice,d=f&&f.origDataId||n,p=this.dataRefCount.get(d);p>1?this.dataRefCount.set(d,p-1):(this.dataRefCount.delete(d),a!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(a,o,s,c)));var v=this.texData.get(n);v.texture=null,v.texShape=null,v.isPacked=!1,v.slice=null},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},t.prototype.getDataInfo=function(n){return this.texData.get(n)},t.prototype.getCPUBackend=function(){return de().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=$.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(n,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every((function(i){return a.texData.get(i.dataId).texture==null&&i.size<r}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(n,r){var a=this.makeOutput(n.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:$.keep(n.clone()),imag:$.keep(r.clone())},a},t.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,a){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,a);if(De(a)===0)return Pn([],a,n.dtype);var i=this.texData.get(n.dataId).isPacked,o=B4(n.shape,r,a);if(i||!o){var s=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Jre(a):new Qre(a),c=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,c)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,a)},t.prototype.shallowSlice=function(n,r,a){var i=this.texData.get(n.dataId),o=this.makeOutput(a,n.dtype),s=this.texData.get(o.dataId);Object.assign(s,i),s.shape=a,s.dtype=n.dtype;var c=L4(r,n.strides);i.slice&&(c+=i.slice.flatOffset),s.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||n.dataId};var f=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,f+1),o},t.prototype.stridedSlice=function(n,r,a,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,a,i);var o=a2(r,a,i);if(o.some((function(c){return c===0})))return Pn([],o);var s=new eae(r,i,o);return this.compileAndRun(s,[n])},t.prototype.reverse=function(n,r){var a=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Xre(n.shape,r):new Kre(n.shape,r);return this.compileAndRun(a,[n])},t.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var a=n.map((function(g){return Jr(g)})),i=n.map((function(g){return ja(g)}));return kn(this.concat(a,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>de().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(n.length/2),s=this.concat(n.slice(0,o),r),c=this.concat(n.slice(o),r);return this.concat([s,c],r)}if(de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var f=new qne(n.map((function(g){return g.shape})),r);return this.compileAndRun(f,n)}var d=ml(n.map((function(g){return g.shape})),r),p=n.map((function(g){return g.as2D(-1,De(g.shape.slice(r)))})),v=new Hne(p.map((function(g){return g.shape})));return this.compileAndRun(v,p).reshape(d)},t.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,bM,n.dtype);var r=new Xe(n.shape,bM);return this.compileAndRun(r,[n])},t.prototype.batchMatMul=function(n,r,a,i){var o=a?n.shape[2]:n.shape[1],s=i?r.shape[1]:r.shape[2],c=a?n.shape[1]:n.shape[2],f=n.shape[0];if((o===1||s===1)&&c>1e3){a&&(n=n.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var d=s===1?n:n.as3D(f,c,1),p=s===1?2:1,v=s===1?r.as3D(f,1,c):r;return this.multiply(d,v).sum(p,!0)}var g=In(n.dtype,r.dtype),y=new kb(n.shape,[f,o,s],a,i);return this.compileAndRun(y,[n,r],g)},t.prototype.fusedBatchMatMul=function(n){var r=n.a,a=n.b,i=n.transposeA,o=n.transposeB,s=n.bias,c=n.activation,f=n.preluActivationWeights,d=i?r.shape[2]:r.shape[1],p=o?a.shape[1]:a.shape[2],v=r.shape[0],g=In(r.dtype,a.dtype),y=s!=null,b=f!=null,x=c?jh(c,!0):null,S=new kb(r.shape,[v,d,p],i,o,y,x,b),_=[r,a];return s&&_.push(s),f&&_.push(f),this.compileAndRun(S,_,g)},t.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var a=this.texData.get(n.dataId),i=this.texData.get(r.dataId),o=new uM(Fne,n.shape,r.shape),s=new uM(jne,n.shape,r.shape),c=[this.makeComplexComponentTensorInfo(n,a.complexTensors.real),this.makeComplexComponentTensorInfo(n,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],f=this.compileAndRun(o,c),d=this.compileAndRun(s,c),p=this.complex(f,d);return f.dispose(),d.dispose(),p}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,sM,n.dtype);var v=new Lt(sM,n.shape,r.shape);return this.compileAndRun(v,[n,r],n.dtype)},t.prototype.batchNormalization=function(n,r,a,i,o,s){var c=[n,r,a],f=null;s!=null&&(f=s.shape,c.push(s));var d=null;if(o!=null&&(d=o.shape,c.push(o)),de().getBool("WEBGL_PACK_NORMALIZATION")){var p=new Lne(n.shape,r.shape,a.shape,f,d,i);return this.compileAndRun(p,c)}var v=new Bne(n.shape,r.shape,a.shape,f,d,i);return this.compileAndRun(v,c)},t.prototype.localResponseNormalization4D=function(n,r,a,i,o){var s=de().getBool("WEBGL_PACK_NORMALIZATION")?new Nre(n.shape,r,a,i,o):new Mre(n.shape,r,a,i,o);return this.compileAndRun(s,[n])},t.prototype.LRNGrad=function(n,r,a,i,o,s,c){var f=new kre(r.shape,i,o,s,c);return this.compileAndRun(f,[r,a,n])},t.prototype.tile=function(n,r){if(n.dtype==="string"){var a=this.readSync(n.dataId).map((function(o){return $p(o)}));return V4(qe(n.shape,n.dtype,a),r)}var i=new nae(n.shape,r);return this.compileAndRun(i,[n])},t.prototype.pad=function(n,r,a){var i=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zre(n.shape,r,a):new jre(n.shape,r,a);return this.compileAndRun(i,[n])},t.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var a=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aae(n.shape,r):new rae(n.shape,r);return this.compileAndRun(a,[n])},t.prototype.gather=function(n,r,a){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,a);var i=new fre(n.shape,r.size,a);return this.compileAndRun(i,[n,r])},t.prototype.batchToSpaceND=function(n,r,a){z(n.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var i=r.reduce((function(p,v){return p*v})),o=Jp(n.shape,r,i),s=ev(o.length,r.length),c=tv(n.shape,r,i),f=k4(a,r.length),d=N4(c,a,r.length);return n.reshape(o).transpose(s).reshape(c).slice(f,d)},t.prototype.spaceToBatchND=function(n,r,a){z(n.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var i=r.reduce((function(v,g){return v*g})),o=[[0,0]];o.push.apply(o,a);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var c=n.pad(o),f=Jp(c.shape,r,i,!1),d=ev(f.length,r.length,!1),p=tv(c.shape,r,i,!1);return c.reshape(f).transpose(d).reshape(p)},t.prototype.reduce=function(n,r,a){var i=n.shape[0],o=n.shape[1],s=Rb(o),c=new Ure({windowSize:s,inSize:o,batchSize:i},r),f=this.compileAndRun(c,[n],a);return f.shape[1]===1?f:this.reduce(f,r,a)},t.prototype.argReduce=function(n,r,a){a===void 0&&(a=null);var i=n.shape[0],o=n.shape[1];a!=null&&(i=a.shape[0],o=a.shape[1]);var s=Rb(o),c=new One({windowSize:s,inSize:o,batchSize:i},r,a==null),f=[n];a!=null&&f.push(a);var d=this.compileAndRun(c,f,"int32");return d.shape[1]===1?d:this.argReduce(n,r,d)},t.prototype.argReducePacked=function(n,r,a){a===void 0&&(a=null);var i=a!=null?a.shape:n.shape,o=Rb(i[i.length-1]),s=new Nne(i,o,r,a==null),c=a==null?[n]:[n,a],f=this.compileAndRun(s,c,"int32");return f.rank===n.rank?this.argReducePacked(n,r,f):f},t.prototype.sum=function(n,r){Ar("sum",r,n.rank);var a=Un(n.shape,r),i=a[0],o=De(a[1]),s=n.as2D(-1,o),c=wb(n.dtype);return this.reduce(s,"sum",c).reshape(i)},t.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var a=Un(n.shape,r),i=a[0],o=De(a[1]),s=n.as2D(-1,o),c=wb(n.dtype);return this.reduce(s,"prod",c).reshape(i)},t.prototype.unsortedSegmentSum=function(n,r,a){var i=0,o=Qa([i],n.rank),s=n;o!=null&&(s=n.transpose(o),i=Ja(1,n.rank)[0]);var c=(function(g,y,b){for(var x=[],S=g.length,_=0;_<S;_++)_!==y?x.push(g[_]):x.push(b);return x})(s.shape,i,a),f=De([s.shape[i]]),d=s.as2D(-1,f),p=wb(n.dtype),v=this.segOpCompute(d,"unsortedSegmentSum",r,p,a).reshape(c);return o!=null&&(v=v.transpose(e2(o))),v},t.prototype.segOpCompute=function(n,r,a,i,o){var s=n.shape[0],c=n.shape[1],f=(function(v,g){var y,b=!1;for(v<=P4?(y=v,b=!0):y=Q1(v,Math.floor(Math.sqrt(v)));!b;)y>g||y===v?b=!0:y=Q1(v,y+1);return y})(c,o),d=new Yre({windowSize:f,inSize:c,batchSize:s,numSegments:o}),p=this.compileAndRun(d,[n,a],i);return p.shape[1]===o?p:(a=Qp(0,o).tile([c/f]),this.segOpCompute(p,r,a,i,o))},t.prototype.argMinMaxReduce=function(n,r,a){var i=[r];if(Ar("arg"+a.charAt(0).toUpperCase()+a.slice(1),i,n.rank),!de().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var o=Un(n.shape,i),s=o[0],c=De(o[1]),f=n.as2D(-1,c);return this.argReduce(f,a).reshape(s)}return this.argReducePacked(n,a)},t.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},t.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},t.prototype.cumsum=function(n,r,a,i){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var o=new Jne(n.shape,a,i);return this.compileAndRun(o,[n])},t.prototype.equal=function(n,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var a=new Lt("return float(a == b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.notEqual=function(n,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new Lt("return float(a != b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new Lt("return float(a < b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.lessEqual=function(n,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new Lt("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new Lt("return float(a > b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.greaterEqual=function(n,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new Lt("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.logicalNot=function(n){var r=new Xe(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},t.prototype.logicalAnd=function(n,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new Lt("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.logicalOr=function(n,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new Lt("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.select=function(n,r,a){var i=new Zre(n.rank,r.shape,r.rank);return this.compileAndRun(i,[n,r,a],In(r.dtype,a.dtype))},t.prototype.where=function(n){Yp("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return s2(n.shape,r)},t.prototype.topk=function(n,r,a){return G4(n.dataSync(),n.shape,n.dtype,r)},t.prototype.min=function(n,r){Ar("min",r,n.rank);var a=Un(n.shape,r),i=a[0],o=De(a[1]),s=n.as2D(-1,o);return this.reduce(s,"min",s.dtype).reshape(i)},t.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wi(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Lt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.mod=function(n,r){var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wi(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Lt(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);Ar("max",r,n.rank);var a=Un(n.shape,r),i=a[0],o=De(a[1]),s=n.as2D(-1,o);return this.reduce(s,"max",s.dtype).reshape(i)},t.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wi(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Lt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.all=function(n,r){Ar("all",r,n.rank);var a=Un(n.shape,r),i=a[0],o=De(a[1]),s=n.as2D(-1,o);return this.reduce(s,"all",s.dtype).reshape(i)},t.prototype.any=function(n,r){Ar("any",r,n.rank);var a=Un(n.shape,r),i=a[0],o=De(a[1]),s=n.as2D(-1,o);return this.reduce(s,"any",s.dtype).reshape(i)},t.prototype.realDivide=function(n,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new Lt(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(a,[n,r],"float32")},t.prototype.floorDiv=function(n,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new Lt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(a,[n,r],"int32")},t.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Db);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var a=In(n.dtype,r.dtype);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Db,a);var i=new Lt(Db,n.shape,r.shape);return this.compileAndRun(i,[n,r],a)},t.prototype.packedUnaryOp=function(n,r,a){var i=new Lc(n.shape,r);return this.compileAndRun(i,[n],a)},t.prototype.packedBinaryOp=function(n,r,a,i,o){o===void 0&&(o=!1);var s=new wi(a,n.shape,r.shape,o);return this.compileAndRun(s,[n,r],i)},t.prototype.complexSeparableBinaryOp=function(n,r,a){var i=this,o=this.texData.get(n.dataId),s=this.texData.get(r.dataId),c=[[o.complexTensors.real,s.complexTensors.real],[o.complexTensors.imag,s.complexTensors.imag]].map((function(v){var g=v[0],y=v[1],b=i.makeComplexComponentTensorInfo(n,g),x=i.makeComplexComponentTensorInfo(r,y),S=new Lt(a,n.shape,r.shape);return i.compileAndRun(S,[b,x],In(g.dtype,y.dtype))})),f=c[0],d=c[1],p=this.complex(f,d);return f.dispose(),d.dispose(),p},t.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},t.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>de().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),a=this.addN(n.slice(0,r)),i=this.addN(n.slice(r));return this.addN([a,i])}var o=n.map((function(f){return f.dtype})).reduce((function(f,d){return In(f,d)})),s=n.map((function(f){return f.shape})),c=de().getBool("WEBGL_PACK")?new Ane(n[0].shape,s):new Cne(n[0].shape,s);return this.compileAndRun(c,n,o)},t.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Mb);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var a=In(n.dtype,r.dtype);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Mb,n.dtype);var i=new Lt(Mb,n.shape,r.shape);return this.compileAndRun(i,[n,r],a)},t.prototype.pow=function(n,r){var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wi(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Lt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),i=In(n.dtype,r.dtype);return this.compileAndRun(a,[n,r],i)},t.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,xM,n.dtype);var r=new Xe(n.shape,xM);return this.compileAndRun(r,[n])},t.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,wM,n.dtype);var r=new Xe(n.shape,wM);return this.compileAndRun(r,[n])},t.prototype.sign=function(n){var r=new Xe(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},t.prototype.isNaN=function(n){var r=new Xe(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isInf=function(n){var r=new Xe(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isFinite=function(n){var r=new Xe(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.round=function(n){var r=new Xe(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},t.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,SM,n.dtype);var r=new Xe(n.shape,SM);return this.compileAndRun(r,[n])},t.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,EM,n.dtype);var r=new Xe(n.shape,EM);return this.compileAndRun(r,[n])},t.prototype.softmax=function(n,r){var a=fn([r],n.shape),i=this.max(n,a),o=hr(i.shape,a),s=this.subtract(n,i.reshape(o)),c=this.exp(s),f=this.sum(c,a).reshape(o);return this.realDivide(c,f)},t.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new Xe(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},t.prototype.log1p=function(n){var r=new Xe(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},t.prototype.sqrt=function(n){var r=new Xe(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},t.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new Xe(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},t.prototype.reciprocal=function(n){var r=new Xe(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},t.prototype.relu=function(n){var r;return r=de().getBool("WEBGL_PACK")?new Lc(n.shape,tB):new Xe(n.shape,Q4),this.compileAndRun(r,[n])},t.prototype.relu6=function(n){var r;return r=de().getBool("WEBGL_PACK")?new Lc(n.shape,nB):new Xe(n.shape,J4),this.compileAndRun(r,[n])},t.prototype.prelu=function(n,r){var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wi(Z4,n.shape,r.shape):new Lt(Y4,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.elu=function(n){if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,rB,n.dtype);var r=new Xe(n.shape,eB);return this.compileAndRun(r,[n])},t.prototype.eluDer=function(n,r){var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wi(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new Lt("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.selu=function(n){var r=new Xe(n.shape,oae);return this.compileAndRun(r,[n])},t.prototype.int=function(n){var r=new Xe(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},t.prototype.clip=function(n,r,a){var i,o=(i=de().getBool("WEBGL_PACK_CLIP")?new Une(n.shape):new zne(n.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(i,[n],null,o)},t.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,yM,n.dtype);var r=new Xe(n.shape,yM);return this.compileAndRun(r,[n])},t.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),a=new Wne(n.shape),i=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(a,i)},t.prototype.sigmoid=function(n){var r=new Xe(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},t.prototype.softplus=function(n){var r=new Xe(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},t.prototype.sin=function(n){var r=new Xe(n.shape,uae);return this.compileAndRun(r,[n])},t.prototype.cos=function(n){var r=new Xe(n.shape,sae);return this.compileAndRun(r,[n])},t.prototype.tan=function(n){var r=new Xe(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},t.prototype.asin=function(n){var r=new Xe(n.shape,lae);return this.compileAndRun(r,[n])},t.prototype.acos=function(n){var r=new Xe(n.shape,cae);return this.compileAndRun(r,[n])},t.prototype.atan=function(n){var r=new Xe(n.shape,fae);return this.compileAndRun(r,[n])},t.prototype.atan2=function(n,r){var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wi(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Lt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.sinh=function(n){var r=new Xe(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.cosh=function(n){var r=new Xe(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.tanh=function(n){var r=new Xe(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},t.prototype.asinh=function(n){var r=new Xe(n.shape,dae);return this.compileAndRun(r,[n])},t.prototype.acosh=function(n){var r=new Xe(n.shape,hae);return this.compileAndRun(r,[n])},t.prototype.atanh=function(n){var r=new Xe(n.shape,pae);return this.compileAndRun(r,[n])},t.prototype.erf=function(n){var r=new Xe(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},t.prototype.step=function(n,r){var a=new Xe(n.shape,(function(i){return i===void 0&&(i=0),Aa+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `})(r));return this.compileAndRun(a,[n])},t.prototype.conv2dByMatMul=function(n,r,a,i,o,s){var c=n.shape,f=this.texData.get(n.dataId),d=a.inChannels,p=c[0]*c[1]*c[2],v=a.outChannels,g=a.dataFormat==="channelsLast",y=(p===1||v===1)&&d>1e3,b=c[2]%2!=0&&!!f.isPacked;if(y||!de().getBool("WEBGL_LAZILY_UNPACK")||!de().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!b){var x=g?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],S=this.reshape(n,[1,x,a.inChannels]),_=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:S,b:_,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:s}),a.outShape)}var C=g?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),A={dataId:n.dataId,shape:[1,C,a.inChannels],dtype:n.dtype},O=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,z(Ph(f.shape,A.shape),(function(){return"packed reshape "+f.shape+" to "+A.shape+" isn't free"}));var R=this.reshape(r,[1,a.inChannels,a.outChannels]),M=this.fusedBatchMatMul({a:A,b:R,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:s}),k=this.texData.get(M.dataId);return z(k.isPacked,(function(){return"batchMatMul result is expected to be packed"})),f.shape=O,k.shape=a.outShape,$.makeTensorFromDataId(M.dataId,a.outShape,M.dtype)},t.prototype.conv2dWithIm2Row=function(n,r,a,i,o,s){var c=a.filterWidth,f=a.filterHeight,d=a.inChannels,p=a.outWidth,v=a.outHeight,g=a.dataFormat==="channelsLast",y=c*f*d,b=v*p,x=[y,b],S=n.squeeze([0]),_=r.reshape([1,y,-1]),C=new Dre(x,S.shape,a),A=this.compileAndRun(C,[S]).reshape([1,x[0],x[1]]),O=i!=null,R=s!=null,M=o?jh(o,!0):null,k=new kb(A.shape,[1,b,a.outChannels],!0,!1,O,M,R),I=[A,_];i&&I.push(i),R&&I.push(s);var P=this.compileAndRun(k,I);return g?P.reshape([1,v,p,a.outChannels]):P.reshape([1,a.outChannels,v,p])},t.prototype.fusedConv2d=function(n){var r=n.input,a=n.filter,i=n.convInfo,o=n.bias,s=n.activation,c=n.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,i,o,s,c);if(de().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,i,o,s,c);var f=o!=null,d=c!=null,p=s?jh(s,!1):null,v=new lM(i,f,p,d),g=[r,a];return o&&g.push(o),c&&g.push(c),this.compileAndRun(v,g)},t.prototype.conv2d=function(n,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,a);if(de().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,a);var i=new lM(a);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerInput=function(n,r,a){var i=new Gne(a);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerFilter=function(n,r,a){var i=new Vne(a);return this.compileAndRun(i,[n,r])},t.prototype.fusedDepthwiseConv2D=function(n){var r,a=n.input,i=n.filter,o=n.convInfo,s=n.bias,c=n.activation,f=n.preluActivationWeights,d=de().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,p=c?jh(c,d):null,v=[a,i],g=s!=null,y=f!=null;return g&&v.push(s),y&&v.push(f),d?(r=new fM(o,g,p,y),this.compileAndRun(r,v)):(r=new cM(o,g,p,y),this.compileAndRun(r,v))},t.prototype.depthwiseConv2D=function(n,r,a){var i;return de().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(i=new fM(a),this.compileAndRun(i,[n,r])):(i=new cM(a),this.compileAndRun(i,[n,r]))},t.prototype.depthwiseConv2DDerInput=function(n,r,a){var i=new Yne(a);return this.compileAndRun(i,[n,r])},t.prototype.depthwiseConv2DDerFilter=function(n,r,a){var i=new Xne(a);return this.compileAndRun(i,[n,r])},t.prototype.conv3d=function(n,r,a){var i=new Zne(a);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerInput=function(n,r,a){var i=new Kne(a);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerFilter=function(n,r,a){var i=new $ne(a);return this.compileAndRun(i,[n,r])},t.prototype.maxPool=function(n,r){var a=new Nb(r,"max",!1);return this.compileAndRun(a,[n])},t.prototype.avgPool=function(n,r){var a=new Nb(r,"avg",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.maxPoolBackprop=function(n,r,a,i){var o=new Nb(i,"max",!0),s=this.compileAndRun(o,[r]),c=new Ire(i),f=this.compileAndRun(c,[n,s],r.dtype);return s.dispose(),f},t.prototype.avgPoolBackprop=function(n,r,a){var i=new Ine(a);return this.compileAndRun(i,[n],r.dtype)},t.prototype.cast=function(n,r){return U4(n,r,this)},t.prototype.unstack=function(n,r){for(var a=n.shape[r],i=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(i[o++]=n.shape[s]);var c=new Array(n.rank).fill(0),f=n.shape.slice();f[r]=1;var d=new Array(a);for(s=0;s<d.length;s++)c[r]=s,d[s]=this.slice(n,c,f).reshape(i);return d},t.prototype.avgPool3d=function(n,r){var a=new Ib(r,"avg",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.avgPool3dBackprop=function(n,r,a){var i=new Pne(a);return this.compileAndRun(i,[n],r.dtype)},t.prototype.maxPool3d=function(n,r){var a=new Ib(r,"max",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.maxPool3dBackprop=function(n,r,a,i){var o=new Ib(i,"max",!0),s=this.compileAndRun(o,[r]),c=new Pre(i),f=this.compileAndRun(c,[n,s],r.dtype);return s.dispose(),f},t.prototype.reshape=function(n,r){var a=this.texData.get(n.dataId);if(a.isPacked&&!Ph(n.shape,r)&&(a.texture===null||!Ph(a.shape,r))){var i=this.packedReshape(n,r);return $.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return ox(n,r)},t.prototype.resizeBilinear=function(n,r,a,i){var o=de().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Vre(n.shape,r,a,i):new qre(n.shape,r,a,i);return this.compileAndRun(o,[n],"float32")},t.prototype.resizeBilinearBackprop=function(n,r,a){var i=new Hre(n,r,a);return this.compileAndRun(i,[n])},t.prototype.resizeNearestNeighbor=function(n,r,a,i){var o=new $re(n.shape,r,a,i);return this.compileAndRun(o,[n])},t.prototype.resizeNearestNeighborBackprop=function(n,r,a){var i=new Gre(n,r,a);return this.compileAndRun(i,[n])},t.prototype.multinomial=function(n,r,a,i){var o=r?n:Yi(n),s=o.shape[0],c=o.shape[1],f=new Bre(s,c,a),d=f.getCustomSetupFunc(i);return this.compileAndRun(f,[o],"int32",d)},t.prototype.oneHot=function(n,r,a,i){var o=new Lre(n.size,r,a,i);return this.compileAndRun(o,[n])},t.prototype.diag=function(n){var r=new rre(n.size);return this.compileAndRun(r,[n])},t.prototype.nonMaxSuppression=function(n,r,a,i,o){return Yp("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),o2(n.dataSync(),r.dataSync(),a,i,o)},t.prototype.cropAndResize=function(n,r,a,i,o,s){var c=new Qne(n.shape,r.shape,i,o,s);return this.compileAndRun(c,[n,r,a],"float32")},t.prototype.depthToSpace=function(n,r,a){z(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));var i=n.shape[0],o=a==="NHWC"?n.shape[1]:n.shape[2],s=a==="NHWC"?n.shape[2]:n.shape[3],c=a==="NHWC"?n.shape[3]:n.shape[1],f=o*r,d=s*r,p=c/(r*r),v=new nre(a==="NHWC"?[i,f,d,p]:[i,p,f,d],r,a);return this.compileAndRun(v,[n])},t.prototype.split=function(n,r,a){return q4(n,r,a)},t.prototype.scatterND=function(n,r,a){var i=nv(0,n,a),o=i.sliceRank,s=i.numUpdates,c=i.sliceSize,f=i.strides,d=i.outputSize,p=[d/c,c],v=n.reshape([s,o]),g=r.reshape([s,c]);if(d===0)return ox(Pn([]),a);var y=we(0),b=new vM(s,o,v.rank,g.rank,f,p);return this.compileAndRun(b,[g,v,y]).reshape(a)},t.prototype.sparseToDense=function(n,r,a,i){var o=nv(0,n,a),s=o.sliceRank,c=o.numUpdates,f=o.strides,d=o.outputSize,p=new vM(c,s,n.rank,r.rank,f,[d,1]);return this.compileAndRun(p,[r,n,i]).reshape(a)},t.prototype.fft=function(n){return this.fftImpl(n,!1)},t.prototype.ifft=function(n){return this.fftImpl(n,!0)},t.prototype.fftImpl=function(n,r){var a=this.texData.get(n.dataId),i=new hM(sre,n.shape,r),o=new hM(lre,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,a.complexTensors.real),this.makeComplexComponentTensorInfo(n,a.complexTensors.imag)],c=this.compileAndRun(i,s),f=this.compileAndRun(o,s),d=this.complex(c,f).as2D(n.shape[0],n.shape[1]);return c.dispose(),f.dispose(),d},t.prototype.gatherND=function(n,r){var a=r.shape,i=a[a.length-1],o=I4(n,r),s=o[0],c=o[1],f=o[2],d=o[3],p=r.reshape([c,i]),v=n.reshape([n.size/f,f]),g=new dre(i,d,[c,f]);return this.compileAndRun(g,[v,p]).reshape(s)},t.prototype.fill=function(n,r,a){if((a=a||Uf(r))==="string"){var i=Gp(a,De(n));return i.fill(r),$.makeTensor(i,n,a,this)}var o=new cre(n,r),s=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],a,s)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},t.prototype.linspace=function(n,r,a){return W4(n,r,a)},t.prototype.makeTensorInfo=function(n,r){var a=this.write(null,n,r);return this.texData.get(a).usage=null,{dataId:a,shape:n,dtype:r}},t.prototype.makeOutput=function(n,r){var a=this.makeTensorInfo(n,r).dataId;return $.makeTensorFromDataId(a,n,r,this)},t.prototype.unpackTensor=function(n){var r=new mae(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},t.prototype.packTensor=function(n){var r=new Fre(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},t.prototype.packedReshape=function(n,r){var a=[Kp(n.shape)].concat(Xp(n.shape)),i={dtype:n.dtype,shape:a,dataId:n.dataId},o=[Kp(r)].concat(Xp(r)),s=new Wre(o,a),c=this.runWebGLProgram(s,[i],n.dtype,null,!0);return{dataId:c.dataId,shape:r,dtype:c.dtype}},t.prototype.decode=function(n){var r,a=this.texData.get(n),i=a.isPacked,o=a.shape,s=a.dtype,c=Tb(o);return r=i?new tre(c):new ere(c),{dtype:s,shape:o,dataId:this.runWebGLProgram(r,[{shape:c,dtype:s,dataId:n}],s,null,!0).dataId}},t.prototype.runWebGLProgram=function(n,r,a,i,o){var s=this;o===void 0&&(o=!1);var c=this.makeTensorInfo(n.outputShape,a),f=this.texData.get(c.dataId);if(n.packedOutput&&(f.isPacked=!0),n.outPackingScheme===ff.DENSE){var d=Wc(n.outputShape);f.texShape=d.map((function(C){return 2*C}))}if(n.outTexUsage!=null&&(f.usage=n.outTexUsage),De(c.shape)===0)return f.values=lf(c.dtype,0),c;var p=[],v=r.map((function(C){if(C.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var A=s.texData.get(C.dataId);if(A.texture==null){if(!n.packedInputs&&De(C.shape)<=de().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:C.shape,texData:null,isUniform:!0,uniformValues:A.values};n.packedInputs&&(A.isPacked=!0,A.shape=C.shape)}else if(!!A.isPacked!=!!n.packedInputs)C=A.isPacked?s.unpackTensor(C):s.packTensor(C),p.push(C),A=s.texData.get(C.dataId);else if(A.isPacked&&!Ph(A.shape,C.shape)){var O=C,R=C.shape;C.shape=A.shape,C=s.packedReshape(C,R),p.push(C),A=s.texData.get(C.dataId),O.shape=R}return s.uploadToGPU(C.dataId),{shape:C.shape,texData:A,isUniform:!1}}));this.uploadToGPU(c.dataId);var g,y={shape:c.shape,texData:f,isUniform:!1},b=(function(C,A,O){var R="";A.concat(O).forEach((function(I){var P=I.texData!=null&&I.texData.slice!=null&&I.texData.slice.flatOffset>0,L=I.isUniform?"uniform":I.texData.texShape;R+=I.shape+"_"+L+"_"+P}));var M=C.userCode,k=C.constructor.name;return k+="_"+R+"_"+M})(n,v,y),x=this.getAndSaveBinary(b,(function(){return(function(C,A,O,R){var M=A.userCode,k=O.map((function(G,Q){var oe={logicalShape:G.shape,texShape:G.isUniform?null:G.texData.texShape,isUniform:G.isUniform,isPacked:!G.isUniform&&G.texData.isPacked,flatOffset:null};return G.texData!=null&&G.texData.slice!=null&&G.texData.slice.flatOffset>0&&(oe.flatOffset=G.texData.slice.flatOffset),{name:A.variableNames[Q],shapeInfo:oe}})),I=k.map((function(G){return G.shapeInfo})),P={logicalShape:R.shape,texShape:R.texData.texShape,isUniform:!1,isPacked:R.texData.isPacked,flatOffset:null},L=Tne(k,P,M,A.packedInputs),F=C.createProgram(L),Y=null,Z=C.getUniformLocation(F,"NAN",!1);de().getNumber("WEBGL_VERSION")===1&&(Y=C.getUniformLocation(F,"INFINITY",!1));for(var J={},U=0;U<A.variableNames.length;U++){var H=A.variableNames[U];J[H]=C.getUniformLocation(F,H,!1),J["offset"+H]=C.getUniformLocation(F,"offset"+H,!1)}return{program:A,source:L,webGLProgram:F,uniformLocations:J,inShapeInfos:I,outShapeInfo:P,infLoc:Y,nanLoc:Z}})(s.gpgpu,n,v,y)})),S=this.activeTimers!=null;if(S&&(g=this.startTimer()),(function(C,A,O,R,M){pM(A.inShapeInfos,O),pM([A.outShapeInfo],[R]);var k=R.texData.texture,I=R.texData.texShape;R.texData.isPacked?C.setOutputPackedMatrixTexture(k,I[0],I[1]):C.setOutputMatrixTexture(k,I[0],I[1]),C.setProgram(A.webGLProgram),de().getNumber("WEBGL_VERSION")===1&&A.infLoc!==null&&C.gl.uniform1f(A.infLoc,1/0),A.nanLoc!==null&&C.gl.uniform1f(A.nanLoc,NaN),O.forEach((function(P,L){var F=A.program.variableNames[L],Y=A.uniformLocations[F],Z=A.uniformLocations["offset"+F];if(Y!=null)if(P.isUniform)if(De(P.shape)<2)C.gl.uniform1f(Y,P.uniformValues[0]);else{var J=P.uniformValues;J instanceof Float32Array||(J=new Float32Array(J)),C.gl.uniform1fv(Y,J)}else P.texData.slice!=null&&Z!=null&&C.gl.uniform1i(Z,P.texData.slice.flatOffset),C.setInputMatrixTexture(P.texData.texture,Y,L)})),M?.(C,A.webGLProgram),C.executeProgram()})(this.gpgpu,x,v,y,i),p.forEach((function(C){return s.disposeData(C.dataId)})),S&&(g=this.endTimer(g),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(g)})),!de().getBool("WEBGL_LAZILY_UNPACK")&&f.isPacked&&o===!1){var _=this.unpackTensor(c);return this.disposeData(c.dataId),_}return c},t.prototype.compileAndRun=function(n,r,a,i,o){o===void 0&&(o=!1),a=a||r[0].dtype;var s=this.runWebGLProgram(n,r,a,i,o);return $.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},t.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var n=this;this.disposed||(de().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]})),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ee((function(){if(!de().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=de().getBool("DEBUG");de().set("DEBUG",!1);var a=n.abs(we(1e-8)).dataSync()[0];if(de().set("DEBUG",r),a>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(n){var r,a=this.texData.get(n),i=a.shape,o=a.dtype,s=a.values,c=a.texture,f=a.usage,d=a.isPacked;if(c==null){var p,v=this.activeTimers!=null;v&&(p=La());var g=a.texShape;if(g==null&&(g=_te(i,d),a.texShape=g),s!=null){var y=Tb(i),b=void 0,x=g[1],S=g[0],_=s instanceof Uint8Array;d?(x=(r=Hf(g[0],g[1]))[0],S=r[1],b=new ure(y,[S,x],_)):b=new ore(y,[S,x],_);var C=this.makeTensorInfo([S,x],o);this.texData.get(C.dataId).usage=_?Mr.PIXELS:Mr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(C.dataId),x,S,s);var A=this.runWebGLProgram(b,[C],o,null,!0),O=this.texData.get(A.dataId);a.texture=O.texture,a.texShape=O.texShape,a.isPacked=O.isPacked,a.usage=O.usage,this.disposeData(C.dataId),this.texData.delete(A.dataId),a.values=null,v&&(this.uploadWaitMs+=La()-p)}else{var R=this.acquireTexture(g,f,o,d);a.texture=R}}},t.prototype.convertAndCacheOnCPU=function(n,r){var a=this.texData.get(n),i=a.dtype;return this.releaseGPUData(n),r!=null&&(a.values=(function(o,s){if(s==="float32"||s==="complex64")return o;if(s==="int32"||s==="bool"){for(var c=s==="int32"?new Int32Array(o.length):new Uint8Array(o.length),f=0;f<c.length;++f)c[f]=Math.round(o[f]);return c}throw new Error("Unknown dtype "+s)})(r,i)),a.values},t.prototype.acquireTexture=function(n,r,a,i){if(this.numBytesInGPU+=this.computeBytes(n,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,i)},t.prototype.computeBytes=function(n,r){return n[0]*n[1]*m4(r)},t})(j4);E4()&&$.registerBackend("webgl",(function(){return new yae}),2);var bae=q({square_:function(e){var t=B(e,"x","square"),n=[t];return $.runKernelFunc((function(r,a){return a([t]),r.square(t)}),{x:t},null,"Square",{},n,[])}}),hf="SquaredDifference",aB=q({squaredDifference_:function(e,t){var n,r=B(e,"a","squaredDifference"),a=B(t,"b","squaredDifference");n=It(r,a),r=n[0],a=n[1],Je(r.shape,a.shape);var i={a:r,b:a},o=[r,a];return $.runKernelFunc((function(s,c){var f=s.squaredDifference(r,a);return c([r,a]),f}),i,(function(s,c){var f=c[0],d=c[1],p=we(2);return{a:function(){return s.mul(f.sub(d).mul(p))},b:function(){return s.mul(d.sub(f).mul(p))}}}),hf,{},o,[])}}),xae=q({abs_:function(e){var t=B(e,"x","abs");return t.dtype==="complex64"?$.runKernelFunc((function(n){return n.complexAbs(t)}),{$x:t}):$.runKernelFunc((function(n,r){var a=n.abs(t);return r([t]),a}),{x:t},(function(n,r){var a=r[0];return{x:function(){return n.mul(a.toFloat().step(-1))}}}),"Abs")}}),wae=q({acos_:function(e){var t=B(e,"x","acos");return $.runKernelFunc((function(n,r){var a=n.acos(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.divStrict(we(1).sub(a.toFloat().square()).sqrt()).neg()}}}))}}),Sae=q({acosh_:function(e){var t=B(e,"x","acosh");return $.runKernelFunc((function(n,r){var a=n.acosh(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.divStrict(a.toFloat().square().sub(1).sqrt())}}}))}}),Eae=q({asin_:function(e){var t=B(e,"x","asin");return $.runKernelFunc((function(n,r){var a=n.asin(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.divStrict(we(1).sub(a.toFloat().square()).sqrt())}}}))}}),_ae=q({asinh_:function(e){var t=B(e,"x","asinh");return $.runKernelFunc((function(n,r){var a=n.asinh(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.divStrict(we(1).add(a.toFloat().square()).sqrt())}}}))}}),Cae=q({atan_:function(e){var t=B(e,"x","atan");return $.runKernelFunc((function(n,r){var a=n.atan(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(a.toFloat().square().add(1))}}}))}}),Aae=q({atanh_:function(e){var t=B(e,"x","atanh");return $.runKernelFunc((function(n,r){var a=n.atanh(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(we(1).sub(a.toFloat().square()))}}}))}}),Oae=q({ceil_:function(e){var t=B(e,"x","ceil");return $.runKernelFunc((function(n){return n.ceil(t)}),{$x:t},(function(n){return{$x:function(){return rt(n)}}}))}}),d2=q({clipByValue_:function(e,t,n){var r=B(e,"x","clipByValue");z(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var a=[r],i={min:t,max:n};return $.runKernelFunc((function(o,s){var c=o.clip(r,t,n);return s([r]),c}),{x:r},(function(o,s){var c=s[0];return{x:function(){return o.where(c.greaterEqual(t).logicalAnd(c.lessEqual(n)),rt(o))}}}),"ClipByValue",i,a)}}),Tae=q({cos_:function(e){var t=B(e,"x","cos"),n=[t];return $.runKernelFunc((function(r,a){var i=r.cos(t);return a([t]),i}),{x:t},(function(r,a){var i=a[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}}),"Cos",{},n)}}),Rae=q({cosh_:function(e){var t=B(e,"x","cosh");return $.runKernelFunc((function(n,r){var a=n.cosh(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(n)}}}))}}),Dae=q({erf_:function(e){var t=B(e,"x","erf");return z(t.dtype==="int32"||t.dtype==="float32",(function(){return"Input dtype must be `int32` or `float32`."})),t.dtype==="int32"&&(t=t.toFloat()),$.runKernelFunc((function(n,r){var a=n.erf(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),sx=q({exp_:function(e){var t=B(e,"x","exp");return $.runKernelFunc((function(n,r){var a=n.exp(t);return r([a]),a}),{x:t},(function(n,r){return{x:function(){return n.mulStrict(r[0])}}}),"Exp",{},[],[!0])}}),Mae=q({expm1_:function(e){var t=B(e,"x","expm1");return $.runKernelFunc((function(n,r){var a=n.expm1(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.mul(a.exp())}}}))}}),kae=q({floor_:function(e){var t=B(e,"x","floor");return $.runKernelFunc((function(n){return n.floor(t)}),{$x:t},(function(n){return{$x:function(){return rt(n)}}}))}}),Nae=q({log_:function(e){var t=B(e,"x","log"),n=[t];return $.runKernelFunc((function(r,a){var i=r.log(t);return a([t]),i}),{x:t},(function(r,a){var i=a[0];return{x:function(){return r.div(i.toFloat())}}}),"Log",{},n)}}),Iae=q({log1p_:function(e){var t=B(e,"x","log1p");return $.runKernelFunc((function(n,r){var a=n.log1p(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(a.add(1))}}}))}}),Pae=q({logSigmoid_:function(e){var t=B(e,"x","logSigmoid");return $.runKernelFunc((function(n,r){var a=n.softplus(t.neg()).neg();return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.mul(a.neg().sigmoid())}}}))}}),ov=q({neg_:function(e){var t=B(e,"x","neg"),n=[t];return $.runKernelFunc((function(r){return r.neg(t)}),{x:t},(function(r){return{x:function(){return r.neg()}}}),"Neg",{},n)}}),Bae=q({reciprocal_:function(e){var t=B(e,"x","reciprocal");return $.runKernelFunc((function(n,r){var a=n.reciprocal(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(a.square().neg())}}}))}}),Lae=q({round_:function(e){var t=B(e,"x","round");return $.runKernelFunc((function(n){return n.round(t)}),{$x:t},(function(n){return{$x:function(){return rt(n)}}}))}}),iB=q({rsqrt_:function(e){var t=B(e,"x","rsqrt"),n=[t];return $.runKernelFunc((function(r,a){var i=r.rsqrt(t);return a([t]),i}),{x:t},(function(r,a){var i=a[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),oB=q({sigmoid_:function(e){var t=B(e,"x","sigmoid");return $.runKernelFunc((function(n,r){var a=n.sigmoid(t);return r([a]),a}),{x:t},(function(n,r){var a=r[0];return{x:function(){return n.mul(a.mul(we(1).sub(a)))}}}),"Sigmoid")}}),Fae=q({sign_:function(e){var t=B(e,"x","sign");return $.runKernelFunc((function(n){return n.sign(t)}),{$x:t},(function(n){return{$x:function(){return rt(n)}}}))}}),jae=q({isNaN_:function(e){var t=B(e,"x","isNaN");return $.runKernelFunc((function(n){return n.isNaN(t)}),{$x:t},(function(n){return{$x:function(){return rt(n)}}}))}}),zae=q({isInf_:function(e){var t=B(e,"x","isInf");return $.runKernelFunc((function(n){return n.isInf(t)}),{$x:t},(function(n){return{$x:function(){return rt(n)}}}))}}),Uae=q({isFinite_:function(e){var t=B(e,"x","isFinite");return $.runKernelFunc((function(n){return n.isFinite(t)}),{$x:t},(function(n){return{$x:function(){return rt(n)}}}))}}),Wae=q({sin_:function(e){var t=B(e,"x","sin"),n=[t];return $.runKernelFunc((function(r,a){var i=r.sin(t);return a([t]),i}),{x:t},(function(r,a){var i=a[0];return{x:function(){return i.toFloat().cos().mul(r)}}}),"Sin",{},n)}}),Hae=q({sinh_:function(e){var t=B(e,"x","sinh");return $.runKernelFunc((function(n,r){var a=n.sinh(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(n)}}}))}}),qae=q({softplus_:function(e){var t=B(e,"x","softplus");return $.runKernelFunc((function(n,r){var a=n.softplus(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.mul(a.sigmoid())}}}))}}),Vae=q({sqrt_:function(e){var t=B(e,"x","sqrt");return $.runKernelFunc((function(n,r){var a=n.sqrt(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(a.toFloat().sqrt().mul(2))}}}))}}),Gae=q({step_:function(e,t){t===void 0&&(t=0);var n=B(e,"x","step");return $.runKernelFunc((function(r){return r.step(n,t)}),{$x:n},(function(r){return{$x:function(){return rt(r)}}}))}}),$ae=q({tan_:function(e){var t=B(e,"x","tan");return $.runKernelFunc((function(n,r){var a=n.tan(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(a.cos().square())}}}))}}),Kae=q({tanh_:function(e){var t=B(e,"x","tanh");return $.runKernelFunc((function(n,r){var a=n.tanh(t);return r([a]),a}),{x:t},(function(n,r){var a=r[0];return{x:function(){return we(1).sub(a.square()).mulStrict(n)}}}),"Tanh",{},null,[!0])}});function uB(e,t,n,r,a,i){var o,s,c=B(e,"x","batchNorm"),f=B(t,"mean","batchNorm"),d=B(n,"variance","batchNorm");return a!=null&&(o=B(a,"scale","batchNorm")),r!=null&&(s=B(r,"offset","batchNorm")),z(c.rank===2,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."})),z(f.rank===2||f.rank===1,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+f.rank+"."})),z(d.rank===2||d.rank===1,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."})),o!=null&&z(o.rank===2||o.rank===1,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."})),s!=null&&z(s.rank===2||s.rank===1,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),Vf(c,f,d,s,o,i)}function sB(e,t,n,r,a,i){var o,s,c=B(e,"x","batchNorm"),f=B(t,"mean","batchNorm"),d=B(n,"variance","batchNorm");return a!=null&&(o=B(a,"scale","batchNorm")),r!=null&&(s=B(r,"offset","batchNorm")),z(c.rank===3,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."})),z(f.rank===3||f.rank===1,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+f.rank+"."})),z(d.rank===3||d.rank===1,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."})),o!=null&&z(o.rank===3||o.rank===1,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."})),s!=null&&z(s.rank===3||s.rank===1,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),Vf(c,f,d,s,o,i)}function lB(e,t,n,r,a,i){var o,s,c=B(e,"x","batchNorm"),f=B(t,"mean","batchNorm"),d=B(n,"variance","batchNorm");return a!=null&&(o=B(a,"scale","batchNorm")),r!=null&&(s=B(r,"offset","batchNorm")),z(c.rank===4,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."})),z(f.rank===4||f.rank===1,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+f.rank+"."})),z(d.rank===4||d.rank===1,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."})),o!=null&&z(o.rank===4||o.rank===1,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."})),s!=null&&z(s.rank===4||s.rank===1,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),Vf(c,f,d,s,o,i)}function Vf(e,t,n,r,a,i){i==null&&(i=.001);var o,s,c,f=B(e,"x","batchNorm"),d=B(t,"mean","batchNorm"),p=B(n,"variance","batchNorm");a!=null&&(o=B(a,"scale","batchNorm")),r!=null&&(s=B(r,"offset","batchNorm")),z(d.rank===p.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),z(s==null||d.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),z(o==null||d.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),c=f.rank===0||f.rank===1?f.as4D(1,1,1,f.size):f.rank===2?f.as4D(1,1,f.shape[0],f.shape[1]):f.rank===3?f.as4D(1,f.shape[0],f.shape[1],f.shape[2]):f;var v=[f,d,p,o];return $.runKernelFunc((function(g,y){var b=g.batchNormalization(c,zh(d),zh(p),i,zh(o),zh(s));return y([f,d,p,o]),b}),{x:f,mean:d,variance:p,scale:o,offset:s},(function(g,y){var b=y,x=b[0],S=b[1],_=b[2],C=b[3],A=C??we(1),O=an(S.shape,c.shape),R=[];if(S.rank===1){for(var M=0;M<c.shape.length-1;++M)R.push(c.shape[M]);R.push(1)}var k=x.sub(S),I=g.mul(A),P=iB(_.add(we(i))),L=P.mul(P).mul(P).mul(we(-.5));return{x:function(){return S.rank===1?g.mul(Js(P.as4D(1,1,1,S.shape[0]),R)).mul(A).reshape(x.shape):g.mul(P).mul(A).reshape(x.shape)},mean:function(){var F=P.mul(we(-1)).mul(I);return S.rank===1&&(F=F.sum(O)),F.reshape(S.shape)},variance:function(){var F=L.mul(k).mul(I);return S.rank===1&&(F=F.sum(O)),F.reshape(S.shape)},scale:function(){var F=k.mul(P),Y=g.mul(F);return S.rank===1&&(Y=Y.sum(O)),Y.reshape(S.shape)},offset:function(){var F=g;return S.rank===1&&(F=F.sum(O)),F.reshape(S.shape)}}}),"BatchNormalization",{varianceEpsilon:i},v).reshape(f.shape)}function zh(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function am(){_4("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Xae=q({batchNormalization2d_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),am(),uB(e,t,n,i,a,r)}}),Yae=q({batchNormalization3d_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),am(),sB(e,t,n,i,a,r)}}),Zae=q({batchNormalization4d_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),am(),lB(e,t,n,i,a,r)}}),Qae=q({batchNormalization_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),am(),Vf(e,t,n,i,a,r)}}),cB=q({batchNorm_:Vf}),Jae=q({batchNorm2d_:uB}),eie=q({batchNorm3d_:sB}),tie=q({batchNorm4d_:lB}),im=q({logicalAnd_:function(e,t){var n=B(e,"a","logicalAnd","bool"),r=B(t,"b","logicalAnd","bool");return Je(n.shape,r.shape),$.runKernelFunc((function(a){return a.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),nie=q({logicalNot_:function(e){var t=B(e,"x","logicalNot","bool");return $.runKernelFunc((function(n){return n.logicalNot(t)}),{$x:t})}}),fB=q({logicalOr_:function(e,t){var n=B(e,"a","logicalOr","bool"),r=B(t,"b","logicalOr","bool");return Je(n.shape,r.shape),$.runKernelFunc((function(a){return a.logicalOr(n,r)}),{$a:n,$b:r})}}),rie=q({logicalXor_:function(e,t){var n=B(e,"a","logicalXor","bool"),r=B(t,"b","logicalXor","bool");return Je(n.shape,r.shape),fB(e,t).logicalAnd(im(e,t).logicalNot())}}),ju=q({where_:function(e,t,n){var r=B(t,"a","where"),a=B(n,"b","where"),i=B(e,"condition","where","bool");return lt(r.shape,a.shape,"Error in where: "),i.rank===1?z(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):lt(i.shape,a.shape,"Error in where: "),$.runKernelFunc((function(o,s){var c=o.select(i,r,a);return s([i]),c}),{$condition:i,$a:r,$b:a},(function(o,s){var c=s[0];return{$condition:function(){return rt(c).toFloat()},$a:function(){return o.mul(c.cast(o.dtype))},$b:function(){return o.mul(c.logicalNot().cast(o.dtype))}}}))}}),dB=function(e){return Oe(this,void 0,void 0,(function(){var t,n,r;return Te(this,(function(a){switch(a.label){case 0:return[4,(t=B(e,"condition","whereAsync","bool")).data()];case 1:return n=a.sent(),r=s2(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},Ye=q({add_:function(e,t){var n,r=B(e,"a","add"),a=B(t,"b","add");n=It(r,a),r=n[0],a=n[1];var i=Je(r.shape,a.shape);return $.runKernelFunc((function(o){return o.add(r,a)}),{a:r,b:a},(function(o){return{a:function(){var s=o,c=an(r.shape,i);return c.length>0&&(s=s.sum(c)),s.reshape(r.shape)},b:function(){var s=o,c=an(a.shape,i);return c.length>0&&(s=s.sum(c)),s.reshape(a.shape)}}}),"Add")}}),aie=q({addN_:function(e){z(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),z(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(a,i){return B(a,"tensors"+i,"addN")})),n=t[0];t.forEach((function(a){if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(a){if(!yn(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return $.runKernelFunc((function(a){return a.addN(t)}),r,(function(a){var i={};return t.forEach((function(o,s){i[s]=function(){return a.clone()}})),i}),"AddN")}}),iie=q({addStrict_:function(e,t){var n=B(e,"a","addStrict"),r=B(t,"b","addStrict");return lt(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),oie=q({atan2_:function(e,t){var n,r=B(e,"a","atan2"),a=B(t,"b","atan2");n=It(r,a),r=n[0],a=n[1];var i=Je(r.shape,a.shape);return $.runKernelFunc((function(o,s){var c=o.atan2(r,a);return s([r,a]),c}),{$a:r,$b:a},(function(o,s){var c=s[0],f=s[1];return{$a:function(){var d=Ye(c.square(),f.square()),p=o.mul(f.div(d)),v=an(c.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(c.shape)},$b:function(){var d=Ye(c.square(),f.square()),p=ov(o.mul(c.div(d))),v=an(f.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(f.shape)}}}))}}),pa=q({div_:function(e,t){var n,r=B(e,"a","div"),a=B(t,"b","div");if(n=It(r,a),r=n[0],a=n[1],r.dtype==="int32"&&a.dtype==="int32")return hB(r,a);var i=Je(r.shape,a.shape);return $.runKernelFunc((function(o,s){var c=o.realDivide(r,a);return s([r,a]),c}),{a:r,b:a},(function(o,s){var c=s[0],f=s[1];return{a:function(){var d=o.div(f.toFloat()),p=an(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=an(f.shape,i);p.length>0&&(d=d.sum(p).reshape(f.shape));var v=f.square();return d.div(v.toFloat()).neg()}}}),"Div")}}),uie=q({divNoNan_:function(e,t){var n,r=B(e,"a","div"),a=B(t,"b","div");r=(n=It(r,a))[0],a=n[1];var i=pa(r,a),o=rt(i),s=a.equal(o);return ju(s,o,i)}}),sie=q({divStrict_:function(e,t){var n=B(e,"a","div"),r=B(t,"b","div");return lt(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),hB=q({floorDiv_:function(e,t){var n,r=B(e,"a","floorDiv"),a=B(t,"b","floorDiv");n=It(r,a),r=n[0],a=n[1];var i=Je(r.shape,a.shape);return $.runKernelFunc((function(o,s){var c=o.floorDiv(r,a);return s([r,a]),c}),{a:r,b:a},(function(o,s){var c=s[0],f=s[1];return{a:function(){var d=o.div(f.toFloat()),p=an(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=an(f.shape,i);p.length>0&&(d=d.sum(p).reshape(f.shape));var v=f.square();return d.div(v.toFloat()).neg()}}}),"FloorDiv")}}),h2=q({maximum_:function(e,t){var n,r=B(e,"a","maximum"),a=B(t,"b","maximum");return n=It(r,a),r=n[0],a=n[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),Je(r.shape,a.shape),$.runKernelFunc((function(i,o){var s=i.maximum(r,a);return o([r,a]),s}),{a:r,b:a},(function(i,o){var s=o[0],c=o[1];return{a:function(){return i.mul(s.greaterEqual(c).toFloat())},b:function(){return i.mul(s.less(c).toFloat())}}}),"Maximum")}}),lie=q({maximumStrict_:function(e,t){var n=B(e,"a","maximumStrict"),r=B(t,"b","maximumStrict");return lt(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),pB=q({minimum_:function(e,t){var n,r=B(e,"a","minimum"),a=B(t,"b","minimum");return n=It(r,a),r=n[0],a=n[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),Je(r.shape,a.shape),$.runKernelFunc((function(i,o){var s=i.minimum(r,a);return o([r,a]),s}),{a:r,b:a},(function(i,o){var s=o[0],c=o[1];return{a:function(){return i.mul(s.lessEqual(c).toFloat())},b:function(){return i.mul(s.greater(c).toFloat())}}}),"Minimum")}}),cie=q({minimumStrict_:function(e,t){var n=B(e,"a","minimumStrict"),r=B(t,"b","minimumStrict");return lt(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),fie=q({mod_:function(e,t){var n,r=B(e,"a","mod"),a=B(t,"b","mod");n=It(r,a),r=n[0],a=n[1];var i=Je(r.shape,a.shape);return $.runKernelFunc((function(o,s){var c=o.mod(r,a);return s([r,a]),c}),{$a:r,$b:a},(function(o,s){var c=s[0],f=s[1];return{$a:function(){var d=an(c.shape,i);return d.length>0?o.sum(d).reshape(c.shape):o},$b:function(){var d=o.mul(c.div(f).floor().neg()),p=an(f.shape,i);return p.length>0?d.sum(p).reshape(f.shape):d}}}))}}),die=q({modStrict_:function(e,t){var n=B(e,"a","modStrict"),r=B(t,"b","modStrict");return lt(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Vn=q({mul_:function(e,t){var n,r=B(e,"a","mul"),a=B(t,"b","mul");n=It(r,a),r=n[0],a=n[1];var i=Je(r.shape,a.shape);return $.runKernelFunc((function(o,s){var c=o.multiply(r,a);return s([r,a]),c}),{a:r,b:a},(function(o,s){var c=s[0],f=s[1];return{a:function(){var d=o.mul(f.toFloat()),p=an(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=an(f.shape,i);return p.length>0?d.sum(p).reshape(f.shape):d}}}),"Mul")}}),hie=q({mulStrict_:function(e,t){var n=B(e,"a","mul"),r=B(t,"b","mul");return lt(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),uv=q({pow_:function(e,t){var n,r=B(e,"base","pow"),a=B(t,"exp","pow");n=It(r,a),r=n[0],a=n[1];var i=Je(r.shape,a.shape),o=[r,a];return $.runKernelFunc((function(s,c){var f=s.pow(r,a);return c([r,a,f]),f}),{a:r,b:a},(function(s,c){var f=c[0],d=c[1],p=c[2];return{a:function(){var v=d.toFloat(),g=s.mul(v.mul(f.pow(v.sub(we(1))))),y=an(f.shape,i);return y.length>0&&(g=g.sum(y)),g.reshape(f.shape)},b:function(){var v=f.greater(0),g=f.log().where(v,rt(f)),y=s.mul(p.mul(g)),b=an(d.shape,i);return b.length>0&&(y=y.sum(b)),y.reshape(d.shape)}}}),"Pow",{},o,[!0])}}),pie=q({powStrict_:function(e,t){return lt(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),vie=q({squaredDifferenceStrict_:function(e,t){var n=B(e,"a","squaredDifferenceStrict"),r=B(t,"b","squaredDifferenceStrict");return lt(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),on=q({sub_:function(e,t){var n,r=B(e,"a","sub"),a=B(t,"b","sub");n=It(r,a),r=n[0],a=n[1];var i=Je(r.shape,a.shape);return $.runKernelFunc((function(o){return o.subtract(r,a)}),{a:r,b:a},(function(o){return{a:function(){var s=o,c=an(r.shape,i);return c.length>0&&(s=s.sum(c)),s.reshape(r.shape)},b:function(){var s=o,c=an(a.shape,i);return c.length>0&&(s=s.sum(c)),s.neg().reshape(a.shape)}}}),"Sub")}}),mie=q({subStrict_:function(e,t){var n=B(e,"a","subStrict"),r=B(t,"b","subStrict");return lt(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),vB=q({equal_:function(e,t){var n,r=B(e,"a","equal"),a=B(t,"b","equal");return n=It(r,a),r=n[0],a=n[1],Je(r.shape,a.shape),$.runKernelFunc((function(i){return i.equal(r,a)}),{$a:r,$b:a})}}),gie=q({equalStrict_:function(e,t){var n=B(e,"a","equalStrict"),r=B(t,"b","equalStrict");return lt(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),yie=q({greater_:function(e,t){var n,r=B(e,"a","greater"),a=B(t,"b","greater");return n=It(r,a),r=n[0],a=n[1],Je(r.shape,a.shape),$.runKernelFunc((function(i){return i.greater(r,a)}),{a:r,b:a},null,"Greater")}}),mB=q({greaterEqual_:function(e,t){var n,r=B(e,"a","greaterEqual"),a=B(t,"b","greaterEqual");return n=It(r,a),r=n[0],a=n[1],Je(r.shape,a.shape),$.runKernelFunc((function(i,o){var s=i.greaterEqual(r,a);return o([r,a]),s}),{a:r,b:a},(function(i,o){var s=o[0],c=o[1];return{a:function(){return rt(s)},b:function(){return rt(c)}}}),"GreaterEqual")}}),bie=q({greaterEqualStrict_:function(e,t){var n=B(e,"a","greaterEqualStrict"),r=B(t,"b","greaterEqualStrict");return lt(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),xie=q({greaterStrict_:function(e,t){var n=B(e,"a","greaterStrict"),r=B(t,"b","greaterStrict");return lt(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),wie=q({less_:function(e,t){var n,r=B(e,"a","less"),a=B(t,"b","less");return n=It(r,a),r=n[0],a=n[1],Je(r.shape,a.shape),$.runKernelFunc((function(i){return i.less(r,a)}),{a:r,b:a},null,"Less")}}),Sie=q({lessEqual_:function(e,t){var n,r=B(e,"a","lessEqual"),a=B(t,"b","lessEqual");return n=It(r,a),r=n[0],a=n[1],Je(r.shape,a.shape),$.runKernelFunc((function(i,o){var s=i.lessEqual(r,a);return o([r,a]),s}),{a:r,b:a},null,"LessEqual")}}),Eie=q({lessEqualStrict_:function(e,t){var n=B(e,"a","lessEqualStrict"),r=B(t,"b","lessEqualStrict");return lt(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),_ie=q({lessStrict_:function(e,t){var n=B(e,"a","lessStrict"),r=B(t,"b","lessStrict");return lt(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Cie=q({notEqual_:function(e,t){var n,r=B(e,"a","notEqual"),a=B(t,"b","notEqual");return n=It(r,a),r=n[0],a=n[1],Je(r.shape,a.shape),$.runKernelFunc((function(i){return i.notEqual(r,a)}),{a:r,b:a},null,"NotEqual")}}),Aie=q({notEqualStrict_:function(e,t){var n=B(e,"a","notEqualStrict"),r=B(t,"b","notEqualStrict");return lt(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function _M(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function CM(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var p2=q({gather_:function(e,t,n){n===void 0&&(n=0);var r=B(e,"x","gather"),a=B(t,"indices","gather","int32");n=fn(n,r.shape)[0];var i=(function(o,s,c){for(var f=o.shape[c],d=[],p=1,v=1,g=0;g<c;g++)d.push(o.shape[g]),p*=o.shape[g];for(g=0;g<s.rank;g++)d.push(s.shape[g]);for(g=c+1;g<o.rank;g++)d.push(o.shape[g]),v*=o.shape[g];return{batchSize:p,sliceSize:v,dimSize:f,outputShape:d}})(r,a,n);return $.runKernelFunc((function(o,s){var c=o.gather(r,a.flatten(),n);return s([a]),c}),{x:r,indices:a},(function(o,s){var c=s[0];return{x:function(){var f=r.shape,d=c.size,p=f.slice(0,n),v=p.length,g=f.slice(n,f.length).slice(1),y=g.length,b=_M(0,v),x=_M(v+1,v+1+y),S=CM([p,[d],g]),_=o.reshape(S),C=c.reshape([d]),A=CM([[v],b,x]),O=_.transpose(A),R=gB(O,C,r.shape[n]),M=e2(A);return R=R.transpose(M)},indices:function(){return c}}}),"Gather",{axis:n}).reshape(i.outputShape)}}),gB=q({unsortedSegmentSum_:function(e,t,n){var r=B(e,"x","unsortedSegmentSum"),a=B(t,"segmentIds","unsortedSegmentSum","int32");return z(Wt(n),(function(){return"numSegments must be of dtype int"})),$.runKernelFunc((function(i,o){var s=i.unsortedSegmentSum(r,a,n);return o([a]),s}),{$x:r},(function(i,o){var s=o[0];return{$x:function(){return(function(c,f){for(var d=h2(f,rt(f)),p=p2(c,d),v=mB(f,we(0,"int32")),g=p.rank-v.rank,y=0;y<g;++y)v=Qr(v,y+1);v=im(v,Dl(p.shape,"bool"));var b=rt(p);return ju(v,p,b)})(i,s)}}}))}}),Oie=function(e,t,n){return Oe(this,void 0,void 0,(function(){var r,a,i,o,s,c,f,d,p,v,g,y,b;return Te(this,(function(x){switch(x.label){case 0:for(r=B(e,"tensor","boolMask"),a=B(t,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape,z(o>0,(function(){return"mask cannot be scalar"})),lt(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,f=i;f<i+o;f++)c*=s[f];return d=s.slice(0,i).concat([c],s.slice(i+o)),p=r.reshape(d),v=a.reshape([-1]),[4,dB(v)];case 1:return g=x.sent(),y=g.squeeze([1]),b=p2(p,y,i),e!==r&&r.dispose(),t!==a&&a.dispose(),y.dispose(),p.dispose(),v.dispose(),g.dispose(),[2,b]}}))}))};function yB(e,t,n,r,a,i,o){i===void 0&&(i="NHWC"),z(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,c=t,f=!1;t.rank===3&&(f=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),z(s.length===4,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),z(c.rank===4,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank})),z(n.rank===4,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var d=i==="NHWC"?s[3]:s[1],p=i==="NHWC"?c.shape[3]:c.shape[1];z(d===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+n.shape[2]+"."})),z(p===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+n.shape[3]+"."})),o!=null&&z(Wt(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var v=i2(i),g=$u(s,n.shape,r,1,a,o,!1,v),y=$.runKernelFunc((function(b,x){var S=b.conv2dDerInput(c,n,g);return x([n,c]),S}),{dy4D:c,filter:n},(function(b,x){var S=x[0],_=x[1];return{dy4D:function(){return sa(b,S,r,a,i,1,o)},filter:function(){return v2(b,_,S.shape,r,a,i,o)}}}));return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}function Bb(e){var t=(function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i})(e),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function bB(e,t,n,r,a){z(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var i=e,o=t,s=!1;t.rank===4&&(s=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var c=i[4],f=o.shape[4];z(i.length===5,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."})),z(o.rank===5,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank})),z(n.rank===5,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),z(c===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[3]+"."})),z(f===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[4]+"."}));var d=av(i,n.shape,r,1,a),p=$.runKernelFunc((function(v){return v.conv3dDerInput(o,n,d)}),{dy5D:o});return s?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}var Tie=q({conv1d_:function(e,t,n,r,a,i,o){a===void 0&&(a="NWC"),i===void 0&&(i=1);var s=B(e,"x","conv1d"),c=B(t,"filter","conv1d"),f=s,d=!1;s.rank===2&&(d=!0,f=s.as3D(1,s.shape[0],s.shape[1])),z(f.rank===3,(function(){return"Error in conv1d: input must be rank 3, but got rank "+f.rank+"."})),z(c.rank===3,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."})),o!=null&&z(Wt(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."})),z(f.shape[2]===c.shape[1],(function(){return"Error in conv1d: depth of input ("+f.shape[2]+") must match input depth for filter "+c.shape[1]+"."})),z(pr(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"})),z(a==="NWC",(function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."}));var p=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),v=f.as4D(f.shape[0],1,f.shape[1],f.shape[2]),g=sa(v,p,[1,n],r,"NHWC",[1,i],o);return d?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),sa=q({conv2d_:function(e,t,n,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var s=B(e,"x","conv2d"),c=B(t,"filter","conv2d"),f=s,d=!1;s.rank===3&&(d=!0,f=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),z(f.rank===4,(function(){return"Error in conv2d: input must be rank 4, but got rank "+f.rank+"."})),z(c.rank===4,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."})),o!=null&&z(Wt(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var p=a==="NHWC"?f.shape[3]:f.shape[1];z(p===c.shape[2],(function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+c.shape[2]+"."})),z(pr(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}));var v=i2(a),g=$u(f.shape,c.shape,n,i,r,o,!1,v),y=[c,f],b=$.runKernelFunc((function(x,S){var _=x.conv2d(f,c,g);return S([c,f]),_}),{x:f,filter:c},(function(x,S){var _=S,C=_[0],A=_[1];return z(gl(i),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"})),{x:function(){return xB(A.shape,x,C,n,r,a)},filter:function(){return v2(A,x,C.shape,n,r,a)}}}),"Conv2D",g,y);return d?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),Rie=q({conv3d_:function(e,t,n,r,a,i){a===void 0&&(a="NDHWC"),i===void 0&&(i=[1,1,1]);var o=B(e,"x","conv3d"),s=B(t,"filter","conv3d"),c=o,f=!1;o.rank===4&&(f=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),z(c.rank===5,(function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."})),z(s.rank===5,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),z(c.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),z((function(v,g){return Bb(v)||Bb(g)})(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),z(a==="NDHWC",(function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."}));var d=av(c.shape,s.shape,n,i,r),p=$.runKernelFunc((function(v,g){var y=v.conv3d(c,s,d);return g([c,s]),y}),{x:c,$filter:s},(function(v,g){z(Bb(i),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}));var y=g[0],b=g[1];return{x:function(){return bB(y.shape,v,b,n,r)},$filter:function(){return(function(x,S,_,C,A){var O=x;x.rank===4&&(O=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3]));var R=S;R.rank===4&&(R=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3])),z(O.rank===5,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+O.shape+"."})),z(R.rank===5,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+R.shape+"."})),z(_.length===5,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+_+"."})),z(O.shape[4]===_[3],(function(){return"Error in conv3dDerFilter: depth of input "+O.shape[4]+") must match input depth in filter ("+_[3]+"."})),z(R.shape[4]===_[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+R.shape[4]+") must match output depth for filter ("+_[4]+")."}));var M=av(O.shape,_,C,1,A);return $.runKernelFunc((function(k){return k.conv3dDerFilter(O,R,M)}),{x5D:O,dy5D:R})})(y,v,b.shape,n,r)}}}));return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),v2=q({conv2dDerFilter_:function(e,t,n,r,a,i,o){i===void 0&&(i="NHWC");var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var c=t;c.rank===3&&(c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),z(s.rank===4,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),z(c.rank===4,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."})),z(n.length===4,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var f=i==="NHWC"?s.shape[3]:s.shape[1],d=i==="NHWC"?c.shape[3]:c.shape[1];z(f===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+f+") must match input depth in filter ("+n[2]+"."})),z(d===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+n[3]+")."})),o!=null&&z(Wt(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var p=i2(i),v=$u(s.shape,n,r,1,a,o,!1,p);return $.runKernelFunc((function(g){return g.conv2dDerFilter(s,c,v)}),{x4D:s,dy4D:c})}}),xB=q({conv2dDerInput_:yB}),om=q({depthwiseConv2d_:function(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]);var s=B(e,"x","depthwiseConv2d"),c=B(t,"filter","depthwiseConv2d"),f=s,d=!1;s.rank===3&&(d=!0,f=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),z(f.rank===4,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+f.rank+"."})),z(c.rank===4,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."})),z(f.shape[3]===c.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+f.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."})),i==null&&(i=[1,1]),z(pr(n,i),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),o!=null&&z(Wt(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var p=$u(f.shape,c.shape,n,i,r,o,!0),v=[f,c],g=$.runKernelFunc((function(y,b){var x=y.depthwiseConv2D(f,c,p);return b([f,c]),x}),{x:f,filter:c},(function(y,b){z(gl(i),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"}));var x=b[0],S=b[1];return{x:function(){return wB(x.shape,y,S,p)},filter:function(){return SB(x,y,S.shape,p)}}}),"DepthwiseConv2dNative",p,v);return d?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),wB=q({depthwiseConv2dDerInput_:function(e,t,n,r){var a=t,i=!1;t.rank===3&&(i=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=$.runKernelFunc((function(s){return s.depthwiseConv2DDerInput(a,n,r)}),{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),SB=q({depthwiseConv2dDerFilter_:function(e,t,n,r){var a=e;e.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),$.runKernelFunc((function(o){return o.depthwiseConv2DDerFilter(a,i,r)}),{x4D:a,dy4D:i})}}),m2=q({separableConv2d_:function(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var s=B(e,"x","separableConv2d"),c=B(t,"depthwiseFilter","separableConv2d"),f=B(n,"pointwiseFilter","separableConv2d"),d=s,p=!1;if(s.rank===3&&(p=!0,d=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");z(d.rank===4,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."})),z(c.rank===4,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."})),z(f.rank===4,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."})),z(f.shape[0]===1,(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+f.shape[0]+"."})),z(f.shape[1]===1,(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+f.shape[1]+"."}));var v=c.shape[2],g=c.shape[3];z(f.shape[2]===v*g,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+v*g+", but got "+f.shape[2]+"."}));var y=om(d,c,r,a,o,i),b=sa(y,f,1,"valid",o);return p?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),Die=q({conv2dTranspose_:function(e,t,n,r,a,i){return yB(n,B(e,"x","conv2dTranspose"),B(t,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),Mie=q({conv3dTranspose_:function(e,t,n,r,a){return bB(n,B(e,"x","conv3dTranspose"),B(t,"filter","conv3dTranspose"),r,a)}}),um=q({matMul_:function(e,t,n,r){var a;n===void 0&&(n=!1),r===void 0&&(r=!1);var i=B(e,"a","matMul"),o=B(t,"b","matMul");a=It(i,o),i=a[0],o=a[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],c=r?o.shape[o.rank-1]:o.shape[o.rank-2],f=n?i.shape[i.rank-1]:i.shape[i.rank-2],d=r?o.shape[o.rank-2]:o.shape[o.rank-1],p=i.shape.slice(0,-2),v=o.shape.slice(0,-2),g=De(p),y=De(v);z(i.rank>=2&&o.rank>=2&&i.rank===o.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."})),z(yn(p,v),(function(){return"Error in matMul: outer dimensions ("+p+") and ("+v+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."})),z(s===c,(function(){return"Error in matMul: inner shapes ("+s+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var b=i.shape.slice(0,-2).concat([f,d]),x=n?i.as3D(g,s,f):i.as3D(g,f,s),S=r?o.as3D(y,d,c):o.as3D(y,c,d),_={transposeA:n,transposeB:r};return $.runKernelFunc((function(C,A){var O=C.batchMatMul(x,S,n,r);return A([x,S]),O}),{a:x,b:S},(function(C,A){var O=A,R=O[0],M=O[1];return n||r?!n&&r?{a:function(){return C.matMul(M,!1,!1)},b:function(){return C.matMul(R,!0,!1)}}:n&&!r?{a:function(){return M.matMul(C,!1,!0)},b:function(){return R.matMul(C,!1,!1)}}:{a:function(){return M.matMul(C,!0,!0)},b:function(){return C.matMul(R,!0,!0)}}:{a:function(){return C.matMul(M,!1,!0)},b:function(){return R.matMul(C,!0,!1)}}}),"BatchMatMul",_).reshape(b)}}),kie=q({dot_:function(e,t){var n=B(e,"t1","dot"),r=B(t,"t2","dot");z(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];return z(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."})),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Nie=q({outerProduct_:function(e,t){var n=B(e,"v1","outerProduct"),r=B(t,"v2","outerProduct");return z(n.rank===1&&r.rank===1,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Gf=q({reverse_:function(e,t){var n=B(e,"x","reverse");if(n.rank===0)return n.clone();var r=fn(t,n.shape);return $.runKernelFunc((function(a){return a.reverse(n,r)}),{$x:n},(function(a){return{$x:function(){return a.reverse(r)}}})).reshapeAs(n)}}),Iie=q({reverse1d_:function(e){var t=B(e,"x","reverse");return z(t.rank===1,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),Gf(t,0)}}),Pie=q({reverse2d_:function(e,t){var n=B(e,"x","reverse");return z(n.rank===2,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),Gf(n,t)}}),Bie=q({reverse3d_:function(e,t){var n=B(e,"x","reverse");return z(n.rank===3,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),Gf(n,t)}}),Lie=q({reverse4d_:function(e,t){var n=B(e,"x","reverse");return z(n.rank===4,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),Gf(n,t)}});function EB(e,t,n,r,a,i){var o=B(e,"x","maxPool"),s=o,c=!1;o.rank===3&&(c=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),z(s.rank===4,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),z(pr(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),i!=null&&z(Wt(a),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var f=df(s.shape,t,n,r,a,i);if(f.filterWidth===1&&f.filterHeight===1&&yn(f.inShape,f.outShape))return o.clone();var d=[s],p=$.runKernelFunc((function(v,g){var y=v.maxPool(s,f);return g([s,y]),y}),{x:s},(function(v,g){var y=g[0],b=g[1];return{x:function(){return(function(x,S,_,C,A,O,R,M){var k=B(x,"dy","maxPoolBackprop"),I=B(S,"input","maxPoolBackprop"),P=B(_,"output","maxPoolBackprop");z(I.rank===k.rank,(function(){return"Rank of input ("+I.rank+") does not match rank of dy ("+k.rank+")"})),z(pr(A,O),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+A+" and dilations '"+O+"'"})),z(k.rank===4,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+k.rank+"."})),z(I.rank===4,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+I.rank+"."}));var L=df(I.shape,C,A,O,R,M);return $.runKernelFunc((function(F){return F.maxPoolBackprop(k,I,P,L)}),{$dy:k,$input:I})})(v,y,b,t,n,r,a)}}}),"MaxPool",f,d);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function _B(e,t,n,r,a,i){var o=B(e,"x","avgPool","float32");z(pr(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=o,c=!1;o.rank===3&&(c=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),z(s.rank===4,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),i!=null&&z(Wt(a),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var f=df(s.shape,t,n,r,a,i);if(f.filterWidth===1&&f.filterHeight===1&&yn(f.inShape,f.outShape))return o.clone();var d=$.runKernelFunc((function(p){return p.avgPool(s,f)}),{x:s},(function(p){return{x:function(){return(function(v,g,y,b,x,S){var _=B(v,"dy","avgPoolBackprop"),C=B(g,"input","avgPoolBackprop");z(C.rank===_.rank,(function(){return"Rank of input ("+C.rank+") does not match rank of dy ("+_.rank+")"})),z(pr(b,x),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+x+"'"}));var A=C,O=_,R=!1;C.rank===3&&(R=!0,A=C.as4D(1,C.shape[0],C.shape[1],C.shape[2]),O=_.as4D(1,_.shape[0],_.shape[1],_.shape[2])),z(O.rank===4,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+O.rank+"."})),z(A.rank===4,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+A.rank+"."}));var M=df(A.shape,y,b,x,S),k=$.runKernelFunc((function(I){return I.avgPoolBackprop(O,A,M)}),{dy4D:O,input4D:A});return R?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k})(p,s,t,n,r,a)}}}),"AvgPool",f);return d=d.cast(o.dtype),c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var mn=q({maxPool_:function(e,t,n,r,a){return EB(e,t,n,1,r,a)}}),$f=q({avgPool_:function(e,t,n,r,a){return _B(e,t,n,1,r,a)}}),Fie=q({pool_:function(e,t,n,r,a,i){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");var o=B(e,"x","maxPool"),s=o,c=!1;o.rank===3&&(c=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),z(pr(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"}));var f,d=df(s.shape,t,i,a,r),p=[d.dilationHeight,d.dilationWidth];f=r==="same"?(function(A,O){var R=A.map((function(I,P){return I+(I-1)*(O[P]-1)})).map((function(I){return I-1})),M=R.map((function(I){return Math.floor(I/2)})),k=R.map((function(I,P){return I-M[P]}));return R.map((function(I,P){return[M[P],k[P]]}))})([d.filterHeight,d.filterWidth],p):[[0,0],[0,0]];var v=p[0]===1&&p[1]===1,g=(function(A,O,R){var M=R.map((function(Z){return Z[0]})),k=R.map((function(Z){return Z[1]})),I=A.concat(M,k),P=O.map((function(Z,J){return(Z-I[J]%Z)%Z})),L=k.map((function(Z,J){return Z+P[J]})),F=O.map((function(Z,J){return[M[J],L[J]]})),Y=O.map((function(Z,J){return[0,P[J]]}));return[F,Y]})([d.inHeight,d.inWidth],p,f),y=g[0],b=g[1],x=v?r:"valid",S=v?s:D4(s,p,y),_=(n==="avg"?function(){return _B(S,t,i,1,x)}:function(){return EB(S,t,i,1,x)})(),C=v?_:O4(_,p,b);return c?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),jie=q({maxPool3d_:function(e,t,n,r,a,i,o){i===void 0&&(i="NDHWC");var s=B(e,"x","maxPool3d"),c=s,f=!1;s.rank===4&&(f=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),z(c.rank===5,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."})),z(i==="NDHWC",(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),z(pr(n,o),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),a!=null&&z(Wt(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var d=rv(c.shape,t,n,o,r,a,i),p=$.runKernelFunc((function(v,g){var y=v.maxPool3d(c,d);return g([c,y]),y}),{x:c},(function(v,g){var y=g[0],b=g[1];return{x:function(){return(function(x,S,_,C,A,O,R,M){var k=B(x,"dy","maxPool3dBackprop"),I=B(S,"input","maxPool3dBackprop"),P=B(_,"output","maxPool3dBackprop"),L=k,F=I,Y=P,Z=!1;I.rank===4&&(Z=!0,L=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),F=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3]),Y=P.as5D(1,P.shape[0],P.shape[1],P.shape[2],P.shape[3])),z(L.rank===5,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+L.rank+"."})),z(F.rank===5,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+F.rank+"."})),z(Y.rank===5,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+Y.rank+"."})),O==null&&(O=[1,1,1]),z(pr(A,O),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+A+" and dilations '"+O+"'"})),M!=null&&z(Wt(R),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+M+" but got pad "+R+"."}));var J=rv(F.shape,C,A,O,R,M),U=$.runKernelFunc((function(H){return H.maxPool3dBackprop(L,F,Y,J)}),{dy5D:L,input5D:F});return Z?U.as4D(U.shape[1],U.shape[2],U.shape[3],U.shape[4]):U})(v,y,b,t,n,o,r,a)}}}));return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),zie=q({avgPool3d_:function(e,t,n,r,a,i,o){i===void 0&&(i="NDHWC");var s=B(e,"x","avgPool3d","float32"),c=s,f=!1;s.rank===4&&(f=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),z(c.rank===5,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."})),z(i==="NDHWC",(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),z(pr(n,o),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),a!=null&&z(Wt(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var d=rv(c.shape,t,n,o,r,a,i),p=$.runKernelFunc((function(v){return v.avgPool3d(c,d)}),{x:c},(function(v){return{x:function(){return(function(g,y,b,x,S,_,C){var A=B(g,"dy","avgPool3dBackprop"),O=B(y,"input","avgPool3dBackprop"),R=A,M=O,k=!1;O.rank===4&&(k=!0,R=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),M=O.as5D(1,O.shape[0],O.shape[1],O.shape[2],O.shape[3])),z(R.rank===5,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+R.rank+"."})),z(M.rank===5,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+M.rank+"."})),S==null&&(S=[1,1,1]),z(pr(x,S),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+S+"'"})),C!=null&&z(Wt(_),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+C+" but got pad "+_+"."}));var I=rv(M.shape,b,x,S,_,C),P=$.runKernelFunc((function(L){return L.avgPool3dBackprop(R,M,I)}),{dy5D:R,input5D:M});return k?P.as4D(P.shape[1],P.shape[2],P.shape[3],P.shape[4]):P})(v,c,t,n,o,r,a)}}}));return p=p.cast(c.dtype),f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Xa=q({slice_:function(e,t,n){var r,a,i=B(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach((function(c){z(c!==-1,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=n==null?new Array(i.rank).fill(-1):typeof n=="number"?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map((function(c,f){return c>=0?c:(z(c===-1,(function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+f+"."})),i.shape[f]-r[f])})),pne(i,r,a);var o=i.shape,s={begin:r,size:a};return $.runKernelFunc((function(c){return c.slice(i,r,a)}),{x:i},(function(c){for(var f=[],d=0;d<c.rank;d++)f.push([r[d],o[d]-r[d]-a[d]]);return{x:function(){return c.pad(f)}}}),"Slice",s)}}),Uie=q({slice1d_:function(e,t,n){var r=B(e,"x","slice1d");return z(r.rank===1,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Xa(r,[t],[n])}}),Wie=q({slice2d_:function(e,t,n){var r=B(e,"x","slice2d");return z(r.rank===2,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Xa(r,t,n)}}),CB=q({slice3d_:function(e,t,n){var r=B(e,"x","slice3d");return z(r.rank===3,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Xa(r,t,n)}}),Hie=q({slice4d_:function(e,t,n){var r=B(e,"x","slice4d");return z(r.rank===4,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Xa(r,t,n)}});function AB(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(hr(t.shape,r))),e.rank<n.rank&&(e=e.reshape(hr(e.shape,r))),{x:function(){var i=e.mul(n.equal(t).cast(e.dtype));return a==null?i:i.transpose(a)}}}var qie=q({all_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=B(e,"x","all","bool"),a=fn(t,r.shape),i=a,o=Qa(i,r.rank);o!=null&&(r=r.transpose(o),i=Ja(i.length,r.rank));var s=$.runKernelFunc((function(f){return f.all(r,i)}),{$x:r});if(n){var c=hr(s.shape,a);return s.reshape(c)}return s}}),Vie=q({any_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=B(e,"x","any","bool"),a=fn(t,r.shape),i=a,o=Qa(i,r.rank);o!=null&&(r=r.transpose(o),i=Ja(i.length,r.rank));var s=$.runKernelFunc((function(f){return f.any(r,i)}),{$x:r});if(n){var c=hr(s.shape,a);return s.reshape(c)}return s}}),Gie=q({argMax_:function(e,t){t===void 0&&(t=0);var n=B(e,"x","argMax");t==null&&(t=0);var r=fn(t,n.shape),a=Qa(r,n.rank);a!=null&&(n=n.transpose(a),r=Ja(r.length,n.rank));var i={axis:r[0]},o=[n];return $.runKernelFunc((function(s,c){var f=s.argMax(n,r[0]);return c([n]),f}),{x:n},(function(s,c){var f=c[0];return{x:function(){return rt(f)}}}),"ArgMax",i,o)}}),$ie=q({argMin_:function(e,t){t===void 0&&(t=0);var n=B(e,"x","argMin");t==null&&(t=0);var r=fn(t,n.shape),a=Qa(r,n.rank);return a!=null&&(n=n.transpose(a),r=Ja(r.length,n.rank)),$.runKernelFunc((function(i,o){var s=i.argMin(n,r[0]);return o([n]),s}),{$x:n},(function(i,o){var s=o[0];return{$x:function(){return rt(s)}}}))}}),Kie=q({logSumExp_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=B(e,"x","logSumExp"),a=fn(t,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),s=i.reshape(o.shape).add(o);if(n){var c=hr(s.shape,a);return s.reshape(c)}return s}}),sm=q({max_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=B(e,"x","max"),a=r,i=fn(t,r.shape),o=i,s=Qa(o,r.rank);s!=null&&(r=r.transpose(s),o=Ja(o.length,r.rank));var c=[r],f=$.runKernelFunc((function(p,v){var g=p.max(r,o);return v([a,g]),g}),{x:r},(function(p,v){return AB(p,v[1],v[0],i,s)}),"Max",{axes:o},c,[!0]);if(n){var d=hr(f.shape,i);f=f.reshape(d)}return f}}),Xie=q({mean_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=B(e,"x","mean"),a=fn(t,r.shape),i=De(Un(r.shape,a)[1]);return rm((function(o){var s=we(i);return{value:(s.dtype===o.dtype?o:o.cast(s.dtype)).div(s).sum(t,n),gradFunc:function(c){var f=o.shape.slice();return a.forEach((function(d){f[d]=1})),c.reshape(f).mul(Dl(o.shape,"float32")).div(i)}}}))(r)}}),Yie=q({min_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=B(e,"x","min"),a=r,i=fn(t,r.shape),o=i,s=Qa(o,r.rank);s!=null&&(r=r.transpose(s),o=Ja(o.length,r.rank));var c=[r],f=$.runKernelFunc((function(p,v){var g=p.min(r,o);return v([a,g]),g}),{x:r},(function(p,v){return AB(p,v[1],v[0],i,s)}),"Min",{axes:o},c,[!0]);if(n){var d=hr(f.shape,i);f=f.reshape(d)}return f}}),Zie=q({moments_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=fn(t,(e=B(e,"x","moments")).shape),a=e.mean(r,n),i=a.shape;n||(i=hr(a.shape,r));var o=e.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,n)}}}),OB=q({sum_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=B(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=fn(t,r.shape);return rm((function(i){var o=Qa(a,i.rank),s=a,c=i;o!=null&&(c=i.transpose(o),s=Ja(s.length,i.rank));var f=function(g){var y=i.shape.slice();return a.forEach((function(b){y[b]=1})),g.reshape(y).mul(Dl(i.shape,"float32"))},d={axes:s},p=$.runKernelFunc((function(g){return g.sum(c,s)}),{x:c},(function(g){return{x:function(){return f(g)}}}),"Sum",d);if(n){var v=hr(p.shape,a);p=p.reshape(v)}return{value:p,gradFunc:f}}))(r)}}),Qie=q({prod_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=B(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=fn(t,r.shape),i=Qa(a,r.rank),o=a,s=r;i!=null&&(s=r.transpose(i),o=Ja(o.length,r.rank));var c=$.runKernelFunc((function(d){return d.prod(s,o)}),{permutedX:s});if(n){var f=hr(c.shape,a);c=c.reshape(f)}return c}}),TB=q({elu_:function(e){var t=B(e,"x","elu");return $.runKernelFunc((function(n,r){var a=n.elu(t);return r([a]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return $.runKernelFunc((function(i){return i.eluDer(n,a)}),{dy:n,y:a})}}}))}}),Jie=q({leakyRelu_:function(e,t){t===void 0&&(t=.2);var n=B(e,"x","leakyRelu");return h2(we(t).mul(n),n)}}),RB=q({prelu_:function(e,t){var n=B(e,"x","prelu"),r=B(t,"alpha","prelu");return $.runKernelFunc((function(a,i){var o=a.prelu(n,r);return i([n,r]),o}),{x:n,alpha:r},(function(a,i){var o=i[0],s=i[1],c=o.greater(0);return{x:function(){return ju(c,a,a.mul(s))},alpha:function(){var f=ju(c,rt(a),a.mul(o)),d=an(s.shape,a.shape);return d.length>0&&(f=f.sum(d)),f.reshape(s.shape)}}}),"Prelu")}}),Mt=q({relu_:function(e){var t=B(e,"x","relu");return t.dtype==="bool"?t.toInt():$.runKernelFunc((function(n,r){var a=n.relu(t);return r([t]),a}),{x:t},(function(n,r){var a=r[0];return{x:function(){return n.mulStrict(a.step().toFloat())}}}),"Relu")}}),DB=q({relu6_:function(e){var t=B(e,"x","relu6");return t.dtype==="bool"?t.toInt():$.runKernelFunc((function(n,r){var a=n.relu6(t);return r([t]),a}),{x:t},(function(n,r){var a=r[0],i=a.lessEqual(6).mul(a.step());return{x:function(){return n.mulStrict(i.toFloat())}}}),"Relu6")}}),eoe=q({selu_:function(e){var t=B(e,"x","selu");return $.runKernelFunc((function(n,r){var a=n.selu(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){var i=a.greater(we(0)),o=we(c2),s=we(f2),c=n.mul(s),f=n.mul(o).mul(a.toFloat().exp());return ju(i,c,f)}}}))}}),Wo=q({transpose_:function(e,t){var n=B(e,"x","transpose");if(t==null&&(t=n.shape.map((function(a,i){return i})).reverse()),z(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(a){z(a>=0&&a<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return $.runKernelFunc((function(a){return a.transpose(n,t)}),{x:n},(function(a){var i=e2(t);return{x:function(){return a.transpose(i)}}}),"Transpose",r)}}),toe=q({localResponseNormalization_:function(e,t,n,r,a){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),a===void 0&&(a=.5);var i=B(e,"x","localResponseNormalization");z(i.rank===4||i.rank===3,(function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."})),z(Wt(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var o=i,s=!1;i.rank===3&&(s=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=$.runKernelFunc((function(f,d){var p=f.localResponseNormalization4D(o,t,n,r,a);return d([o,p]),p}),{x4D:o},(function(f,d){var p=d[0],v=d[1];return{x4D:function(){return $.runKernelFunc((function(g){return g.LRNGrad(f,p,v,t,n,r,a)}),{})}}}));return s?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),MB=q({norm_:function(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var a=(function s(c,f,d){if(d===void 0&&(d=null),c.rank===0)return c.abs();if(c.rank!==1&&d===null)return s(c.reshape([-1]),f,d);if(c.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(f===1)return c.abs().sum(d);if(f===1/0)return c.abs().max(d);if(f===-1/0)return c.abs().min(d);if(f==="euclidean"||f===2)return c.abs().pow(we(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}if(Array.isArray(d)&&d.length===2){if(f===1)return c.abs().sum(d[0]).max(d[1]-1);if(f===1/0)return c.abs().sum(d[1]).max(d[0]);if(f===-1/0)return c.abs().sum(d[1]).min(d[0]);if(f==="fro"||f==="euclidean")return c.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}throw new Error("Error in norm: invalid axis: "+d)})(e=B(e,"x","norm"),t,n),i=a.shape;if(r){var o=fn(n,e.shape);i=hr(a.shape,o)}return a.reshape(i)}}),noe=q({basicLSTMCell_:function(e,t,n,r,a,i){var o=B(e,"forgetBias","basicLSTMCell"),s=B(t,"lstmKernel","basicLSTMCell"),c=B(n,"lstmBias","basicLSTMCell"),f=B(r,"data","basicLSTMCell"),d=B(a,"c","basicLSTMCell"),p=B(i,"h","basicLSTMCell"),v=f.concat(p,1).matMul(s).add(c),g=v.shape[0],y=v.shape[1]/4,b=[g,y],x=v.slice([0,0],b),S=v.slice([0,y],b),_=v.slice([0,2*y],b),C=v.slice([0,3*y],b),A=x.sigmoid().mulStrict(S.tanh()).addStrict(d.mulStrict(o.add(_).sigmoid())),O=A.tanh().mulStrict(C.sigmoid());return[A,O]}}),roe=q({multiRNNCell_:function(e,t,n,r){for(var a=B(t,"data","multiRNNCell"),i=Zp(n,"c","multiRNNCell"),o=Zp(r,"h","multiRNNCell"),s=a,c=[],f=0;f<e.length;f++){var d=e[f](s,i[f],o[f]);c.push(d[0]),c.push(d[1]),s=d[1]}var p=[],v=[];for(f=0;f<c.length;f+=2)p.push(c[f]),v.push(c[f+1]);return[p,v]}}),aoe=q({movingAverage_:function(e,t,n,r,a){a===void 0&&(a=!0);var i=B(e,"v","movingAverage"),o=B(t,"x","movingAverage"),s=B(n,"decay","movingAverage");tte(i,o),z(yn(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var c=we(1),f=c.sub(s),d=o.sub(i).mul(f);if(a){z(r!=null,(function(){return"When using zeroDebias: true, step is required."}));var p=B(r,"step","movingAverage");d=d.div(c.sub(uv(s,p)))}return i.add(d)}}),ioe=q({stridedSlice_:function(e,t,n,r,a,i,o,s,c){if(a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),c===void 0&&(c=0),r==null&&(r=new Array(t.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var f=B(e,"x","stridedSlice"),d=aM(s),p=f.shape.slice();d.forEach((function(x){t[x]=0,n[x]=1,p.splice(x,0,1)})),f=f.reshape(p);for(var v=0;v<f.rank;v++)t[v]=vne(a,t,r,f.shape,v),n[v]=mne(i,n,r,f.shape,v),r[v]=r[v]||1;var g=aM(c);g.forEach((function(x){n[x]=t[x]+1,r[x]=1}));var y=a2(t,n,r),b=y.filter((function(x,S){return g.indexOf(S)===-1}));return r.every((function(x){return x===1}))?Xa(f,t,y).reshape(b):$.runKernelFunc((function(x){return x.stridedSlice(f,t,n,r)}),{$x:f}).reshape(b)}}),ooe=q({topk_:function(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=B(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var i=$.runKernelFunc((function(o){return o.topk(r,t,n)}),{$x:r});return{values:i[0],indices:i[1]}}}),uoe=q({scatterND_:function(e,t,n){var r=B(e,"indices","scatterND","int32"),a=B(t,"updates","scatterND");return hne(a,r,n),$.runKernelFunc((function(i){return i.scatterND(r,a,n)}),{indices:r,updates:a},null,"ScatterNd",{shape:n})}}),g2=q({fft_:function(e){z(e.dtype==="complex64",(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return $.runKernelFunc((function(a){return a.fft(r)}),{input:e}).reshape(e.shape)}}),sv=q({ifft_:function(e){z(e.dtype==="complex64",(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return $.runKernelFunc((function(a){return a.ifft(r)}),{input:e}).reshape(e.shape)}}),y2=q({rfft_:function(e,t){z(e.dtype==="float32",(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(t!=null&&t<r){var i=e.shape.map((function(S){return 0})),o=e.shape.map((function(S){return S}));o[e.shape.length-1]=t,n=e.slice(i,o),r=t}else if(t!=null&&t>r){var s=e.shape.map((function(S){return S}));s[e.shape.length-1]=t-r,n=e.concat(_t(s),e.shape.length-1),r=t}else n=e;var c=n.zerosLike(),f=kn(n,c).as2D(a,r),d=g2(f),p=Math.floor(r/2)+1,v=Jr(d),g=ja(d),y=v.split([p,r-p],v.shape.length-1),b=g.split([p,r-p],g.shape.length-1),x=n.shape.slice();return x[n.shape.length-1]=p,kn(y[0],b[0]).reshape(x)}}),kB=q({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=sv(r);return Jr(a)}var i=[n,2*(t-1)],o=Jr(e).as2D(n,t),s=ja(e).as2D(n,t),c=o.slice([0,1],[n,t-2]).reverse(1),f=s.slice([0,1],[n,t-2]).reverse(1).mul(we(-1)),d=o.concat(c,1),p=s.concat(f,1);return r=kn(d,p).as2D(i[0],i[1]),a=sv(r),Jr(a)}}),soe=Object.freeze({fft:g2,ifft:sv,rfft:y2,irfft:kB}),loe=q({sparseToDense_:function(e,t,n,r){r===void 0&&(r=0);var a=B(e,"sparseIndices","sparseToDense","int32"),i=B(t,"sparseValues","sparseToDense"),o=B(r,"defaultValue","sparseToDense",i.dtype);return(function(s,c,f,d){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var p=s.rank>0?s.shape[0]:1,v=s.rank>1?s.shape[1]:1;if(f.length!==v)throw new Error("outputShape has incorrect number of elements:, "+f.length+", should be: "+v+".");var g=c.size;if(c.rank!==0&&(c.rank!==1||g!==p))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+p+"]");if(c.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")})(a,i,n,o),$.runKernelFunc((function(s){return s.sparseToDense(a,i,n,o)}),{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),coe=q({gatherND_:function(e,t){var n=B(t,"indices","gatherND","int32"),r=B(e,"x","gatherND");return $.runKernelFunc((function(a){return a.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),foe=q({diag_:function(e){var t=B(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return $.runKernelFunc((function(r){return r.diag(t)}),{$x:t}).reshape(n)}}),doe=q({dropout_:function(e,t,n,r){var a=B(e,"x","dropout");if(z(a.dtype==="float32",(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."})),z(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),t===0)return e instanceof Dt?a.clone():a;var i=(function(c,f){if(f==null)return c.shape.slice();if(yn(c.shape,f))return f;if(c.shape.length===f.length){for(var d=[],p=0;p<c.shape.length;p++)f[p]==null&&c.shape[p]!=null?d.push(c.shape[p]):d.push(f[p]);return d}return f})(a,n),o=1-t,s=R4(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(s)}});function NB(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Zt(a,"float32")}var b2=q({hannWindow_:function(e){return NB(e,.5,.5)}}),IB=q({hammingWindow_:function(e){return NB(e,.54,.46)}}),x2=q({frame_:function(e,t,n,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var i=0,o=[];i+t<=e.size;)o.push(Xa(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,c=nn([Xa(e,i,t-s),Va([s],a)]);o.push(c),i+=n}return o.length===0?Bo([],[0,t]):nn(o).as2D(o.length,t)}}),PB=q({stft_:function(e,t,n,r,a){var i;a===void 0&&(a=b2),r==null&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=x2(e,t,n),s=Vn(o,a(t)),c=[],f=0;f<o.shape[0];f++)c.push(y2(s.slice([f,0],[1,t]),r));return nn(c)}}),hoe=Object.freeze({hannWindow:b2,hammingWindow:IB,frame:x2,stft:PB}),qn,poe=function(e,t,n){return n===void 0&&(n=1),Oe(this,void 0,void 0,(function(){var r,a,i,o,s,c,f,d,p,v,g,y,b,x;return Te(this,(function(S){switch(S.label){case 0:return r=B(e,"predictions","inTopK"),a=B(t,"targets","inTopK"),z(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),z(r.rank-1===a.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank})),lt(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],z(n>0&&n<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n})),[4,r.data()];case 1:return o=S.sent(),[4,a.data()];case 2:for(s=S.sent(),c=[o.length/i,i],d=c[1],p=lf("bool",f=c[0]),v=0;v<f;v++){for(g=v*d,y=o.subarray(g,g+d),b=[],x=0;x<y.length;x++)b.push({value:y[x],index:x});for(b.sort((function(_,C){return C.value-_.value})),p[v]=0,x=0;x<n;x++)if(b[x].index===s[v]){p[v]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,Pn(p,a.shape,"bool")]}}))}))};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(qn||(qn={}));var voe=q({absoluteDifference_:function(e,t,n,r){r===void 0&&(r=qn.SUM_BY_NONZERO_WEIGHTS);var a=B(e,"labels","absoluteDifference"),i=B(t,"predictions","absoluteDifference"),o=null;n!=null&&(o=B(n,"weights","absoluteDifference")),lt(a.shape,i.shape,"Error in absoluteDifference: ");var s=a.sub(i).abs();return Zi(s,o,r)}}),Zi=q({computeWeightedLoss_:function(e,t,n){n===void 0&&(n=qn.SUM_BY_NONZERO_WEIGHTS);var r=B(e,"losses","computeWeightedLoss"),a=null;t!=null&&(a=B(t,"weights","computeWeightedLoss"));var i=a==null?r:r.mul(a);if(n===qn.NONE)return i;if(n===qn.SUM)return i.sum();if(n===qn.MEAN){if(a==null)return i.mean();var o=r.size/a.size,s=i.sum().div(a.sum());return o>1?s.div(we(o)):s}if(n===qn.SUM_BY_NONZERO_WEIGHTS){if(a==null)return i.sum().div(we(r.size));var c=a.mul(Dl(r.shape)).notEqual(we(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+n)}}),moe=q({cosineDistance_:function(e,t,n,r,a){a===void 0&&(a=qn.SUM_BY_NONZERO_WEIGHTS);var i=B(e,"labels","cosineDistance"),o=B(t,"predictions","cosineDistance"),s=null;r!=null&&(s=B(r,"weights","cosineDistance")),lt(i.shape,o.shape,"Error in cosineDistance: ");var c=we(1).sub(i.mul(o).sum(n,!0));return Zi(c,s,a)}}),goe=q({hingeLoss_:function(e,t,n,r){r===void 0&&(r=qn.SUM_BY_NONZERO_WEIGHTS);var a=B(e,"labels","hingeLoss"),i=B(t,"predictions","hingeLoss"),o=null;n!=null&&(o=B(n,"weights","hingeLoss")),lt(a.shape,i.shape,"Error in hingeLoss: ");var s=we(1);a=we(2).mul(a).sub(s);var c=s.sub(a.mul(i)).relu();return Zi(c,o,r)}}),yoe=q({huberLoss_:function(e,t,n,r,a){r===void 0&&(r=1),a===void 0&&(a=qn.SUM_BY_NONZERO_WEIGHTS);var i=B(e,"labels","huberLoss"),o=B(t,"predictions","huberLoss"),s=null;n!=null&&(s=B(n,"weights","huberLoss")),lt(i.shape,o.shape,"Error in huberLoss: ");var c=we(r),f=o.sub(i).abs(),d=pB(f,c),p=f.sub(d),v=we(.5).mul(d.square()).add(c.mul(p));return Zi(v,s,a)}}),boe=q({logLoss_:function(e,t,n,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=qn.SUM_BY_NONZERO_WEIGHTS);var i=B(e,"labels","logLoss"),o=B(t,"predictions","logLoss"),s=null;n!=null&&(s=B(n,"weights","logLoss")),lt(i.shape,o.shape,"Error in logLoss: ");var c=we(1),f=we(r),d=i.mul(o.add(f).log()).neg().sub(c.sub(i).mul(c.sub(o).add(f).log()));return Zi(d,s,a)}}),xoe=q({meanSquaredError_:function(e,t,n,r){r===void 0&&(r=qn.SUM_BY_NONZERO_WEIGHTS);var a=B(e,"labels","meanSquaredError"),i=B(t,"predictions","meanSquaredError"),o=null;n!=null&&(o=B(n,"weights","meanSquaredError")),lt(a.shape,i.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(i);return Zi(s,o,r)}}),woe=q({sigmoidCrossEntropy_:function(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=qn.SUM_BY_NONZERO_WEIGHTS);var i=B(e,"multiClassLabels","sigmoidCrossEntropy"),o=B(t,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=B(n,"weights","sigmoidCrossEntropy")),lt(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=we(r),f=we(1),d=we(.5);i=i.mul(f.sub(c)).add(d.mul(c))}var p=(function(v,g){var y=B(v,"labels","sigmoidCrossEntropyWithLogits"),b=B(g,"logits","sigmoidCrossEntropyWithLogits");lt(y.shape,b.shape,"Error in sigmoidCrossEntropyWithLogits: ");var x=b.relu(),S=b.mul(y),_=b.abs().neg().exp().log1p();return x.sub(S).add(_)})(i,o);return Zi(p,s,a)}}),Soe=q({softmaxCrossEntropy_:function(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=qn.SUM_BY_NONZERO_WEIGHTS);var i=B(e,"onehotLabels","softmaxCrossEntropy"),o=B(t,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=B(n,"weights","softmaxCrossEntropy")),lt(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var c=we(r),f=we(1),d=we(i.shape[1]);i=i.mul(f.sub(c)).add(c.div(d))}var p=(function(v,g,y){if(y===void 0&&(y=-1),y===-1&&(y=g.rank-1),y!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+y);return rm((function(b,x,S){var _=x.logSumExp([y],!0),C=x.toFloat().sub(_);return S([b,C]),{value:C.mul(b).neg().sum([y]),gradFunc:function(A,O){var R=O[0],M=O[1],k=hr(A.shape,[y]);return[A.reshape(k).mul(R.toFloat().sub(M.exp())),A.reshape(k).mul(M.exp().sub(R.toFloat()))]}}}))(v,g)})(i,o);return Zi(p,s,a)}}),Eoe=Object.freeze({get Reduction(){return qn},absoluteDifference:voe,computeWeightedLoss:Zi,cosineDistance:moe,hingeLoss:goe,huberLoss:yoe,logLoss:boe,meanSquaredError:xoe,sigmoidCrossEntropy:woe,softmaxCrossEntropy:Soe});function AM(e,t){return t===void 0&&(t=!1),$.tidy((function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=T4(n),i=e.clone(),o=Bo([[1]],[1,1]),s=o.clone(),c=n>=r?r:n,f=function(p){var v,g=i,y=s,b=a;v=$.tidy((function(){var x=i.slice([p,p],[n-p,1]),S=x.norm(),_=i.slice([p,p],[1,1]),C=Bo([[-1]]).where(_.greater(0),Bo([[1]])),A=_.sub(C.mul(S)),O=x.div(A);s=O.shape[0]===1?o.clone():o.concat(O.slice([1,0],[O.shape[0]-1,O.shape[1]]),0);var R=C.matMul(A).div(S).neg(),M=i.slice([p,0],[n-p,r]),k=R.mul(s);if(p===0)i=M.sub(k.matMul(s.transpose().matMul(M)));else{var I=M.sub(k.matMul(s.transpose().matMul(M)));i=i.slice([0,0],[p,r]).concat(I,0)}var P=a.slice([0,p],[n,a.shape[1]-p]);if(p===0)a=P.sub(P.matMul(s).matMul(k.transpose()));else{var L=P.sub(P.matMul(s).matMul(k.transpose()));a=a.slice([0,0],[n,p]).concat(L,1)}return[s,i,a]})),s=v[0],i=v[1],a=v[2],dr([g,y,b])},d=0;d<c;++d)f(d);return!t&&n>r&&(a=a.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[a,i]}))}var _oe=q({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=B(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=o),n<0&&(n=s);var c=Qp(0,o,1,"int32").reshape([-1,1]),f=Qp(0,s,1,"int32"),d=on(c,f),p=im(d.lessEqual(we(+t,"int32")),d.greaterEqual(we(-n,"int32"))),v=_t([o,s],r.dtype);return Pr(rn(r.reshape([-1,o,s])).map((function(g){return ju(p,g,v)}))).reshape(a)}}),Coe=q({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,z(e!=null&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(c){z(e[c].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[c].shape[0]+" vs. "+n+")"}))},a=1;a<e.length;++a)r(a)}else t=!0,e=n2(e,e.shape[0],0).map((function(c){return M4(c,[0])}));z(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var i=[],o=e,s=function(c){i.push($.tidy((function(){var f=o[c];if(c>0)for(var d=0;d<c;++d){var p=OB(i[d].mulStrict(f)).mul(i[d]);f=f.sub(p)}return f.div(MB(f,"euclidean"))})))};for(a=0;a<e.length;++a)s(a);return t?Pr(i,0):i}}),Aoe=q({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return AM(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(o,s){return o*s})),r=rn(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(o){var s=AM(o,t),c=s[0],f=s[1];a.push(c),i.push(f)})),[Pr(a,0).reshape(e.shape),Pr(i,0).reshape(e.shape)]}}),Ooe=Object.freeze({bandPart:_oe,gramSchmidt:Coe,qr:Aoe});function lm(e,t,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return n=Math.min(n,o),z(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),z(e.rank===2,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),z(e.shape[1]===4,(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),z(t.rank===1,(function(){return"scores must be a 1D tensor"})),z(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]})),z(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Toe=q({resizeBilinear_:function(e,t,n){n===void 0&&(n=!1);var r=B(e,"images","resizeBilinear");z(r.rank===3||r.rank===4,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),z(t.length===2,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],c=$.runKernelFunc((function(f,d){return d([a]),f.resizeBilinear(a,o,s,n)}),{x:a},(function(f,d){return{x:function(){return $.runKernelFunc((function(p){return p.resizeBilinearBackprop(f,d[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),Roe=q({resizeNearestNeighbor_:function(e,t,n){n===void 0&&(n=!1);var r=B(e,"images","resizeNearestNeighbor");z(r.rank===3||r.rank===4,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),z(t.length===2,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),z(r.dtype==="float32"||r.dtype==="int32",(function(){return"`images` must have `int32` or `float32` as dtype"}));var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],c=$.runKernelFunc((function(f,d){return d([a]),f.resizeNearestNeighbor(a,o,s,n)}),{batchImages:a},(function(f,d){return{batchImages:function(){return $.runKernelFunc((function(p){return p.resizeNearestNeighborBackprop(f,d[0],n)}),{})}}}));return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),Doe=q({nonMaxSuppression_:function(e,t,n,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var i=B(e,"boxes","nonMaxSuppression"),o=B(t,"scores","nonMaxSuppression"),s=lm(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return $.runKernelFunc((function(f){return f.nonMaxSuppression(i,o,n,r,a)}),{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),Moe=function(e,t,n,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),Oe(this,void 0,void 0,(function(){var i,o,s,c,f,d,p;return Te(this,(function(v){switch(v.label){case 0:return i=B(e,"boxes","nonMaxSuppressionAsync"),o=B(t,"scores","nonMaxSuppressionAsync"),s=lm(i,o,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=v.sent(),f=c[0],d=c[1],p=o2(f,d,n,r,a),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,p]}}))}))},koe=q({nonMaxSuppressionWithScore_:function(e,t,n,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=B(e,"boxes","nonMaxSuppression"),s=B(t,"scores","nonMaxSuppression"),c=lm(o,s,n,r,a,i),f={maxOutputSize:n=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},d=$.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},f);return{selectedIndices:d[0],selectedScores:d[1]}}}),Noe=function(e,t,n,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Oe(this,void 0,void 0,(function(){var o,s,c,f,d,p,v;return Te(this,(function(g){switch(g.label){case 0:return o=B(e,"boxes","nonMaxSuppressionAsync"),s=B(t,"scores","nonMaxSuppressionAsync"),c=lm(o,s,n,r,a,i),n=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return f=g.sent(),d=f[0],p=f[1],v=u2(d,p,n,r,a,i),o!==e&&o.dispose(),s!==t&&s.dispose(),[2,v]}}))}))},Ioe=q({cropAndResize_:function(e,t,n,r,a,i){var o=B(e,"image","cropAndResize"),s=B(t,"boxes","cropAndResize","float32"),c=B(n,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var f=s.shape[0];return z(o.rank===4,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."})),z(s.rank===2&&s.shape[1]===4,(function(){return"Error in cropAndResize: boxes must be have size ["+f+",4] but had shape "+s.shape+"."})),z(c.rank===1&&c.shape[0]===f,(function(){return"Error in cropAndResize: boxInd must be have size ["+f+"] but had shape "+s.shape+"."})),z(r.length===2,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),z(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),z(a==="bilinear"||a==="nearest",(function(){return"method must be bilinear or nearest, but was "+a})),$.runKernelFunc((function(d,p){return d.cropAndResize(o,s,c,r,a,i)}),{images:o,boxes:s,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),w2=Object.freeze({resizeBilinear:Toe,resizeNearestNeighbor:Roe,nonMaxSuppression:Doe,nonMaxSuppressionAsync:Moe,nonMaxSuppressionWithScore:koe,nonMaxSuppressionWithScoreAsync:Noe,cropAndResize:Ioe}),S2=function(e,t){return!(e>0)||t==="linear"},E2=function(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},_2=function(e,t){var n=t,r=an(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},C2=function(e,t,n){if(t==="linear")return e;if(t==="relu")return Mt(e);if(t==="elu")return TB(e);if(t==="relu6")return DB(e);if(t==="prelu")return RB(e,n);throw new Error("Unknown fused activation "+t+".")},Poe=q({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,i=a!==void 0&&a,o=e.transposeB,s=o!==void 0&&o,c=e.bias,f=e.activation,d=f===void 0?"linear":f,p=e.preluActivationWeights;if(S2($.state.gradientDepth,d)===!1){var v=um(n,r,i,s);return c!=null&&(v=Ye(v,c)),C2(v,d,p)}var g=B(n,"a","fused matMul"),y=B(r,"b","fused matMul");t=It(g,y),g=t[0],y=t[1];var b=i?g.shape[g.rank-2]:g.shape[g.rank-1],x=s?y.shape[y.rank-1]:y.shape[y.rank-2],S=i?g.shape[g.rank-1]:g.shape[g.rank-2],_=s?y.shape[y.rank-2]:y.shape[y.rank-1],C=g.shape.slice(0,-2),A=y.shape.slice(0,-2),O=De(C),R=De(A);z(g.rank>=2&&y.rank>=2&&g.rank===y.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+y.rank+"."})),z(yn(C,A),(function(){return"Error in fused matMul: outer dimensions ("+C+") and ("+A+") of Tensors with shapes "+g.shape+" and "+y.shape+" must match."})),z(b===x,(function(){return"Error in fused matMul: inner shapes ("+b+") and ("+x+") of Tensors with shapes "+g.shape+" and "+y.shape+" and transposeA="+i+" and transposeB="+s+" must match."}));var M,k,I=g.shape.slice(0,-2).concat([S,_]),P=i?g.as3D(O,b,S):g.as3D(O,S,b),L=s?y.as3D(R,_,x):y.as3D(R,x,_);c!=null&&Je(I,(M=It(M=B(c,"bias","fused matMul"),g)[0]).shape),p!=null&&(k=B(p,"prelu weights","fused matMul"));var F={a:P,b:L};c!=null&&(F.bias=M),p!=null&&(F.preluActivationWeights=k);var Y=[P,L];return $.runKernelFunc((function(Z,J){var U=Z.fusedBatchMatMul({a:P,b:L,transposeA:i,transposeB:s,bias:M,activation:d,preluActivationWeights:k});return J([P,L,U]),U}),F,(function(Z,J){var U=J[0],H=J[1],G=J[2],Q=E2(Z,G,d),oe={};return c!=null&&(oe={bias:function(){return _2(M,Q)}}),Object.assign(i||s?!i&&s?{a:function(){return Q.matMul(H,!1,!1)},b:function(){return Q.matMul(U,!0,!1)}}:i&&!s?{a:function(){return H.matMul(Q,!1,!0)},b:function(){return U.matMul(Q,!1,!1)}}:{a:function(){return H.matMul(Q,!0,!0)},b:function(){return Q.matMul(U,!0,!0)}}:{a:function(){return Q.matMul(H,!1,!0)},b:function(){return U.matMul(Q,!0,!1)}},oe)}),"_FusedMatMul",{transposeA:i,transposeB:s,activation:d},Y,[!0]).reshape(I)}}),Boe=q({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,s=e.dilations,c=s===void 0?[1,1]:s,f=e.dimRoundingMode,d=e.bias,p=e.activation,v=p===void 0?"linear":p,g=e.preluActivationWeights;if(v=v||"linear",S2($.state.gradientDepth,v)===!1){var y=sa(t,n,r,a,o,c,f);return d!=null&&(y=Ye(y,d)),C2(y,v,g)}var b=B(t,"x","conv2d"),x=B(n,"filter","conv2d"),S=b,_=!1;b.rank===3&&(_=!0,S=b.as4D(1,b.shape[0],b.shape[1],b.shape[2])),z(S.rank===4,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+S.rank+"."})),z(x.rank===4,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+x.rank+"."})),f!=null&&z(Wt(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+f+" but got pad "+a+"."})),z(S.shape[3]===x.shape[2],(function(){return"Error in conv2d: depth of input ("+S.shape[3]+") must match input depth for filter "+x.shape[2]+"."})),z(pr(r,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"})),z(o==="NHWC",(function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."}));var C,A,O=$u(S.shape,x.shape,r,c,a,f);d!=null&&(C=It(C=B(d,"bias","fused conv2d"),b)[0],Je(O.outShape,C.shape)),g!=null&&(A=B(g,"prelu weights","fused conv2d"));var R={x:S,filter:x};d!=null&&(R.bias=C),g!=null&&(R.preluActivationWeights=A);var M=[x,S],k=$.runKernelFunc((function(I,P){var L=I.fusedConv2d({input:S,filter:x,convInfo:O,bias:C,activation:v,preluActivationWeights:A});return P([x,S,L]),L}),R,(function(I,P){var L=P,F=L[0],Y=L[1],Z=L[2],J=E2(I,Z,v);z(gl(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"}));var U={};return d!=null&&(U={bias:function(){return _2(C,J)}}),Object.assign({x:function(){return xB(Y.shape,J,F,r,a)},filter:function(){return v2(Y,J,F.shape,r,a)}},U)}),"FusedConv2D",{convInfo:O,activation:v},M,[!0]);return _?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),Loe=q({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,s=e.dilations,c=s===void 0?[1,1]:s,f=e.dimRoundingMode,d=e.bias,p=e.activation,v=p===void 0?"linear":p,g=e.preluActivationWeights;if(S2($.state.gradientDepth,v)===!1){var y=om(t,n,r,a,o,c,f);return d!=null&&(y=Ye(y,d)),C2(y,v,g)}var b=B(t,"x","depthwiseConv2d"),x=B(n,"filter","depthwiseConv2d"),S=b,_=!1;b.rank===3&&(_=!0,S=b.as4D(1,b.shape[0],b.shape[1],b.shape[2])),z(S.rank===4,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+S.rank+"."})),z(x.rank===4,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+x.rank+"."})),z(S.shape[3]===x.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+S.shape[3]+") must match the inChannels dimension in filter "+x.shape[2]+"."})),c==null&&(c=[1,1]),z(pr(r,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"})),f!=null&&z(Wt(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+f+" but got pad "+a+"."}));var C,A,O=$u(S.shape,x.shape,r,c,a,f,!0);d!=null&&(C=It(C=B(d,"bias","fused conv2d"),b)[0],Je(O.outShape,C.shape)),g!=null&&(A=B(g,"prelu weights","fused depthwiseConv2d"));var R={x:S,filter:x};d!=null&&(R.bias=C),g!=null&&(R.preluActivationWeights=A);var M=[x,S],k=$.runKernelFunc((function(I,P){var L=I.fusedDepthwiseConv2D({input:S,filter:x,convInfo:O,bias:C,activation:v,preluActivationWeights:A});return P([x,S,L]),L}),R,(function(I,P){z(gl(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"}));var L=P[0],F=P[1],Y=P[2],Z=E2(I,Y,v),J={};return d!=null&&(J={bias:function(){return _2(C,Z)}}),Object.assign({x:function(){return wB(F.shape,Z,L,O)},filter:function(){return SB(F,Z,L.shape,O)}},J)}),"FusedDepthwiseConv2D",{convInfo:O,activation:v},M,[!0]);return _?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),Foe=Object.freeze({matMul:Poe,conv2d:Boe,depthwiseConv2d:Loe}),joe=Object.freeze({image:w2,linalg:Ooe,losses:Eoe,spectral:soe,fused:Foe,signal:hoe,square:bae,squaredDifference:aB,conv1d:Tie,conv2d:sa,conv3d:Rie,depthwiseConv2d:om,separableConv2d:m2,conv2dTranspose:Die,conv3dTranspose:Mie,op:q,batchNormalization2d:Xae,batchNormalization3d:Yae,batchNormalization4d:Zae,batchNormalization:Qae,batchNorm:cB,batchNorm2d:Jae,batchNorm3d:eie,batchNorm4d:tie,booleanMaskAsync:Oie,complex:kn,real:Jr,imag:ja,concat:nn,concat1d:Fte,concat2d:jte,concat3d:zte,concat4d:Ute,split:n2,matMul:um,dot:kie,outerProduct:Nie,reverse:Gf,reverse1d:Iie,reverse2d:Pie,reverse3d:Bie,reverse4d:Lie,maxPool:mn,avgPool:$f,pool:Fie,maxPool3d:jie,avgPool3d:zie,slice:Xa,slice1d:Uie,slice2d:Wie,slice3d:CB,slice4d:Hie,abs:xae,acos:wae,acosh:Sae,asin:Eae,asinh:_ae,atan:Cae,atanh:Aae,ceil:Oae,clipByValue:d2,cos:Tae,cosh:Rae,erf:Dae,exp:sx,expm1:Mae,floor:kae,log:Nae,log1p:Iae,logSigmoid:Pae,neg:ov,reciprocal:Bae,round:Lae,rsqrt:iB,sigmoid:oB,sign:Fae,isNaN:jae,isInf:zae,isFinite:Uae,sin:Wae,sinh:Hae,softplus:qae,sqrt:Vae,step:Gae,tan:$ae,tanh:Kae,all:qie,any:Vie,argMax:Gie,argMin:$ie,logSumExp:Kie,max:sm,mean:Xie,min:Yie,moments:Zie,sum:OB,prod:Qie,equal:vB,equalStrict:gie,greater:yie,greaterEqual:mB,greaterEqualStrict:bie,greaterStrict:xie,less:wie,lessEqual:Sie,lessEqualStrict:Eie,lessStrict:_ie,notEqual:Cie,notEqualStrict:Aie,add:Ye,addN:aie,addStrict:iie,atan2:oie,div:pa,divNoNan:uie,divStrict:sie,floorDiv:hB,maximum:h2,maximumStrict:lie,minimum:pB,minimumStrict:cie,mod:fie,modStrict:die,mul:Vn,mulStrict:hie,pow:uv,powStrict:pie,squaredDifferenceStrict:vie,sub:on,subStrict:mie,elu:TB,leakyRelu:Jie,prelu:RB,relu:Mt,relu6:DB,selu:eoe,logicalAnd:im,logicalNot:nie,logicalOr:fB,logicalXor:rie,where:ju,whereAsync:dB,buffer:qe,print:Yte,batchToSpaceND:O4,broadcastTo:Zte,cast:Qte,clone:Jte,cumsum:ene,depthToSpace:tne,expandDims:Qr,eye:T4,multinomial:nne,oneHot:ax,pad:Gu,pad1d:rne,pad2d:ane,pad3d:ine,pad4d:one,rand:une,randomNormal:sne,randomGamma:lne,randomUniform:R4,reshape:ya,spaceToBatchND:D4,squeeze:M4,stack:Pr,tile:Js,truncatedNormal:cne,unstack:rn,setdiff1dAsync:fne,fill:Va,linspace:Lte,ones:Dl,range:Qp,scalar:we,tensor:Pn,tensor1d:Zt,tensor2d:Bo,tensor3d:t2,tensor4d:sr,tensor5d:Ite,tensor6d:Pte,variable:Bte,zeros:_t,onesLike:A4,zerosLike:rt,transpose:Wo,softmax:Yi,logSoftmax:yne,localResponseNormalization:toe,norm:MB,gather:p2,unsortedSegmentSum:gB,basicLSTMCell:noe,multiRNNCell:roe,movingAverage:aoe,stridedSlice:ioe,topk:ooe,scatterND:uoe,fft:g2,ifft:sv,rfft:y2,irfft:kB,sparseToDense:loe,gatherND:coe,diag:foe,dropout:doe,hannWindow:b2,hammingWindow:IB,frame:x2,stft:PB,inTopKAsync:poe});function ge(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(n){n!=null&&z(n.dtype!=="complex64",(function(){return t+" does not support complex64 tensors."}))}))}function Lb(e,t,n,r){if(n==="linear")return e.linear(t);if(n==="relu")return e.relu(t);if(n==="elu")return e.elu(t);if(n==="relu6")return e.relu6(t);if(n==="prelu")return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var zoe=(function(e){function t(){var n=e.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new F4(n,$),n}return Ca(t,e),t.prototype.write=function(n,r,a){this.firstUse&&(this.firstUse=!1,de().get("IS_NODE")&&Yp(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:n,dtype:a}),i},t.prototype.move=function(n,r,a,i){this.data.set(n,{values:r,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(n){return Oe(this,void 0,void 0,(function(){return Te(this,(function(r){return[2,this.readSync(n)]}))}))},t.prototype.readSync=function(n){var r=this.data.get(n),a=r.dtype,i=r.complexTensors;return a==="complex64"?ux(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(n).values},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),a=r;if(n.dtype==="string")try{a=r.map((function(i){return $p(i)}))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return qe(n.shape,n.dtype,a)},t.prototype.makeOutput=function(n,r,a){var i=this.write(n,r,a);return $.makeTensorFromDataId(i,r,a,this)},t.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},t.prototype.time=function(n){return Oe(this,void 0,void 0,(function(){var r;return Te(this,(function(a){return r=La(),n(),[2,{kernelMs:La()-r}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(n,r){var a=this.makeOutput(null,n.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:$.keep(n.clone()),imag:$.keep(r.clone())},a},t.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,a){if(ge(n,"slice"),B4(n.shape,r,a)){var i=L4(r,n.strides),o=De(a);return Pn(this.readSync(n.dataId).subarray(i,i+o),a,n.dtype)}for(var s=qe(a,n.dtype),c=this.bufferSync(n),f=0;f<s.size;++f){var d=s.indexToLoc(f).map((function(p,v){return p+r[v]}));s.values[f]=c.get.apply(c,d)}return s.toTensor()},t.prototype.stridedSlice=function(n,r,a,i){ge(n,"stridedSlice");var o=a2(r,a,i);if(o.some((function(g){return g===0})))return Pn([],o);for(var s=qe(o,n.dtype),c=this.bufferSync(n),f=0;f<s.size;f++){for(var d=s.indexToLoc(f),p=new Array(d.length),v=0;v<p.length;v++)p[v]=d[v]*i[v]+r[v];s.set.apply(s,[c.get.apply(c,p)].concat(d))}return s.toTensor()},t.prototype.diag=function(n){for(var r=this.readSync(n.dataId),a=qe([n.size,n.size],n.dtype),i=a.values,o=0;o<r.length;o++)i[o*n.size+o]=r[o];return a.toTensor()},t.prototype.unstack=function(n,r){for(var a=n.shape[r],i=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(i[o++]=n.shape[s]);var c=new Array(n.rank).fill(0),f=n.shape.slice();f[r]=1;var d=new Array(a);for(s=0;s<d.length;s++)c[r]=s,d[s]=this.slice(n,c,f).reshape(i);return d},t.prototype.reverse=function(n,r){ge(n,"reverse");for(var a=qe(n.shape,n.dtype),i=this.bufferSync(n),o=function(c){var f=a.indexToLoc(c),d=f.slice();r.forEach((function(p){return d[p]=n.shape[p]-1-d[p]})),a.set.apply(a,[i.get.apply(i,d)].concat(f))},s=0;s<a.size;s++)o(s);return a.toTensor()},t.prototype.concat=function(n,r){var a=this;if(n[0].dtype==="complex64"){var i=n.map((function(g){return Jr(g)})),o=n.map((function(g){return ja(g)}));return kn(this.concat(i,r),this.concat(o,r))}var s=n.map((function(g){var y=De(g.shape.slice(r));return g.as2D(-1,y)})),c=ml(s.map((function(g){return g.shape})),1),f=qe(c,n[0].dtype).values;if(s[0].shape[0]===1){var d=0;s.forEach((function(g){f.set(a.readSync(g.dataId),d),d+=g.size}))}else{var p=0;s.forEach((function(g){for(var y=a.readSync(g.dataId),b=0,x=0;x<g.shape[0];++x)for(var S=x*c[1]+p,_=0;_<g.shape[1];++_)f[S+_]=y[b++];p+=g.shape[1]}))}var v=ml(n.map((function(g){return g.shape})),r);return Pn(f,v,n[0].dtype)},t.prototype.neg=function(n){return ge(n,"neg"),this.multiply(we(-1),n)},t.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(a,i,o,s){return{real:a+o,imag:i+s}})):this.broadcastedBinaryOp(n,r,In(n.dtype,r.dtype),(function(a,i){return a+i}))},t.prototype.addN=function(n){var r=this;ge(n,"addN");for(var a=n.map((function(d){return r.readSync(d.dataId)})),i=qe(n[0].shape,n[0].dtype),o=i.values,s=0;s<n.length;s++)for(var c=a[s],f=0;f<o.length;f++)o[f]+=c[f];return i.toTensor()},t.prototype.softmax=function(n,r){var a=fn([r],n.shape),i=this.max(n,a),o=hr(i.shape,a),s=this.subtract(n,i.reshape(o)),c=this.exp(s),f=this.sum(c,a).reshape(o);return this.realDivide(c,f)},t.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(a,i,o,s){return{real:a-o,imag:i-s}})):this.broadcastedBinaryOp(n,r,In(n.dtype,r.dtype),(function(a,i){return a-i}))},t.prototype.pow=function(n,r){return ge([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,i){return Math.pow(a,i)}))},t.prototype.batchMatMul=function(n,r,a,i){ge([n,r],"matMul");for(var o=a?n.shape[1]:n.shape[2],s=a?n.shape[2]:n.shape[1],c=i?r.shape[1]:r.shape[2],f=n.shape[0],d=this.readSync(n.dataId),p=this.readSync(r.dataId),v=a?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],g=v[0],y=v[1],b=v[2],x=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],S=x[0],_=x[1],C=x[2],A=s*c,O=qe([f,s,c],n.dtype),R=O.values,M=this.blockSize,k=0;k<f;k++)for(var I=0;I<s;I+=M)for(var P=0;P<c;P+=M)for(var L=0;L<o;L+=M)for(var F=Math.min(I+M,s),Y=Math.min(P+M,c),Z=Math.min(L+M,o),J=I;J<F;J++)for(var U=P;U<Y;U++){for(var H=0,G=L;G<Z;G++)H+=d[k*g+J*y+G*b]*p[G*S+U*_+k*C];R[k*A+(J*c+U)]+=H}return O.toTensor()},t.prototype.fusedBatchMatMul=function(n){var r=n.a,a=n.b,i=n.transposeA,o=n.transposeB,s=n.bias,c=n.activation,f=n.preluActivationWeights,d=this.batchMatMul(r,a,i,o);return s&&(d=this.add(d,s)),c&&(d=Lb(this,d,c,f)),d},t.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(a,i,o,s){return{real:a*o-i*s,imag:a*s+i*o}})):this.broadcastedBinaryOp(n,r,In(n.dtype,r.dtype),(function(a,i){return a*i}))},t.prototype.realDivide=function(n,r){return ge([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",(function(a,i){return a/i}))},t.prototype.floorDiv=function(n,r){return ge([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",(function(a,i){return Math.floor(a/i)}))},t.prototype.sum=function(n,r){ge(n,"sum"),Ar("sum",r,n.rank);for(var a=Un(n.shape,r),i=a[0],o=a[1],s=_t(i,In(n.dtype,"int32")),c=De(o),f=this.readSync(s.dataId),d=this.readSync(n.dataId),p=0;p<f.length;++p){for(var v=p*c,g=0,y=0;y<c;++y)g+=d[v+y];f[p]=g}return s},t.prototype.prod=function(n,r){ge(n,"sum");for(var a=Un(n.shape,r),i=a[0],o=a[1],s=_t(i,In(n.dtype,"int32")),c=De(o),f=this.readSync(s.dataId),d=this.readSync(n.dataId),p=0;p<f.length;++p){for(var v=p*c,g=1,y=0;y<c;++y)g*=d[v+y];f[p]=g}return s},t.prototype.unsortedSegmentSum=function(n,r,a){ge(n,"unsortedSegmentSum");for(var i=[],o=n.rank-r.rank,s=0;s<o;++s)r=r.expandDims(s+1);for(s=0;s<a;++s){var c=we(s,"int32"),f=vB(c,r).asType("float32").mul(n).sum(0);i.push(f)}return Pr(i)},t.prototype.argMin=function(n,r){ge(n,"argMin");var a=[r];Ar("argMin",a,n.rank);for(var i=Un(n.shape,a),o=i[0],s=i[1],c=_t(o,"int32"),f=De(s),d=this.readSync(c.dataId),p=this.readSync(n.dataId),v=0;v<d.length;++v){for(var g=v*f,y=p[g],b=0,x=0;x<f;++x){var S=p[g+x];S<y&&(y=S,b=x)}d[v]=b}return c},t.prototype.argMax=function(n,r){ge(n,"argMax");var a=[r];Ar("argMax",a,n.rank);for(var i=Un(n.shape,a),o=i[0],s=i[1],c=_t(o,"int32"),f=De(s),d=this.readSync(c.dataId),p=this.readSync(n.dataId),v=0;v<d.length;++v){for(var g=v*f,y=p[g],b=0,x=0;x<f;++x){var S=p[g+x];S>y&&(y=S,b=x)}d[v]=b}return c},t.prototype.cumsum=function(n,r,a,i){if(ge(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var o=In(n.dtype,"int32"),s=_t(n.shape,o),c=this.readSync(s.dataId),f=this.readSync(n.dataId),d=n.shape[n.rank-1],p=i?function(x,S){return x+d-S-1}:function(x,S){return x+S},v=0;v<f.length;v+=d)for(var g=0;g<d;g++){var y=p(v,g);if(g===0)c[y]=a?0:f[y];else{var b=p(v,g-1);c[y]=a?f[b]+c[b]:f[y]+c[b]}}return s},t.prototype.equal=function(n,r){return ge([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",(function(a,i){return a===i?1:0}))},t.prototype.notEqual=function(n,r){return ge([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(a,i){return a!==i?1:0}))},t.prototype.less=function(n,r){return ge([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",(function(a,i){return a<i?1:0}))},t.prototype.lessEqual=function(n,r){return ge([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(a,i){return a<=i?1:0}))},t.prototype.greater=function(n,r){return ge([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",(function(a,i){return a>i?1:0}))},t.prototype.greaterEqual=function(n,r){return ge([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(a,i){return a>=i?1:0}))},t.prototype.logicalNot=function(n){ge(n,"logicalNot");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)a[i]=r[i]?0:1;return this.makeOutput(a,n.shape,"bool")},t.prototype.logicalAnd=function(n,r){return ge([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",(function(a,i){return a&&i}))},t.prototype.logicalOr=function(n,r){return ge([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",(function(a,i){return a||i}))},t.prototype.select=function(n,r,a){ge([n,r,a],"select");for(var i=this.readSync(n.dataId),o=this.readSync(r.dataId),s=this.readSync(a.dataId),c=_t(r.shape,In(r.dtype,a.dtype)),f=this.readSync(c.dataId),d=0,p=n.rank===0||n.rank>1||r.rank===1?1:De(r.shape.slice(1)),v=0;v<i.length;v++)for(var g=0;g<p;g++)i[v]===1?f[d++]=o[v]:f[d++]=s[v];return c},t.prototype.where=function(n){ge([n],"where");var r=this.readSync(n.dataId);return s2(n.shape,r)},t.prototype.topk=function(n,r,a){return ge(n,"topk"),G4(this.readSync(n.dataId),n.shape,n.dtype,r)},t.prototype.min=function(n,r){ge(n,"min"),Ar("min",r,n.rank);for(var a=Un(n.shape,r),i=a[0],o=a[1],s=_t(i,n.dtype),c=De(o),f=this.readSync(s.dataId),d=this.readSync(n.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var b=d[v+y];b<g&&(g=b)}f[p]=g}return s},t.prototype.minimum=function(n,r){return ge([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,i){return Math.min(a,i)}))},t.prototype.mod=function(n,r){return ge([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,i){var o=a%i;return a<0&&i<0||a>=0&&i>=0?o:(o+i)%i}))},t.prototype.max=function(n,r){ge(n,"max"),Ar("max",r,n.rank);for(var a=Un(n.shape,r),i=a[0],o=a[1],s=_t(i,n.dtype),c=De(o),f=this.readSync(s.dataId),d=this.readSync(n.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var b=d[v+y];b>g&&(g=b)}f[p]=g}return s},t.prototype.maximum=function(n,r){return ge([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,i){return Math.max(a,i)}))},t.prototype.all=function(n,r){ge(n,"all"),Ar("all",r,n.rank);for(var a=Un(n.shape,r),i=a[0],o=a[1],s=_t(i,n.dtype),c=De(o),f=this.readSync(s.dataId),d=this.readSync(n.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var b=d[v+y];g=g&&b}f[p]=g}return s},t.prototype.any=function(n,r){ge(n,"any"),Ar("any",r,n.rank);for(var a=Un(n.shape,r),i=a[0],o=a[1],s=_t(i,n.dtype),c=De(o),f=this.readSync(s.dataId),d=this.readSync(n.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var b=d[v+y];g=g||b}f[p]=g}return s},t.prototype.squaredDifference=function(n,r){return ge([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,i){var o=a-i;return o*o}))},t.prototype.ceil=function(n){ge(n,"ceil");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.ceil(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.floor=function(n){ge(n,"floor");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.floor(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.sign=function(n){ge(n,"x");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?a[i]=-1:r[i]>0?a[i]=1:a[i]=0;return this.makeOutput(a,n.shape,"float32")},t.prototype.isNaN=function(n){ge(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(a[i]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.isInf=function(n){ge(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(a[i]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.isFinite=function(n){ge(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(a[i]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.round=function(n){ge(n,"round");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=Math.floor(r[i]);r[i]-o<.5?a[i]=Math.floor(r[i]):r[i]-o>.5?a[i]=Math.ceil(r[i]):a[i]=o%2==0?o:o+1}return this.makeOutput(a,n.shape,"float32")},t.prototype.exp=function(n){ge(n,"exp");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.exp(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.expm1=function(n){ge(n,"expm1");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.expm1(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.log=function(n){ge(n,"log");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.log1p=function(n){ge(n,"log1p");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log1p(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.sqrt=function(n){ge(n,"sqrt");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.sqrt(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.rsqrt=function(n){ge(n,"rsqrt");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=1/Math.sqrt(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.reciprocal=function(n){ge(n,"reciprocal");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=1/r[i];return this.makeOutput(a,n.shape,"float32")},t.prototype.linear=function(n){return n},t.prototype.relu=function(n){ge(n,"relu");for(var r=_t(n.shape,n.dtype),a=this.readSync(r.dataId),i=this.readSync(n.dataId),o=0;o<i.length;++o)a[o]=Math.max(0,i[o]);return r},t.prototype.relu6=function(n){ge(n,"relu");for(var r=_t(n.shape,n.dtype),a=this.readSync(r.dataId),i=this.readSync(n.dataId),o=0;o<i.length;++o)a[o]=Math.min(Math.max(0,i[o]),6);return r},t.prototype.prelu=function(n,r){return ge([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,i){return a<0?i*a:a}))},t.prototype.elu=function(n){ge(n,"elu");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,n.shape,"float32")},t.prototype.eluDer=function(n,r){ge([n,r],"eluDer");for(var a=new Float32Array(r.size),i=this.readSync(r.dataId),o=this.readSync(n.dataId),s=0;s<i.length;++s){var c=i[s];a[s]=c>=1?o[s]:o[s]*(c+1)}return this.makeOutput(a,r.shape,"float32")},t.prototype.selu=function(n){ge(n,"selu");for(var r=c2,a=f2,i=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var c=o[s];i[s]=c>=0?a*c:r*(Math.exp(c)-1)}return this.makeOutput(i,n.shape,"float32")},t.prototype.clip=function(n,r,a){ge(n,"clip");for(var i=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var c=o[s];i[s]=c>a?a:c<r?r:c}return this.makeOutput(i,n.shape,"float32")},t.prototype.abs=function(n){for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.abs(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<n.size;++i){var o=a[2*i],s=a[2*i+1];r[i]=Math.hypot(o,s)}return this.makeOutput(r,n.shape,"float32")},t.prototype.int=function(n){ge(n,"int");for(var r=new Int32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=a[i];return this.makeOutput(r,n.shape,"int32")},t.prototype.sigmoid=function(n){ge(n,"sigmoid");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=1/(1+Math.exp(-a[i]));return this.makeOutput(r,n.shape,"float32")},t.prototype.softplus=function(n){ge(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o){var s=i[o]>-r,c=i[o]<r,f=Math.exp(i[o]),d=void 0;d=c?f:s?i[o]:Math.log(1+f),a[o]=d}return this.makeOutput(a,n.shape,"float32")},t.prototype.sin=function(n){ge(n,"sin");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.sin(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cos=function(n){ge(n,"cos");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.cos(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tan=function(n){ge(n,"tan");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.tan(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asin=function(n){ge(n,"asin");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.asin(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acos=function(n){ge(n,"acos");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.acos(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan=function(n){ge(n,"atan");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.atan(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan2=function(n,r){return ge([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,i){return Math.atan2(a,i)}))},t.prototype.sinh=function(n){ge(n,"sinh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.sinh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cosh=function(n){ge(n,"cosh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.cosh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tanh=function(n){ge(n,"tanh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Uee(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asinh=function(n){ge(n,"asinh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.asinh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acosh=function(n){ge(n,"acosh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.acosh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atanh=function(n){ge(n,"atanh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.atanh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.erf=function(n){ge(n,"erf");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var o=Math.sign(a[i]),s=Math.abs(a[i]),c=1/(1+.3275911*s);r[i]=o*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},t.prototype.step=function(n,r){r===void 0&&(r=0),ge(n,"step");for(var a=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o){var s=i[o];isNaN(s)?a[o]=NaN:a[o]=s>0?1:r}return this.makeOutput(a,n.shape,"float32")},t.prototype.fusedConv2d=function(n){var r=n.input,a=n.filter,i=n.convInfo,o=n.bias,s=n.activation,c=n.preluActivationWeights,f=this.conv2d(r,a,i);return o&&(f=this.add(f,o)),s&&(f=Lb(this,f,s,c)),f},t.prototype.conv2d=function(n,r,a){ge([n,r],"conv2d");for(var i=a.filterHeight,o=a.filterWidth,s=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,d=a.padInfo.top,p=a.dataFormat==="channelsLast",v=qe(a.outShape,n.dtype),g=n.strides[0],y=p?n.strides[1]:n.strides[2],b=p?n.strides[2]:1,x=p?1:n.strides[1],S=v.strides[0],_=p?v.strides[1]:v.strides[2],C=p?v.strides[2]:1,A=p?1:v.strides[1],O=this.readSync(n.dataId),R=this.readSync(r.dataId),M=v.values,k=0;k<a.batchSize;++k)for(var I=k*g,P=k*S,L=0;L<a.outHeight;++L)for(var F=P+L*_,Y=L*a.strideHeight-d,Z=0;Z<i;Z++){var J=Y+Z*s;if(!(J<0||J>=a.inHeight))for(var U=Z*r.strides[0],H=I+J*y,G=0;G<a.outWidth;++G)for(var Q=F+G*C,oe=G*a.strideWidth-f,j=0;j<o;j++){var K=oe+j*c;if(!(K<0||K>=a.inWidth))for(var ce=H+K*b,ve=U+j*r.strides[1],ye=0;ye<a.inChannels;++ye){for(var be=O[ce+ye*x],xe=0;xe<a.outChannels;++xe)M[Q+xe*A]+=be*R[ve+xe];ve+=a.outChannels}}}return v.toTensor()},t.prototype.conv3d=function(n,r,a){for(var i=a.filterDepth,o=a.filterHeight,s=a.filterWidth,c=a.dilationDepth,f=a.dilationHeight,d=a.dilationWidth,p=a.padInfo.front,v=a.padInfo.left,g=a.padInfo.top,y=qe(a.outShape,n.dtype),b=this.readSync(n.dataId),x=this.readSync(r.dataId),S=y.values,_=0;_<a.batchSize;++_)for(var C=_*n.strides[0],A=_*y.strides[0],O=0;O<a.outDepth;++O)for(var R=A+O*y.strides[1],M=O*a.strideDepth-p,k=0;k<i;k++){var I=M+k*c;if(!(I<0||I>=a.inDepth))for(var P=k*r.strides[0],L=C+I*n.strides[1],F=0;F<a.outHeight;++F)for(var Y=R+F*y.strides[2],Z=F*a.strideHeight-g,J=0;J<o;J++){var U=Z+J*f;if(!(U<0||U>=a.inHeight))for(var H=P+J*r.strides[1],G=L+U*n.strides[2],Q=0;Q<a.outWidth;++Q)for(var oe=Y+Q*a.outChannels,j=Q*a.strideWidth-v,K=0;K<s;K++){var ce=j+K*d;if(!(ce<0||ce>=a.inWidth))for(var ve=H+K*r.strides[2],ye=G+ce*a.inChannels,be=ve,xe=0;xe<a.inChannels;++xe){for(var Pe=b[ye+xe],ne=0;ne<a.outChannels;++ne)S[oe+ne]+=Pe*x[be+ne];be+=a.outChannels}}}}return y.toTensor()},t.prototype.conv2dDerInput=function(n,r,a){ge([n,r],"conv2dDerInput");for(var i=qe(a.inShape,"float32"),o=i.values,s=this.readSync(n.dataId),c=this.readSync(r.dataId),f=r.strides,d=f[0],p=f[1],v=f[2],g=a.batchSize,y=a.filterHeight,b=a.filterWidth,x=a.inChannels,S=a.inHeight,_=a.inWidth,C=a.outChannels,A=a.outHeight,O=a.outWidth,R=a.strideHeight,M=a.strideWidth,k=a.dataFormat,I=y-1-a.padInfo.top,P=b-1-a.padInfo.left,L=k==="channelsLast",F=i.strides[0],Y=L?i.strides[1]:i.strides[2],Z=L?i.strides[2]:1,J=L?1:i.strides[1],U=n.strides[0],H=L?n.strides[1]:n.strides[2],G=L?n.strides[2]:1,Q=L?1:n.strides[1],oe=0;oe<g;++oe)for(var j=0;j<x;++j)for(var K=0;K<S;++K)for(var ce=K-I,ve=Math.max(0,Math.ceil(ce/R)),ye=Math.min(A,(y+ce)/R),be=0;be<_;++be){for(var xe=be-P,Pe=Math.max(0,Math.ceil(xe/M)),ne=Math.min(O,(b+xe)/M),Ae=0,Se=ve;Se<ye;++Se)for(var he=Se*R-ce,ze=Pe;ze<ne;++ze)for(var Ie=U*oe+H*Se+G*ze,Ge=d*(y-1-he)+p*(b-1-(ze*M-xe))+v*j,$e=0;$e<C;++$e)Ae+=s[Ie+Q*$e]*c[Ge+$e];o[F*oe+Y*K+Z*be+J*j]=Ae}return i.toTensor()},t.prototype.conv3dDerInput=function(n,r,a){for(var i=qe(a.inShape,"float32"),o=i.values,s=i.strides,c=s[0],f=s[1],d=s[2],p=s[3],v=this.readSync(n.dataId),g=n.strides,y=g[0],b=g[1],x=g[2],S=g[3],_=this.readSync(r.dataId),C=r.strides,A=C[0],O=C[1],R=C[2],M=C[3],k=a.batchSize,I=a.filterDepth,P=a.filterHeight,L=a.filterWidth,F=a.inChannels,Y=a.inDepth,Z=a.inHeight,J=a.inWidth,U=a.outChannels,H=a.outDepth,G=a.outHeight,Q=a.outWidth,oe=a.strideDepth,j=a.strideHeight,K=a.strideWidth,ce=I-1-a.padInfo.front,ve=P-1-a.padInfo.top,ye=L-1-a.padInfo.left,be=0;be<k;++be)for(var xe=0;xe<F;++xe)for(var Pe=0;Pe<Y;++Pe)for(var ne=Pe-ce,Ae=Math.max(0,Math.ceil(ne/oe)),Se=Math.min(H,(I+ne)/oe),he=0;he<Z;++he)for(var ze=he-ve,Ie=Math.max(0,Math.ceil(ze/j)),Ge=Math.min(G,(P+ze)/j),$e=0;$e<J;++$e){for(var qt=$e-ye,Fn=Math.max(0,Math.ceil(qt/K)),En=Math.min(Q,(L+qt)/K),Ta=0,mr=Ae;mr<Se;++mr)for(var Ra=mr*oe-ne,la=Ie;la<Ge;++la)for(var Vt=la*j-ze,ca=Fn;ca<En;++ca)for(var Yu=y*be+b*mr+x*la+S*ca,ei=A*(I-1-Ra)+O*(P-1-Vt)+R*(L-1-(ca*K-qt))+M*xe,Kn=0;Kn<U;++Kn)Ta+=v[Yu+Kn]*_[ei+Kn];o[c*be+f*Pe+d*he+p*$e+xe]=Ta}return i.toTensor()},t.prototype.conv2dDerFilter=function(n,r,a){ge([n,r],"conv2dDerFilter");for(var i=a.strideHeight,o=a.strideWidth,s=a.filterHeight,c=a.filterWidth,f=a.dataFormat==="channelsLast",d=qe(a.filterShape,"float32"),p=a.padInfo.left,v=a.padInfo.top,g=this.bufferSync(n),y=this.bufferSync(r),b=0;b<s;++b)for(var x=Math.max(0,Math.ceil((v-b)/i)),S=Math.min(a.outHeight,(a.inHeight+v-b)/i),_=0;_<c;++_)for(var C=Math.max(0,Math.ceil((p-_)/o)),A=Math.min(a.outWidth,(a.inWidth+p-_)/o),O=0;O<a.inChannels;++O)for(var R=0;R<a.outChannels;++R){for(var M=0,k=0;k<a.batchSize;++k)for(var I=x;I<S;++I)for(var P=b+I*i-v,L=C;L<A;++L){var F=_+L*o-p;M+=f?g.get(k,P,F,O)*y.get(k,I,L,R):g.get(k,O,P,F)*y.get(k,R,I,L)}d.set(M,b,_,O,R)}return d.toTensor()},t.prototype.conv3dDerFilter=function(n,r,a){for(var i=a.strideDepth,o=a.strideHeight,s=a.strideWidth,c=a.filterDepth,f=a.filterHeight,d=a.filterWidth,p=qe(a.filterShape,"float32"),v=p.values,g=p.strides,y=g[0],b=g[1],x=g[2],S=g[3],_=this.readSync(r.dataId),C=r.strides,A=C[0],O=C[1],R=C[2],M=C[3],k=this.readSync(n.dataId),I=n.strides,P=I[0],L=I[1],F=I[2],Y=I[3],Z=a.padInfo.front,J=a.padInfo.left,U=a.padInfo.top,H=0;H<c;++H)for(var G=Math.max(0,Math.ceil((Z-H)/i)),Q=Math.min(a.outDepth,(a.inDepth+Z-H)/i),oe=H*y,j=0;j<f;++j)for(var K=Math.max(0,Math.ceil((U-j)/o)),ce=Math.min(a.outHeight,(a.inHeight+U-j)/o),ve=j*b+oe,ye=0;ye<d;++ye)for(var be=Math.max(0,Math.ceil((J-ye)/s)),xe=Math.min(a.outWidth,(a.inWidth+J-ye)/s),Pe=ye*x+ve,ne=0;ne<a.inChannels;++ne)for(var Ae=ne*S+Pe,Se=0;Se<a.outChannels;++Se){for(var he=0,ze=0;ze<a.batchSize;++ze)for(var Ie=ze*P,Ge=ze*A,$e=G;$e<Q;++$e)for(var qt=(H+$e*i-Z)*L+Ie,Fn=$e*O+Ge,En=K;En<ce;++En)for(var Ta=(j+En*o-U)*F+qt,mr=En*R+Fn,Ra=be;Ra<xe;++Ra){var la=Ra*M+mr;he+=k[(ye+Ra*s-J)*Y+Ta+ne]*_[la+Se]}v[Ae+Se]=he}return p.toTensor()},t.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,a=n.filter,i=n.convInfo,o=n.bias,s=n.activation,c=n.preluActivationWeights,f=this.depthwiseConv2D(r,a,i);return o&&(f=this.add(f,o)),s&&(f=Lb(this,f,s,c)),f},t.prototype.depthwiseConv2D=function(n,r,a){ge([n,r],"depthwiseConv2D");for(var i=a.filterHeight,o=a.filterWidth,s=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,d=a.padInfo.top,p=a.outChannels/a.inChannels,v=qe(a.outShape,n.dtype),g=this.readSync(n.dataId),y=this.readSync(r.dataId),b=v.values,x=0;x<a.batchSize;++x)for(var S=x*n.strides[0],_=x*v.strides[0],C=0;C<a.outHeight;++C)for(var A=_+C*v.strides[1],O=C*a.strideHeight-f,R=0;R<i;++R){var M=O+R*s;if(!(M<0||M>=a.inHeight))for(var k=R*r.strides[0],I=S+M*n.strides[1],P=0;P<a.outWidth;++P)for(var L=A+P*v.strides[2],F=P*a.strideWidth-d,Y=0;Y<o;++Y){var Z=F+Y*c;if(!(Z<0||Z>=a.inWidth))for(var J=k+Y*r.strides[1],U=I+Z*a.inChannels,H=L,G=J,Q=0;Q<a.inChannels;++Q){for(var oe=g[U+Q],j=0;j<p;++j)b[H+j]+=oe*y[G+j];H+=p,G+=p}}}return v.toTensor()},t.prototype.depthwiseConv2DDerInput=function(n,r,a){ge([n,r],"depthwiseConv2DDerInput");for(var i=qe(a.inShape,"float32"),o=i.values,s=i.strides,c=s[0],f=s[1],d=s[2],p=this.readSync(n.dataId),v=n.strides,g=v[0],y=v[1],b=v[2],x=this.readSync(r.dataId),S=r.strides,_=S[0],C=S[1],A=S[2],O=a.batchSize,R=a.filterHeight,M=a.filterWidth,k=a.inChannels,I=a.inHeight,P=a.inWidth,L=a.outChannels,F=a.outHeight,Y=a.outWidth,Z=a.strideHeight,J=a.strideWidth,U=R-1-a.padInfo.top,H=M-1-a.padInfo.left,G=L/k,Q=0;Q<O;++Q)for(var oe=0;oe<k;++oe)for(var j=0;j<I;++j)for(var K=j-U,ce=Math.max(0,Math.ceil(K/Z)),ve=Math.min(F,(R+K)/Z),ye=0;ye<P;++ye){for(var be=ye-H,xe=Math.max(0,Math.ceil(be/J)),Pe=Math.min(Y,(M+be)/J),ne=0,Ae=ce;Ae<ve;++Ae)for(var Se=Ae*Z-K,he=xe;he<Pe;++he)for(var ze=g*Q+y*Ae+b*he,Ie=_*(R-1-Se)+C*(M-1-(he*J-be))+A*oe,Ge=0;Ge<G;++Ge)ne+=p[ze+(oe*G+Ge)]*x[Ie+Ge];o[c*Q+f*j+d*ye+oe]=ne}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(n,r,a){ge([n,r],"depthwiseConv2DDerFilter");for(var i=a.strideHeight,o=a.strideWidth,s=a.filterHeight,c=a.filterWidth,f=qe(a.filterShape,"float32"),d=a.padInfo.left,p=a.padInfo.top,v=a.outChannels/a.inChannels,g=this.bufferSync(n),y=this.bufferSync(r),b=0;b<s;++b)for(var x=Math.max(0,Math.ceil((p-b)/i)),S=Math.min(a.outHeight,(a.inHeight+p-b)/i),_=0;_<c;++_)for(var C=Math.max(0,Math.ceil((d-_)/o)),A=Math.min(a.outWidth,(a.inWidth+d-_)/o),O=0;O<a.outChannels;++O){for(var R=Math.trunc(O/v),M=O%v,k=0,I=0;I<a.batchSize;++I)for(var P=x;P<S;++P)for(var L=b+P*i-p,F=C;F<A;++F){var Y=_+F*o-d;k+=g.get(I,L,Y,R)*y.get(I,P,F,O)}f.set(k,b,_,R,M)}return f.toTensor()},t.prototype.tile=function(n,r){return ge(n,"tile"),V4(this.bufferSync(n),r)},t.prototype.pad=function(n,r,a){ge(n,"pad");var i=r.map((function(v,g){return v[0]+n.shape[g]+v[1]})),o=r.map((function(v){return v[0]})),s=this.bufferSync(n),c=qe(i,n.dtype);a!==0&&c.values.fill(a);for(var f=0;f<n.size;f++){var d=s.indexToLoc(f),p=d.map((function(v,g){return v+o[g]}));c.set.apply(c,[s.get.apply(s,d)].concat(p))}return c.toTensor()},t.prototype.transpose=function(n,r){ge(n,"transpose");for(var a=new Array(n.rank),i=0;i<a.length;i++)a[i]=n.shape[r[i]];var o=this.readSync(n.dataId),s=qe(a,n.dtype),c=this.bufferSync(n);for(i=0;i<n.size;++i){for(var f=c.indexToLoc(i),d=new Array(f.length),p=0;p<d.length;p++)d[p]=f[r[p]];var v=s.locToIndex(d);s.values[v]=o[i]}return s.toTensor()},t.prototype.gather=function(n,r,a){ge([n,r],"gather");var i=n.shape.slice(),o=this.readSync(r.dataId);i[a]=o.length;for(var s=qe(i,n.dtype),c=this.bufferSync(n),f=0;f<s.size;++f){var d=s.indexToLoc(f),p=d.slice();p[a]=o[d[a]];var v=c.locToIndex(p);s.values[f]=c.values[v]}return s.toTensor()},t.prototype.batchToSpaceND=function(n,r,a){ge([n],"batchToSpaceND");var i=r.reduce((function(p,v){return p*v})),o=Jp(n.shape,r,i),s=ev(o.length,r.length),c=tv(n.shape,r,i),f=k4(a,r.length),d=N4(c,a,r.length);return n.reshape(o).transpose(s).reshape(c).slice(f,d)},t.prototype.spaceToBatchND=function(n,r,a){ge([n],"spaceToBatchND");var i=r.reduce((function(v,g){return v*g})),o=[[0,0]];o.push.apply(o,a);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var c=n.pad(o),f=Jp(c.shape,r,i,!1),d=ev(f.length,r.length,!1),p=tv(c.shape,r,i,!1);return c.reshape(f).transpose(d).reshape(p)},t.prototype.pool=function(n,r,a){ge(n,"pool");for(var i=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(n.dataId),b=qe(r.outShape,n.dtype),x=b.values,S=r.outShape[1]*r.outShape[2]*r.outShape[3],_=r.outShape[2]*r.outShape[3],C=r.outShape[3],A=0;A<r.batchSize;++A)for(var O=A*S,R=A*n.strides[0],M=0;M<r.inChannels;++M)for(var k=0;k<r.outHeight;++k)for(var I=k*i-p,P=Math.max(0,I),L=Math.min(r.inHeight,f+I),F=O+k*_,Y=0;Y<r.outWidth;++Y){for(var Z=Y*o-v,J=Math.max(0,Z),U=Math.min(r.inWidth,d+Z),H=g,G=0,Q=0,oe=P;oe<L;oe+=s){for(var j=R+oe*n.strides[1],K=J;K<U;K+=c){var ce=y[j+K*n.strides[2]+M];a==="max"&&ce>H?H=ce:a==="avg"&&(G+=ce,Q++)}if(isNaN(H))break}x[F+Y*C+M]=a==="avg"?G/Q:H}return b.toTensor()},t.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},t.prototype.maxPoolPositions=function(n,r){for(var a=qe(r.outShape,"int32"),i=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,g=this.bufferSync(n),y=0;y<r.batchSize;++y)for(var b=0;b<r.inChannels;++b)for(var x=0;x<r.outHeight;++x){for(var S=x*i-p,_=S;_<0;)_+=s;for(var C=Math.min(r.inHeight,f+S),A=0;A<r.outWidth;++A){for(var O=A*o-v,R=O;R<0;)R+=c;for(var M=Math.min(r.inWidth,d+O),k=Number.NEGATIVE_INFINITY,I=-1,P=_;P<C;P+=s)for(var L=P-S,F=R;F<M;F+=c){var Y=F-O,Z=g.get(y,P,F,b);Z>k&&(k=Z,I=L*d+Y)}a.set(I,y,x,A,b)}}return a.toTensor()},t.prototype.maxPoolBackprop=function(n,r,a,i){ge([r,a],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,i),s=i.strideHeight,c=i.strideWidth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterHeight,v=i.effectiveFilterWidth,g=v-1-i.padInfo.left,y=p-1-i.padInfo.top,b=qe(r.shape,"float32"),x=this.bufferSync(o),S=this.bufferSync(n),_=0;_<i.batchSize;++_)for(var C=0;C<i.inChannels;++C)for(var A=0;A<i.inHeight;++A)for(var O=0;O<i.inWidth;++O){for(var R=A-y,M=O-g,k=0,I=0;I<p;I+=f){var P=(R+I)/s;if(!(P<0||P>=i.outHeight||Math.floor(P)!==P))for(var L=0;L<v;L+=d){var F=(M+L)/c;if(!(F<0||F>=i.outWidth||Math.floor(F)!==F)){var Y=p*v-1-x.get(_,P,F,C)===I*v+L?1:0;Y!==0&&(k+=S.get(_,P,F,C)*Y)}}}b.set(k,_,A,O,C)}return b.toTensor()},t.prototype.avgPoolBackprop=function(n,r,a){ge([n,r],"avgPoolBackprop");for(var i=a.strideHeight,o=a.strideWidth,s=a.filterHeight,c=a.filterWidth,f=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterHeight,v=a.effectiveFilterWidth,g=v-1-a.padInfo.left,y=p-1-a.padInfo.top,b=qe(r.shape,"float32"),x=1/(s*c),S=this.bufferSync(n),_=0;_<a.batchSize;++_)for(var C=0;C<a.inChannels;++C)for(var A=0;A<a.inHeight;++A)for(var O=0;O<a.inWidth;++O){for(var R=A-y,M=O-g,k=0,I=0;I<p;I+=f){var P=(R+I)/i;if(!(P<0||P>=a.outHeight||Math.floor(P)!==P))for(var L=0;L<v;L+=d){var F=(M+L)/o;F<0||F>=a.outWidth||Math.floor(F)!==F||(k+=S.get(_,P,F,C))}}b.set(k*x,_,A,O,C)}return b.toTensor()},t.prototype.pool3d=function(n,r,a){ge(n,"pool3d");for(var i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterDepth,v=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,b=r.padInfo.top,x=r.padInfo.left,S=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=this.readSync(n.dataId),C=qe(r.outShape,n.dtype),A=C.values,O=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],R=r.outShape[2]*r.outShape[3]*r.outShape[4],M=r.outShape[3]*r.outShape[4],k=r.outShape[4],I=0;I<r.batchSize;++I)for(var P=I*O,L=I*n.strides[0],F=0;F<r.inChannels;++F)for(var Y=0;Y<r.outDepth;++Y){for(var Z=Y*i-y,J=Z;J<0;)J+=c;for(var U=Math.min(r.inDepth,p+Z),H=P+Y*R,G=0;G<r.outHeight;++G){for(var Q=G*o-b,oe=Q;oe<0;)oe+=f;for(var j=Math.min(r.inHeight,v+Q),K=H+G*M,ce=0;ce<r.outWidth;++ce){for(var ve=ce*s-x,ye=ve;ye<0;)ye+=d;for(var be=Math.min(r.inWidth,g+ve),xe=K+ce*k,Pe=S,ne=0,Ae=0,Se=J;Se<U;Se+=c){for(var he=L+Se*n.strides[1],ze=oe;ze<j;ze+=f){for(var Ie=he+ze*n.strides[2],Ge=ye;Ge<be;Ge+=d){var $e=_[Ie+Ge*n.strides[3]+F];if(a==="max"&&$e>Pe?Pe=$e:a==="avg"&&(ne+=$e,Ae++),isNaN(Pe))break}if(isNaN(Pe))break}if(isNaN(Pe))break}A[xe+F]=a==="avg"?ne/Ae:Pe}}}return C.toTensor()},t.prototype.avgPool3d=function(n,r){return ge(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(n,r,a){ge([n,r],"avgPool3dBackprop");for(var i=a.strideDepth,o=a.strideHeight,s=a.strideWidth,c=a.filterDepth,f=a.filterHeight,d=a.filterWidth,p=a.dilationDepth,v=a.dilationHeight,g=a.dilationWidth,y=a.effectiveFilterDepth,b=a.effectiveFilterHeight,x=a.effectiveFilterWidth,S=y-1-a.padInfo.front,_=x-1-a.padInfo.left,C=b-1-a.padInfo.top,A=qe(r.shape,"float32"),O=1/(c*f*d),R=this.bufferSync(n),M=0;M<a.batchSize;++M)for(var k=0;k<a.inChannels;++k)for(var I=0;I<a.inDepth;++I)for(var P=0;P<a.inHeight;++P)for(var L=0;L<a.inWidth;++L){for(var F=I-S,Y=P-C,Z=L-_,J=0,U=0;U<y;U+=p){var H=(F+U)/i;if(!(H<0||H>=a.outDepth||Math.floor(H)!==H))for(var G=0;G<b;G+=v){var Q=(Y+G)/o;if(!(Q<0||Q>=a.outHeight||Math.floor(Q)!==Q))for(var oe=0;oe<x;oe+=g){var j=(Z+oe)/s;j<0||j>=a.outWidth||Math.floor(j)!==j||(J+=R.get(M,H,Q,j,k))}}}A.set(J*O,M,I,P,L,k)}return A.toTensor()},t.prototype.maxPool3d=function(n,r){return ge(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(n,r){for(var a=qe(r.outShape,"int32"),i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterDepth,v=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,b=r.padInfo.top,x=r.padInfo.left,S=this.bufferSync(n),_=0;_<r.batchSize;++_)for(var C=0;C<r.inChannels;++C)for(var A=0;A<r.outDepth;++A){for(var O=A*i-y,R=O;R<0;)R+=c;for(var M=Math.min(r.inDepth,p+O),k=0;k<r.outHeight;++k){for(var I=k*o-b,P=I;P<0;)P+=f;for(var L=Math.min(r.inHeight,v+I),F=0;F<r.outWidth;++F){for(var Y=F*s-x,Z=Y;Z<0;)Z+=d;for(var J=Math.min(r.inWidth,g+Y),U=Number.NEGATIVE_INFINITY,H=-1,G=R;G<M;G+=c)for(var Q=G-O,oe=P;oe<L;oe+=f)for(var j=oe-I,K=Z;K<J;K+=d){var ce=K-Y,ve=S.get(_,G,oe,K,C);ve>=U&&(U=ve,H=Q*v*g+j*v+ce)}a.set(H,_,A,k,F,C)}}}return a.toTensor()},t.prototype.maxPool3dBackprop=function(n,r,a,i){ge([r,a],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,i),s=i.strideDepth,c=i.strideHeight,f=i.strideWidth,d=i.dilationDepth,p=i.dilationHeight,v=i.dilationWidth,g=i.effectiveFilterDepth,y=i.effectiveFilterHeight,b=i.effectiveFilterWidth,x=g-1-i.padInfo.front,S=b-1-i.padInfo.left,_=y-1-i.padInfo.top,C=qe(r.shape,"float32"),A=this.bufferSync(o),O=this.bufferSync(n),R=0;R<i.batchSize;++R)for(var M=0;M<i.inChannels;++M)for(var k=0;k<i.inDepth;++k)for(var I=0;I<i.inHeight;++I)for(var P=0;P<i.inWidth;++P){for(var L=k-x,F=I-_,Y=P-S,Z=0,J=0;J<g;J+=d){var U=(L+J)/s;if(!(U<0||U>=i.outDepth||Math.floor(U)!==U))for(var H=0;H<y;H+=p){var G=(F+H)/c;if(!(G<0||G>=i.outHeight||Math.floor(G)!==G))for(var Q=0;Q<b;Q+=v){var oe=(Y+Q)/f;if(!(oe<0||oe>=i.outWidth||Math.floor(oe)!==oe)){var j=g*y*b-1-A.get(R,U,G,oe,M)===J*y*b+H*b+Q?1:0;j!==0&&(Z+=O.get(R,U,G,oe,M)*j)}}}}C.set(Z,R,k,I,P,M)}return C.toTensor()},t.prototype.cast=function(n,r){return U4(n,r,this)},t.prototype.reshape=function(n,r){return ox(n,r)},t.prototype.avgPool=function(n,r){return ge(n,"avgPool"),this.pool(n,r,"avg").toFloat()},t.prototype.resizeBilinear=function(n,r,a,i){ge(n,"resizeBilinear");for(var o=n.shape,s=o[0],c=o[1],f=o[2],d=o[3],p=this.readSync(n.dataId),v=new Float32Array(De([s,r,a,d])),g=[i&&r>1?c-1:c,i&&a>1?f-1:f],y=[i&&r>1?r-1:r,i&&a>1?a-1:a],b=0,x=g[0]/y[0],S=g[1]/y[1],_=0;_<s;_++)for(var C=0;C<r;C++)for(var A=x*C,O=Math.floor(A),R=A-O,M=Math.min(c-1,Math.ceil(A)),k=_*n.strides[0]+O*n.strides[1],I=_*n.strides[0]+M*n.strides[1],P=0;P<a;P++)for(var L=S*P,F=Math.floor(L),Y=L-F,Z=Math.min(f-1,Math.ceil(L)),J=k+F*n.strides[2],U=I+F*n.strides[2],H=k+Z*n.strides[2],G=I+Z*n.strides[2],Q=0;Q<d;Q++){var oe=p[J+Q],j=p[U+Q],K=oe+(p[H+Q]-oe)*Y,ce=K+(j+(p[G+Q]-j)*Y-K)*R;v[b++]=ce}return Pn(v,[s,r,a,d])},t.prototype.resizeBilinearBackprop=function(n,r,a){ge([n,r],"resizeBilinearBackprop");for(var i=r.shape,o=i[0],s=i[1],c=i[2],f=i[3],d=n.shape,p=d[1],v=d[2],g=new Float32Array(o*s*c*f),y=[a&&p>1?s-1:s,a&&v>1?c-1:c],b=[a&&p>1?p-1:p,a&&v>1?v-1:v],x=y[0]/b[0],S=y[1]/b[1],_=this.readSync(n.dataId),C=0,A=0;A<o;A++)for(var O=A*r.strides[0],R=0;R<p;R++)for(var M=R*x,k=Math.floor(M),I=Math.min(Math.ceil(M),s-1),P=O+k*r.strides[1],L=O+I*r.strides[1],F=M-k,Y=1-F,Z=0;Z<v;Z++)for(var J=Z*S,U=Math.floor(J),H=Math.min(Math.ceil(J),c-1),G=J-U,Q=1-G,oe=P+U*r.strides[2],j=P+H*r.strides[2],K=L+U*r.strides[2],ce=L+H*r.strides[2],ve=Y*Q,ye=Y*G,be=F*Q,xe=F*G,Pe=0;Pe<f;Pe++){var ne=_[C++];g[oe+Pe]+=ne*ve,g[j+Pe]+=ne*ye,g[K+Pe]+=ne*be,g[ce+Pe]+=ne*xe}return sr(g,[o,c,s,f],r.dtype)},t.prototype.resizeNearestNeighbor=function(n,r,a,i){ge(n,"resizeNearestNeighbor");for(var o=n.shape,s=o[0],c=o[1],f=o[2],d=o[3],p=this.readSync(n.dataId),v=new Float32Array(s*r*a*d),g=[i&&r>1?c-1:c,i&&a>1?f-1:f],y=[i&&r>1?r-1:r,i&&a>1?a-1:a],b=g[0]/y[0],x=g[1]/y[1],S=0,_=0;_<s;_++)for(var C=_*n.strides[0],A=0;A<r;A++)for(var O=b*A,R=C+Math.min(c-1,i?Math.round(O):Math.floor(O))*n.strides[1],M=0;M<a;M++)for(var k=x*M,I=R+Math.min(f-1,i?Math.round(k):Math.floor(k))*n.strides[2],P=0;P<d;P++){var L=p[I+P];v[S++]=L}return Pn(v,[s,r,a,d],n.dtype)},t.prototype.resizeNearestNeighborBackprop=function(n,r,a){ge([n,r],"resizeNearestNeighborBackprop");for(var i=r.shape,o=i[0],s=i[1],c=i[2],f=i[3],d=n.shape,p=d[1],v=d[2],g=new Float32Array(o*s*c*f),y=this.readSync(n.dataId),b=[a&&p>1?s-1:s,a&&v>1?c-1:c],x=[a&&p>1?p-1:p,a&&v>1?v-1:v],S=b[0]/x[0],_=b[1]/x[1],C=1/S,A=1/_,O=2*Math.ceil(C)+2,R=2*Math.ceil(A)+2,M=0;M<o;M++)for(var k=M*r.strides[0],I=0;I<s;I++)for(var P=k+I*r.strides[1],L=Math.floor(I*C),F=Math.floor(L-O/2),Y=0;Y<c;Y++)for(var Z=P+Y*r.strides[2],J=Math.floor(Y*A),U=Math.floor(J-R/2),H=0;H<f;H++){for(var G=0,Q=0;Q<O;Q++){var oe=Q+F;if(!(oe<0||oe>=p)){var j=k+oe*n.strides[1],K=oe*S;if(I===Math.min(s-1,a?Math.round(K):Math.floor(K)))for(var ce=0;ce<R;ce++){var ve=ce+U;if(!(ve<0||ve>=v)){var ye=j+ve*n.strides[2],be=ve*_;Y===Math.min(c-1,a?Math.round(be):Math.floor(be))&&(G+=y[ye+H])}}}}g[Z+H]=G}return sr(g,r.shape,r.dtype)},t.prototype.batchNormalization=function(n,r,a,i,o,s){ge([n,r,a,o,s],"batchNorm");for(var c=this.readSync(n.dataId),f=this.readSync(r.dataId),d=this.readSync(a.dataId),p=o?this.readSync(o.dataId):new Float32Array([1]),v=s?this.readSync(s.dataId):new Float32Array([0]),g=new Float32Array(c.length),y=v.length,b=p.length,x=d.length,S=f.length,_=0,C=0,A=0,O=0,R=0;R<c.length;++R)g[R]=v[_++]+(c[R]-f[C++])*p[A++]/Math.sqrt(d[O++]+i),_>=y&&(_=0),C>=S&&(C=0),A>=b&&(A=0),O>=x&&(O=0);return sr(g,n.shape)},t.prototype.localResponseNormalization4D=function(n,r,a,i,o){ge(n,"localResponseNormalization4D");var s=n.shape[3],c=s-1,f=this.readSync(n.dataId),d=n.size,p=new Float32Array(d);function v(x){for(var S=x%s,_=x-S+Math.max(0,S-r),C=x-S+Math.min(S+r,c),A=0;_<=C;_++){var O=f[_];A+=O*O}return A}for(var g=0;g<d;g++){var y=v(g),b=f[g]*Math.pow(a+i*y,-o);p[g]=b}return sr(p,n.shape)},t.prototype.LRNGrad=function(n,r,a,i,o,s,c){ge(n,"LRNGrad");for(var f=n.shape[3],d=this.readSync(n.dataId),p=this.readSync(r.dataId),v=this.readSync(a.dataId),g=new Float32Array(n.size),y=n.size,b=0;b<y;b++){for(var x=b%f,S=b-x+Math.max(0,x-i),_=b-x+Math.min(f,x+i+1),C=0,A=S;A<_;A++)C+=Math.pow(p[A],2);for(C=s*C+o,A=S;A<_;A++){var O=-2*s*c*p[A]*v[b]/C;b===A&&(O+=Math.pow(C,-c)),O*=d[b],g[A]+=O}}return sr(g,n.shape)},t.prototype.multinomial=function(n,r,a,i){ge(n,"multinomial");for(var o=r?n:Yi(n),s=o.shape[0],c=o.shape[1],f=_t([s,a],"int32"),d=this.readSync(f.dataId),p=this.readSync(o.dataId),v=0;v<s;++v){var g=v*c,y=new Float32Array(c-1);y[0]=p[g];for(var b=1;b<y.length;++b)y[b]=y[b-1]+p[g+b];for(var x=nm(i.toString()),S=v*a,_=0;_<a;++_){var C=x();d[S+_]=y.length;for(var A=0;A<y.length;A++)if(C<y[A]){d[S+_]=A;break}}}return f},t.prototype.oneHot=function(n,r,a,i){ge(n,"oneHot");var o=new Float32Array(n.size*r);o.fill(i);for(var s=this.readSync(n.dataId),c=0;c<n.size;++c)s[c]>=0&&s[c]<r&&(o[c*r+s[c]]=a);return Bo(o,[n.size,r],"int32")},t.prototype.nonMaxSuppression=function(n,r,a,i,o){return ge(n,"nonMaxSuppression"),o2(this.readSync(n.dataId),this.readSync(r.dataId),a,i,o)},t.prototype.fft=function(n){return this.fftBatch(n,!1)},t.prototype.ifft=function(n){return this.fftBatch(n,!0)},t.prototype.fftBatch=function(n,r){for(var a=n.shape[0],i=n.shape[1],o=qe(n.shape,"float32"),s=qe(n.shape,"float32"),c=Jr(n).as2D(a,i),f=ja(n).as2D(a,i),d=0;d<a;d++)for(var p=c.slice([d,0],[1,i]),v=f.slice([d,0],[1,i]),g=kn(p,v),y=this.readSync(this.fftImpl(g,r).dataId),b=0;b<i;b++){var x=iM(y,b);o.values[d*i+b]=x.real,s.values[d*i+b]=x.imag}return kn(o.toTensor(),s.toTensor()).as2D(a,i)},t.prototype.fftImpl=function(n,r){var a=n.as1D(),i=a.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(a,i,r).as2D(n.shape[0],n.shape[1]);return r&&(o=kn(Jr(o).div(we(i)),ja(o).div(we(i)))),o}var s=this.readSync(n.dataId),c=(function(f){for(var d=new Float32Array(f.length/2),p=new Float32Array(f.length/2),v=0;v<f.length;v+=2)d[v/2]=f[v],p[v/2]=f[v+1];return{real:d,imag:p}})(this.fourierTransformByMatmul(s,i,r));return kn(c.real,c.imag).as2D(n.shape[0],n.shape[1])},t.prototype.isExponentOf2=function(n){return(n&n-1)==0},t.prototype.fftRadix2=function(n,r,a){if(r===1)return n;var i=this.readSync(n.dataId),o=r/2,s=(function(S){for(var _=Math.ceil(S.length/4),C=new Float32Array(_),A=new Float32Array(_),O=0;O<S.length;O+=4)C[Math.floor(O/4)]=S[O],A[Math.floor(O/4)]=S[O+1];return{real:C,imag:A}})(i),c=kn(s.real,s.imag).as1D(),f=(function(S){for(var _=Math.floor(S.length/4),C=new Float32Array(_),A=new Float32Array(_),O=2;O<S.length;O+=4)C[Math.floor(O/4)]=S[O],A[Math.floor(O/4)]=S[O+1];return{real:C,imag:A}})(i),d=kn(f.real,f.imag).as1D();c=this.fftRadix2(c,o,a),d=this.fftRadix2(d,o,a);var p=(function(S,_){for(var C=new Float32Array(S/2),A=new Float32Array(S/2),O=0;O<Math.ceil(S/2);O++){var R=(_?2:-2)*Math.PI*(O/S);C[O]=Math.cos(R),A[O]=Math.sin(R)}return{real:C,imag:A}})(r,a),v=kn(p.real,p.imag).mul(d),g=c.add(v),y=c.sub(v),b=Jr(g).concat(Jr(y)),x=ja(g).concat(ja(y));return kn(b,x).as1D()},t.prototype.fourierTransformByMatmul=function(n,r,a){for(var i=new Float32Array(2*r),o=0;o<r;o++){for(var s=0,c=0,f=0;f<r;f++){var d=xne(o*f,r,a),p=iM(n,f);s+=p.real*d.real-p.imag*d.imag,c+=p.real*d.imag+p.imag*d.real}a&&(s/=r,c/=r),bne(i,s,c,o)}return i},t.prototype.depthToSpace=function(n,r,a){z(a==="NHWC",(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a})),z(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));for(var i=n.shape[0],o=n.shape[1],s=n.shape[2],c=n.shape[3],f=o*r,d=s*r,p=c/(r*r),v=this.readSync(n.dataId),g=new Float32Array(i*f*d*p),y=0,b=0;b<i;++b)for(var x=0;x<f;++x)for(var S=Math.floor(x/r),_=x%r,C=0;C<d;++C)for(var A=Math.floor(C/r),O=(_*r+C%r)*p,R=0;R<p;++R){var M=R+O+c*(A+s*(S+o*b));g[y++]=v[M]}return sr(g,[i,f,d,p])},t.prototype.broadcastedBinaryOp=function(n,r,a,i){var o=Je(n.shape,r.shape),s=qe(o,a),c=this.readSync(n.dataId),f=this.readSync(r.dataId),d=ko(n.shape,o),p=ko(r.shape,o),v=s.values;if(d.length+p.length===0)for(var g=0;g<v.length;++g)v[g]=i(c[g%c.length],f[g%f.length]);else{var y=this.bufferSync(n),b=this.bufferSync(r),x=function(S){var _=s.indexToLoc(S),C=_.slice(-n.rank);d.forEach((function(M){return C[M]=0}));var A=y.locToIndex(C),O=_.slice(-r.rank);p.forEach((function(M){return O[M]=0}));var R=b.locToIndex(O);v[S]=i(c[A],f[R])};for(g=0;g<v.length;++g)x(g)}return s.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(n,r,a){var i=Je(n.shape,r.shape),o=qe(i,"float32"),s=qe(i,"float32"),c=this.readSync(n.dataId),f=this.readSync(r.dataId),d=ko(n.shape,i),p=ko(r.shape,i),v=o.values,g=s.values;if(d.length+p.length===0)for(var y=0;y<v.length;y++){var b=y%c.length,x=y%f.length,S=a(c[2*b],c[2*b+1],f[2*x],f[2*x+1]);v[y]=S.real,g[y]=S.imag}else{var _=this.bufferSync(this.data.get(n.dataId).complexTensors.real),C=this.bufferSync(this.data.get(r.dataId).complexTensors.real),A=function(O){var R=o.indexToLoc(O),M=R.slice(-n.rank);d.forEach((function(F){return M[F]=0}));var k=_.locToIndex(M),I=R.slice(-r.rank);p.forEach((function(F){return I[F]=0}));var P=C.locToIndex(I),L=a(c[2*k],c[2*k+1],f[2*P],f[2*P+1]);v[O]=L.real,g[O]=L.imag};for(y=0;y<v.length;y++)A(y)}return this.complex(o.toTensor(),s.toTensor())},t.prototype.split=function(n,r,a){return q4(n,r,a)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(n,r,a,i,o,s){for(var c=n.shape,f=c[0],d=c[1],p=c[2],v=c[3],g=r.shape[0],y=i[0],b=i[1],x=qe([g,y,b,v],"float32"),S=this.readSync(r.dataId),_=this.readSync(a.dataId),C=this.readSync(n.dataId),A=n.strides,O=x.strides,R=0;R<g;R++){var M=4*R,k=S[M],I=S[M+1],P=S[M+2],L=S[M+3],F=_[R];if(!(F>=f))for(var Y=y>1?(P-k)*(d-1)/(y-1):0,Z=b>1?(L-I)*(p-1)/(b-1):0,J=0;J<y;J++){var U=y>1?k*(d-1)+J*Y:.5*(k+P)*(d-1);if(U<0||U>d-1)for(var H=0;H<b;H++)for(var G=0;G<v;G++){var Q=G+H*O[2]+J*O[1]+R*O[0];x.values[Q]=s}else if(o==="bilinear"){var oe=Math.floor(U),j=Math.ceil(U),K=U-oe;for(H=0;H<b;H++)if((Se=b>1?I*(p-1)+H*Z:.5*(I+L)*(p-1))<0||Se>p-1)for(G=0;G<v;G++)Q=G+H*O[2]+J*O[1]+R*O[0],x.values[Q]=s;else{var ce=Math.floor(Se),ve=Math.ceil(Se),ye=Se-ce;for(G=0;G<v;G++){var be=C[Q=G+ce*A[2]+oe*A[1]+F*A[0]],xe=C[Q=G+ve*A[2]+oe*A[1]+F*A[0]],Pe=C[Q=G+ce*A[2]+j*A[1]+F*A[0]],ne=be+(xe-be)*ye,Ae=Pe+(C[Q=G+ve*A[2]+j*A[1]+F*A[0]]-Pe)*ye;Q=G+H*O[2]+J*O[1]+R*O[0],x.values[Q]=ne+(Ae-ne)*K}}}else for(H=0;H<b;++H){var Se;if((Se=b>1?I*(p-1)+H*Z:.5*(I+L)*(p-1))<0||Se>p-1)for(G=0;G<v;G++)Q=G+H*O[2]+J*O[1]+R*O[0],x.values[Q]=s;else{var he=Math.round(Se),ze=Math.round(U);for(G=0;G<v;G++){var Ie=G+he*A[2]+ze*A[1]+F*A[0],Ge=G+H*O[2]+J*O[1]+R*O[0];x.values[Ge]=C[Ie]}}}}}return x.toTensor()},t.prototype.sparseToDense=function(n,r,a,i){var o=nv(0,n,a),s=o.sliceRank,c=o.numUpdates,f=o.sliceSize,d=o.strides,p=o.outputSize;return this.scatter(n,r,a,p,f,c,s,d,i,!1)},t.prototype.gatherND=function(n,r){var a=r.shape,i=a[a.length-1],o=I4(n,r),s=o[0],c=o[1],f=o[2],d=o[3];if(c===0)return Pn([],s,n.dtype);for(var p=new cf([c,f],n.dtype),v=this.readSync(r.dataId),g=this.readSync(n.dataId),y=0;y<c;y++){for(var b=[],x=0,S=0;S<i;S++){var _=v[y*i+S];x+=_*d[S],b.push(_)}if(x<0||x>=n.size/f)throw new Error("Invalid indices: "+b+" does not index into "+n.shape);for(var C=0;C<f;C++)p.values[y*f+C]=g[x*f+C]}return p.toTensor().reshape(s)},t.prototype.scatterND=function(n,r,a){var i=nv(0,n,a),o=i.sliceRank,s=i.numUpdates,c=i.sliceSize,f=i.strides,d=i.outputSize,p=we(0);return this.scatter(n,r,a,d,c,s,o,f,p,!0)},t.prototype.fill=function(n,r,a){var i=Gp(a=a||Uf(r),De(n));return i.fill(r),$.makeTensor(i,n,a,this)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){var r=Gp(n.dtype,De(n.shape));return this.makeOutput(r,n.shape,n.dtype)},t.prototype.linspace=function(n,r,a){return W4(n,r,a)},t.prototype.scatter=function(n,r,a,i,o,s,c,f,d,p){var v=[i/o,o],g=this.readSync(n.dataId),y=this.readSync(r.dataId);if(i===0)return Pn([],a,r.dtype);var b=new cf(v,r.dtype);b.values.fill(this.readSync(d.dataId)[0]);for(var x=0;x<s;x++){for(var S=[],_=0,C=0;C<c;C++){var A=g[x*c+C];S.push(A),_+=A*f[C]}if(_<0||_>=i/o)throw new Error("Invalid indices: "+S+" does not index into "+a);for(var O=0;O<o;O++)p?b.values[_*o+O]+=y[x*o+O]:b.values[_*o+O]=r.rank===0?y[0]:y[x*o+O]}return b.toTensor().reshape(a)},t})(j4);$.registerBackend("cpu",(function(){return new zoe}),1);for(var Fb=0,OM=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t,i=a.boxes,o=a.scores,s=r,c=s.maxOutputSize,f=s.iouThreshold,d=s.scoreThreshold,p=s.softNmsSigma,v=n;ge(i,"NonMaxSuppressionWithScore");var g=u2(v.data.get(i.dataId).values,v.data.get(o.dataId).values,c,f,d,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;ge(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var c=i[s];o[s]=c*c}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:hf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n;ge([a,i],hf);var s=o.data.get(a.dataId).values,c=o.data.get(i.dataId).values,f=(function(v,g,y,b,x,S){var _=Je(v,g),C=_.length,A=qa(_),O=lf(x,De(_)),R=v.length,M=g.length,k=qa(v),I=qa(g),P=ko(v,_),L=ko(g,_);if(P.length+L.length===0)for(var F=0;F<O.length;++F)O[F]=S(y[F%y.length],b[F%b.length]);else{var Y=function(Z){var J=Yee(Z,C,A),U=J.slice(-R);P.forEach((function(oe){return U[oe]=0}));var H=YD(U,R,k),G=J.slice(-M);L.forEach((function(oe){return G[oe]=0}));var Q=YD(G,M,I);O[Z]=S(y[H],b[Q])};for(F=0;F<O.length;++F)Y(F)}return[O,_]})(a.shape,i.shape,s,c,a.dtype,(function(v,g){var y=v-g;return y*y})),d=f[0],p=f[1];return{dataId:o.write(d,p,a.dtype),shape:p,dtype:a.dtype}}}];Fb<OM.length;Fb++)h4(OM[Fb]);var js,Uoe=function(e){this.variableNames=["A"];var t=Hn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Woe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Hn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var jb=0,TM=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,c=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],f=c[0],d=c[1],p=[d,f],v=[d,f,i];(s||o)&&(js==null&&(js=document.createElement("canvas").getContext("2d")),js.canvas.width=f,js.canvas.height=d,js.drawImage(a,0,0,f,d),a=js.canvas);var g=n.makeTensorInfo(p,"int32");n.texData.get(g.dataId).usage=Mr.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(g.dataId),a);var y=de().getBool("WEBGL_PACK")?new Woe(v):new Uoe(v),b=n.runWebGLProgram(y,[g],"int32");return n.disposeData(g.dataId),b}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;Yp("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t,i=a.boxes,o=a.scores,s=r,c=s.maxOutputSize,f=s.iouThreshold,d=s.scoreThreshold,p=s.softNmsSigma,v=n,g=u2(v.readSync(i.dataId),v.readSync(o.dataId),c,f,d,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,i=new Xe(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:hf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n,s=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wi("return (a - b) * (a - b);",a.shape,i.shape):new Lt("return (a - b) * (a - b);",a.shape,i.shape);return o.compileAndRun(s,[a,i])}}];jb<TM.length;jb++)h4(TM[jb]);for(var zb=0,RM=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:hf,gradFunc:function(e,t){var n=t[0],r=t[1],a=we(2);return{a:function(){return Vn(e,Vn(a,on(n,r)))},b:function(){return Vn(e,Vn(a,on(r,n)))}}}}];zb<RM.length;zb++)jee(RM[zb]);var Hoe=(function(){function e(){}return e.prototype.fetch=function(t,n){return fetch(t,n)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return new TextDecoder(n).decode(t)},e})();de().get("IS_BROWSER")&&de().setPlatform("browser",new Hoe);var Ub,qoe=function(){return require("node-fetch")},Voe=(function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,n){return de().global.fetch!=null?de().global.fetch(t,n):(Ub==null&&(Ub=qoe()),Ub(t,n))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)},e})();de().get("IS_NODE")&&de().setPlatform("node",new Voe);var lx={float32:4,int32:4,uint16:2,uint8:1,bool:1},lv=4;function BB(e,t){for(var n={},r=0,a=function(s){var c=s.name,f=s.dtype,d=s.shape,p=De(d),v=void 0;if("quantization"in s){var g=s.quantization;if(g.dtype!=="uint8"&&g.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var y=lx[g.dtype],b=e.slice(r,r+p*y),x=g.dtype==="uint8"?new Uint8Array(b):new Uint16Array(b);if(f==="float32")v=Float32Array.from(x,(function(R){return R*g.scale+g.min}));else{if(f!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+f);v=Int32Array.from(x,(function(R){return Math.round(R*g.scale+g.min)}))}r+=p*y}else if(f==="string"){var S=De(s.shape);v=[];for(var _=0;_<S;_++){var C=new Uint32Array(e.slice(r,r+lv))[0];r+=lv;var A=new Uint8Array(e.slice(r,r+C));v.push(A),r+=C}}else{var O=lx[f];if(b=e.slice(r,r+p*O),f==="float32")v=new Float32Array(b);else if(f==="int32")v=new Int32Array(b);else{if(f!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+f);v=new Uint8Array(b)}r+=p*O}n[c]=Pn(v,d,f)},i=0,o=t;i<o.length;i++)a(o[i]);return n}function Goe(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(i){if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)}));var r=new Uint8Array(t),a=0;return n.forEach((function(i){r.set(new Uint8Array(i.buffer),a),a+=i.byteLength})),r.buffer}var cx=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function DM(e){return cx?Buffer.byteLength(e):new Blob([e]).size}function A2(e){var t=0;e.forEach((function(a){t+=a.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(a){n.set(new Uint8Array(a),r),r+=a.byteLength})),n.buffer}function MM(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Kf(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:DM(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:DM(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var kr=(function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(i){var o=i(t,r);o!==null&&a.push(o)})),a},e})(),tl="://",Lo=(function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,n){z(t!=null,(function(){return"scheme must not be undefined or null."})),t.endsWith(tl)&&(t=t.slice(0,t.indexOf(tl))),z(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();z(r.managers[t]==null,(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(t){var n=this.getInstance().managers[t];if(n==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return n},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e})();function Jh(e){if(e.indexOf(tl)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Lo.getSchemes().join(","));return{scheme:e.split(tl)[0],path:e.split(tl)[1]}}function kM(e,t,n){return n===void 0&&(n=!1),Oe(this,void 0,void 0,(function(){var r,a,i,o,s,c,f,d,p;return Te(this,(function(v){switch(v.label){case 0:return z(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),z((r=kr.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),z(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),a=r[0],z((i=kr.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),z(i.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),o=i[0],s=Jh(e).scheme,c=Jh(e).path,f=s===Jh(e).scheme,[4,a.load()];case 1:return d=v.sent(),n&&f?[4,Lo.getManager(s).removeModel(c)]:[3,3];case 2:v.sent(),v.label=3;case 3:return[4,o.save(d)];case 4:return p=v.sent(),!n||f?[3,6]:[4,Lo.getManager(s).removeModel(c)];case 5:v.sent(),v.label=6;case 6:return[2,p.modelArtifactsInfo]}}))}))}var Cu="models_store",No="model_info_store";function LB(){if(!de().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function fx(e){var t=e.result;t.createObjectStore(Cu,{keyPath:"modelPath"}),t.createObjectStore(No,{keyPath:"modelPath"})}var nl=(function(){function e(t){if(this.indexedDB=LB(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return Oe(this,void 0,void 0,(function(){return Te(this,(function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]}))}))},e.prototype.load=function(){return Oe(this,void 0,void 0,(function(){return Te(this,(function(t){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(t,n){var r=this;return new Promise((function(a,i){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return fx(o)},o.onsuccess=function(){var s=o.result;if(n==null){var c=s.transaction(Cu,"readonly"),f=c.objectStore(Cu).get(r.modelPath);f.onsuccess=function(){if(f.result==null)return s.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(f.result.modelArtifacts)},f.onerror=function(b){return s.close(),i(f.error)},c.oncomplete=function(){return s.close()}}else{var d,p=Kf(n),v=s.transaction(No,"readwrite"),g=v.objectStore(No),y=g.put({modelPath:r.modelPath,modelArtifactsInfo:p});y.onsuccess=function(){var b=(d=s.transaction(Cu,"readwrite")).objectStore(Cu).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:p});b.onsuccess=function(){return a({modelArtifactsInfo:p})},b.onerror=function(x){var S=(g=v.objectStore(No)).delete(r.modelPath);S.onsuccess=function(){return s.close(),i(b.error)},S.onerror=function(_){return s.close(),i(b.error)}}},y.onerror=function(b){return s.close(),i(y.error)},v.oncomplete=function(){d==null?s.close():d.oncomplete=function(){return s.close()}}}},o.onerror=function(s){return i(o.error)}}))},e.URL_SCHEME="indexeddb://",e})(),NM=function(e){return de().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(nl.URL_SCHEME)?(t=e.slice(nl.URL_SCHEME.length),new nl(t)):null;var t};kr.registerSaveRouter(NM),kr.registerLoadRouter(NM);var $oe=(function(){function e(){this.indexedDB=LB()}return e.prototype.listModels=function(){return Oe(this,void 0,void 0,(function(){var t=this;return Te(this,(function(n){return[2,new Promise((function(r,a){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return fx(i)},i.onsuccess=function(){var o=i.result,s=o.transaction(No,"readonly"),c=s.objectStore(No).getAll();c.onsuccess=function(){for(var f={},d=0,p=c.result;d<p.length;d++){var v=p[d];f[v.modelPath]=v.modelArtifactsInfo}r(f)},c.onerror=function(f){return o.close(),a(c.error)},s.oncomplete=function(){return o.close()}},i.onerror=function(o){return a(i.error)}}))]}))}))},e.prototype.removeModel=function(t){return Oe(this,void 0,void 0,(function(){var n=this;return Te(this,(function(r){var a;return t=(a=t).startsWith(nl.URL_SCHEME)?a.slice(nl.URL_SCHEME.length):a,[2,new Promise((function(i,o){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return fx(s)},s.onsuccess=function(){var c,f=s.result,d=f.transaction(No,"readwrite"),p=d.objectStore(No),v=p.get(t);v.onsuccess=function(){if(v.result==null)return f.close(),o(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var g=p.delete(t),y=function(){var b=(c=f.transaction(Cu,"readwrite")).objectStore(Cu).delete(t);b.onsuccess=function(){return i(v.result.modelArtifactsInfo)},b.onerror=function(x){return o(v.error)}};g.onsuccess=y,g.onerror=function(b){return y(),f.close(),o(v.error)}},v.onerror=function(g){return f.close(),o(v.error)},d.oncomplete=function(){c==null?f.close():c.oncomplete=function(){return f.close()}}},s.onerror=function(c){return o(s.error)}}))]}))}))},e})();if(de().getBool("IS_BROWSER"))try{Lo.registerManager(nl.URL_SCHEME,new $oe)}catch{}var Ci="/",Gs="tensorflowjs_models",FB="info",Koe="model_topology",Xoe="weight_specs",Yoe="weight_data",Zoe="model_metadata";function jB(e){return{info:[Gs,e,FB].join(Ci),topology:[Gs,e,Koe].join(Ci),weightSpecs:[Gs,e,Xoe].join(Ci),weightData:[Gs,e,Yoe].join(Ci),modelMetadata:[Gs,e,Zoe].join(Ci)}}function Qoe(e){var t=e.split(Ci);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Ci)}var rl=(function(){function e(t){if(!de().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=jB(this.modelPath)}return e.prototype.save=function(t){return Oe(this,void 0,void 0,(function(){var n,r,a;return Te(this,(function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Kf(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(function(o){if(cx)return Buffer.from(o).toString("base64");for(var s=new Uint8Array(o),c="",f=0,d=s.length;f<d;f++)c+=String.fromCharCode(s[f]);return btoa(c)})(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return Oe(this,void 0,void 0,(function(){var t,n,r,a,i,o,s;return Te(this,(function(c){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=a,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,n.userDefinedMetadata=o.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=(function(f){if(cx){var d=Buffer.from(f,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var p=atob(f),v=new Uint8Array(p.length),g=0;g<p.length;++g)v.set([p.charCodeAt(g)],g);return v.buffer})(s),[2,n]}))}))},e.URL_SCHEME="localstorage://",e})(),IM=function(e){return de().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(rl.URL_SCHEME)?(t=e.slice(rl.URL_SCHEME.length),new rl(t)):null;var t};kr.registerSaveRouter(IM),kr.registerLoadRouter(IM);var Joe=(function(){function e(){z(de().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),z(typeof window>"u"||window.localStorage!==void 0,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return Oe(this,void 0,void 0,(function(){var t,n,r,a,i,o;return Te(this,(function(s){for(t={},n=Gs+Ci,r=Ci+FB,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=Qoe(i),t[o]=JSON.parse(this.LS.getItem(i)));return[2,t]}))}))},e.prototype.removeModel=function(t){return Oe(this,void 0,void 0,(function(){var n,r;return Te(this,(function(a){var i;if(t=(i=t).startsWith(rl.URL_SCHEME)?i.slice(rl.URL_SCHEME.length):i,n=jB(t),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]}))}))},e})();if(de().getBool("IS_BROWSER"))try{Lo.registerManager(rl.URL_SCHEME,new Joe)}catch{}var eue="model",tue=".json",nue=".weights.bin";function PM(e){return new Promise((function(t){return setTimeout(t)})).then(e)}var Wb=(function(){function e(t){if(!de().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=eue),this.modelTopologyFileName=t+tue,this.weightDataFileName=t+nue}return e.prototype.save=function(t){return Oe(this,void 0,void 0,(function(){var n,r,a,i,o,s;return Te(this,(function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,PM((function(){return o.dispatchEvent(new MouseEvent("click"))}))];case 2:return c.sent(),t.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,PM((function(){return s.dispatchEvent(new MouseEvent("click"))}))]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:Kf(t)}]}}))}))},e.URL_SCHEME="downloads://",e})(),rue=(function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return Oe(this,void 0,void 0,(function(){var t,n,r=this;return Te(this,(function(a){return t=this.files[0],n=this.files.slice(1),[2,new Promise((function(i,o){var s=new FileReader;s.onload=function(c){var f=JSON.parse(c.target.result),d=f.modelTopology;if(d!=null){n.length===0&&i({modelTopology:d});var p=f.weightsManifest;if(p!=null){var v;try{v=r.checkManifestAndWeightFiles(p,n)}catch(x){return void o(x)}var g=[],y=[],b=[];p.forEach((function(x){x.paths.forEach((function(S){y.push(S),b.push(null)})),g.push.apply(g,x.weights)})),p.forEach((function(x){x.paths.forEach((function(S){var _=new FileReader;_.onload=function(C){var A=C.target.result,O=y.indexOf(S);b[O]=A,b.indexOf(null)===-1&&i({modelTopology:d,weightSpecs:g,weightData:A2(b),format:f.format,generatedBy:f.generatedBy,convertedBy:f.convertedBy,userDefinedMetadata:f.userDefinedMetadata})},_.onerror=function(C){return o("Failed to weights data from file of path '"+S+"'.")},_.readAsArrayBuffer(v[S])}))}))}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},s.onerror=function(c){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(t)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(t,n){for(var r=[],a=n.map((function(c){return MM(c.name)})),i={},o=0,s=t;o<s.length;o++)s[o].paths.forEach((function(c){var f=MM(c);if(r.indexOf(f)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+f+"'");if(r.push(f),a.indexOf(f)===-1)throw new Error("Weight file with basename '"+f+"' is not provided.");i[c]=n[a.indexOf(f)]}));if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return i},e})();function BM(e,t,n,r){(function(i){z(i!=null&&Array.isArray(i)&&i.length>0,(function(){return"promises must be a none empty array"}))})(e),(function(i,o){z(i>=0&&i<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i})),z(o>=0&&o<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o})),z(o>=i,(function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o}))})(n=n??0,r=r??1);var a=0;return Promise.all(e.map((function(i){return i.then((function(o){var s=n+ ++a/e.length*(r-n);return t(s),o})),i})))}function zB(e,t){return Oe(this,void 0,void 0,(function(){var n,r,a,i,o,s,c,f,d;return Te(this,(function(p){switch(p.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?de().platform.fetch:t.fetchFunc,r=e.map((function(v){return n(v,t.requestInit,{isBinary:!0})})),a=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=p.sent(),[3,4];case 2:return[4,BM(r,t.onProgress,a,i)];case 3:o=p.sent(),p.label=4;case 4:return s=o.map((function(v){return v.arrayBuffer()})),c=.5,f=1,t.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return d=p.sent(),[3,8];case 6:return[4,BM(s,t.onProgress,c,f)];case 7:d=p.sent(),p.label=8;case 8:return[2,d]}}))}))}function LM(e){var t=this;return function(n,r,a){return r===void 0&&(r=""),Oe(t,void 0,void 0,(function(){var i,o,s,c,f,d,p,v,g,y;return Te(this,(function(b){switch(b.label){case 0:if(i=n.map((function(){return!1})),o={},s=a!=null?a.map((function(){return!1})):[],c=[],n.forEach((function(x,S){var _=0;x.weights.forEach((function(C){var A="quantization"in C?C.quantization.dtype:C.dtype,O=lx[A]*De(C.shape),R=function(){i[S]=!0,o[S]==null&&(o[S]=[]),o[S].push({manifestEntry:C,groupOffset:_,sizeBytes:O})};a!=null?a.forEach((function(M,k){M===C.name&&(R(),s[k]=!0)})):R(),c.push(C.name),_+=O}))})),!s.every((function(x){return x})))throw f=a.filter((function(x,S){return!s[S]})),new Error("Could not find weights in manifest with names: "+f.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return d=i.reduce((function(x,S,_){return S&&x.push(_),x}),[]),p=[],d.forEach((function(x){n[x].paths.forEach((function(S){var _=r+(r.endsWith("/")?"":"/")+S;p.push(_)}))})),[4,e(p)];case 1:return v=b.sent(),g={},y=0,d.forEach((function(x){for(var S=n[x].paths.length,_=0,C=0;C<S;C++)_+=v[y+C].byteLength;for(var A=new ArrayBuffer(_),O=new Uint8Array(A),R=0,M=0;M<S;M++){var k=new Uint8Array(v[y+M]);O.set(k,R),R+=k.byteLength}o[x].forEach((function(I){var P=BB(A.slice(I.groupOffset,I.groupOffset+I.sizeBytes),[I.manifestEntry]);for(var L in P)g[L]=P[L]})),y+=S})),[2,g]}}))}))}}kr.registerSaveRouter((function(e){return de().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Wb.URL_SCHEME)?(function(t){return t===void 0&&(t="model"),new Wb(t)})(e.slice(Wb.URL_SCHEME.length)):null}));var UB=(function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(z(typeof n.fetchFunc=="function",(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=de().platform.fetch,z(t!=null&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&z(t.length===2,(function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."})),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return e.prototype.save=function(t){return Oe(this,void 0,void 0,(function(){var n,r,a,i;return Te(this,(function(o){switch(o.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:Kf(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}}))}))},e.prototype.load=function(){return Oe(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,c,f,d,p,v;return Te(this,(function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,t.json()];case 3:return n=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=n.modelTopology,i=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,c=n.format,f=n.userDefinedMetadata,a==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:v=g.sent(),d=v[0],p=v[1],g.label=7;case 7:return[2,{modelTopology:a,weightSpecs:d,weightData:p,userDefinedMetadata:f,generatedBy:o,convertedBy:s,format:c}]}}))}))},e.prototype.loadWeights=function(t){return Oe(this,void 0,void 0,(function(){var n,r,a,i,o,s,c,f,d,p,v;return Te(this,(function(g){switch(g.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=(function(y){var b=y.lastIndexOf("/"),x=y.lastIndexOf("?"),S=y.substring(0,b),_=x>b?y.substring(x):"";return[S+"/",_]})(n),a=r[0],i=r[1],o=this.weightPathPrefix||a,s=[],c=0,f=t;c<f.length;c++)d=f[c],s.push.apply(s,d.weights);return p=[],t.forEach((function(y){y.paths.forEach((function(b){p.push(o+b+i)}))})),[4,zB(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return v=g.sent(),[2,[s,A2(v)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e})();function dx(e){return e.match(UB.URL_SCHEME_REGEX)!=null}var FM=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every((function(n){return dx(n)})):dx(e))?hx(e,{onProgress:t}):null};function hx(e,t){return new UB(e,t)}kr.registerSaveRouter(FM),kr.registerLoadRouter(FM);var Hb=(function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return Oe(this,void 0,void 0,(function(){return Te(this,(function(t){return[2,this.modelArtifacts]}))}))},e})(),aue=(function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return Oe(this,void 0,void 0,(function(){return Te(this,(function(n){return[2,this.saveHandler(t)]}))}))},e})(),WB=Object.freeze({browserFiles:function(e){return new rue(e)},browserHTTPRequest:function(e,t){return hx(e,t)},concatenateArrayBuffers:A2,decodeWeights:BB,encodeWeights:function(e,t){return Oe(this,void 0,void 0,(function(){var n,r,a,i,o,s=this;return Te(this,(function(c){switch(c.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map((function(f){return f.name})):Object.keys(e),i=function(f){var d=a[f],p=Array.isArray(e)?e[f].tensor:e[d];if(p.dtype!=="float32"&&p.dtype!=="int32"&&p.dtype!=="bool"&&p.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+p.dtype);var v={name:d,shape:p.shape,dtype:p.dtype};if(p.dtype==="string"){var g=new Promise((function(y){return Oe(s,void 0,void 0,(function(){var b,x,S,_,C,A,O;return Te(this,(function(R){switch(R.label){case 0:return[4,p.bytes()];case 1:for(b=R.sent(),x=b.reduce((function(M,k){return M+k.length}),0)+lv*b.length,S=new Uint8Array(x),_=0,C=0;C<b.length;C++)A=b[C],O=new Uint8Array(new Uint32Array([A.length]).buffer),S.set(O,_),_+=lv,S.set(A,_),_+=A.length;return y(S),[2]}}))}))}));r.push(g)}else r.push(p.data());t!=null&&(v.group=t),n.push(v)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return[2,{data:Goe(c.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new Hb(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Hb({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Hb({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return kr.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Kf,getSaveHandlers:function(e){return kr.getSaveHandlers(e)},http:hx,isHTTPScheme:dx,loadWeights:function(e,t,n,r){return t===void 0&&(t=""),Oe(this,void 0,void 0,(function(){return Te(this,(function(a){return[2,LM((function(i){return zB(i,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return kr.registerLoadRouter(e)},registerSaveRouter:function(e){return kr.registerSaveRouter(e)},weightsLoaderFactory:LM,withSaveHandler:function(e){return new aue(e)},copyModel:function(e,t){return Oe(this,void 0,void 0,(function(){return Te(this,(function(n){return[2,kM(e,t,!1)]}))}))},listModels:function(){return Oe(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return Te(this,(function(s){switch(s.label){case 0:e=Lo.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(a=r[n],[4,Lo.getManager(a).listModels()]):[3,4];case 2:for(o in i=s.sent())t[a+tl+o]=i[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return Oe(this,void 0,void 0,(function(){return Te(this,(function(n){return[2,kM(e,t,!0)]}))}))},removeModel:function(e){return Oe(this,void 0,void 0,(function(){var t;return Te(this,(function(n){return t=Jh(e),[2,Lo.getManager(t.scheme).removeModel(t.path)]}))}))}}),zs;q({confusionMatrix_:function(e,t,n){var r=B(e,"labels","confusionMatrix"),a=B(t,"predictions","confusionMatrix");z(n==null||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),z(r.rank===1,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),z(a.rank===1,(function(){return"Expected the rank of predictions to be 1, but got "+a.rank})),z(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."})),z(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var i=ax(r.asType("int32"),n),o=ax(a.asType("int32"),n);return i.transpose().matMul(o).asType("int32")}});var iue=q({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(d4("FromPixels",$.backendName)!=null)return $.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,c,f=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],d=f[0],p=f[1];if(o?s=e.getContext("2d").getImageData(0,0,d,p).data:r||n?s=e.data:(i||a)&&(zs==null&&(zs=document.createElement("canvas").getContext("2d")),zs.canvas.width=d,zs.canvas.height=p,zs.drawImage(e,0,0,d,p),s=zs.getImageData(0,0,d,p).data),t===4)c=new Int32Array(s);else{var v=d*p;c=new Int32Array(v*t);for(var g=0;g<v;g++)for(var y=0;y<t;++y)c[g*t+y]=s[4*g+y]}return t2(c,[p,d,t],"int32")}}),O2=Object.freeze({toPixels:function(e,t){return Oe(this,void 0,void 0,(function(){var n,r,a,i,o,s,c,f,d,p,v,g,y,b,x,S,_,C,A,O,R,M,k;return Te(this,(function(I){switch(I.label){case 0:if(n=B(e,"img","toPixels"),e instanceof Dt||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],i=r[1],(o=n.rank===2?1:n.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=I.sent(),c=n.min(),f=n.max(),[4,Promise.all([c.data(),f.data()])];case 2:if(d=I.sent(),p=d[0],v=d[1],g=p[0],y=v[0],c.dispose(),f.dispose(),n.dtype==="float32"){if(g<0||y>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+y+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(g<0||y>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+y+"].")}for(b=n.dtype==="float32"?255:1,x=new Uint8ClampedArray(i*a*4),S=0;S<a*i;++S)_=void 0,C=void 0,A=void 0,O=void 0,o===1?(_=s[S]*b,C=s[S]*b,A=s[S]*b,O=255):o===3?(_=s[3*S]*b,C=s[3*S+1]*b,A=s[3*S+2]*b,O=255):o===4&&(_=s[4*S]*b,C=s[4*S+1]*b,A=s[4*S+2]*b,O=s[4*S+3]*b),x[(R=4*S)+0]=Math.round(_),x[R+1]=Math.round(C),x[R+2]=Math.round(A),x[R+3]=Math.round(O);return t!=null&&(t.width=i,t.height=a,M=t.getContext("2d"),k=new ImageData(x,i,a),M.putImageData(k,0,0)),n!==e&&n.dispose(),[2,x]}}))}))},fromPixels:iue}),oue=(function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e})(),uue=(function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e})();function Ku(e){z(e.className!=null,(function(){return"Class being registered does not have the static className property defined."})),z(typeof e.className=="string",(function(){return"className is required to be a string, but got type "+typeof e.className})),z(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),uue.register(e)}var Xu=(function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Ca(t,e),t.prototype.minimize=function(n,r,a){r===void 0&&(r=!1);var i=this.computeGradients(n,a),o=i.value,s=i.grads;if(a!=null){var c=a.map((function(f){return{name:f.name,tensor:s[f.name]}}));this.applyGradients(c)}else this.applyGradients(s);return dr(s),r?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return gne(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&dr(this.iterations_)},t.prototype.saveIterations=function(){return Oe(this,void 0,void 0,(function(){return Te(this,(function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:we(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,(function(){return Te(this,(function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,(function(){return Te(this,(function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(n){return Oe(this,void 0,void 0,(function(){var r;return Te(this,(function(a){switch(a.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,n.slice(1)]}}))}))},t})(oue);Object.defineProperty(Xu,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var sue=(function(e){function t(n,r,a){a===void 0&&(a=null);var i=e.call(this)||this;return i.learningRate=n,i.rho=r,i.epsilon=a,i.accumulatedGrads=[],i.accumulatedUpdates=[],a==null&&(i.epsilon=$.backend.epsilon()),i}return Ca(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n)).forEach((function(a,i){var o=$.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accum_grad",variable:Ee((function(){return rt(o).variable(!1)}))}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:a+"/accum_var",variable:Ee((function(){return rt(o).variable(!1)}))});var s=Array.isArray(n)?n[i].tensor:n[a];if(s!=null){var c=r.accumulatedGrads[i].variable,f=r.accumulatedUpdates[i].variable;Ee((function(){var d=c.mul(r.rho).add(s.square().mul(1-r.rho)),p=f.add(r.epsilon).sqrt().div(c.add(r.epsilon).sqrt()).mul(s),v=f.mul(r.rho).add(p.square().mul(1-r.rho));c.assign(d),f.assign(v);var g=p.mul(-r.learningRate).add(o);o.assign(g)}))}})),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(dr(this.accumulatedGrads.map((function(n){return n.variable}))),dr(this.accumulatedUpdates.map((function(n){return n.variable}))))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,(function(){var n;return Te(this,(function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,(function(){var r;return Te(this,(function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),this.accumulatedUpdates=n.slice(r,2*r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t})(Xu);Ku(sue);var lue=(function(e){function t(n,r){r===void 0&&(r=.1);var a=e.call(this)||this;return a.learningRate=n,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return Ca(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n)).forEach((function(a,i){var o=$.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accumulator",variable:Ee((function(){return Va(o.shape,r.initialAccumulatorValue).variable(!1)}))});var s=Array.isArray(n)?n[i].tensor:n[a];if(s!=null){var c=r.accumulatedGrads[i].variable;Ee((function(){var f=c.add(s.square());c.assign(f);var d=s.div(f.add($.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(d)}))}})),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&dr(this.accumulatedGrads.map((function(n){return n.variable})))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,(function(){return Te(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,(function(){return Te(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t})(Xu);Ku(lue);var cue=(function(e){function t(n,r,a,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=n,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Ee((function(){o.accBeta1=we(r).variable(),o.accBeta2=we(a).variable()})),i==null&&(o.epsilon=$.backend.epsilon()),o}return Ca(t,e),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map((function(i){return i.name})):Object.keys(n);Ee((function(){var i=on(1,r.accBeta1),o=on(1,r.accBeta2);a.forEach((function(s,c){var f=$.registeredVariables[s];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:s+"/m",variable:Ee((function(){return rt(f).variable(!1)}))}),r.accumulatedSecondMoment[c]==null&&(r.accumulatedSecondMoment[c]={originalName:s+"/v",variable:Ee((function(){return rt(f).variable(!1)}))});var d=Array.isArray(n)?n[c].tensor:n[s];if(d!=null){var p=r.accumulatedFirstMoment[c].variable,v=r.accumulatedSecondMoment[c].variable,g=p.mul(r.beta1).add(d.mul(1-r.beta1)),y=v.mul(r.beta2).add(d.square().mul(1-r.beta2)),b=g.div(i),x=y.div(o);p.assign(g),v.assign(y);var S=b.div(x.sqrt().add(r.epsilon)).mul(-r.learningRate).add(f);f.assign(S)}})),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&dr(this.accumulatedFirstMoment.map((function(n){return n.variable}))),this.accumulatedSecondMoment!=null&&dr(this.accumulatedSecondMoment.map((function(n){return n.variable})))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,(function(){var n;return Te(this,(function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,(function(){var r,a=this;return Te(this,(function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),Ee((function(){a.accBeta1.assign(uv(a.beta1,a.iterations_+1)),a.accBeta2.assign(uv(a.beta2,a.iterations_+1))})),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.accumulatedSecondMoment=n.slice(r,2*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t})(Xu);Ku(cue);var fue=(function(e){function t(n,r,a,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var s=e.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=a,s.epsilon=i,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],Ee((function(){s.iteration=we(0).variable(),s.accBeta1=we(r).variable()})),i==null&&(s.epsilon=$.backend.epsilon()),s}return Ca(t,e),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map((function(i){return i.name})):Object.keys(n);Ee((function(){var i=on(1,r.accBeta1),o=pa(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach((function(s,c){var f=$.registeredVariables[s];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:s+"/m",variable:rt(f).variable(!1)}),r.accumulatedWeightedInfNorm[c]==null&&(r.accumulatedWeightedInfNorm[c]={originalName:s+"/v",variable:rt(f).variable(!1)});var d=Array.isArray(n)?n[c].tensor:n[s];if(d!=null){var p=r.accumulatedFirstMoment[c].variable,v=r.accumulatedWeightedInfNorm[c].variable,g=p.mul(r.beta1).add(d.mul(1-r.beta1)),y=v.mul(r.beta2),b=d.abs(),x=y.maximum(b);p.assign(g),v.assign(x);var S=o.div(i).mul(g.div(x.add(r.epsilon))).add(f);f.assign(S)}})),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&dr(this.accumulatedFirstMoment.map((function(n){return n.variable}))),this.accumulatedWeightedInfNorm!=null&&dr(this.accumulatedWeightedInfNorm.map((function(n){return n.variable})))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,(function(){return Te(this,(function(n){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,(function(){return Te(this,(function(r){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t})(Xu);Ku(fue);var HB=(function(e){function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Ca(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n)).forEach((function(a,i){var o=Array.isArray(n)?n[i].tensor:n[a];if(o!=null){var s=$.registeredVariables[a];Ee((function(){var c=r.c.mul(o).add(s);s.assign(c)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=Mte(we(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,(function(){return Te(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}}))}))},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,(function(){return Te(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t.className="SGD",t})(Xu);Ku(HB);var due=(function(e){function t(n,r,a){a===void 0&&(a=!1);var i=e.call(this,n)||this;return i.learningRate=n,i.momentum=r,i.useNesterov=a,i.accumulations=[],i.m=we(i.momentum),i}return Ca(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n)).forEach((function(a,i){var o=$.registeredVariables[a];r.accumulations[i]==null&&(r.accumulations[i]={originalName:a+"/momentum",variable:Ee((function(){return rt(o).variable(!1)}))});var s=r.accumulations[i].variable,c=Array.isArray(n)?n[i].tensor:n[a];c!=null&&Ee((function(){var f,d=r.m.mul(s).add(c);f=r.useNesterov?r.c.mul(c.add(d.mul(r.m))).add(o):r.c.mul(d).add(o),s.assign(d),o.assign(f)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&dr(this.accumulations.map((function(n){return n.variable})))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,(function(){return Te(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,(function(){return Te(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t})(HB);Ku(due);var hue=(function(e){function t(n,r,a,i,o){r===void 0&&(r=.9),a===void 0&&(a=0),i===void 0&&(i=null),o===void 0&&(o=!1);var s=e.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=a,s.epsilon=i,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,i==null&&(s.epsilon=$.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Ca(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n)).forEach((function(a,i){var o=$.registeredVariables[a];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:a+"/rms",variable:Ee((function(){return rt(o).variable(!1)}))}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:a+"/momentum",variable:Ee((function(){return rt(o).variable(!1)}))}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:a+"/mg",variable:Ee((function(){return rt(o).variable(!1)}))});var s=Array.isArray(n)?n[i].tensor:n[a];if(s!=null){var c=r.accumulatedMeanSquares[i].variable,f=r.accumulatedMoments[i].variable;Ee((function(){var d=c.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var p=r.accumulatedMeanGrads[i].variable,v=p.mul(r.decay).add(s.mul(1-r.decay)),g=f.mul(r.momentum).add(s.mul(r.learningRate).div(d.sub(v.square().add(r.epsilon)).sqrt()));c.assign(d),p.assign(v),f.assign(g);var y=o.sub(g);o.assign(y)}else{var b=c.mul(r.decay).add(s.square().mul(1-r.decay));g=f.mul(r.momentum).add(s.mul(r.learningRate).div(b.add(r.epsilon).sqrt())),c.assign(b),f.assign(g),y=o.sub(g),o.assign(y)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&dr(this.accumulatedMeanSquares.map((function(n){return n.variable}))),this.accumulatedMeanGrads!=null&&this.centered&&dr(this.accumulatedMeanGrads.map((function(n){return n.variable}))),this.accumulatedMoments!=null&&dr(this.accumulatedMoments.map((function(n){return n.variable})))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,(function(){var n;return Te(this,(function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,(function(){var r;return Te(this,(function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),this.accumulatedMoments=n.slice(r,2*r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t})(Xu);Ku(hue);Dt.prototype.squaredDifference=function(e){return aB(this,e)},se=joe;var px=function(e,t){return px=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},px(e,t)};function We(e,t){px(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Wn=function(){return Wn=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wn.apply(this,arguments)};function ke(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(d){try{f(r.next(d))}catch(p){o(p)}}function c(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?i(d.value):a(d.value).then(s,c)}f((r=r.apply(e,[])).next())})}function Ne(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,a=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){n.label=f[1];break}if(f[0]===6&&n.label<i[1]){n.label=i[1],i=f;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(f);break}i[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(d){f=[6,d],a=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function qc(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}var Du=(function(){function e(t,n){if(!Mu(t)||!Mu(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:n}));this._width=t,this._height=n}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e})();function cm(e,t){return e instanceof Dt&&e.shape.length===t}function pue(e){return cm(e,2)}function fm(e){return cm(e,3)}function Fo(e){return cm(e,4)}function vue(e){return e%1!==0}function jM(e){return e%2===0}function mue(e,t){t===void 0&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function zM(e){return e&&e.width&&e.height}function gue(e,t){var n=e.width,r=e.height,a=t/Math.max(r,n);return new Du(Math.round(n*a),Math.round(r*a))}function T2(e){return e.reduce(function(t,n){return t.add(n)},new st(0,0)).div(new st(e.length,e.length))}function pf(e,t,n){return Array(e).fill(0).map(function(r,a){return t+a*n})}function Mu(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function UM(e){return Mu(e)&&0<=e&&e<=1}var st=(function(){function e(t,n){this._x=t,this._y=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e})(),ji=(function(){function e(t,n){n===void 0&&(n=!0);var r=t||{},a=[r.left,r.top,r.right,r.bottom].every(Mu),i=[r.x,r.y,r.width,r.height].every(Mu);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],c=o[1],f=o[2],d=o[3];e.assertIsValidBox({x:s,y:c,width:f,height:d},"Box.constructor",n),this._x=s,this._y=c,this._width=f,this._height=d}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(Mu)},e.assertIsValidBox=function(t,n,r){if(r===void 0&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new st(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new st(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new st(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new st(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),n=t[0],r=t[1],a=t[2],i=t[3];return new e({x:n,y:r,width:a,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),n=t[0],r=t[1],a=t[2],i=t[3];return new e({x:n,y:r,width:a,height:i})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,a=t.width,i=t.height,o=Math.abs(a-i);return a<i&&(n-=o/2,a+=o),i<a&&(r-=o/2,i+=o),new e({x:n,y:r,width:a,height:i})},e.prototype.rescale=function(t){var n=zM(t)?t.width:t,r=zM(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n],a=r[0],i=r[1],o=r[2],s=r[3];return new e({x:a,y:i,width:o,height:s})},e.prototype.clipAtImageBorders=function(t,n){var r=this,a=r.x,i=r.y,o=r.right,s=r.bottom,c=Math.max(a,0),f=Math.max(i,0),d=o-c,p=s-f,v=Math.min(d,t-c),g=Math.min(p,n-f);return new e({x:c,y:f,width:v,height:g}).floor()},e.prototype.shift=function(t,n){var r=this,a=r.width,i=r.height,o=this.x+t,s=this.y+n;return new e({x:o,y:s,width:a,height:i})},e.prototype.padAtBorders=function(t,n){var r=this.width+1,a=this.height+1,i=1,o=1,s=r,c=a,f=this.left,d=this.top,p=this.right,v=this.bottom;return p>n&&(s=-p+n+r,p=n),v>t&&(c=-v+t+a,v=t),f<1&&(c=2-f,f=1),d<1&&(c=2-d,d=1),{dy:o,edy:c,dx:i,edx:s,y:d,ey:v,x:f,ex:p,w:r,h:a}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e})(),dm=(function(e){We(t,e);function t(n,r,a,i,o){return o===void 0&&(o=!1),e.call(this,{left:n,top:r,right:a,bottom:i},o)||this}return t})(ji),qB=(function(){function e(t,n,r,a,i){this._imageDims=new Du(i.width,i.height),this._score=t,this._classScore=n,this._className=r,this._box=new ji(a).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new ji(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e})(),Oa=(function(e){We(t,e);function t(n,r,a){return e.call(this,n,n,"",r,a)||this}return t.prototype.forSize=function(n,r){var a=e.prototype.forSize.call(this,n,r),i=a.score,o=a.relativeBox,s=a.imageDims;return new t(i,o,s)},t})(qB);function yue(e,t,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),a=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=r*a;return n?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function bue(e){var t=e.map(function(s){return s.x}),n=e.map(function(s){return s.y}),r=t.reduce(function(s,c){return c<s?c:s},1/0),a=n.reduce(function(s,c){return c<s?c:s},1/0),i=t.reduce(function(s,c){return s<c?c:s},0),o=n.reduce(function(s,c){return s<c?c:s},0);return new dm(r,a,i,o)}function vf(e,t,n,r){r===void 0&&(r=!0);for(var a=t.map(function(s,c){return{score:s,boxIndex:c}}).sort(function(s,c){return s.score-c.score}).map(function(s){return s.boxIndex}),i=[],o=function(){var s=a.pop();i.push(s);for(var c=a,f=[],d=0;d<c.length;d++){var p=c[d],v=e[s],g=e[p];f.push(yue(v,g,r))}a=a.filter(function(y,b){return f[b]<=n})};a.length>0;)o();return i}function Xf(e,t){return Ee(function(){var n=t[0],r=t[1],a=t[2],i=Va(qc(e.shape.slice(0,3),[1]),n),o=Va(qc(e.shape.slice(0,3),[1]),r),s=Va(qc(e.shape.slice(0,3),[1]),a),c=nn([i,o,s],3);return on(e,c)})}function xue(e,t){return t===void 0&&(t=!1),Ee(function(){var n=e.shape.slice(1),r=n[0],a=n[1];if(r===a)return e;var i=Math.abs(r-a),o=Math.round(i*(t?.5:1)),s=r>a?2:1,c=function(g){var y=e.shape.slice();return y[s]=g,Va(y,0)},f=c(o),d=i-f.shape[s],p=t&&d?c(d):null,v=[p,e,f].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return nn(v,s)})}function qb(e){return 1/(1+Math.exp(-e))}var R2=(function(e){We(t,e);function t(n,r,a,i,o){return o===void 0&&(o=!1),e.call(this,{x:n,y:r,width:a,height:i},o)||this}return t})(ji),wue=.5,Sue=.43,Eue=.45,mf=(function(){function e(t,n,r){r===void 0&&(r=new st(0,0));var a=n.width,i=n.height;this._imgDims=new Du(a,i),this._shift=r,this._positions=t.map(function(o){return o.mul(new st(a,i)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new st(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(n){return n.sub(t._shift).div(new st(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new this.constructor(this.relativePositions,{width:t,height:n})},e.prototype.shiftBy=function(t,n){return new this.constructor(this.relativePositions,this._imgDims,new st(t,n))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,n){if(n===void 0&&(n={}),t){var r=t instanceof Oa?t.box.floor():new ji(t);return this.shiftBy(r.x,r.y).align(null,n)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),i=a.useDlibAlignment,o=a.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),n=t[0],r=t[1],a=t[2],i=function(p){return a.sub(p).magnitude()},o=(i(n)+i(r))/2,s=Math.floor(o/Eue),c=T2(t),f=Math.floor(Math.max(0,c.x-wue*s)),d=Math.floor(Math.max(0,c.y-Sue*s));return new R2(f,d,Math.min(s,this.imageWidth+f),Math.min(s,this.imageHeight+d))},e.prototype.alignMinBbox=function(t){var n=bue(this.positions);return n.pad(n.width*t,n.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e})(),_ue=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],T2([n[3],n[4]])]},t})(mf),Cue=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(T2)},t})(mf),WM=(function(){function e(t,n){this._label=t,this._distance=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+mue(this.distance)+")":"")},e})(),HM=(function(e){We(t,e);function t(n,r){var a=e.call(this,n)||this;return a._label=r,a}return t.assertIsValidLabeledBox=function(n,r){if(ji.assertIsValidBox(n,r),!Mu(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t})(ji),zc=(function(){function e(t,n){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(r){return new Float32Array(r)});return new e(t.label,n)},e})();(function(e){We(t,e);function t(n,r,a,i){var o=e.call(this,n,r)||this;return o._score=a,o._classScore=i,o}return t.assertIsValidPredictedBox=function(n,r){if(HM.assertIsValidLabeledBox(n,r),!UM(n.score)||!UM(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(HM);function VB(e){return e.detection instanceof Oa}function gf(e,t){var n={detection:t};return Object.assign({},e,n)}function GB(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function $B(e){var t="";if(!e)try{e=require("fs")}catch(r){t=r.toString()}var n=e?function(r){return new Promise(function(a,i){e.readFile(r,function(o,s){return o?i(o):a(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:n}}function KB(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=$B();return Wn({Canvas:e||(function(){function o(){}return o})(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||(function(){function o(){}return o})(),Image:t||(function(){function o(){}return o})(),ImageData:global.ImageData||(function(){function o(){}return o})(),Video:global.HTMLVideoElement||(function(){function o(){}return o})(),createCanvasElement:n,createImageElement:r,fetch:a},i)}function XB(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function YB(){return typeof global=="object"&&typeof require=="function"&&typeof NL<"u"&&typeof process<"u"&&!!process.version}var en;function Aue(){if(!en)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return en}function vx(e){en=e}function D2(){XB()&&vx(GB()),YB()&&vx(KB())}function Oue(e){if(en||D2(),!en)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=t===void 0?en.Canvas:t,r=e.Image,a=r===void 0?en.Image:r;en.Canvas=n,en.Image=a,en.createCanvasElement=e.createCanvasElement||(function(){return new n}),en.createImageElement=e.createImageElement||(function(){return new a}),en.ImageData=e.ImageData||en.ImageData,en.Video=e.Video||en.Video,en.fetch=e.fetch||en.fetch,en.readFile=e.readFile||en.readFile}var Gn={getEnv:Aue,setEnv:vx,initialize:D2,createBrowserEnv:GB,createFileSystem:$B,createNodejsEnv:KB,monkeyPatch:Oue,isBrowser:XB,isNodejs:YB};D2();function M2(e){return!Gn.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function zi(e){var t=Gn.getEnv(),n=t.Canvas,r=t.CanvasRenderingContext2D;if(e instanceof r)return e;var a=M2(e);if(!(a instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=a.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var Io;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(Io||(Io={}));var ZB=(function(){function e(t){t===void 0&&(t={});var n=t.anchorPosition,r=t.backgroundColor,a=t.fontColor,i=t.fontSize,o=t.fontStyle,s=t.padding;this.anchorPosition=n||Io.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=a||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=o||"Georgia",this.padding=s||4}return e})(),Tue=(function(){function e(t,n,r){r===void 0&&(r={}),this.text=typeof t=="string"?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new ZB(r)}return e.prototype.measureWidth=function(t){var n=this.options.padding;return this.text.map(function(r){return t.measureText(r).width}).reduce(function(r,a){return r<a?a:r},0)+2*n},e.prototype.measureHeight=function(){var t=this.options,n=t.fontSize,r=t.padding;return this.text.length*n+2*r},e.prototype.getUpperLeft=function(t,n){var r=this.options.anchorPosition,a=r===Io.BOTTOM_RIGHT||r===Io.TOP_RIGHT,i=r===Io.BOTTOM_LEFT||r===Io.BOTTOM_RIGHT,o=this.measureWidth(t),s=this.measureHeight(),c=a?this.anchor.x-o:this.anchor.x,f=i?this.anchor.y-s:this.anchor.y;if(n){var d=n.width,p=n.height,v=Math.max(Math.min(c,d-o),0),g=Math.max(Math.min(f,p-s),0);return{x:v,y:g}}return{x:c,y:f}},e.prototype.draw=function(t){var n=M2(t),r=zi(n),a=this.options,i=a.backgroundColor,o=a.fontColor,s=a.fontSize,c=a.fontStyle,f=a.padding;r.font=s+"px "+c;var d=this.measureWidth(r),p=this.measureHeight();r.fillStyle=i;var v=this.getUpperLeft(r,n);r.fillRect(v.x,v.y,d,p),r.fillStyle=o,this.text.forEach(function(g,y){var b=f+v.x,x=f+v.y+(y+1)*s;r.fillText(g,b,x)})},e})(),Rue=(function(){function e(t){t===void 0&&(t={});var n=t.boxColor,r=t.lineWidth,a=t.label,i=t.drawLabelOptions;this.boxColor=n||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=a;var o={anchorPosition:Io.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new ZB(Object.assign({},o,i))}return e})(),Due=(function(){function e(t,n){n===void 0&&(n={}),this.box=new ji(t),this.options=new Rue(n)}return e.prototype.draw=function(t){var n=zi(t),r=this.options,a=r.boxColor,i=r.lineWidth,o=this.box,s=o.x,c=o.y,f=o.width,d=o.height;n.strokeStyle=a,n.lineWidth=i,n.strokeRect(s,c,f,d);var p=this.options.label;p&&new Tue([p],{x:s-i/2,y:c},this.options.drawLabelOptions).draw(t)},e})();function QB(e){var t=Gn.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Mue(e){return new Promise(function(t,n){if(e instanceof Gn.getEnv().Canvas||QB(e))return t();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),t(i))}function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),n(i))}e.addEventListener("load",r),e.addEventListener("error",a)})}function k2(e){var t=Gn.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new Du(e.naturalWidth,e.naturalHeight):e instanceof r?new Du(e.videoWidth,e.videoHeight):new Du(e.width,e.height)}function hm(e){var t=e.width,n=e.height,r=Gn.getEnv().createCanvasElement,a=r();return a.width=t,a.height=n,a}function N2(e,t){var n=Gn.getEnv().ImageData;if(!(e instanceof n)&&!QB(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=k2(e),a=r.width,i=r.height,o=hm({width:a,height:i});return e instanceof n?zi(o).putImageData(e,0,0):zi(o).drawImage(e,0,0,a,i),o}function kue(e,t){return ke(this,void 0,void 0,function(){var n,r,a,i,o,s;return Ne(this,function(c){switch(c.label){case 0:return n=Gn.getEnv().createCanvasElement(),r=e.shape.slice(Fo(e)?1:0),a=r[0],i=r[1],o=r[2],s=Ee(function(){return e.as3D(a,i,o).toInt()}),[4,O2.toPixels(s,n)];case 1:return c.sent(),s.dispose(),[2,n]}})})}function qM(e){var t=Gn.getEnv(),n=t.Image,r=t.Canvas,a=t.Video;return e instanceof n||e instanceof r||e instanceof a}function Nue(e,t,n){n===void 0&&(n=!1);var r=Gn.getEnv(),a=r.Image,i=r.Canvas;if(!(e instanceof a||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=k2(e),s=t/Math.max(o.height,o.width),c=s*o.width,f=s*o.height,d=hm({width:t,height:t}),p=e instanceof i?e:N2(e),v=Math.abs(c-f)/2,g=n&&c<f?v:0,y=n&&f<c?v:0;return zi(d).drawImage(p,g,y,c,f),d}var cv=(function(){function e(t,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=n,this._batchSize=t.length,t.forEach(function(a,i){if(fm(a)){r._imageTensors[i]=a,r._inputDimensions[i]=a.shape;return}if(Fo(a)){var o=a.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[i]=a,r._inputDimensions[i]=a.shape.slice(1);return}var s=a instanceof Gn.getEnv().Canvas?a:N2(a);r._canvases[i]=s,r._inputDimensions[i]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return pf(this.batchSize,0,1).map(function(n,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(t),r=this.getInputHeight(t);return gue({width:n,height:r},this.inputSize)},e.prototype.toBatchTensor=function(t,n){var r=this;return n===void 0&&(n=!0),this._inputSize=t,Ee(function(){var a=pf(r.batchSize,0,1).map(function(o){var s=r.getInput(o);if(s instanceof Dt){var c=Fo(s)?s:s.expandDims();return c=xue(c,n),(c.shape[1]!==t||c.shape[2]!==t)&&(c=w2.resizeBilinear(c,[t,t])),c.as3D(t,t,3)}if(s instanceof Gn.getEnv().Canvas)return O2.fromPixels(Nue(s,t,n));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),i=Pr(a.map(function(o){return o.toFloat()})).as4D(r.batchSize,t,t,3);return i})},e})();function xn(e){return ke(this,void 0,void 0,function(){var t,n,r;return Ne(this,function(a){switch(a.label){case 0:if(e instanceof cv)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return n=function(i){return Array.isArray(e)?" at input index "+i+":":""},r=t.map(M2),r.forEach(function(i,o){if(!qM(i)&&!fm(i)&&!Fo(i))throw typeof t[o]=="string"?new Error("toNetInput -"+n(o)+" string passed, but could not resolve HTMLElement for element id "+t[o]):new Error("toNetInput -"+n(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Fo(i)){var s=i.shape[0];if(s!==1)throw new Error("toNetInput -"+n(o)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return qM(i)&&Mue(i)}))];case 1:return a.sent(),[2,new cv(r,Array.isArray(e))]}})})}function I2(e,t){return ke(this,void 0,void 0,function(){var n,r,a,i,o,s,c;return Ne(this,function(f){switch(f.label){case 0:return n=Gn.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,xn(e)];case 1:if(a=f.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=a.getInput(0),i instanceof n?(o=i,[3,4]):[3,2];case 2:return[4,kue(i)];case 3:o=f.sent(),f.label=4;case 4:r=o,f.label=5;case 5:return s=zi(r),c=t.map(function(d){return d instanceof Oa?d.forSize(r.width,r.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(r.width,r.height)}),[2,c.map(function(d){var p=d.x,v=d.y,g=d.width,y=d.height,b=hm({width:g,height:y});return zi(b).putImageData(s.getImageData(p,v,g,y),0,0),b})]}})})}function P2(e,t){return ke(this,void 0,void 0,function(){return Ne(this,function(n){if(!fm(e)&&!Fo(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Fo(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Ee(function(){var r=e.shape.slice(Fo(e)?1:0),a=r[0],i=r[1],o=r[2],s=t.map(function(f){return f instanceof Oa?f.forSize(i,a).box:f}).map(function(f){return f.clipAtImageBorders(i,a)}),c=s.map(function(f){var d=f.x,p=f.y,v=f.width,g=f.height;return CB(e.as3D(a,i,o),[p,d,0],[g,v,o])});return c})]})})}function Iue(e,t){return ke(this,void 0,void 0,function(){var n,r;return Ne(this,function(a){switch(a.label){case 0:return n=Gn.getEnv().fetch,[4,n(e,t)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Pue(e){return ke(this,void 0,void 0,function(){return Ne(this,function(t){switch(t.label){case 0:return[4,Iue(e)];case 1:return[2,t.sent().json()]}})})}function JB(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var a=e.split("/").filter(function(s){return s}),i=e.endsWith(".json")?a[a.length-1]:n,o=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return o=e.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function Bue(e,t){return ke(this,void 0,void 0,function(){var n,r,a,i;return Ne(this,function(o){switch(o.label){case 0:return n=JB(e,t),r=n.manifestUri,a=n.modelBaseUri,[4,Pue(r)];case 1:return i=o.sent(),[2,WB.loadWeights(i,a)]}})})}function Lue(e,t,n){n===void 0&&(n=!1);var r=n?k2(t):t,a=r.width,i=r.height;return e.width=a,e.height=i,{width:a,height:i}}var Qi=(function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var n=this.traversePropertyPath(t),r=n.obj,a=n.objProp;return r[a]},e.prototype.reassignParamFromPath=function(t,n){var r=this.traversePropertyPath(t),a=r.obj,i=r.objProp;a[i].dispose(),a[i]=n},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof vl})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof vl)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(n){var r=n.path,a=n.tensor;t.reassignParamFromPath(r,a.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(n){var r=n.path,a=n.tensor,i=Pn(a.dataSync());a.dispose(),t.reassignParamFromPath(r,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(n){if(t&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var n=t.tensor;return Array.from(n.dataSync())}).reduce(function(t,n){return t.concat(n)}))},e.prototype.load=function(t){return ke(this,void 0,void 0,function(){return Ne(this,function(n){switch(n.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return n.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return ke(this,void 0,void 0,function(){var n;return Ne(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,Bue(t,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},e.prototype.loadFromDisk=function(t){return ke(this,void 0,void 0,function(){var n,r,a,i,o,s,c,f,d,p;return Ne(this,function(v){switch(v.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=Gn.getEnv().readFile,r=JB(t,this.getDefaultModelName()),a=r.manifestUri,i=r.modelBaseUri,o=function(g){return Promise.all(g.map(function(y){return n(y).then(function(b){return b.buffer})}))},s=WB.weightsLoaderFactory(o),d=(f=JSON).parse,[4,n(a)];case 1:return c=d.apply(f,[v.sent().toString()]),[4,s(c,i)];case 2:return p=v.sent(),this.loadFromWeightMap(p),[2]}})})},e.prototype.loadFromWeightMap=function(t){var n=this.extractParamsFromWeigthMap(t),r=n.paramMappings,a=n.params;this._paramMappings=r,this._params=a},e.prototype.extractWeights=function(t){var n=this.extractParams(t),r=n.paramMappings,a=n.params;this._paramMappings=r,this._params=a},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=t.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+t);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),r=n.obj,a=n.objProp;if(!r||!a||!(r[a]instanceof Dt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:a}},e})();function Nr(e,t,n){return Ee(function(){var r=m2(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Ye(r,t.bias),r})}function Vb(e,t,n){return n===void 0&&(n=!1),Ee(function(){var r=Mt(n?Ye(sa(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Nr(e,t.conv0,[2,2])),a=Nr(r,t.conv1,[1,1]),i=Mt(Ye(r,a)),o=Nr(i,t.conv2,[1,1]);return Mt(Ye(r,Ye(a,o)))})}function Uh(e,t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),Ee(function(){var a=Mt(n?Ye(sa(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Nr(e,t.conv0,r?[2,2]:[1,1])),i=Nr(a,t.conv1,[1,1]),o=Mt(Ye(a,i)),s=Nr(o,t.conv2,[1,1]),c=Mt(Ye(a,Ye(i,s))),f=Nr(c,t.conv3,[1,1]);return Mt(Ye(a,Ye(i,Ye(s,f))))})}function xa(e,t,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),Ee(function(){var a=Ye(sa(e,t.filters,[1,1],n),t.bias);return r?Mt(a):a})}function Ji(e,t){Object.keys(e).forEach(function(n){t.some(function(r){return r.originalPath===n})||e[n].dispose()})}function pm(e,t){return function(n,r,a,i){var o=sr(e(n*r*a*a),[a,a,n,r]),s=Zt(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:s}}}function B2(e,t){return function(n,r,a){var i=Bo(e(n*r),[n,r]),o=Zt(e(r));return t.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:o}}}var eL=(function(){function e(t,n,r){this.depthwise_filter=t,this.pointwise_filter=n,this.bias=r}return e})();function L2(e,t){return function(n,r,a){var i=sr(e(9*n),[3,3,n,1]),o=sr(e(n*r),[1,1,n,r]),s=Zt(e(r));return t.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new eL(i,o,s)}}function F2(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),a=e(t+"/bias",1);return new eL(n,r,a)}}function Xo(e,t){return function(n,r,a){var i=e[n];if(!cm(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:a||n}),i}}function eo(e){var t=e;function n(a){var i=t.slice(0,a);return t=t.slice(a),i}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function tL(e,t){var n=pm(e,t),r=L2(e,t);function a(o,s,c,f){f===void 0&&(f=!1);var d=f?n(o,s,3,c+"/conv0"):r(o,s,c+"/conv0"),p=r(s,s,c+"/conv1"),v=r(s,s,c+"/conv2");return{conv0:d,conv1:p,conv2:v}}function i(o,s,c,f){f===void 0&&(f=!1);var d=a(o,s,c,f),p=d.conv0,v=d.conv1,g=d.conv2,y=r(s,s,c+"/conv3");return{conv0:p,conv1:v,conv2:g,conv3:y}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function Fue(e){var t=[],n=eo(e),r=n.extractWeights,a=n.getRemainingWeights,i=tL(r,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),c=i(64,128,"dense2"),f=i(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:c,dense3:f}}}function nL(e){return function(t){var n=e(t+"/filters",4),r=e(t+"/bias",1);return{filters:n,bias:r}}}function rL(e,t){var n=Xo(e,t),r=nL(n),a=F2(n);function i(s,c){c===void 0&&(c=!1);var f=c?r(s+"/conv0"):a(s+"/conv0"),d=a(s+"/conv1"),p=a(s+"/conv2");return{conv0:f,conv1:d,conv2:p}}function o(s,c){c===void 0&&(c=!1);var f=c?r(s+"/conv0"):a(s+"/conv0"),d=a(s+"/conv1"),p=a(s+"/conv2"),v=a(s+"/conv3");return{conv0:f,conv1:d,conv2:p,conv3:v}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function jue(e){var t=[],n=rL(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Ji(e,t),{params:r,paramMappings:t}}var aL=(function(e){We(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Ee(function(){var a=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Xf(a,i).div(we(255)),s=Uh(o,r.dense0,!0);return s=Uh(s,r.dense1),s=Uh(s,r.dense2),s=Uh(s,r.dense3),s=$f(s,[7,7],[2,2],"valid"),s})},t.prototype.forward=function(n){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(n){return jue(n)},t.prototype.extractParams=function(n){return Fue(n)},t})(Qi);function Ua(e,t){return Ee(function(){return Ye(um(e,t.weights),t.bias)})}function zue(e,t,n){var r=[],a=eo(e),i=a.extractWeights,o=a.getRemainingWeights,s=B2(i,r),c=s(t,n,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:c}}}function Uue(e){var t=[],n=Xo(e,t);function r(i){var o=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:o,bias:s}}var a={fc:r("fc")};return Ji(e,t),{params:a,paramMappings:t}}function iL(e){var t={},n={};return Object.keys(e).forEach(function(r){var a=r.startsWith("fc")?n:t;a[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var oL=(function(e){We(t,e);function t(n,r){var a=e.call(this,n)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Ee(function(){var i=n instanceof cv?r.faceFeatureExtractor.forwardInput(n):n;return Ua(i.as2D(i.shape[0],-1),a.fc)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return zue(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(n){var r=iL(n),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),Uue(i)},t.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),i=a*r+a,o=n.slice(0,n.length-i),s=n.slice(n.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(s)},t})(Qi),VM=["neutral","happy","sad","angry","fearful","disgusted","surprised"],Wue=(function(){function e(t){var n=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);VM.forEach(function(r,a){n[r]=t[a]})}return e.prototype.asSortedArray=function(){var t=this;return VM.map(function(n){return{expression:n,probability:t[n]}}).sort(function(n,r){return r.probability-n.probability})},e})(),Hue=(function(e){We(t,e);function t(n){return n===void 0&&(n=new aL),e.call(this,"FaceExpressionNet",n)||this}return t.prototype.forwardInput=function(n){var r=this;return Ee(function(){return Yi(r.runNet(n))})},t.prototype.forward=function(n){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.predictExpressions=function(n){return ke(this,void 0,void 0,function(){var r,a,i,o,s=this;return Ne(this,function(c){switch(c.label){case 0:return[4,xn(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),[4,Promise.all(rn(a).map(function(f){return ke(s,void 0,void 0,function(){var d;return Ne(this,function(p){switch(p.label){case 0:return[4,f.data()];case 1:return d=p.sent(),f.dispose(),[2,d]}})})}))];case 3:return i=c.sent(),a.dispose(),o=i.map(function(f){return new Wue(f)}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t})(oL);function uL(e,t){var n={expressions:t};return Object.assign({},e,n)}function sL(e){return VB(e)&&e.landmarks instanceof mf&&e.unshiftedLandmarks instanceof mf&&e.alignedRect instanceof Oa}function vm(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),a=r.align(),i=e.detection.imageDims,o=new Oa(e.detection.score,a.rescale(i.reverse()),i),s={landmarks:r,unshiftedLandmarks:t,alignedRect:o};return Object.assign({},e,s)}function que(e,t){var n=pm(e,t),r=L2(e,t);function a(o,s,c){var f=r(o,s,c+"/separable_conv0"),d=r(s,s,c+"/separable_conv1"),p=n(o,s,1,c+"/expansion_conv");return{separable_conv0:f,separable_conv1:d,expansion_conv:p}}function i(o,s){var c=r(o,o,s+"/separable_conv0"),f=r(o,o,s+"/separable_conv1"),d=r(o,o,s+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:d}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:i}}function Vue(e,t){var n=[],r=eo(e),a=r.extractWeights,i=r.getRemainingWeights,o=que(a,n),s=o.extractConvParams,c=o.extractSeparableConvParams,f=o.extractReductionBlockParams,d=o.extractMainBlockParams,p=s(3,32,3,"entry_flow/conv_in"),v=f(32,64,"entry_flow/reduction_block_0"),g=f(64,128,"entry_flow/reduction_block_1"),y={conv_in:p,reduction_block_0:v,reduction_block_1:g},b={};pf(t,0,1).forEach(function(C){b["main_block_"+C]=d(128,"middle_flow/main_block_"+C)});var x=f(128,256,"exit_flow/reduction_block"),S=c(256,512,"exit_flow/separable_conv"),_={reduction_block:x,separable_conv:S};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:y,middle_flow:b,exit_flow:_}}}function Gue(e,t){var n=Xo(e,t),r=nL(n),a=F2(n);function i(s){var c=a(s+"/separable_conv0"),f=a(s+"/separable_conv1"),d=r(s+"/expansion_conv");return{separable_conv0:c,separable_conv1:f,expansion_conv:d}}function o(s){var c=a(s+"/separable_conv0"),f=a(s+"/separable_conv1"),d=a(s+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:d}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:o}}function $ue(e,t){var n=[],r=Gue(e,n),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,c=a("entry_flow/conv_in"),f=o("entry_flow/reduction_block_0"),d=o("entry_flow/reduction_block_1"),p={conv_in:c,reduction_block_0:f,reduction_block_1:d},v={};pf(t,0,1).forEach(function(x){v["main_block_"+x]=s("middle_flow/main_block_"+x)});var g=o("exit_flow/reduction_block"),y=i("exit_flow/separable_conv"),b={reduction_block:g,separable_conv:y};return Ji(e,n),{params:{entry_flow:p,middle_flow:v,exit_flow:b},paramMappings:n}}function lL(e,t,n){return Ye(sa(e,t.filters,n,"same"),t.bias)}function Gb(e,t,n){n===void 0&&(n=!0);var r=n?Mt(e):e;return r=Nr(r,t.separable_conv0,[1,1]),r=Nr(Mt(r),t.separable_conv1,[1,1]),r=mn(r,[3,3],[2,2],"same"),r=Ye(r,lL(e,t.expansion_conv,[2,2])),r}function Kue(e,t){var n=Nr(Mt(e),t.separable_conv0,[1,1]);return n=Nr(Mt(n),t.separable_conv1,[1,1]),n=Nr(Mt(n),t.separable_conv2,[1,1]),n=Ye(n,e),n}var Xue=(function(e){We(t,e);function t(n){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return t.prototype.forwardInput=function(n){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return Ee(function(){var i=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=Xf(i,o).div(we(256)),c=Mt(lL(s,a.entry_flow.conv_in,[2,2]));return c=Gb(c,a.entry_flow.reduction_block_0,!1),c=Gb(c,a.entry_flow.reduction_block_1),pf(r._numMainBlocks,0,1).forEach(function(f){c=Kue(c,a.middle_flow["main_block_"+f])}),c=Gb(c,a.exit_flow.reduction_block),c=Mt(Nr(c,a.exit_flow.separable_conv,[1,1])),c})},t.prototype.forward=function(n){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(n){return $ue(n,this._numMainBlocks)},t.prototype.extractParams=function(n){return Vue(n,this._numMainBlocks)},t})(Qi);function Yue(e){var t=[],n=eo(e),r=n.extractWeights,a=n.getRemainingWeights,i=B2(r,t),o=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:{age:o,gender:s}}}}function Zue(e){var t=[],n=Xo(e,t);function r(i){var o=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:o,bias:s}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Ji(e,t),{params:a,paramMappings:t}}var fv;(function(e){e.FEMALE="female",e.MALE="male"})(fv||(fv={}));var Que=(function(e){We(t,e);function t(n){n===void 0&&(n=new Xue(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Ee(function(){var i=n instanceof cv?r.faceFeatureExtractor.forwardInput(n):n,o=$f(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),s=Ua(o,a.fc.age).as1D(),c=Ua(o,a.fc.gender);return{age:s,gender:c}})},t.prototype.forwardInput=function(n){var r=this;return Ee(function(){var a=r.runNet(n),i=a.age,o=a.gender;return{age:i,gender:Yi(o)}})},t.prototype.forward=function(n){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.predictAgeAndGender=function(n){return ke(this,void 0,void 0,function(){var r,a,i,o,s,c,f=this;return Ne(this,function(d){switch(d.label){case 0:return[4,xn(n)];case 1:return r=d.sent(),[4,this.forwardInput(r)];case 2:return a=d.sent(),i=rn(a.age),o=rn(a.gender),s=i.map(function(p,v){return{ageTensor:p,genderTensor:o[v]}}),[4,Promise.all(s.map(function(p){var v=p.ageTensor,g=p.genderTensor;return ke(f,void 0,void 0,function(){var y,b,x,S,_;return Ne(this,function(C){switch(C.label){case 0:return[4,v.data()];case 1:return y=C.sent()[0],[4,g.data()];case 2:return b=C.sent()[0],x=b>.5,S=x?fv.MALE:fv.FEMALE,_=x?b:1-b,v.dispose(),g.dispose(),[2,{age:y,gender:S,genderProbability:_}]}})})}))];case 3:return c=d.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?c:c[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return Yue(n)},t.prototype.extractParamsFromWeigthMap=function(n){var r=iL(n),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),Zue(i)},t.prototype.extractParams=function(n){var r=1539,a=n.slice(0,n.length-r),i=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},t})(Qi),cL=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(n,r,a){var i=a.map(function(s){var c=s.width,f=s.height,d=r/Math.max(f,c);return{width:c*d,height:f*d}}),o=i.length;return Ee(function(){var s=function(v,g){return Pr([Va([68],v),Va([68],g)],1).as2D(1,136).as1D()},c=function(v,g){var y=i[v],b=y.width,x=y.height;return g(b,x)?Math.abs(b-x)/2:0},f=function(v){return c(v,function(g,y){return g<y})},d=function(v){return c(v,function(g,y){return y<g})},p=n.mul(Va([o,136],r)).sub(Pr(Array.from(Array(o),function(v,g){return s(f(g),d(g))}))).div(Pr(Array.from(Array(o),function(v,g){return s(i[g].width,i[g].height)})));return p})},t.prototype.forwardInput=function(n){var r=this;return Ee(function(){var a=r.runNet(n);return r.postProcess(a,n.inputSize,n.inputDimensions.map(function(i){var o=i[0],s=i[1];return{height:o,width:s}}))})},t.prototype.forward=function(n){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.detectLandmarks=function(n){return ke(this,void 0,void 0,function(){var r,a,i,o=this;return Ne(this,function(s){switch(s.label){case 0:return[4,xn(n)];case 1:return r=s.sent(),a=Ee(function(){return rn(o.forwardInput(r))}),[4,Promise.all(a.map(function(c,f){return ke(o,void 0,void 0,function(){var d,p,v,g,y;return Ne(this,function(b){switch(b.label){case 0:return v=(p=Array).from,[4,c.data()];case 1:return d=v.apply(p,[b.sent()]),g=d.filter(function(x,S){return jM(S)}),y=d.filter(function(x,S){return!jM(S)}),[2,new Cue(Array(68).fill(0).map(function(x,S){return new st(g[S],y[S])}),{height:r.getInputHeight(f),width:r.getInputWidth(f)})]}})})}))];case 2:return i=s.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t})(oL),fL=(function(e){We(t,e);function t(n){return n===void 0&&(n=new aL),e.call(this,"FaceLandmark68Net",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t})(cL);function Jue(e){var t=[],n=rL(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Ji(e,t),{params:r,paramMappings:t}}function ese(e){var t=[],n=eo(e),r=n.extractWeights,a=n.getRemainingWeights,i=tL(r,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),c=i(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:c}}}var tse=(function(e){We(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Ee(function(){var a=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Xf(a,i).div(we(255)),s=Vb(o,r.dense0,!0);return s=Vb(s,r.dense1),s=Vb(s,r.dense2),s=$f(s,[14,14],[2,2],"valid"),s})},t.prototype.forward=function(n){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(n){return Jue(n)},t.prototype.extractParams=function(n){return ese(n)},t})(Qi),nse=(function(e){We(t,e);function t(n){return n===void 0&&(n=new tse),e.call(this,"FaceLandmark68TinyNet",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t})(cL);(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(fL);function rse(e,t){return Ye(Vn(e,t.weights),t.biases)}function j2(e,t,n,r,a){a===void 0&&(a="same");var i=t.conv,o=i.filters,s=i.bias,c=sa(e,o,n,a);return c=Ye(c,s),c=rse(c,t.scale),r?Mt(c):c}function ase(e,t){return j2(e,t,[1,1],!0)}function dL(e,t){return j2(e,t,[1,1],!1)}function hL(e,t){return j2(e,t,[2,2],!0,"valid")}function ise(e,t){function n(s,c,f){var d=e(s),p=d.length/(c*f*f);if(vue(p))throw new Error("depth has to be an integer: "+p+", weights.length: "+d.length+", numFilters: "+c+", filterSize: "+f);return Ee(function(){return Wo(sr(d,[c,p,f,f]),[2,3,1,0])})}function r(s,c,f,d){var p=n(s,c,f),v=Zt(e(c));return t.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:p,bias:v}}function a(s,c){var f=Zt(e(s)),d=Zt(e(s));return t.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:f,biases:d}}function i(s,c,f,d){var p=r(s,c,f,d+"/conv"),v=a(c,d+"/scale");return{conv:p,scale:v}}function o(s,c,f,d,p){p===void 0&&(p=!1);var v=i((p?.5:1)*s,c,f,d+"/conv1"),g=i(s,c,f,d+"/conv2");return{conv1:v,conv2:g}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function ose(e){var t=eo(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=ise(n,a),o=i.extractConvLayerParams,s=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),f=s(9216,32,3,"conv32_1"),d=s(9216,32,3,"conv32_2"),p=s(9216,32,3,"conv32_3"),v=s(36864,64,3,"conv64_down",!0),g=s(36864,64,3,"conv64_1"),y=s(36864,64,3,"conv64_2"),b=s(36864,64,3,"conv64_3"),x=s(147456,128,3,"conv128_down",!0),S=s(147456,128,3,"conv128_1"),_=s(147456,128,3,"conv128_2"),C=s(589824,256,3,"conv256_down",!0),A=s(589824,256,3,"conv256_1"),O=s(589824,256,3,"conv256_2"),R=s(589824,256,3,"conv256_down_out"),M=Ee(function(){return Wo(Bo(n(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var k={conv32_down:c,conv32_1:f,conv32_2:d,conv32_3:p,conv64_down:v,conv64_1:g,conv64_2:y,conv64_3:b,conv128_down:x,conv128_1:S,conv128_2:_,conv256_down:C,conv256_1:A,conv256_2:O,conv256_down_out:R,fc:M};return{params:k,paramMappings:a}}function use(e,t){var n=Xo(e,t);function r(o){var s=n(o+"/scale/weights",1),c=n(o+"/scale/biases",1);return{weights:s,biases:c}}function a(o){var s=n(o+"/conv/filters",4),c=n(o+"/conv/bias",1),f=r(o);return{conv:{filters:s,bias:c},scale:f}}function i(o){return{conv1:a(o+"/conv1"),conv2:a(o+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function sse(e){var t=[],n=use(e,t),r=n.extractConvLayerParams,a=n.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),s=a("conv32_2"),c=a("conv32_3"),f=a("conv64_down"),d=a("conv64_1"),p=a("conv64_2"),v=a("conv64_3"),g=a("conv128_down"),y=a("conv128_1"),b=a("conv128_2"),x=a("conv256_down"),S=a("conv256_1"),_=a("conv256_2"),C=a("conv256_down_out"),A=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!pue(A))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+A);var O={conv32_down:i,conv32_1:o,conv32_2:s,conv32_3:c,conv64_down:f,conv64_1:d,conv64_2:p,conv64_3:v,conv128_down:g,conv128_1:y,conv128_2:b,conv256_down:x,conv256_1:S,conv256_2:_,conv256_down_out:C,fc:A};return Ji(e,t),{params:O,paramMappings:t}}function Pa(e,t){var n=ase(e,t.conv1);return n=dL(n,t.conv2),n=Ye(n,e),n=Mt(n),n}function Wh(e,t){var n=hL(e,t.conv1);n=dL(n,t.conv2);var r=$f(e,2,2,"valid"),a=_t(r.shape),i=r.shape[3]!==n.shape[3],o=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(o){var s=qc(n.shape);s[1]=1;var c=_t(s);n=nn([n,c],1);var f=qc(n.shape);f[2]=1;var d=_t(f);n=nn([n,d],2)}return r=i?nn([r,a],3):r,n=Ye(r,n),n=Mt(n),n}var lse=(function(e){We(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Ee(function(){var a=n.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=Xf(a,i).div(we(256)),s=hL(o,r.conv32_down);s=mn(s,3,2,"valid"),s=Pa(s,r.conv32_1),s=Pa(s,r.conv32_2),s=Pa(s,r.conv32_3),s=Wh(s,r.conv64_down),s=Pa(s,r.conv64_1),s=Pa(s,r.conv64_2),s=Pa(s,r.conv64_3),s=Wh(s,r.conv128_down),s=Pa(s,r.conv128_1),s=Pa(s,r.conv128_2),s=Wh(s,r.conv256_down),s=Pa(s,r.conv256_1),s=Pa(s,r.conv256_2),s=Wh(s,r.conv256_down_out);var c=s.mean([1,2]),f=um(c,r.fc);return f})},t.prototype.forward=function(n){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.computeFaceDescriptor=function(n){return ke(this,void 0,void 0,function(){var r,a,i,o=this;return Ne(this,function(s){switch(s.label){case 0:return[4,xn(n)];case 1:return r=s.sent(),a=Ee(function(){return rn(o.forwardInput(r))}),[4,Promise.all(a.map(function(c){return c.data()}))];case 2:return i=s.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(n){return sse(n)},t.prototype.extractParams=function(n){return ose(n)},t})(Qi);function pL(e,t){var n={descriptor:t};return Object.assign({},e,n)}function vL(e,t){var n={age:t};return Object.assign({},e,n)}function mL(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var gL=(function(){function e(t){var n=t===void 0?{}:t,r=n.minFaceSize,a=n.scaleFactor,i=n.maxNumScales,o=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e})();function cse(e,t){function n(c,f){var d=sr(e(9*c),[3,3,c,1]),p=Zt(e(c)),v=Zt(e(c)),g=Zt(e(c)),y=Zt(e(c));return t.push({paramPath:f+"/filters"},{paramPath:f+"/batch_norm_scale"},{paramPath:f+"/batch_norm_offset"},{paramPath:f+"/batch_norm_mean"},{paramPath:f+"/batch_norm_variance"}),{filters:d,batch_norm_scale:p,batch_norm_offset:v,batch_norm_mean:g,batch_norm_variance:y}}function r(c,f,d,p,v){var g=sr(e(c*f*d*d),[d,d,c,f]),y=Zt(e(f));return t.push({paramPath:p+"/filters"},{paramPath:p+"/"+(v?"batch_norm_offset":"bias")}),{filters:g,bias:y}}function a(c,f,d,p){var v=r(c,f,d,p,!0),g=v.filters,y=v.bias;return{filters:g,batch_norm_offset:y}}function i(c,f,d){var p=n(c,d+"/depthwise_conv"),v=a(c,f,1,d+"/pointwise_conv");return{depthwise_conv:p,pointwise_conv:v}}function o(){var c=a(3,32,3,"mobilenetv1/conv_0"),f=i(32,64,"mobilenetv1/conv_1"),d=i(64,128,"mobilenetv1/conv_2"),p=i(128,128,"mobilenetv1/conv_3"),v=i(128,256,"mobilenetv1/conv_4"),g=i(256,256,"mobilenetv1/conv_5"),y=i(256,512,"mobilenetv1/conv_6"),b=i(512,512,"mobilenetv1/conv_7"),x=i(512,512,"mobilenetv1/conv_8"),S=i(512,512,"mobilenetv1/conv_9"),_=i(512,512,"mobilenetv1/conv_10"),C=i(512,512,"mobilenetv1/conv_11"),A=i(512,1024,"mobilenetv1/conv_12"),O=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:f,conv_2:d,conv_3:p,conv_4:v,conv_5:g,conv_6:y,conv_7:b,conv_8:x,conv_9:S,conv_10:_,conv_11:C,conv_12:A,conv_13:O}}function s(){var c=a(1024,256,1,"prediction_layer/conv_0"),f=a(256,512,3,"prediction_layer/conv_1"),d=a(512,128,1,"prediction_layer/conv_2"),p=a(128,256,3,"prediction_layer/conv_3"),v=a(256,128,1,"prediction_layer/conv_4"),g=a(128,256,3,"prediction_layer/conv_5"),y=a(256,64,1,"prediction_layer/conv_6"),b=a(64,128,3,"prediction_layer/conv_7"),x=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),S=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),_=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),C=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),A=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),O=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),R=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),M=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),k=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),I=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),P=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),L=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),F={box_encoding_predictor:x,class_predictor:S},Y={box_encoding_predictor:_,class_predictor:C},Z={box_encoding_predictor:A,class_predictor:O},J={box_encoding_predictor:R,class_predictor:M},U={box_encoding_predictor:k,class_predictor:I},H={box_encoding_predictor:P,class_predictor:L};return{conv_0:c,conv_1:f,conv_2:d,conv_3:p,conv_4:v,conv_5:g,conv_6:y,conv_7:b,box_predictor_0:F,box_predictor_1:Y,box_predictor_2:Z,box_predictor_3:J,box_predictor_4:U,box_predictor_5:H}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:s}}function fse(e){var t=[],n=eo(e),r=n.extractWeights,a=n.getRemainingWeights,i=cse(r,t),o=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,c=o(),f=s(),d=t2(r(5118*4),[1,5118,4]),p={extra_dim:d};if(t.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:f,output_layer:p},paramMappings:t}}function dse(e,t){var n=Xo(e,t);function r(f,d,p){var v=n(f+"/Conv2d_"+d+"_pointwise/weights",4,p+"/filters"),g=n(f+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,p+"/batch_norm_offset");return{filters:v,batch_norm_offset:g}}function a(f){var d="mobilenetv1/conv_"+f,p="MobilenetV1/Conv2d_"+f+"_depthwise",v=d+"/depthwise_conv",g=d+"/pointwise_conv",y=n(p+"/depthwise_weights",4,v+"/filters"),b=n(p+"/BatchNorm/gamma",1,v+"/batch_norm_scale"),x=n(p+"/BatchNorm/beta",1,v+"/batch_norm_offset"),S=n(p+"/BatchNorm/moving_mean",1,v+"/batch_norm_mean"),_=n(p+"/BatchNorm/moving_variance",1,v+"/batch_norm_variance");return{depthwise_conv:{filters:y,batch_norm_scale:b,batch_norm_offset:x,batch_norm_mean:S,batch_norm_variance:_},pointwise_conv:r("MobilenetV1",f,g)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function o(f,d){var p=n(f+"/weights",4,d+"/filters"),v=n(f+"/biases",1,d+"/bias");return{filters:p,bias:v}}function s(f){var d=o("Prediction/BoxPredictor_"+f+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+f+"/box_encoding_predictor"),p=o("Prediction/BoxPredictor_"+f+"/ClassPredictor","prediction_layer/box_predictor_"+f+"/class_predictor");return{box_encoding_predictor:d,class_predictor:p}}function c(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function hse(e){var t=[],n=dse(e,t),r=n.extractMobilenetV1Params,a=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!fm(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return Ji(e,t),{params:o,paramMappings:t}}function Ba(e,t,n){return Ee(function(){var r=sa(e,t.filters,n,"same");return r=Ye(r,t.batch_norm_offset),d2(r,0,6)})}var pse=.0010000000474974513;function vse(e,t,n){return Ee(function(){var r=om(e,t.filters,n,"same");return r=cB(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,pse),d2(r,0,6)})}function mse(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function gse(e,t){return Ee(function(){var n=null,r=Ba(e,t.conv_0,[2,2]),a=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(a.forEach(function(i,o){var s=o+1,c=mse(s);r=vse(r,i.depthwise_conv,c),r=Ba(r,i.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function yse(e,t,n,r,a){var i=e.shape[0],o=Math.min(n,i),s=t.map(function(d,p){return{score:d,boxIndex:p}}).filter(function(d){return d.score>a}).sort(function(d,p){return p.score-d.score}),c=function(d){return d<=r?1:0},f=[];return s.forEach(function(d){if(!(f.length>=o)){for(var p=d.score,v=f.length-1;v>=0;--v){var g=bse(e,d.boxIndex,f[v]);if(g!==0&&(d.score*=c(g),d.score<=a))break}p===d.score&&f.push(d.boxIndex)}}),f}function bse(e,t,n){var r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),o=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),c=Math.min(r[n][0],r[n][2]),f=Math.min(r[n][1],r[n][3]),d=Math.max(r[n][0],r[n][2]),p=Math.max(r[n][1],r[n][3]),v=(o-a)*(s-i),g=(d-c)*(p-f);if(v<=0||g<=0)return 0;var y=Math.max(a,c),b=Math.max(i,f),x=Math.min(o,d),S=Math.min(s,p),_=Math.max(x-y,0)*Math.max(S-b,0);return _/(v+g-_)}function xse(e){var t=rn(Wo(e,[1,0])),n=[on(t[2],t[0]),on(t[3],t[1])],r=[Ye(t[0],pa(n[0],we(2))),Ye(t[1],pa(n[1],we(2)))];return{sizes:n,centers:r}}function wse(e,t){var n=xse(e),r=n.sizes,a=n.centers,i=rn(Wo(t,[1,0])),o=pa(Vn(sx(pa(i[2],we(5))),r[0]),we(2)),s=Ye(Vn(pa(i[0],we(10)),r[0]),a[0]),c=pa(Vn(sx(pa(i[3],we(5))),r[1]),we(2)),f=Ye(Vn(pa(i[1],we(10)),r[1]),a[1]);return Wo(Pr([on(s,o),on(f,c),Ye(s,o),Ye(f,c)]),[1,0])}function Sse(e,t,n){return Ee(function(){var r=e.shape[0],a=wse(ya(Js(n.extra_dim,[r,1,1]),[-1,4]),ya(e,[-1,4]));a=ya(a,[r,a.shape[0]/r,4]);var i=oB(Xa(t,[0,0,1],[-1,-1,-1])),o=Xa(i,[0,0,0],[-1,-1,1]);o=ya(o,[r,o.shape[1]]);var s=rn(a),c=rn(o);return{boxes:s,scores:c}})}function Us(e,t){return Ee(function(){var n=e.shape[0],r=ya(xa(e,t.box_encoding_predictor),[n,-1,1,4]),a=ya(xa(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function Ese(e,t,n){return Ee(function(){var r=Ba(e,n.conv_0,[1,1]),a=Ba(r,n.conv_1,[2,2]),i=Ba(a,n.conv_2,[1,1]),o=Ba(i,n.conv_3,[2,2]),s=Ba(o,n.conv_4,[1,1]),c=Ba(s,n.conv_5,[2,2]),f=Ba(c,n.conv_6,[1,1]),d=Ba(f,n.conv_7,[2,2]),p=Us(t,n.box_predictor_0),v=Us(e,n.box_predictor_1),g=Us(a,n.box_predictor_2),y=Us(o,n.box_predictor_3),b=Us(c,n.box_predictor_4),x=Us(d,n.box_predictor_5),S=nn([p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding,y.boxPredictionEncoding,b.boxPredictionEncoding,x.boxPredictionEncoding],1),_=nn([p.classPrediction,v.classPrediction,g.classPrediction,y.classPrediction,b.classPrediction,x.classPrediction],1);return{boxPredictions:S,classPredictions:_}})}var mm=(function(){function e(t){var n=t===void 0?{}:t,r=n.minConfidence,a=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e})(),yL=(function(e){We(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Ee(function(){var a=n.toBatchTensor(512,!1).toFloat(),i=on(Vn(a,we(.007843137718737125)),we(1)),o=gse(i,r.mobilenetv1),s=Ese(o.out,o.conv11,r.prediction_layer),c=s.boxPredictions,f=s.classPredictions;return Sse(c,f,r.output_layer)})},t.prototype.forward=function(n){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),ke(this,void 0,void 0,function(){var a,i,o,s,c,f,d,p,v,g,y,b,x,S,_,C,A,O,R,M,k;return Ne(this,function(I){switch(I.label){case 0:return a=new mm(r),i=a.maxResults,o=a.minConfidence,[4,xn(n)];case 1:for(s=I.sent(),c=this.forwardInput(s),f=c.boxes,d=c.scores,p=f[0],v=d[0],g=1;g<f.length;g++)f[g].dispose(),d[g].dispose();return x=(b=Array).from,[4,v.data()];case 2:return y=x.apply(b,[I.sent()]),S=.5,_=yse(p,y,i,S,o),C=s.getReshapedInputDimensions(0),A=s.inputSize,O=A/C.width,R=A/C.height,M=p.arraySync(),k=_.map(function(P){var L=[Math.max(0,M[P][0]),Math.min(1,M[P][2])].map(function(H){return H*R}),F=L[0],Y=L[1],Z=[Math.max(0,M[P][1]),Math.min(1,M[P][3])].map(function(H){return H*O}),J=Z[0],U=Z[1];return new Oa(y[P],new R2(J,F,U-J,Y-F),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),p.dispose(),v.dispose(),[2,k]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(n){return hse(n)},t.prototype.extractParams=function(n){return fse(n)},t})(Qi);(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(yL);var _se=.4,Cse=[new st(.738768,.874946),new st(2.42204,2.65704),new st(4.30971,7.04493),new st(10.246,4.59428),new st(12.6868,11.8741)],Ase=[new st(1.603231,2.094468),new st(6.041143,7.080126),new st(2.882459,3.518061),new st(4.266906,5.178857),new st(9.041765,10.66308)],Ose=[117.001,114.697,97.404],Tse="tiny_yolov2_model",Rse="tiny_yolov2_separable_conv_model",Hh=function(e){return typeof e=="number"};function Dse(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Hh(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return Hh(t.x)&&Hh(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(Hh)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function z2(e){return Ee(function(){var t=Vn(e,we(.10000000149011612));return Ye(Mt(on(e,t)),t)})}function Ao(e,t){return Ee(function(){var n=Gu(e,[[0,0],[1,1],[1,1],[0,0]]);return n=sa(n,t.conv.filters,[1,1],"valid"),n=on(n,t.bn.sub),n=Vn(n,t.bn.truediv),n=Ye(n,t.conv.bias),z2(n)})}function Oo(e,t){return Ee(function(){var n=Gu(e,[[0,0],[1,1],[1,1],[0,0]]);return n=m2(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=Ye(n,t.bias),z2(n)})}function Mse(e,t){var n=pm(e,t);function r(o,s){var c=Zt(e(o)),f=Zt(e(o));return t.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:c,truediv:f}}function a(o,s,c){var f=n(o,s,3,c+"/conv"),d=r(s,c+"/bn");return{conv:f,bn:d}}var i=L2(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function kse(e,t,n,r){var a=eo(e),i=a.extractWeights,o=a.getRemainingWeights,s=[],c=Mse(i,s),f=c.extractConvParams,d=c.extractConvWithBatchNormParams,p=c.extractSeparableConvParams,v;if(t.withSeparableConvs){var g=r[0],y=r[1],b=r[2],x=r[3],S=r[4],_=r[5],C=r[6],A=r[7],O=r[8],R=t.isFirstLayerConv2d?f(g,y,3,"conv0"):p(g,y,"conv0"),M=p(y,b,"conv1"),k=p(b,x,"conv2"),I=p(x,S,"conv3"),P=p(S,_,"conv4"),L=p(_,C,"conv5"),F=A?p(C,A,"conv6"):void 0,Y=O?p(A,O,"conv7"):void 0,Z=f(O||A||C,5*n,1,"conv8");v={conv0:R,conv1:M,conv2:k,conv3:I,conv4:P,conv5:L,conv6:F,conv7:Y,conv8:Z}}else{var g=r[0],y=r[1],b=r[2],x=r[3],S=r[4],_=r[5],C=r[6],A=r[7],O=r[8],R=d(g,y,"conv0"),M=d(y,b,"conv1"),k=d(b,x,"conv2"),I=d(x,S,"conv3"),P=d(S,_,"conv4"),L=d(_,C,"conv5"),F=d(C,A,"conv6"),Y=d(A,O,"conv7"),Z=f(O,5*n,1,"conv8");v={conv0:R,conv1:M,conv2:k,conv3:I,conv4:P,conv5:L,conv6:F,conv7:Y,conv8:Z}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:v,paramMappings:s}}function Nse(e,t){var n=Xo(e,t);function r(s){var c=n(s+"/sub",1),f=n(s+"/truediv",1);return{sub:c,truediv:f}}function a(s){var c=n(s+"/filters",4),f=n(s+"/bias",1);return{filters:c,bias:f}}function i(s){var c=a(s+"/conv"),f=r(s+"/bn");return{conv:c,bn:f}}var o=F2(n);return{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function Ise(e,t){var n=[],r=Nse(e,n),a=r.extractConvParams,i=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,s;if(t.withSeparableConvs){var c=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?a("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:c>7?o("conv6"):void 0,conv7:c>8?o("conv7"):void 0,conv8:a("conv8")}}else s={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return Ji(e,n),{params:s,paramMappings:n}}var GM;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(GM||(GM={}));var U2=(function(){function e(t){var n=t===void 0?{}:t,r=n.inputSize,a=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e})(),bL=(function(e){We(t,e);function t(n){var r=e.call(this,"TinyYolov2")||this;return Dse(n),r._config=n,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(n,r){var a=Ao(n,r.conv0);return a=mn(a,[2,2],[2,2],"same"),a=Ao(a,r.conv1),a=mn(a,[2,2],[2,2],"same"),a=Ao(a,r.conv2),a=mn(a,[2,2],[2,2],"same"),a=Ao(a,r.conv3),a=mn(a,[2,2],[2,2],"same"),a=Ao(a,r.conv4),a=mn(a,[2,2],[2,2],"same"),a=Ao(a,r.conv5),a=mn(a,[2,2],[1,1],"same"),a=Ao(a,r.conv6),a=Ao(a,r.conv7),xa(a,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(n,r){var a=this.config.isFirstLayerConv2d?z2(xa(n,r.conv0,"valid",!1)):Oo(n,r.conv0);return a=mn(a,[2,2],[2,2],"same"),a=Oo(a,r.conv1),a=mn(a,[2,2],[2,2],"same"),a=Oo(a,r.conv2),a=mn(a,[2,2],[2,2],"same"),a=Oo(a,r.conv3),a=mn(a,[2,2],[2,2],"same"),a=Oo(a,r.conv4),a=mn(a,[2,2],[2,2],"same"),a=Oo(a,r.conv5),a=mn(a,[2,2],[1,1],"same"),a=r.conv6?Oo(a,r.conv6):a,a=r.conv7?Oo(a,r.conv7):a,xa(a,r.conv8,"valid",!1)},t.prototype.forwardInput=function(n,r){var a=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return Ee(function(){var o=n.toBatchTensor(r,!1).toFloat();return o=a.config.meanRgb?Xf(o,a.config.meanRgb):o,o=o.div(we(256)),a.config.withSeparableConvs?a.runMobilenet(o,i):a.runTinyYolov2(o,i)})},t.prototype.forward=function(n,r){return ke(this,void 0,void 0,function(){var a;return Ne(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,xn(n)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(n,r){return r===void 0&&(r={}),ke(this,void 0,void 0,function(){var a,i,o,s,c,f,d,p,v,g,y,b,x,S,_=this;return Ne(this,function(C){switch(C.label){case 0:return a=new U2(r),i=a.inputSize,o=a.scoreThreshold,[4,xn(n)];case 1:return s=C.sent(),[4,this.forwardInput(s,i)];case 2:return c=C.sent(),f=Ee(function(){return rn(c)[0].expandDims()}),d={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(f,s.getReshapedInputDimensions(0),o)];case 3:return p=C.sent(),c.dispose(),f.dispose(),v=p.map(function(A){return A.box}),g=p.map(function(A){return A.score}),y=p.map(function(A){return A.classScore}),b=p.map(function(A){return _.config.classes[A.label]}),x=vf(v.map(function(A){return A.rescale(i)}),g,this.config.iouThreshold,!0),S=x.map(function(A){return new qB(g[A],y[A],b[A],v[A],d)}),[2,S]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(n){return Ise(n,this.config)},t.prototype.extractParams=function(n){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return kse(n,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(n,r,a){return ke(this,void 0,void 0,function(){var i,o,s,c,f,d,p,v,g,y,b,x,S,_,C,A,O,R,M,k,I,P,L,F,Y,Z,J,U,H,G=this;return Ne(this,function(Q){switch(Q.label){case 0:return i=r.width,o=r.height,s=Math.max(i,o),c=s/i,f=s/o,d=n.shape[1],p=this.config.anchors.length,v=Ee(function(){var oe=n.reshape([d,d,p,G.boxEncodingSize]),j=oe.slice([0,0,0,0],[d,d,p,4]),K=oe.slice([0,0,0,4],[d,d,p,1]),ce=G.withClassScores?Yi(oe.slice([0,0,0,5],[d,d,p,G.config.classes.length]),3):we(0);return[j,K,ce]}),g=v[0],y=v[1],b=v[2],x=[],[4,y.array()];case 1:return S=Q.sent(),[4,g.array()];case 2:_=Q.sent(),C=0,Q.label=3;case 3:if(!(C<d))return[3,12];A=0,Q.label=4;case 4:if(!(A<d))return[3,11];O=0,Q.label=5;case 5:return O<p?(R=qb(S[C][A][O][0]),!a||R>a?(M=(A+qb(_[C][A][O][0]))/d*c,k=(C+qb(_[C][A][O][1]))/d*f,I=Math.exp(_[C][A][O][2])*this.config.anchors[O].x/d*c,P=Math.exp(_[C][A][O][3])*this.config.anchors[O].y/d*f,L=M-I/2,F=k-P/2,Y={row:C,col:A,anchor:O},this.withClassScores?[4,this.extractPredictedClass(b,Y)]:[3,7]):[3,9]):[3,10];case 6:return H=Q.sent(),[3,8];case 7:H={classScore:1,label:0},Q.label=8;case 8:Z=H,J=Z.classScore,U=Z.label,x.push(Wn({box:new dm(L,F,L+I,F+P),score:R,classScore:R*J,label:U},Y)),Q.label=9;case 9:return O++,[3,5];case 10:return A++,[3,4];case 11:return C++,[3,3];case 12:return g.dispose(),y.dispose(),b.dispose(),[2,x]}})})},t.prototype.extractPredictedClass=function(n,r){return ke(this,void 0,void 0,function(){var a,i,o,s;return Ne(this,function(c){switch(c.label){case 0:return a=r.row,i=r.col,o=r.anchor,[4,n.array()];case 1:return s=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(f,d){return s[a][i][o][d]}).map(function(f,d){return{classScore:f,label:d}}).reduce(function(f,d){return f.classScore>d.classScore?f:d})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t})(Qi),Pse=(function(e){We(t,e);function t(n){n===void 0&&(n=!0);var r=this,a=Object.assign({},{withSeparableConvs:n,iouThreshold:_se,classes:["face"]},n?{anchors:Ase,meanRgb:Ose}:{anchors:Cse,withClassScores:!0});return r=e.call(this,a)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return ke(this,void 0,void 0,function(){var a;return Ne(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new Oa(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?Rse:Tse},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t})(bL),Bse=(function(e){We(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return t})(U2),Yf=(function(){function e(){}return e.prototype.then=function(t){return ke(this,void 0,void 0,function(){var n;return Ne(this,function(r){switch(r.label){case 0:return n=t,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return ke(this,void 0,void 0,function(){return Ne(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e})();function gm(e,t,n,r,a){return a===void 0&&(a=function(i){var o=i.alignedRect;return o}),ke(this,void 0,void 0,function(){var i,o,s,c,f;return Ne(this,function(d){switch(d.label){case 0:return i=e.map(function(p){return sL(p)?a(p):p.detection}),s=r,s?[3,5]:t instanceof Dt?[4,P2(t,i)]:[3,2];case 1:return c=d.sent(),[3,4];case 2:return[4,I2(t,i)];case 3:c=d.sent(),d.label=4;case 4:s=c,d.label=5;case 5:return o=s,[4,n(o)];case 6:return f=d.sent(),o.forEach(function(p){return p instanceof Dt&&p.dispose()}),[2,f]}})})}function W2(e,t,n,r,a){return ke(this,void 0,void 0,function(){var i=this;return Ne(this,function(o){return[2,gm([e],t,function(s){return ke(i,void 0,void 0,function(){return Ne(this,function(c){return[2,n(s[0])]})})},r,a)]})})}function Lse(e){return Ee(function(){return Pr(rn(e,3).reverse(),3)})}var qh=2,dv=12;function Fse(e,t){var n=pm(e,t),r=B2(e,t);function a(f,d){var p=Zt(e(f));return t.push({paramPath:d}),p}function i(f,d,p){p===void 0&&(p=!1);var v=n(f[0],f[1],3,d+"/conv1"),g=a(f[1],d+"/prelu1_alpha"),y=n(f[1],f[2],3,d+"/conv2"),b=a(f[2],d+"/prelu2_alpha"),x=n(f[2],f[3],p?2:3,d+"/conv3"),S=a(f[3],d+"/prelu3_alpha");return{conv1:v,prelu1_alpha:g,conv2:y,prelu2_alpha:b,conv3:x,prelu3_alpha:S}}function o(){var f=i([3,10,16,32],"pnet"),d=n(32,2,1,"pnet/conv4_1"),p=n(32,4,1,"pnet/conv4_2");return Wn(Wn({},f),{conv4_1:d,conv4_2:p})}function s(){var f=i([3,28,48,64],"rnet",!0),d=r(576,128,"rnet/fc1"),p=a(128,"rnet/prelu4_alpha"),v=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return Wn(Wn({},f),{fc1:d,prelu4_alpha:p,fc2_1:v,fc2_2:g})}function c(){var f=i([3,32,64,64],"onet"),d=n(64,128,2,"onet/conv4"),p=a(128,"onet/prelu4_alpha"),v=r(1152,256,"onet/fc1"),g=a(256,"onet/prelu5_alpha"),y=r(256,2,"onet/fc2_1"),b=r(256,4,"onet/fc2_2"),x=r(256,10,"onet/fc2_3");return Wn(Wn({},f),{conv4:d,prelu4_alpha:p,fc1:v,prelu5_alpha:g,fc2_1:y,fc2_2:b,fc2_3:x})}return{extractPNetParams:o,extractRNetParams:s,extractONetParams:c}}function jse(e){var t=eo(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=Fse(n,a),o=i.extractPNetParams,s=i.extractRNetParams,c=i.extractONetParams,f=o(),d=s(),p=c();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:f,rnet:d,onet:p},paramMappings:a}}function zse(e,t){var n=Xo(e,t);function r(d){var p=n(d+"/weights",4,d+"/filters"),v=n(d+"/bias",1);return{filters:p,bias:v}}function a(d){var p=n(d+"/weights",2),v=n(d+"/bias",1);return{weights:p,bias:v}}function i(d){return n(d,1)}function o(d){var p=r(d+"/conv1"),v=i(d+"/prelu1_alpha"),g=r(d+"/conv2"),y=i(d+"/prelu2_alpha"),b=r(d+"/conv3"),x=i(d+"/prelu3_alpha");return{conv1:p,prelu1_alpha:v,conv2:g,prelu2_alpha:y,conv3:b,prelu3_alpha:x}}function s(){var d=o("pnet"),p=r("pnet/conv4_1"),v=r("pnet/conv4_2");return Wn(Wn({},d),{conv4_1:p,conv4_2:v})}function c(){var d=o("rnet"),p=a("rnet/fc1"),v=i("rnet/prelu4_alpha"),g=a("rnet/fc2_1"),y=a("rnet/fc2_2");return Wn(Wn({},d),{fc1:p,prelu4_alpha:v,fc2_1:g,fc2_2:y})}function f(){var d=o("onet"),p=r("onet/conv4"),v=i("onet/prelu4_alpha"),g=a("onet/fc1"),y=i("onet/prelu5_alpha"),b=a("onet/fc2_1"),x=a("onet/fc2_2"),S=a("onet/fc2_3");return Wn(Wn({},d),{conv4:p,prelu4_alpha:v,fc1:g,prelu5_alpha:y,fc2_1:b,fc2_2:x,fc2_3:S})}return{extractPNetParams:s,extractRNetParams:c,extractONetParams:f}}function Use(e){var t=[],n=zse(e,t),r=n.extractPNetParams,a=n.extractRNetParams,i=n.extractONetParams,o=r(),s=a(),c=i();return Ji(e,t),{params:{pnet:o,rnet:s,onet:c},paramMappings:t}}function mx(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}function Wse(e,t,n){for(var r=n[0],a=n[1],i=dv/e,o=[],s=Math.min(r,a)*i,c=0;s>=12;)o.push(i*Math.pow(t,c)),s=s*t,c+=1;return o}var H2=(function(e){We(t,e);function t(n,r,a,i){return e.call(this,{left:n,top:r,right:a,bottom:i},!0)||this}return t})(ji);function xL(e){return Ee(function(){return Vn(on(e,we(127.5)),we(.0078125))})}function al(e,t){return Ee(function(){return Ye(Mt(e),Vn(t,ov(Mt(ov(e)))))})}function q2(e,t,n){return n===void 0&&(n=!1),Ee(function(){var r=xa(e,t.conv1,"valid");return r=al(r,t.prelu1_alpha),r=mn(r,n?[2,2]:[3,3],[2,2],"same"),r=xa(r,t.conv2,"valid"),r=al(r,t.prelu2_alpha),r=n?r:mn(r,[3,3],[2,2],"valid"),r=xa(r,t.conv3,"valid"),r=al(r,t.prelu3_alpha),r})}function Hse(e,t){return Ee(function(){var n=q2(e,t,!0),r=xa(n,t.conv4_1,"valid"),a=Qr(sm(r,3),3),i=Yi(on(r,a),3),o=xa(n,t.conv4_2,"valid");return{prob:i,regions:o}})}function qse(e,t){return Ee(function(){var n=mx(t,e.shape.slice(1)),r=n.height,a=n.width,i=w2.resizeBilinear(e,[r,a]),o=xL(i);return Wo(o,[0,2,1,3])})}function Vse(e,t,n,r){for(var a=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var s=0;s<e.shape[1];s++)i[o][s]>=r&&a.push(new st(s,o));var c=a.map(function(f){var d=new dm(Math.round((f.y*qh+1)/n),Math.round((f.x*qh+1)/n),Math.round((f.y*qh+dv)/n),Math.round((f.x*qh+dv)/n)),p=i[f.y][f.x],v=t.arraySync(),g=new H2(v[f.y][f.x][0],v[f.y][f.x][1],v[f.y][f.x][2],v[f.y][f.x][3]);return{cell:d,score:p,region:g}});return c}function Gse(e,t,n,r,a){a.stage1=[];var i=t.map(function(v){return Ee(function(){var g={scale:v},y=qse(e,v),b=Date.now(),x=Hse(y,r),S=x.prob,_=x.regions;g.pnet=Date.now()-b;var C=rn(rn(S,3)[1])[0],A=rn(_)[0];return{scoresTensor:C,regionsTensor:A,scale:v,statsForScale:g}})}),o=i.map(function(v){var g=v.scoresTensor,y=v.regionsTensor,b=v.scale,x=v.statsForScale,S=Vse(g,y,b,n);if(g.dispose(),y.dispose(),!S.length)return a.stage1.push(x),[];var _=Date.now(),C=vf(S.map(function(A){return A.cell}),S.map(function(A){return A.score}),.5);return x.nms=Date.now()-_,x.numBoxes=C.length,a.stage1.push(x),C.map(function(A){return S[A]})}),s=o.reduce(function(v,g){return v.concat(g)},[]),c=[],f=[];if(s.length>0){var d=Date.now(),p=vf(s.map(function(v){return v.cell}),s.map(function(v){return v.score}),.7);a.stage1_nms=Date.now()-d,f=p.map(function(v){return s[v].score}),c=p.map(function(v){return s[v]}).map(function(v){var g=v.cell,y=v.region;return new dm(g.left+y.left*g.width,g.top+y.top*g.height,g.right+y.right*g.width,g.bottom+y.bottom*g.height).toSquare().round()})}return{boxes:c,scores:f}}function wL(e,t,n){var r=n.width,a=n.height;return ke(this,void 0,void 0,function(){var i,o,s,c=this;return Ne(this,function(f){switch(f.label){case 0:return i=zi(e),[4,Promise.all(t.map(function(d){return ke(c,void 0,void 0,function(){var p,v,g,y,b,x,S,_;return Ne(this,function(C){return p=d.padAtBorders(e.height,e.width),v=p.y,g=p.ey,y=p.x,b=p.ex,x=y-1,S=v-1,_=i.getImageData(x,S,b-x,g-S),[2,Gn.isNodejs()?N2(_):createImageBitmap(_)]})})}))];case 1:return o=f.sent(),s=[],o.forEach(function(d){var p=hm({width:r,height:a}),v=zi(p);v.drawImage(d,0,0,r,a);for(var g=v.getImageData(0,0,r,a).data,y=[],b=0;b<g.length;b+=4)y.push(g[b+2]),y.push(g[b+1]),y.push(g[b]);s.push(y)}),[2,s.map(function(d){var p=Ee(function(){var v=Wo(sr(d,[1,r,a,3]),[0,2,1,3]).toFloat();return xL(v)});return p})]}})})}function $se(e,t){return Ee(function(){var n=q2(e,t),r=ya(n,[n.shape[0],t.fc1.weights.shape[0]]),a=Ua(r,t.fc1),i=al(a,t.prelu4_alpha),o=Ua(i,t.fc2_1),s=Qr(sm(o,1),1),c=Yi(on(o,s),1),f=Ua(i,t.fc2_2),d=rn(c,1)[1];return{scores:d,regions:f}})}function Kse(e,t,n,r,a){return ke(this,void 0,void 0,function(){var i,o,s,c,f,d,p,v,g,y,b,x,S,_;return Ne(this,function(C){switch(C.label){case 0:return i=Date.now(),[4,wL(e,t,{width:24,height:24})];case 1:return o=C.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map(function(A){var O=$se(A,r);return A.dispose(),O}),a.stage2_rnet=Date.now()-i,c=s.length>1?nn(s.map(function(A){return A.scores})):s[0].scores,p=(d=Array).from,[4,c.data()];case 2:return f=p.apply(d,[C.sent()]),c.dispose(),v=f.map(function(A,O){return{score:A,idx:O}}).filter(function(A){return A.score>n}).map(function(A){var O=A.idx;return O}),g=v.map(function(A){return t[A]}),y=v.map(function(A){return f[A]}),b=[],x=[],g.length>0&&(i=Date.now(),S=vf(g,y,.7),a.stage2_nms=Date.now()-i,_=S.map(function(A){var O=s[v[A]].regions.arraySync();return new H2(O[0][0],O[0][1],O[0][2],O[0][3])}),x=S.map(function(A){return y[A]}),b=S.map(function(A,O){return g[A].calibrate(_[O])})),s.forEach(function(A){A.regions.dispose(),A.scores.dispose()}),[2,{boxes:b,scores:x}]}})})}function Xse(e,t){return Ee(function(){var n=q2(e,t);n=mn(n,[2,2],[2,2],"same"),n=xa(n,t.conv4,"valid"),n=al(n,t.prelu4_alpha);var r=ya(n,[n.shape[0],t.fc1.weights.shape[0]]),a=Ua(r,t.fc1),i=al(a,t.prelu5_alpha),o=Ua(i,t.fc2_1),s=Qr(sm(o,1),1),c=Yi(on(o,s),1),f=Ua(i,t.fc2_2),d=Ua(i,t.fc2_3),p=rn(c,1)[1];return{scores:p,regions:f,points:d}})}function Yse(e,t,n,r,a){return ke(this,void 0,void 0,function(){var i,o,s,c,f,d,p,v,g,y,b,x,S,_,C;return Ne(this,function(A){switch(A.label){case 0:return i=Date.now(),[4,wL(e,t,{width:48,height:48})];case 1:return o=A.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map(function(O){var R=Xse(O,r);return O.dispose(),R}),a.stage3_onet=Date.now()-i,c=s.length>1?nn(s.map(function(O){return O.scores})):s[0].scores,p=(d=Array).from,[4,c.data()];case 2:return f=p.apply(d,[A.sent()]),c.dispose(),v=f.map(function(O,R){return{score:O,idx:R}}).filter(function(O){return O.score>n}).map(function(O){var R=O.idx;return R}),g=v.map(function(O){var R=s[O].regions.arraySync();return new H2(R[0][0],R[0][1],R[0][2],R[0][3])}),y=v.map(function(O,R){return t[O].calibrate(g[R])}),b=v.map(function(O){return f[O]}),x=[],S=[],_=[],y.length>0&&(i=Date.now(),C=vf(y,b,.7,!1),a.stage3_nms=Date.now()-i,x=C.map(function(O){return y[O]}),S=C.map(function(O){return b[O]}),_=C.map(function(O,R){return Array(5).fill(0).map(function(M,k){var I=s[O].points.arraySync();return new st(I[0][k]*(x[R].width+1)+x[R].left,I[0][k+5]*(x[R].height+1)+x[R].top)})})),s.forEach(function(O){O.regions.dispose(),O.scores.dispose(),O.points.dispose()}),[2,{boxes:x,scores:S,points:_}]}})})}var Zse=(function(e){We(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(n){return ke(this,void 0,void 0,function(){return Ne(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,n)]})})},t.prototype.loadFromDisk=function(n){return ke(this,void 0,void 0,function(){return Ne(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,n)]})})},t.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),ke(this,void 0,void 0,function(){var a,i,o,s,c,f,d,p,v,g,y,b,x,S,_,C,A,O,R,M,k;return Ne(this,function(I){switch(I.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(i=n.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},s=Date.now(),c=Ee(function(){return Lse(Qr(O2.fromPixels(i)).toFloat())}),f=function(P){return c.dispose(),o.total=Date.now()-s,P},d=c.shape.slice(1),p=d[0],v=d[1],g=new gL(r),y=g.minFaceSize,b=g.scaleFactor,x=g.maxNumScales,S=g.scoreThresholds,_=g.scaleSteps,C=(_||Wse(y,b,[p,v])).filter(function(P){var L=mx(P,[p,v]);return Math.min(L.width,L.height)>dv}).slice(0,x),o.scales=C,o.pyramid=C.map(function(P){return mx(P,[p,v])}),A=Date.now(),[4,Gse(c,C,S[0],a.pnet,o)];case 1:return O=I.sent(),o.total_stage1=Date.now()-A,O.boxes.length?(o.stage2_numInputBoxes=O.boxes.length,A=Date.now(),[4,Kse(i,O.boxes,S[1],a.rnet,o)]):[2,f({results:[],stats:o})];case 2:return R=I.sent(),o.total_stage2=Date.now()-A,R.boxes.length?(o.stage3_numInputBoxes=R.boxes.length,A=Date.now(),[4,Yse(i,R.boxes,S[2],a.onet,o)]):[2,f({results:[],stats:o})];case 3:return M=I.sent(),o.total_stage3=Date.now()-A,k=M.boxes.map(function(P,L){return vm(gf({},new Oa(M.scores[L],new R2(P.left/v,P.top/p,P.width/v,P.height/p),{height:p,width:v})),new _ue(M.points[L].map(function(F){return F.sub(new st(P.left,P.top)).div(new st(P.width,P.height))}),{width:P.width,height:P.height}))}),[2,f({results:k,stats:o})]}})})},t.prototype.forward=function(n,r){return r===void 0&&(r={}),ke(this,void 0,void 0,function(){var a;return Ne(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,xn(n)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),ke(this,void 0,void 0,function(){var a;return Ne(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,xn(n)];case 1:return[2,a.apply(this,[i.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(n){return Use(n)},t.prototype.extractParams=function(n){return jse(n)},t})(Qi),Qse=.4,Jse=[new st(1.603231,2.094468),new st(6.041143,7.080126),new st(2.882459,3.518061),new st(4.266906,5.178857),new st(9.041765,10.66308)],ele=[117.001,114.697,97.404],tle=(function(e){We(t,e);function t(){var n=this,r={withSeparableConvs:!0,iouThreshold:Qse,classes:["face"],anchors:Jse,meanRgb:ele,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=e.call(this,r)||this,n}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return ke(this,void 0,void 0,function(){var a;return Ne(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new Oa(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t})(bL),Qn={ssdMobilenetv1:new yL,tinyFaceDetector:new tle,tinyYolov2:new Pse,mtcnn:new Zse,faceLandmark68Net:new fL,faceLandmark68TinyNet:new nse,faceRecognitionNet:new lse,faceExpressionNet:new Hue,ageGenderNet:new Que},SL=(function(e){We(t,e);function t(n,r,a){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=a,i}return t})(Yf),V2=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ke(this,void 0,void 0,function(){var n,r,a=this;return Ne(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,gm(n,this.input,function(o){return ke(a,void 0,void 0,function(){return Ne(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(c){return Qn.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(o,s){return uL(o,r[s])})]}})})},t.prototype.withAgeAndGender=function(){return new X2(this,this.input)},t})(SL),G2=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ke(this,void 0,void 0,function(){var n,r;return Ne(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,W2(n,this.input,function(i){return Qn.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,uL(n,r)]}})})},t.prototype.withAgeAndGender=function(){return new Y2(this,this.input)},t})(SL),$2=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new Z2(this,this.input)},t.prototype.withFaceDescriptors=function(){return new J2(this,this.input)},t})(V2),K2=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new Q2(this,this.input)},t.prototype.withFaceDescriptor=function(){return new eS(this,this.input)},t})(G2),EL=(function(e){We(t,e);function t(n,r,a){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=a,i}return t})(Yf),X2=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ke(this,void 0,void 0,function(){var n,r,a=this;return Ne(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,gm(n,this.input,function(o){return ke(a,void 0,void 0,function(){return Ne(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(c){return Qn.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(o,s){var c=r[s],f=c.age,d=c.gender,p=c.genderProbability;return vL(mL(o,d,p),f)})]}})})},t.prototype.withFaceExpressions=function(){return new V2(this,this.input)},t})(EL),Y2=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ke(this,void 0,void 0,function(){var n,r,a,i,o;return Ne(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,W2(n,this.input,function(c){return Qn.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return r=s.sent(),a=r.age,i=r.gender,o=r.genderProbability,[2,vL(mL(n,i,o),a)]}})})},t.prototype.withFaceExpressions=function(){return new G2(this,this.input)},t})(EL),Z2=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new $2(this,this.input)},t.prototype.withFaceDescriptors=function(){return new J2(this,this.input)},t})(X2),Q2=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new K2(this,this.input)},t.prototype.withFaceDescriptor=function(){return new eS(this,this.input)},t})(Y2),_L=(function(e){We(t,e);function t(n,r){var a=e.call(this)||this;return a.parentTask=n,a.input=r,a}return t})(Yf),J2=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ke(this,void 0,void 0,function(){var n,r;return Ne(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,gm(n,this.input,function(i){return Promise.all(i.map(function(o){return Qn.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(i,o){return pL(n[o],i)})]}})})},t.prototype.withFaceExpressions=function(){return new $2(this,this.input)},t.prototype.withAgeAndGender=function(){return new Z2(this,this.input)},t})(_L),eS=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ke(this,void 0,void 0,function(){var n,r;return Ne(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,W2(n,this.input,function(i){return Qn.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,pL(n,r)]}})})},t.prototype.withFaceExpressions=function(){return new K2(this,this.input)},t.prototype.withAgeAndGender=function(){return new Q2(this,this.input)},t})(_L),CL=(function(e){We(t,e);function t(n,r,a){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.useTinyLandmarkNet=a,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Qn.faceLandmark68TinyNet:Qn.faceLandmark68Net},enumerable:!0,configurable:!0}),t})(Yf),nle=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ke(this,void 0,void 0,function(){var n,r,a,i,o,s=this;return Ne(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return n=c.sent(),r=n.map(function(f){return f.detection}),this.input instanceof Dt?[4,P2(this.input,r)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,I2(this.input,r)];case 4:i=c.sent(),c.label=5;case 5:return a=i,[4,Promise.all(a.map(function(f){return s.landmarkNet.detectLandmarks(f)}))];case 6:return o=c.sent(),a.forEach(function(f){return f instanceof Dt&&f.dispose()}),[2,n.map(function(f,d){return vm(f,o[d])})]}})})},t.prototype.withFaceExpressions=function(){return new $2(this,this.input)},t.prototype.withAgeAndGender=function(){return new Z2(this,this.input)},t.prototype.withFaceDescriptors=function(){return new J2(this,this.input)},t})(CL),rle=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ke(this,void 0,void 0,function(){var n,r,a,i,o;return Ne(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof Dt?[4,P2(this.input,[r])]:[3,3]):[2];case 2:return i=s.sent(),[3,5];case 3:return[4,I2(this.input,[r])];case 4:i=s.sent(),s.label=5;case 5:return a=i,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return o=s.sent(),a.forEach(function(c){return c instanceof Dt&&c.dispose()}),[2,vm(n,o)]}})})},t.prototype.withFaceExpressions=function(){return new K2(this,this.input)},t.prototype.withAgeAndGender=function(){return new Q2(this,this.input)},t.prototype.withFaceDescriptor=function(){return new eS(this,this.input)},t})(CL),AL=(function(e){We(t,e);function t(n,r){r===void 0&&(r=new mm);var a=e.call(this)||this;return a.input=n,a.options=r,a}return t})(Yf),ale=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ke(this,void 0,void 0,function(){var n,r,a,i;return Ne(this,function(o){switch(o.label){case 0:return n=this,r=n.input,a=n.options,a instanceof gL?[4,Qn.mtcnn.forward(r,a)]:[3,2];case 1:return[2,o.sent().map(function(s){return s.detection})];case 2:if(i=a instanceof Bse?function(s){return Qn.tinyFaceDetector.locateFaces(s,a)}:a instanceof mm?function(s){return Qn.ssdMobilenetv1.locateFaces(s,a)}:a instanceof U2?function(s){return Qn.tinyYolov2.locateFaces(s,a)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return ke(n,void 0,void 0,function(){var a;return Ne(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a.map(function(o){return gf({},o)}))]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new nle(this.runAndExtendWithFaceDetections(),this.input,n)},t.prototype.withFaceExpressions=function(){return new V2(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new X2(this.runAndExtendWithFaceDetections(),this.input)},t})(AL),ile=(function(e){We(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ke(this,void 0,void 0,function(){var n,r;return Ne(this,function(a){switch(a.label){case 0:return[4,new ale(this.input,this.options)];case 1:return n=a.sent(),r=n[0],n.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return ke(n,void 0,void 0,function(){var a;return Ne(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a?gf({},a):void 0)]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new rle(this.runAndExtendWithFaceDetection(),this.input,n)},t.prototype.withFaceExpressions=function(){return new G2(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new Y2(this.runAndExtendWithFaceDetection(),this.input)},t})(AL);function ole(e,t){return t===void 0&&(t=new mm),new ile(e,t)}function ule(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(a,i){return a-r[i]}).reduce(function(a,i){return a+Math.pow(i,2)},0))}var sle=(function(){function e(t,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,i=function(){return"person "+a++};this._labeledDescriptors=r.map(function(o){if(o instanceof zc)return o;if(o instanceof Float32Array)return new zc(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new zc(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,n){return n.map(function(r){return ule(r,t)}).reduce(function(r,a){return r+a},0)/(n.length||1)},e.prototype.matchDescriptor=function(t){var n=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,i=r.label;return new WM(i,n.computeMeanDistance(t,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},e.prototype.findBestMatch=function(t){var n=this.matchDescriptor(t);return n.distance<this.distanceThreshold?n:new WM("unknown",n.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(r){return zc.fromJSON(r)});return new e(n,t.distanceThreshold)},e})();function OL(e,t){var n=new Du(t.width,t.height),r=n.width,a=n.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:a}));if(Array.isArray(e))return e.map(function(s){return OL(s,{width:r,height:a})});if(sL(e)){var i=e.detection.forSize(r,a),o=e.unshiftedLandmarks.forSize(i.box.width,i.box.height);return vm(gf(e,i),o)}return VB(e)?gf(e,e.detection.forSize(r,a)):e instanceof mf||e instanceof Oa?e.forSize(r,a):e}const TL=({onVideoReady:e,overlayRef:t,isActive:n=!0})=>{const r=T.useRef(null),[a,i]=T.useState(null);T.useEffect(()=>{let s=null;const c=r.current;return(async()=>{try{if(!n)return;s=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480}}),c&&(c.srcObject=s)}catch(d){console.error("Camera access denied:",d),i("Camera access required. Please allow permission.")}})(),()=>{s&&s.getTracks().forEach(d=>d.stop()),c&&(c.srcObject=null)}},[n]);const o=()=>{e&&r.current&&e(r.current)};return ie.jsx("div",{className:"relative w-full max-w-[640px] aspect-video bg-black rounded-2xl overflow-hidden shadow-2xl border border-gray-800",children:a?ie.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-red-400 p-4 text-center",children:[ie.jsx(JU,{size:48,className:"mb-2"}),ie.jsx("p",{children:a})]}):ie.jsxs(ie.Fragment,{children:[ie.jsx("video",{ref:r,autoPlay:!0,muted:!0,onPlay:o,className:"w-full h-full object-cover transform scale-x-[-1]"}),ie.jsx("canvas",{ref:t,className:"absolute top-0 left-0 w-full h-full transform scale-x-[-1]"}),ie.jsxs("div",{className:"absolute top-4 right-4 bg-red-600/80 text-white px-2 py-1 rounded text-xs flex items-center gap-1 animate-pulse",children:[ie.jsx(KU,{size:12})," LIVE"]})]})})},$b="https://justadudewhohacks.github.io/face-api.js/models",lle=async()=>{try{return await Qn.ssdMobilenetv1.loadFromUri($b),await Qn.faceLandmark68Net.loadFromUri($b),await Qn.faceRecognitionNet.loadFromUri($b),!0}catch(e){return console.error("Failed to load models:",e),!1}},RL=async e=>e?await ole(e).withFaceLandmarks().withFaceDescriptor():null,cle=e=>{if(!e||e.length===0)return null;const t=e.map(n=>{const r=new Float32Array(Object.values(n.descriptor));return new zc(n.name,[r])});return new sle(t,.6)},DL="attendance_app_users",ML=()=>`attendance_log_${new Date().toISOString().split("T")[0]}`,ym=()=>{const e=localStorage.getItem(DL);return e?JSON.parse(e):[]},fle=e=>{const t=ym();t.push(e),localStorage.setItem(DL,JSON.stringify(t))},kL=()=>{const e=localStorage.getItem(ML());return e?JSON.parse(e):{}},dle=(e,t="auto")=>{const n=ML(),r=kL(),a=new Date().toISOString(),o=ym().find(f=>f.name===e),s=o&&o.branch||"Unknown";r[e]||(r[e]={name:e,firstSeen:a,lastSeen:a,manualIn:null,manualOut:null,branch:s});const c=r[e];return c.lastSeen=a,c.branch||(c.branch=s),t==="check-in"?c.manualIn=a:t==="check-out"&&(c.manualOut=a),r[e]=c,localStorage.setItem(n,JSON.stringify(r)),c},hle=()=>{const e=kL();return Object.values(e).map(t=>{const n=t.manualIn||t.firstSeen,r=t.manualOut||t.lastSeen,a=new Date(n).getTime(),o=new Date(r).getTime()-a,s=Math.floor(o/36e5),c=Math.floor(o%36e5/6e4);return{name:t.name,branch:t.branch||"Unknown",loginTime:new Date(n).toLocaleTimeString(),logoutTime:new Date(r).toLocaleTimeString(),duration:`${s}h ${c}m`,status:t.manualOut?"Checked Out":"Active"}})},ple=({isModelLoaded:e})=>{const t=T.useRef(null),n=T.useRef(null),[r,a]=T.useState(null),[i,o]=T.useState([]),s=T.useRef(null),c=T.useRef(null),[f,d]=T.useState("auto");T.useEffect(()=>{const g=ym();o(g),g.length>0&&e&&(s.current=cle(g))},[e]);const p=Vc.useCallback(()=>{c.current&&clearInterval(c.current),c.current=setInterval(async()=>{if(!t.current||!n.current||!s.current)return;const g=await RL(t.current),y=n.current,b={width:t.current.videoWidth,height:t.current.videoHeight};if(b.width!==0)if(Lue(y,b),g){const x=OL(g,b),S=s.current.findBestMatch(g.descriptor),_=x.detection.box,C=new Due(_,{label:S.toString()});y.getContext("2d").clearRect(0,0,y.width,y.height),C.draw(y),S.label!=="unknown"&&v(S.label)}else y.getContext("2d").clearRect(0,0,y.width,y.height)},800)},[f]),v=g=>{dle(g,f),a({name:g,action:f==="auto"?"Identified":f==="check-in"?"Check In":"Check Out",time:new Date().toLocaleTimeString()}),setTimeout(()=>a(null),2e3)};return T.useEffect(()=>(i.length&&e&&p(),()=>clearInterval(c.current)),[i,e,p]),ie.jsx("div",{className:"flex flex-col items-center p-4",children:ie.jsxs("div",{className:"glass-panel p-6 w-full max-w-4xl relative",children:[ie.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[ie.jsxs("div",{className:"flex items-center gap-3",children:[ie.jsx(yk,{className:"text-primary",size:28}),ie.jsx("h2",{className:"title text-2xl m-0",children:"Live Attendance"})]}),ie.jsxs("div",{className:"flex bg-black/30 p-1 rounded-lg border border-gray-700",children:[ie.jsx("button",{onClick:()=>d("auto"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${f==="auto"?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Auto Scan"}),ie.jsxs("button",{onClick:()=>d("check-in"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 ${f==="check-in"?"bg-green-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:[ie.jsx(l6,{size:14})," Check In"]}),ie.jsxs("button",{onClick:()=>d("check-out"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 ${f==="check-out"?"bg-red-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:[ie.jsx(f6,{size:14})," Check Out"]})]})]}),ie.jsx("div",{className:"flex justify-center relative",children:e?ie.jsxs("div",{className:"relative w-full max-w-[640px]",children:[ie.jsx(TL,{onVideoReady:g=>t.current=g,overlayRef:n}),ie.jsxs("div",{className:`absolute top-4 left-4 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-lg flex items-center gap-2 ${f==="auto"?"bg-blue-500/80 text-white":f==="check-in"?"bg-green-500/80 text-white":"bg-red-500/80 text-white"}`,children:[ie.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),"Mode: ",f.replace("-"," ")]}),r&&ie.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 min-w-[200px] bg-white/10 backdrop-blur-md border border-white/20 text-white px-6 py-3 rounded-xl shadow-2xl flex flex-col items-center animate-bounce-short",children:[ie.jsx(p6,{size:24,className:"mb-1 text-green-400"}),ie.jsx("span",{className:"font-bold text-lg",children:r.name}),ie.jsxs("span",{className:"text-xs uppercase tracking-wide opacity-80",children:[r.action," at ",r.time]})]})]}):ie.jsx("div",{className:"h-64 w-full flex items-center justify-center text-muted border border-gray-700 rounded-2xl",children:"Loading Face Models..."})}),ie.jsx("div",{className:"mt-4 text-center",children:ie.jsx("p",{className:"text-sm text-muted",children:f==="auto"?"System will track your 'First Seen' and 'Last Seen' times automatically.":f==="check-in"?"Look at camera to mark Start of Day.":"Look at camera to mark End of Day."})})]})})},vle=({isModelLoaded:e})=>{const[t,n]=T.useState(""),[r,a]=T.useState("Malkajgiri"),[i,o]=T.useState(!1),[s,c]=T.useState(null),f=T.useRef(null),d=uk(),p=async()=>{if(!t.trim()){c({type:"error",msg:"Please enter a name first"});return}if(f.current){o(!0),c(null);try{const v=await RL(f.current);if(!v){c({type:"error",msg:"No face detected. Look at the camera."}),o(!1);return}const g={id:Date.now(),name:t,branch:r,descriptor:v.descriptor,timestamp:new Date().toISOString()};fle(g),c({type:"success",msg:`User ${t} registered successfully at ${r}!`}),setTimeout(()=>d("/"),1500)}catch(v){console.error(v),c({type:"error",msg:"Registration failed. Try again."})}finally{o(!1)}}};return ie.jsx("div",{className:"flex flex-col items-center justify-center p-4",children:ie.jsxs("div",{className:"glass-panel p-8 w-full max-w-2xl",children:[ie.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[ie.jsx(bk,{className:"text-primary",size:28}),ie.jsx("h2",{className:"title text-2xl m-0",children:"Register New User"})]}),ie.jsxs("div",{className:"flex flex-col gap-6",children:[ie.jsx("div",{className:"flex justify-center",children:e?ie.jsx(TL,{onVideoReady:v=>f.current=v}):ie.jsx("div",{className:"h-64 flex items-center justify-center text-muted",children:"Loading Face Models..."})}),ie.jsxs("div",{className:"flex flex-col gap-4",children:[ie.jsxs("div",{children:[ie.jsx("label",{className:"text-sm text-muted uppercase tracking-wider font-semibold",children:"Full Name"}),ie.jsx("input",{type:"text",placeholder:"Enter person's name",value:t,onChange:v=>n(v.target.value),disabled:i,className:"mt-1"})]}),ie.jsxs("div",{children:[ie.jsxs("label",{className:"text-sm text-muted uppercase tracking-wider font-semibold flex items-center gap-2",children:[ie.jsx(gk,{size:14})," Branch"]}),ie.jsxs("select",{value:r,onChange:v=>a(v.target.value),className:"mt-1 w-full bg-black/20 border border-gray-700 rounded-lg p-3 text-white focus:border-primary outline-none",children:[ie.jsx("option",{value:"Malkajgiri",children:"Malkajgiri"}),ie.jsx("option",{value:"Manikonda",children:"Manikonda"})]})]}),ie.jsxs("button",{onClick:p,disabled:i||!e,className:"btn-primary flex items-center justify-center gap-2 mt-4 disabled:opacity-50",children:[i?ie.jsx(u6,{className:"animate-spin"}):ie.jsx(pA,{}),i?"Scanning...":"Capture & Register"]})]}),s&&ie.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-2 ${s.type==="success"?"bg-green-500/20 text-green-200":"bg-red-500/20 text-red-200"}`,children:[s.type==="success"?ie.jsx(pA,{size:18}):ie.jsx(ZU,{size:18}),s.msg]})]})]})})},mle=(e,t="attendance_report.csv")=>{if(!e||!e.length)return;const n=Object.keys(e[0]),r=[n.join(","),...e.map(s=>n.map(c=>JSON.stringify(s[c])).join(","))].join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(a),o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("download",t),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},gle=()=>{const e=Ho(),t=n=>e.pathname===n?"text-primary":"text-muted hover:text-white";return ie.jsxs("nav",{className:"navbar glass-panel m-4 mb-0 rounded-xl border-white/5",children:[ie.jsxs("div",{className:"nav-logo",children:[ie.jsx(VU,{className:"text-primary"}),ie.jsxs("span",{children:["FaceGuard ",ie.jsx("span",{className:"text-xs text-muted font-normal",children:"Attendance"})]})]}),ie.jsxs("div",{className:"flex gap-6",children:[ie.jsxs(Xs,{to:"/",className:`flex items-center gap-2 text-sm font-medium transition-colors ${t("/")}`,children:[ie.jsx(i6,{size:18})," Dashboard"]}),ie.jsxs(Xs,{to:"/attendance",className:`flex items-center gap-2 text-sm font-medium transition-colors ${t("/attendance")}`,children:[ie.jsx(yk,{size:18})," Attendance"]}),ie.jsxs(Xs,{to:"/register",className:`flex items-center gap-2 text-sm font-medium transition-colors ${t("/register")}`,children:[ie.jsx(bk,{size:18})," Register"]})]})]})},yle=()=>{const[e,t]=T.useState([]),[n,r]=T.useState([]),[a,i]=T.useState("All"),o=Vc.useCallback(()=>{const p=ym(),v=hle();t(p),r(v)},[]);T.useEffect(()=>{o();const p=setInterval(o,5e3);return()=>clearInterval(p)},[o]);const{filteredReport:s,stats:c,chartData:f}=Vc.useMemo(()=>{let p=e,v=n;a!=="All"&&(p=e.filter(x=>x.branch===a),v=n.filter(x=>x.branch===a));const g={users:p.length,present:v.length},y={Present:0,"Checked Out":0,Active:0};v.forEach(x=>{y.Present++,x.status==="Checked Out"?y["Checked Out"]++:y.Active++});const b=[{name:"Registered",value:p.length,color:"#38bdf8"},{name:"Present",value:v.length,color:"#4ade80"},{name:"Checked Out",value:y["Checked Out"],color:"#facc15"}];return{filteredReport:v,stats:g,chartData:b}},[e,n,a]),d=()=>{const p=`attendance_${a}_${new Date().toISOString().split("T")[0]}.csv`;mle(s,p)};return ie.jsxs("div",{className:"p-4 max-w-6xl mx-auto",children:[ie.jsxs("div",{className:"flex justify-between items-center mb-6",children:[ie.jsx("h2",{className:"title text-3xl",children:"Dashboard"}),ie.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-2 rounded-lg border border-white/10",children:[ie.jsx(gk,{size:20,className:"text-primary"}),ie.jsx("span",{className:"text-sm font-semibold",children:"Branch:"}),ie.jsxs("select",{value:a,onChange:p=>i(p.target.value),className:"bg-black/30 border-none outline-none text-white rounded px-2 py-1 w-32",children:[ie.jsx("option",{value:"All",children:"All Status"}),ie.jsx("option",{value:"Malkajgiri",children:"Malkajgiri"}),ie.jsx("option",{value:"Manikonda",children:"Manikonda"})]})]})]}),ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[ie.jsxs("div",{className:"glass-panel p-6 flex items-center justify-between",children:[ie.jsxs("div",{children:[ie.jsxs("div",{className:"text-muted uppercase text-xs tracking-wider mb-1",children:["Registered (",a,")"]}),ie.jsx("div",{className:"text-3xl font-bold text-white",children:c.users})]}),ie.jsx("div",{className:"p-3 bg-blue-500/20 rounded-full text-blue-400",children:ie.jsx(g6,{size:24})})]}),ie.jsxs("div",{className:"glass-panel p-6 flex items-center justify-between",children:[ie.jsxs("div",{children:[ie.jsx("div",{className:"text-muted uppercase text-xs tracking-wider mb-1",children:"Present Today"}),ie.jsx("div",{className:"text-3xl font-bold text-green-400",children:c.present})]}),ie.jsx("div",{className:"p-3 bg-green-500/20 rounded-full text-green-400",children:ie.jsx(t6,{size:24})})]}),ie.jsxs("div",{className:"glass-panel p-4 flex flex-col justify-center h-full min-h-[140px]",children:[ie.jsxs("span",{className:"text-muted uppercase text-xs tracking-wider mb-2",children:["Overview (",a,")"]}),ie.jsx("div",{className:"h-28 w-full",children:ie.jsx(yH,{width:"100%",height:"100%",children:ie.jsxs(Pee,{data:f,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[ie.jsx(QP,{type:"number",hide:!0}),ie.jsx(JP,{dataKey:"name",type:"category",width:80,tick:{fontSize:10,fill:"#94a3b8"}}),ie.jsx(cX,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},itemStyle:{color:"#fff"},cursor:{fill:"transparent"}}),ie.jsx(YP,{dataKey:"value",radius:[0,4,4,0],barSize:16,children:f.map((p,v)=>ie.jsx(Hw,{fill:p.color},`cell-${v}`))})]})})})]})]}),ie.jsxs("div",{className:"glass-panel p-6",children:[ie.jsxs("div",{className:"flex justify-between items-center mb-6",children:[ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-xl font-bold text-white",children:"Today's Attendance"}),ie.jsxs("span",{className:"text-sm text-muted",children:[new Date().toLocaleDateString(),"  ",a]})]}),ie.jsxs("button",{onClick:d,className:"btn-secondary text-sm flex items-center gap-2",children:[ie.jsx(r6,{size:16})," Export CSV"]})]}),s.length===0?ie.jsxs("div",{className:"text-center py-12 text-muted",children:[ie.jsxs("p",{className:"mb-4",children:["No attendance marked for ",a," yet."]}),ie.jsx(Xs,{to:"/attendance",className:"btn-primary no-underline text-black inline-block",children:"Start Scanning"})]}):ie.jsx("div",{className:"overflow-x-auto",children:ie.jsxs("table",{className:"w-full text-left border-collapse",children:[ie.jsx("thead",{children:ie.jsxs("tr",{className:"text-muted text-sm border-b border-gray-700",children:[ie.jsx("th",{className:"py-3 font-medium",children:"Name"}),ie.jsx("th",{className:"py-3 font-medium",children:"Branch"}),ie.jsx("th",{className:"py-3 font-medium",children:"Login Time"}),ie.jsx("th",{className:"py-3 font-medium",children:"Logout Time"}),ie.jsx("th",{className:"py-3 font-medium",children:"Duration"}),ie.jsx("th",{className:"py-3 font-medium",children:"Status"})]})}),ie.jsx("tbody",{children:s.map((p,v)=>ie.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[ie.jsx("td",{className:"py-4 font-medium text-white",children:p.name}),ie.jsx("td",{className:"py-4 text-gray-400 text-sm",children:p.branch}),ie.jsx("td",{className:"py-4 text-blue-300",children:p.loginTime}),ie.jsx("td",{className:"py-4 text-orange-300",children:p.logoutTime}),ie.jsx("td",{className:"py-4 font-mono text-sm",children:p.duration}),ie.jsx("td",{className:"py-4",children:ie.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${p.status==="Checked Out"?"bg-gray-700 text-gray-300":"bg-green-500/20 text-green-400"}`,children:p.status})})]},v))})]})})]})]})};function ble(){const[e,t]=T.useState(!1);return T.useEffect(()=>{lle().then(n=>{n&&(console.log("Models loaded successfully"),t(!0))})},[]),ie.jsx(RU,{children:ie.jsxs("div",{className:"page-layout",children:[ie.jsx(gle,{}),ie.jsx("main",{className:"main-content",children:ie.jsxs(iU,{children:[ie.jsx(Vh,{path:"/",element:ie.jsx(yle,{})}),ie.jsx(Vh,{path:"/register",element:ie.jsx(vle,{isModelLoaded:e})}),ie.jsx(Vh,{path:"/attendance",element:ie.jsx(ple,{isModelLoaded:e})})]})})]})})}sz.createRoot(document.getElementById("root")).render(ie.jsx(Vc.StrictMode,{children:ie.jsx(ble,{})}))});export default xle();
